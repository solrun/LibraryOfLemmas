   [("Median.down_ray_borel", "down_ray ?I ==> ?I : sets borel",
     template_implication
      ([template_predicate
         (template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_app (template_hole 2, template_var 0),
             template_app (template_hole 1, template_hole 0))
           ))),
    ("Median.interval_borel", "interval ?I ==> ?I : sets borel",
     template_implication
      ([template_predicate
         (template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_app (template_hole 2, template_var 0),
             template_app (template_hole 1, template_hole 0))
           ))),
    ("Median.up_ray_borel", "up_ray ?I ==> ?I : sets borel",
     template_implication
      ([template_predicate
         (template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_app (template_hole 2, template_var 0),
             template_app (template_hole 1, template_hole 0))
           ))),
    ("Median.median_restrict",
     "median ?n (restrict ?f {0..<?n}) = median ?n ?f",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 1),
         template_app
          (template_app (template_hole 2, t_empty),
           template_app
            (template_app (template_hole 1, template_hole 0),
             template_var 1))),
       template_app
        (template_app (template_hole 3, template_var 1), template_var 0))),
    ("Median.sorted_mono_map",
     "[| sorted ?xs; mono ?f |] ==> sorted (map ?f ?xs)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 5, template_hole 4),
              template_var 1)
            ),
        template_predicate
         (template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_app
              (template_app (template_hole 0, template_var 0),
               template_var 1))
           ))),
    ("Median.sort_map_perm",
     "image_mset (sort_map ?f ?n) (mset [0..<?n]) =
      image_mset ?f (mset [0..<?n])",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 1),
             template_var 0)),
         template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_hole 0),
             template_var 0))),
       template_app
        (template_app (template_hole 4, template_var 1),
         template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_hole 0),
             template_var 0))))),
    ("Median.median_const",
     "0 < ?k ==> median ?k (\<lambda>i\<in>{0..<?k}. ?a) = ?a",
     template_implication
      ([template_inequation (less_than, template_hole 4, template_var 1)],
       template_equation
        (template_app
          (template_app (template_hole 2, template_var 1),
           template_app
            (template_app (template_hole 1, t_empty),
             template_app
              (template_app (template_hole 0, template_hole 4),
               template_var 1))),
         template_var 0))),
    ("Median.sort_map_eq_sort",
     "map (sort_map ?f ?n) [0..<?n] = sort (map ?f [0..<?n])",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 1),
             template_var 0)),
         template_app
          (template_app (template_hole 2, template_hole 1),
           template_var 0)),
       template_app
        (template_app (template_hole 0, t_empty),
         template_app
          (template_app (template_hole 4, template_var 1),
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_var 0))))),
    ("Median.median_rat",
     "0 < ?n ==>
      real_of_rat (median ?n ?f) = median ?n (%i. real_of_rat (?f i))",
     template_implication
      ([template_inequation (less_than, template_hole 4, template_var 1)],
       template_equation
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 1),
             template_var 0)),
         template_app
          (template_app (template_hole 0, template_var 1), t_empty)))),
    ("Median.map_sort", "mono ?f ==> sort (map ?f ?xs) = map ?f (sort ?xs)",
     template_implication
      ([template_predicate
         (template_app (template_hole 4, template_var 1))],
       template_equation
        (template_app
          (template_app (template_hole 2, t_empty),
           template_app
            (template_app (template_hole 1, template_var 1),
             template_var 0)),
         template_app
          (template_app (template_hole 1, template_var 1),
           template_app
            (template_app (template_hole 0, t_empty), template_var 0))))),
    ("Median.sort_map_ind",
     "sort_map ?f (Suc ?n) =
      fold id (map (%j. sort_primitive j ?n) [0..<?n]) (sort_map ?f ?n)",
     template_equation
      (template_app
        (template_app (template_hole 7, template_var 1),
         template_app (template_hole 6, template_var 0)),
       template_app
        (template_app
          (template_app (template_hole 5, template_hole 4),
           template_app
            (template_app (template_hole 3, t_empty),
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 0))),
         template_app
          (template_app (template_hole 7, template_var 1),
           template_var 0)))),
    ("Median.median_commute_mono",
     "[| 0 < ?n; mono ?g |] ==> ?g (median ?n ?f) = median ?n (?g o ?f)",
     template_implication
      ([template_inequation (less_than, template_hole 5, template_var 2),
        template_predicate
         (template_app (template_hole 4, template_var 1))],
       template_equation
        (template_app
          (template_var 1,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 0)),
         template_app
          (template_app (template_hole 1, template_var 2),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0))))),
    ("Median.sort_map_strict_mono",
     "[| ?j < ?n; ?i < ?j |] ==> sort_map ?f ?n ?i <= sort_map ?f ?n ?j",
     template_implication
      ([template_inequation (less_than, template_var 3, template_var 2),
        template_inequation (less_than, template_var 1, template_var 3)],
       template_inequation
        (less_equals,
         template_app
          (template_app
            (template_app (template_hole 0, template_var 0),
             template_var 2),
           template_var 1),
         template_app
          (template_app
            (template_app (template_hole 0, template_var 0),
             template_var 2),
           template_var 3)))),
    ("Median.sort_map_mono",
     "[| ?j < ?n; ?i <= ?j |] ==> sort_map ?f ?n ?i <= sort_map ?f ?n ?j",
     template_implication
      ([template_inequation (less_than, template_var 3, template_var 2),
        template_inequation (less_equals, template_var 1, template_var 3)],
       template_inequation
        (less_equals,
         template_app
          (template_app
            (template_app (template_hole 0, template_var 0),
             template_var 2),
           template_var 1),
         template_app
          (template_app
            (template_app (template_hole 0, template_var 0),
             template_var 2),
           template_var 3)))),
    ("Median.list_eq_iff",
     "[| mset ?xs = mset ?ys; sorted ?xs; sorted ?ys |] ==> ?xs = ?ys",
     template_implication
      ([template_equation
         (template_app (template_hole 3, template_var 1),
          template_app (template_hole 3, template_var 0)),
        template_predicate
         (
            template_app
             (template_app (template_hole 2, template_hole 1),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 2, template_hole 1),
              template_var 0)
            )],
       template_equation (template_var 1, template_var 0))),
    ("Median.median_cong",
     "(!!i. i < ?n ==> ?f i = ?g i) ==> median ?n ?f = median ?n ?g",
     template_implication
      ([template_predicate (template_app (template_hole 4, t_empty))],
       template_equation
        (template_app
          (template_app (template_hole 0, template_var 2), template_var 1),
         template_app
          (template_app (template_hole 0, template_var 2),
           template_var 0)))),
    ("Median.interval_rule",
     "[| interval ?I; ?a <= ?x; ?x <= ?b; ?a : ?I; ?b : ?I |] ==> ?x : ?I",
     template_implication
      ([template_predicate (template_app (template_hole 2, template_var 3)),
        template_inequation (less_equals, template_var 2, template_var 1),
        template_inequation (less_equals, template_var 1, template_var 0),
        template_predicate
         (
            template_app
             (template_app (template_hole 0, template_var 2),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 0, template_var 0),
              template_var 3)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 1), template_var 3)
           ))),
    ("Median.median_est",
     "[| interval ?I; ?n < 2 * card {k. k < ?n & ?f k : ?I} |]
      ==> median ?n ?f : ?I",
     template_implication
      ([template_predicate
         (template_app (template_hole 10, template_var 2)),
        template_inequation
         (less_than, template_var 1,
          template_app
           (template_app
             (template_hole 8,
              template_app
               (template_hole 7,
                template_app (template_hole 6, template_hole 5))),
            template_app
             (template_hole 4, template_app (template_hole 3, t_empty))))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 1),
                 template_var 0)),
             template_var 2)
           ))),
    ("Median.median_measurable",
     "[| 1 <= ?n; !!i. i < ?n ==> ?X i : borel_measurable ?M |]
      ==> (%x. median ?n (%i. ?X i x)) : borel_measurable ?M",
     template_implication
      ([template_inequation (less_equals, template_hole 6, template_var 2),
        template_predicate (template_app (template_hole 5, t_empty))],
       template_predicate
        (
           template_app
            (template_app (template_hole 3, t_empty),
             template_app
              (template_app (template_hole 2, template_var 0),
               template_hole 1))
           ))),
    ("Median.mid_in_interval",
     "[| length ?xs < 2 * length (filter (%x. x : ?I) ?xs); interval ?I;
         sorted ?xs |]
      ==> ?xs ! (length ?xs div 2) : ?I",
     template_implication
      ([template_inequation
         (less_than, template_app (template_hole 11, template_var 1),
          template_app
           (template_app
             (template_hole 10,
              template_app
               (template_hole 9,
                template_app (template_hole 8, template_hole 7))),
            template_app
             (template_hole 11,
              template_app
               (template_app (template_hole 6, t_empty), template_var 1)))),
        template_predicate (template_app (template_hole 4, template_var 0)),
        template_predicate
         (
            template_app
             (template_app (template_hole 3, template_hole 2),
              template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 5,
               template_app
                (template_app (template_hole 1, template_var 1),
                 template_app
                  (template_app
                    (template_hole 0,
                     template_app (template_hole 11, template_var 1)),
                   template_app
                    (template_hole 9,
                     template_app (template_hole 8, template_hole 7))))),
             template_var 0)
           ))),
    ("Median.order_statistics_measurable_aux",
     "[| 1 <= ?n; ?j < ?n; !!i. i < ?n ==> ?X i : borel_measurable ?M |]
      ==> (%x. sort_map (%i. ?X i x) ?n ?j) : borel_measurable ?M",
     template_implication
      ([template_inequation (less_equals, template_hole 6, template_var 3),
        template_inequation (less_than, template_var 2, template_var 3),
        template_predicate (template_app (template_hole 4, t_empty))],
       template_predicate
        (
           template_app
            (template_app (template_hole 3, t_empty),
             template_app
              (template_app (template_hole 2, template_var 0),
               template_hole 1))
           ))),
    ("Median.order_statistics_measurable",
     "[| 1 <= ?n; ?j < ?n; !!i. i < ?n ==> ?X i : borel_measurable ?M |]
      ==> (%x. sort (map (%i. ?X i x) [0..<?n]) ! ?j)
          : borel_measurable ?M",
     template_implication
      ([template_inequation (less_equals, template_hole 10, template_var 3),
        template_inequation (less_than, template_var 2, template_var 3),
        template_predicate (template_app (template_hole 8, t_empty))],
       template_predicate
        (
           template_app
            (template_app (template_hole 7, t_empty),
             template_app
              (template_app (template_hole 6, template_var 0),
               template_hole 5))
           ))),
    ("Median.sorted_int",
     "[| interval ?I; sorted ?xs; ?k < length ?xs; ?i <= ?j; ?j <= ?k;
         ?xs ! ?i : ?I; ?xs ! ?k : ?I |]
      ==> ?xs ! ?j : ?I",
     template_implication
      ([template_predicate (template_app (template_hole 7, template_var 4)),
        template_predicate
         (
            template_app
             (template_app (template_hole 6, template_hole 5),
              template_var 3)
            ),
        template_inequation
         (less_than, template_var 2,
          template_app (template_hole 3, template_var 3)),
        template_inequation (less_equals, template_var 1, template_var 0),
        template_inequation (less_equals, template_var 0, template_var 2),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 1,
                template_app
                 (template_app (template_hole 0, template_var 3),
                  template_var 1)),
              template_var 4)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 1,
                template_app
                 (template_app (template_hole 0, template_var 3),
                  template_var 2)),
              template_var 4)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 3),
                 template_var 0)),
             template_var 4)
           )))]
