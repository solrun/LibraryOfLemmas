   [("Monad_Normalisation_Test.elgamal_step3",
     "?sample_uniform (?order ?\<G>) >>=
      (%x. ?sample_uniform (?order ?\<G>) >>=
           (%y. coin_spmf >>=
                (%b. ?\<A>1.0 (?f x) >>=
                     (%p. assert_spmf
                           (?valid_plain (fst (fst p)) &
                            ?valid_plain (snd (fst p))) >>=
                          (%_. ?\<A>2.0
                                (?f y,
                                 ?xor (?f (x * y))
                                  (if b then fst (fst p) else snd (fst p)))
                                (snd p) >>=
                               (%guess. return_spmf (guess = b))))))) =
      ?sample_uniform (?order ?\<G>) >>=
      (%y. coin_spmf >>=
           (%b. ?\<A>1.0 (?f y) >>=
                (%p. assert_spmf
                      (?valid_plain (fst (fst p)) &
                       ?valid_plain (snd (fst p))) >>=
                     (%_. ?sample_uniform (?order ?\<G>) >>=
                          (%ya. ?\<A>2.0
                                 (?f ya,
                                  ?xor (?f (y * ya))
                                   (if b then fst (fst p) else snd (fst p)))
                                 (snd p) >>=
                                (%b'. return_spmf (b' = b)))))))",
     template_equation
      (template_app
        (template_app
          (template_hole 17,
           template_app
            (template_var 7,
             template_app (template_var 6, template_var 5))),
         t_empty),
       template_app
        (template_app
          (template_hole 17,
           template_app
            (template_var 7,
             template_app (template_var 6, template_var 5))),
         t_empty)))]
