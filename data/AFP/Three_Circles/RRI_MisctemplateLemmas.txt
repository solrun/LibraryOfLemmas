   [("RRI_Misc.changes_nonneg", "0 <= changes ?xs",
     template_inequation
      (less_equals, template_hole 1,
       template_app (template_hole 0, template_var 0))),
    ("RRI_Misc.reciprocal_0", "reciprocal_poly ?p 0 = 0",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), template_hole 0),
       template_hole 0)),
    ("RRI_Misc.changes_rev", "changes (rev ?xs) = changes ?xs",
     template_equation
      (template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)),
       template_app (template_hole 1, template_var 0))),
    ("RRI_Misc.changes_replicate_0", "changes (replicate ?n (0::?'a)) = 0",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_app (template_hole 2, template_var 0),
           template_hole 1)),
       template_hole 0)),
    ("RRI_Misc.reciprocal_degree",
     "reciprocal_poly (degree ?P) ?P = reflect_poly ?P",
     template_equation
      (template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 0)),
         template_var 0),
       template_app (template_hole 0, template_var 0))),
    ("RRI_Misc.reciprocal_1", "reciprocal_poly ?p 1 = monom (1::?'a) ?p",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 0), template_hole 2),
       template_app
        (template_app (template_hole 1, template_hole 0), template_var 0))),
    ("RRI_Misc.map_poly_Im_of_real",
     "map_poly Im (map_poly complex_of_real ?p) = 0",
     template_equation
      (template_app
        (template_app (template_hole 4, template_hole 3),
         template_app
          (template_app (template_hole 2, template_hole 1),
           template_var 0)),
       template_hole 0)),
    ("RRI_Misc.reflect_poly_monom",
     "reflect_poly (monom ?n ?i) = monom ?n 0",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app (template_hole 1, template_var 1), template_hole 0))),
    ("RRI_Misc.degree_subspace", "poly_vs.subspace {x. degree x <= ?n}",
     template_predicate
      (
         template_app
          (template_app (template_hole 4, template_hole 3),
           template_app (template_hole 2, t_empty))
         )),
    ("RRI_Misc.changes_pCons",
     "changes (coeffs (pCons (0::?'a) ?f)) = changes (coeffs ?f)",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_hole 0),
             template_var 0))),
       template_app
        (template_hole 3, template_app (template_hole 2, template_var 0)))),
    ("RRI_Misc.changes_append_replicate_0",
     "changes (?xs @ replicate ?n (0::?'a)) = changes ?xs",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_app (template_hole 2, template_var 1),
           template_app
            (template_app (template_hole 1, template_var 0),
             template_hole 0))),
       template_app (template_hole 3, template_var 1))),
    ("RRI_Misc.dim_degree", "poly_vs.dim {x. degree x <= ?n} = ?n + 1",
     template_equation
      (template_app
        (template_app (template_hole 6, template_hole 5),
         template_app (template_hole 4, t_empty)),
       template_app
        (template_app (template_hole 1, template_var 0), template_hole 0))),
    ("RRI_Misc.degree_0_iff", "(degree ?P = 0) = (EX a. ?P = [:a:])",
     template_equation
      (template_app
        (template_app
          (template_hole 6, template_app (template_hole 5, template_var 0)),
         template_hole 4),
       template_app (template_hole 3, t_empty))),
    ("RRI_Misc.degree_reciprocal",
     "degree ?P <= ?p ==> degree (reciprocal_poly ?p ?P) <= ?p",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 1, template_var 1),
          template_var 0)],
       template_inequation
        (less_equals,
         template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 0),
             template_var 1)),
         template_var 0))),
    ("RRI_Misc.changes_rev_about",
     "changes (replicate (?p - length ?xs) (0::?'a) @ rev ?xs) =
      changes ?xs",
     template_equation
      (template_app
        (template_hole 6,
         template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app
                (template_hole 4,
                 template_app
                  (template_app (template_hole 3, template_var 1),
                   template_app (template_hole 2, template_var 0))),
               template_hole 1)),
           template_app (template_hole 0, template_var 0))),
       template_app (template_hole 6, template_var 0))),
    ("RRI_Misc.poly_map_poly_of_real_cnj",
     "poly (map_poly complex_of_real ?p) (cnj ?z) =
      cnj (poly (map_poly complex_of_real ?p) ?z)",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_var 1)),
         template_app (template_hole 0, template_var 0)),
       template_app
        (template_hole 0,
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_hole 1),
               template_var 1)),
           template_var 0)))),
    ("RRI_Misc.smult_power", "smult (?x ^ ?n) (?p ^ ?n) = smult ?x ?p ^ ?n",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_app
          (template_app (template_hole 0, template_var 0), template_var 1)),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 0)),
         template_var 1))),
    ("RRI_Misc.proots_count_monom",
     "(0::?'a) ~: ?A ==> proots_count (monom (1::?'a) ?d) ?A = 0",
     template_implication
      ([template_negation
         (
            template_predicate
             (
                template_app
                 (template_app (template_hole 6, template_hole 5),
                  template_var 1)
                )
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_hole 1),
               template_var 0)),
           template_var 1),
         template_hole 0))),
    ("RRI_Misc.reciprocal_reciprocal",
     "degree ?P <= ?p ==> reciprocal_poly ?p (reciprocal_poly ?p ?P) = ?P",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 2, template_var 1),
          template_var 0)],
       template_equation
        (template_app
          (template_app (template_hole 0, template_var 0),
           template_app
            (template_app (template_hole 0, template_var 0),
             template_var 1)),
         template_var 1))),
    ("RRI_Misc.changes_scale_const",
     "?s ~= (0::?'a) ==> changes (map ((*) ?s) ?xs) = changes ?xs",
     template_implication
      ([template_negation
         (template_equation (template_var 1, template_hole 4))],
       template_equation
        (template_app
          (template_hole 2,
           template_app
            (template_app
              (template_hole 1,
               template_app (template_hole 0, template_var 1)),
             template_var 0)),
         template_app (template_hole 2, template_var 0)))),
    ("RRI_Misc.changes_all_nonneg",
     "(!!i. (0::?'a) <= nth_default (0::?'a) ?xs i) ==> changes ?xs = 0",
     template_implication
      ([template_predicate (template_app (template_hole 7, t_empty))],
       template_equation
        (template_app (template_hole 1, template_var 0), template_hole 0))),
    ("RRI_Misc.poly_eq_by_eval", "(!!x. poly ?P x = poly ?Q x) ==> ?P = ?Q",
     template_implication
      ([template_predicate (template_app (template_hole 4, t_empty))],
       template_equation (template_var 1, template_var 0))),
    ("RRI_Misc.complex_poly_eq",
     "?r =
      map_poly complex_of_real (map_poly Re ?r) +
      smult \<i> (map_poly complex_of_real (map_poly Im ?r))",
     template_equation
      (template_var 0,
       template_app
        (template_app
          (template_hole 7,
           template_app
            (template_app (template_hole 6, template_hole 5),
             template_app
              (template_app (template_hole 4, template_hole 3),
               template_var 0))),
         template_app
          (template_app (template_hole 2, template_hole 1),
           template_app
            (template_app (template_hole 6, template_hole 5),
             template_app
              (template_app (template_hole 4, template_hole 0),
               template_var 0)))))),
    ("RRI_Misc.degree_div",
     "?q dvd ?p ==> degree (?p div ?q) = degree ?p - degree ?q",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 4, template_var 1),
              template_var 0)
            )],
       template_equation
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 0),
             template_var 1)),
         template_app
          (template_app
            (template_hole 0,
             template_app (template_hole 2, template_var 0)),
           template_app (template_hole 2, template_var 1))))),
    ("RRI_Misc.reciprocal_0_iff",
     "degree ?P <= ?p ==> (reciprocal_poly ?p ?P = 0) = (?P = 0)",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 4, template_var 1),
          template_var 0)],
       template_bimplication
        (template_equation
          (template_app
            (template_app (template_hole 1, template_var 0),
             template_var 1),
           template_hole 0),
         template_equation (template_var 1, template_hole 0)))),
    ("RRI_Misc.proots_count_pos",
     "0 < proots_count ?P ?S ==> EX x:?S. poly ?P x = (0::?'a)",
     template_implication
      ([template_inequation
         (less_than, template_hole 5,
          template_app
           (template_app (template_hole 4, template_var 1),
            template_var 0))],
       template_predicate
        (
           template_app
            (template_app (template_hole 3, template_var 0), t_empty)
           ))),
    ("RRI_Misc.monom_independent",
     "poly_vs.independent {monom (1::?'a) x |x. x <= ?p}",
     template_negation
      (
         template_predicate
          (
             template_app
              (template_app (template_hole 8, template_hole 7),
               template_app (template_hole 6, t_empty))
             )
         )),
    ("RRI_Misc.changes_scale_Cons",
     "0 < ?s ==> changes (?s * ?x # ?xs) = changes (?x # ?xs)",
     template_implication
      ([template_inequation (less_than, template_hole 4, template_var 2)],
       template_equation
        (template_app
          (template_hole 2,
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 1)),
             template_var 0)),
         template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 1),
             template_var 0))))),
    ("RRI_Misc.reciprocal_monom",
     "?n <= ?p ==> reciprocal_poly ?p (monom ?a ?n) = monom ?a (?p - ?n)",
     template_implication
      ([template_inequation (less_equals, template_var 2, template_var 1)],
       template_equation
        (template_app
          (template_app (template_hole 2, template_var 1),
           template_app
            (template_app (template_hole 1, template_var 0),
             template_var 2)),
         template_app
          (template_app (template_hole 1, template_var 0),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 2))))),
    ("RRI_Misc.reciprocal_smult",
     "degree ?P <= ?p ==>
      reciprocal_poly ?p (smult ?n ?P) = smult ?n (reciprocal_poly ?p ?P)",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 3, template_var 2),
          template_var 1)],
       template_equation
        (template_app
          (template_app (template_hole 1, template_var 1),
           template_app
            (template_app (template_hole 0, template_var 0),
             template_var 2)),
         template_app
          (template_app (template_hole 0, template_var 0),
           template_app
            (template_app (template_hole 1, template_var 1),
             template_var 2))))),
    ("RRI_Misc.square_bounded_less",
     "- ?a < ?b & ?b < ?a ==> ?b * ?b < ?a * ?a",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app
                   (template_hole 2,
                    template_app (template_hole 1, template_var 1)),
                  template_var 0)),
              template_app
               (template_app (template_hole 2, template_var 0),
                template_var 1))
            )],
       template_inequation
        (less_than,
         template_app
          (template_app (template_hole 0, template_var 0), template_var 0),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 1)))),
    ("RRI_Misc.square_bounded_le",
     "- ?a <= ?b & ?b <= ?a ==> ?b * ?b <= ?a * ?a",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app
                   (template_hole 2,
                    template_app (template_hole 1, template_var 1)),
                  template_var 0)),
              template_app
               (template_app (template_hole 2, template_var 0),
                template_var 1))
            )],
       template_inequation
        (less_equals,
         template_app
          (template_app (template_hole 0, template_var 0), template_var 0),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 1)))),
    ("RRI_Misc.poly_binomial",
     "[:1::?'a, 1::?'a:] ^ ?n =
      (SUM k<=?n. monom (of_nat (?n choose k)) k)",
     template_equation
      (template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app (template_hole 7, template_hole 6),
             template_app
              (template_app (template_hole 7, template_hole 6),
               template_hole 5))),
         template_var 0),
       template_app
        (template_app (template_hole 4, t_empty),
         template_app (template_hole 0, template_var 0)))),
    ("RRI_Misc.coeff_reciprocal_less",
     "[| ?p < ?i; degree ?P <= ?p |]
      ==> coeff (reciprocal_poly ?p ?P) ?i = (0::?'a)",
     template_implication
      ([template_inequation (less_than, template_var 2, template_var 1),
        template_inequation
         (less_equals, template_app (template_hole 4, template_var 0),
          template_var 2)],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 2),
               template_var 0)),
           template_var 1),
         template_hole 0))),
    ("RRI_Misc.map_poly_dvd",
     "[| map_poly complex_of_real ?p dvd map_poly complex_of_real ?q;
         ?q ~= 0 |]
      ==> ?p dvd ?q",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_app (template_hole 5, template_hole 4),
                  template_var 1)),
              template_app
               (template_app (template_hole 5, template_hole 4),
                template_var 0))
            ),
        template_negation
         (template_equation (template_var 0, template_hole 1))],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 1), template_var 0)
           ))),
    ("RRI_Misc.complex_poly_cong",
     "(map_poly Re ?p = map_poly Re ?q & map_poly Im ?p = map_poly Im ?q) =
      (?p = ?q)",
     template_bimplication
      (template_predicate
        (
           template_app
            (template_app
              (template_hole 5,
               template_app
                (template_app
                  (template_hole 4,
                   template_app
                    (template_app (template_hole 3, template_hole 2),
                     template_var 1)),
                 template_app
                  (template_app (template_hole 3, template_hole 2),
                   template_var 0))),
             template_app
              (template_app
                (template_hole 4,
                 template_app
                  (template_app (template_hole 3, template_hole 1),
                   template_var 1)),
               template_app
                (template_app (template_hole 3, template_hole 1),
                 template_var 0)))
           ),
       template_equation (template_var 1, template_var 0))),
    ("RRI_Misc.reciprocal_reflect_poly",
     "degree ?P <= ?p ==>
      reciprocal_poly ?p ?P =
      monom (1::?'a) (?p - degree ?P) * reflect_poly ?P",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 7, template_var 1),
          template_var 0)],
       template_equation
        (template_app
          (template_app (template_hole 5, template_var 0), template_var 1),
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_app
                (template_app (template_hole 1, template_var 0),
                 template_app (template_hole 7, template_var 1)))),
           template_app (template_hole 0, template_var 1))))),
    ("RRI_Misc.monom_span",
     "poly_vs.span {monom (1::?'a) x |x. x <= ?p} = {x. degree x <= ?p}",
     template_equation
      (template_app
        (template_app (template_hole 9, template_hole 8),
         template_app (template_hole 7, t_empty)),
       template_app (template_hole 7, t_empty))),
    ("RRI_Misc.coeff_reciprocal",
     "[| ?i <= ?p; degree ?P <= ?p |]
      ==> coeff (reciprocal_poly ?p ?P) ?i = coeff ?P (?p - ?i)",
     template_implication
      ([template_inequation (less_equals, template_var 2, template_var 1),
        template_inequation
         (less_equals, template_app (template_hole 4, template_var 0),
          template_var 1)],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 0)),
           template_var 2),
         template_app
          (template_app (template_hole 2, template_var 0),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 2))))),
    ("RRI_Misc.Setcompr_subset",
     "({?f x |x. ?P x} <= ?S) = (ALL x. ?P x --> ?f x : ?S)",
     template_equation
      (template_app
        (template_app
          (template_hole 7, template_app (template_hole 6, t_empty)),
         template_var 0),
       template_app (template_hole 2, t_empty))),
    ("RRI_Misc.lead_coeff_div",
     "?q dvd ?p ==> lead_coeff (?p div ?q) = lead_coeff ?p / lead_coeff ?q",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 5, template_var 1),
              template_var 0)
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_var 0),
               template_var 1)),
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 2, template_var 0),
               template_var 1))),
         template_app
          (template_app
            (template_hole 0,
             template_app
              (template_app (template_hole 3, template_var 0),
               template_app (template_hole 1, template_var 0))),
           template_app
            (template_app (template_hole 3, template_var 1),
             template_app (template_hole 1, template_var 1)))))),
    ("RRI_Misc.map_poly_reciprocal",
     "[| degree ?P <= ?p; ?f (0::?'a) = (0::?'b) |]
      ==> map_poly ?f (reciprocal_poly ?p ?P) =
          reciprocal_poly ?p (map_poly ?f ?P)",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 7, template_var 2),
          template_var 1),
        template_equation
         (template_app (template_var 0, template_hole 5), template_hole 4)],
       template_equation
        (template_app
          (template_app (template_hole 2, template_var 0),
           template_app
            (template_app (template_hole 1, template_var 1),
             template_var 2)),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_app
            (template_app (template_hole 2, template_var 0),
             template_var 2))))),
    ("RRI_Misc.proots_count_of_root",
     "[| ?P ~= 0; ?x : ?S; poly ?P ?x = (0::?'a) |]
      ==> 0 < proots_count ?P ?S",
     template_implication
      ([template_negation
         (template_equation (template_var 2, template_hole 7)),
        template_predicate
         (
            template_app
             (template_app (template_hole 6, template_var 1),
              template_var 0)
            ),
        template_equation
         (template_app
           (template_app (template_hole 4, template_var 2), template_var 1),
          template_hole 3)],
       template_inequation
        (less_than, template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 2),
           template_var 0)))),
    ("RRI_Misc.reciprocal_sum",
     "(!!k. degree (?P k) <= ?p) ==>
      reciprocal_poly ?p (sum ?P ?A) =
      (SUM k:?A. reciprocal_poly ?p (?P k))",
     template_implication
      ([template_predicate (template_app (template_hole 6, t_empty))],
       template_equation
        (template_app
          (template_app (template_hole 1, template_var 1),
           template_app
            (template_app (template_hole 0, t_empty), template_var 0)),
         template_app
          (template_app (template_hole 0, t_empty), template_var 0)))),
    ("RRI_Misc.mult_map_poly_imp_map_poly",
     "[| map_poly complex_of_real ?q = ?r * map_poly complex_of_real ?p;
         ?p ~= 0 |]
      ==> ?r = map_poly complex_of_real (map_poly Re ?r)",
     template_implication
      ([template_equation
         (template_app
           (template_app (template_hole 7, template_hole 6),
            template_var 2),
          template_app
           (template_app (template_hole 5, template_var 1),
            template_app
             (template_app (template_hole 7, template_hole 6),
              template_var 0))),
        template_negation
         (template_equation (template_var 0, template_hole 2))],
       template_equation
        (template_var 1,
         template_app
          (template_app (template_hole 7, template_hole 6),
           template_app
            (template_app (template_hole 1, template_hole 0),
             template_var 1))))),
    ("RRI_Misc.reciprocal_fcompose",
     "degree ?P <= ?p ==>
      reciprocal_poly ?p ?P =
      monom (1::?'a) (?p - degree ?P) * fcompose ?P 1 [:0::?'a, 1::?'a:]",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 11, template_var 1),
          template_var 0)],
       template_equation
        (template_app
          (template_app (template_hole 9, template_var 0), template_var 1),
         template_app
          (template_app
            (template_hole 8,
             template_app
              (template_app (template_hole 7, template_hole 6),
               template_app
                (template_app (template_hole 5, template_var 0),
                 template_app (template_hole 11, template_var 1)))),
           template_app
            (template_app
              (template_app (template_hole 4, template_var 1),
               template_hole 3),
             template_app
              (template_app (template_hole 2, template_hole 1),
               template_app
                (template_app (template_hole 2, template_hole 6),
                 template_hole 0))))))),
    ("RRI_Misc.reciprocal_diff",
     "[| degree ?P <= ?p; degree ?Q <= ?p |]
      ==> reciprocal_poly ?p (?P - ?Q) =
          reciprocal_poly ?p ?P - reciprocal_poly ?p ?Q",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 3, template_var 2),
          template_var 1),
        template_inequation
         (less_equals, template_app (template_hole 3, template_var 0),
          template_var 1)],
       template_equation
        (template_app
          (template_app (template_hole 1, template_var 1),
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 0)),
         template_app
          (template_app
            (template_hole 0,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 2)),
           template_app
            (template_app (template_hole 1, template_var 1),
             template_var 0))))),
    ("RRI_Misc.reciprocal_add",
     "[| degree ?P <= ?p; degree ?Q <= ?p |]
      ==> reciprocal_poly ?p (?P + ?Q) =
          reciprocal_poly ?p ?P + reciprocal_poly ?p ?Q",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 3, template_var 2),
          template_var 1),
        template_inequation
         (less_equals, template_app (template_hole 3, template_var 0),
          template_var 1)],
       template_equation
        (template_app
          (template_app (template_hole 1, template_var 1),
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 0)),
         template_app
          (template_app
            (template_hole 0,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 2)),
           template_app
            (template_app (template_hole 1, template_var 1),
             template_var 0))))),
    ("RRI_Misc.div_poly_eq_0",
     "[| ?q dvd ?p; poly (?p div ?q) ?x = (0::?'a); ?q ~= 0 |]
      ==> poly ?p ?x = (0::?'a)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 7, template_var 2),
              template_var 1)
            ),
        template_equation
         (template_app
           (template_app
             (template_hole 5,
              template_app
               (template_app (template_hole 4, template_var 1),
                template_var 2)),
            template_var 0),
          template_hole 3),
        template_negation
         (template_equation (template_var 2, template_hole 0))],
       template_equation
        (template_app
          (template_app (template_hole 5, template_var 1), template_var 0),
         template_hole 3))),
    ("RRI_Misc.poly_reciprocal",
     "[| degree ?P <= ?p; ?x ~= (0::?'a) |]
      ==> poly (reciprocal_poly ?p ?P) ?x = ?x ^ ?p * poly ?P (inverse ?x)",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 8, template_var 2),
          template_var 1),
        template_negation
         (template_equation (template_var 0, template_hole 5))],
       template_equation
        (template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_var 1),
               template_var 2)),
           template_var 0),
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 1)),
           template_app
            (template_app (template_hole 4, template_var 2),
             template_app (template_hole 0, template_var 0)))))),
    ("RRI_Misc.map_cong'",
     "[| ?xs = map ?h ?ys; !!y. y : set ?ys ==> ?f (?h y) = ?g y |]
      ==> map ?f ?xs = map ?g ?ys",
     template_implication
      ([template_equation
         (template_var 4,
          template_app
           (template_app (template_hole 7, template_var 3),
            template_var 2)),
        template_predicate (template_app (template_hole 6, t_empty))],
       template_equation
        (template_app
          (template_app (template_hole 1, template_var 1), template_var 4),
         template_app
          (template_app (template_hole 0, template_var 0),
           template_var 2)))),
    ("RRI_Misc.proots_count_of_root_set",
     "[| ?P ~= 0; ?R <= ?S; !!x. x : ?R ==> poly ?P x = (0::?'a) |]
      ==> card ?R <= proots_count ?P ?S",
     template_implication
      ([template_negation
         (template_equation (template_var 2, template_hole 9)),
        template_inequation (less_equals, template_var 1, template_var 0),
        template_predicate (template_app (template_hole 7, t_empty))],
       template_inequation
        (less_equals, template_app (template_hole 1, template_var 1),
         template_app
          (template_app (template_hole 0, template_var 2),
           template_var 0)))),
    ("RRI_Misc.proots_count_reciprocal",
     "[| degree ?P <= ?p; ?P ~= 0; (0::?'a) ~: ?A |]
      ==> proots_count (reciprocal_poly ?p ?P) ?A =
          proots_count ?P {x. inverse x : ?A}",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 10, template_var 2),
          template_var 1),
        template_negation
         (template_equation (template_var 2, template_hole 7)),
        template_negation
         (
            template_predicate
             (
                template_app
                 (template_app (template_hole 6, template_hole 5),
                  template_var 0)
                )
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_var 1),
               template_var 2)),
           template_var 0),
         template_app
          (template_app (template_hole 3, template_var 2),
           template_app (template_hole 1, t_empty))))),
    ("RRI_Misc.changes_add_between",
     "[| ?a <= ?x; ?x <= ?b |]
      ==> changes (?as @ [?a, ?b] @ ?bs) =
          changes (?as @ [?a, ?x, ?b] @ ?bs)",
     template_implication
      ([template_inequation (less_equals, template_var 4, template_var 3),
        template_inequation (less_equals, template_var 3, template_var 2)],
       template_equation
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 1),
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_var 4),
                   template_app
                    (template_app (template_hole 1, template_var 2),
                     template_hole 0))),
               template_var 0))),
         template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 1),
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_var 4),
                   template_app
                    (template_app (template_hole 1, template_var 3),
                     template_app
                      (template_app (template_hole 1, template_var 2),
                       template_hole 0)))),
               template_var 0)))))),
    ("RRI_Misc.proots_count_reciprocal'",
     "[| degree ?P <= ?p; ?P ~= 0 |]
      ==> proots_count ?P {x. 0 < x & x < 1} =
          proots_count (reciprocal_poly ?p ?P) {x. 1 < x}",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 11, template_var 1),
          template_var 0),
        template_negation
         (template_equation (template_var 1, template_hole 8))],
       template_equation
        (template_app
          (template_app (template_hole 6, template_var 1),
           template_app (template_hole 5, t_empty)),
         template_app
          (template_app
            (template_hole 6,
             template_app
              (template_app (template_hole 0, template_var 0),
               template_var 1)),
           template_app (template_hole 5, t_empty))))),
    ("RRI_Misc.changes_scale",
     "[| !!i. i < ?n ==> (0::?'a) < ?s i; length ?xs <= ?n |]
      ==> changes (map (%i. ?s i * nth_default (0::?'a) ?xs i) [0..<?n]) =
          changes ?xs",
     template_implication
      ([template_predicate (template_app (template_hole 13, t_empty)),
        template_inequation
         (less_equals, template_app (template_hole 7, template_var 0),
          template_var 2)],
       template_equation
        (template_app
          (template_hole 5,
           template_app
            (template_app (template_hole 4, t_empty),
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 2))),
         template_app (template_hole 5, template_var 0)))),
    ("RRI_Misc.reciprocal_mult",
     "[| degree (?P * ?Q) <= ?p; degree ?P <= ?p; degree ?Q <= ?p |]
      ==> monom (1::?'a) ?p * reciprocal_poly ?p (?P * ?Q) =
          reciprocal_poly ?p ?P * reciprocal_poly ?p ?Q",
     template_implication
      ([template_inequation
         (less_equals,
          template_app
           (template_hole 5,
            template_app
             (template_app (template_hole 4, template_var 2),
              template_var 1)),
          template_var 0),
        template_inequation
         (less_equals, template_app (template_hole 5, template_var 2),
          template_var 0),
        template_inequation
         (less_equals, template_app (template_hole 5, template_var 1),
          template_var 0)],
       template_equation
        (template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 2, template_hole 1),
               template_var 0)),
           template_app
            (template_app (template_hole 0, template_var 0),
             template_app
              (template_app (template_hole 4, template_var 2),
               template_var 1))),
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 0, template_var 0),
               template_var 2)),
           template_app
            (template_app (template_hole 0, template_var 0),
             template_var 1))))),
    ("RRI_Misc.changes_snoc",
     "changes (?xs @ [?b, ?a]) =
      (if ?a * ?b < (0::?'a) then 1 + changes (?xs @ [?b])
       else if ?b = (0::?'a) then changes (?xs @ [?a])
            else changes (?xs @ [?b]))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 10,
              template_app
               (template_app (template_hole 9, template_var 2),
                template_app
                 (template_app (template_hole 8, template_var 1),
                  template_app
                   (template_app (template_hole 8, template_var 0),
                    template_hole 7))))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 6,
                 template_app
                  (template_app
                    (template_hole 5,
                     template_app
                      (template_app (template_hole 4, template_var 0),
                       template_var 1)),
                   template_hole 3)),
               template_app
                (template_app (template_hole 2, template_hole 1),
                 template_app
                  (template_hole 10,
                   template_app
                    (template_app (template_hole 9, template_var 2),
                     template_app
                      (template_app (template_hole 8, template_var 1),
                       template_hole 7))))),
             template_app
              (template_app
                (template_app
                  (template_hole 6,
                   template_app
                    (template_app (template_hole 0, template_var 1),
                     template_hole 3)),
                 template_app
                  (template_hole 10,
                   template_app
                    (template_app (template_hole 9, template_var 2),
                     template_app
                      (template_app (template_hole 8, template_var 0),
                       template_hole 7)))),
               template_app
                (template_hole 10,
                 template_app
                  (template_app (template_hole 9, template_var 2),
                   template_app
                    (template_app (template_hole 8, template_var 1),
                     template_hole 7)))))
           ))),
    ("RRI_Misc.changes_increasing",
     "[| !!i. i < length ?xs - 1 ==> ?xs ! i <= ?xs ! (i + 1);
         1 < length ?xs; hd ?xs < (0::?'a); (0::?'a) < last ?xs |]
      ==> changes ?xs = 1",
     template_implication
      ([template_predicate (template_app (template_hole 15, t_empty)),
        template_inequation
         (less_than, template_hole 10,
          template_app (template_hole 11, template_var 0)),
        template_inequation
         (less_than, template_app (template_hole 5, template_var 0),
          template_hole 4),
        template_inequation
         (less_than, template_hole 4,
          template_app (template_hole 3, template_var 0))],
       template_equation
        (template_app (template_hole 1, template_var 0), template_hole 0))),
    ("RRI_Misc.real_poly_roots_induct",
     "[| !!p x. ?P p ==> ?P (p * [:- x, 1:]);
         !!p a b.
            [| b ~= 0; ?P p |] ==> ?P (p * [:a * a + b * b, - 2 * a, 1:]);
         !!a. ?P [:a:] |]
      ==> ?P ?p",
     template_implication
      ([template_predicate (template_app (template_hole 15, t_empty)),
        template_predicate (template_app (template_hole 15, t_empty)),
        template_predicate (template_app (template_hole 14, t_empty))],
       template_predicate
        (template_app (template_var 1, template_var 0))))]
