   [("Hash_Map.abs_update_length",
     "length (abs_update ?k ?v ?l) = length ?l",
     template_equation
      (template_app
        (template_hole 1,
         template_app
          (template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1),
           template_var 0)),
       template_app (template_hole 1, template_var 0))),
    ("Hash_Map.hm_it_finish",
     "hm_is_it ?m ?p ?m' ?it \<Longrightarrow>\<^sub>A is_hashmap ?m ?p",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_app
                  (template_app (template_hole 1, template_var 3),
                   template_var 2),
                 template_var 1),
               template_var 0)),
           template_app
            (template_app (template_hole 0, template_var 3),
             template_var 2))
         )),
    ("Hash_Map.ls_update_map_of_eq",
     "map_of (fst (ls_update ?k ?v ?ls)) ?k = Some ?v",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_hole 2,
             template_app
              (template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 1),
               template_var 0))),
         template_var 2),
       template_app (template_hole 0, template_var 1))),
    ("Hash_Map.map_of_ls_update",
     "map_of (fst (ls_update ?k ?v ?l)) = map_of ?l(?k |-> ?v)",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_hole 3,
           template_app
            (template_app
              (template_app (template_hole 2, template_var 2),
               template_var 1),
             template_var 0))),
       template_app
        (template_app
          (template_app
            (template_hole 1,
             template_app (template_hole 4, template_var 0)),
           template_var 2),
         template_app (template_hole 0, template_var 1)))),
    ("Hash_Map.length_card_dom_map_of",
     "distinct (map fst ?l) ==> length ?l = card (dom (map_of ?l))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 7,
              template_app
               (template_app (template_hole 6, template_hole 5),
                template_var 0))
            )],
       template_equation
        (template_app (template_hole 3, template_var 0),
         template_app
          (template_hole 2,
           template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 0)))))),
    ("Hash_Map.ls_lookup_map_of_pre",
     "distinct (map fst ?l) ==> ls_lookup ?k ?l = map_of ?l ?k",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 5,
              template_app
               (template_app (template_hole 4, template_hole 3),
                template_var 1))
            )],
       template_equation
        (template_app
          (template_app (template_hole 1, template_var 0), template_var 1),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Hash_Map.is_hashmap'_distinct",
     "is_hashtable ?l ?ht \<Longrightarrow>\<^sub>A
      is_hashtable ?l ?ht * \<up> (distinct (map fst (concat ?l)))",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 7,
             template_app
              (template_app (template_hole 6, template_var 1),
               template_var 0)),
           template_app
            (template_app
              (template_hole 5,
               template_app
                (template_app (template_hole 6, template_var 1),
                 template_var 0)),
             template_app
              (template_hole 4,
               template_app
                (template_hole 3,
                 template_app
                  (template_app (template_hole 2, template_hole 1),
                   template_app (template_hole 0, template_var 1))))))
         )),
    ("Hash_Map.hm_it_init_rule",
     "<is_hashmap ?m ?ht> hm_it_init ?ht <hm_is_it ?m ?ht ?m>\<^sub>t",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_hole 5,
               template_app
                (template_app (template_hole 4, template_var 1),
                 template_var 0)),
             template_app (template_hole 3, template_var 0)),
           t_empty)
         )),
    ("Hash_Map.hm_delete_rule",
     "<is_hashmap ?m ?ht> hm_delete ?k ?ht <is_hashmap (?m |` (- {?k}))>",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app (template_hole 5, template_var 2),
                 template_var 1)),
             template_app
              (template_app (template_hole 4, template_var 0),
               template_var 1)),
           template_app
            (template_hole 5,
             template_app
              (template_app (template_hole 3, template_var 2),
               template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_var 0),
                   template_hole 0)))))
         )),
    ("Hash_Map.distinct_imp_distinct_take",
     "distinct (map fst (concat ?l)) ==>
      distinct (map fst (concat (take ?x ?l)))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 4,
              template_app
               (template_app (template_hole 3, template_hole 2),
                template_app (template_hole 1, template_var 1)))
            )],
       template_predicate
        (
           template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_var 0),
                   template_var 1))))
           ))),
    ("Hash_Map.hm_delete_rule'",
     "<is_hashmap' ?m ?l ?ht> hm_delete ?k ?ht
      <is_hashmap (?m |` (- {?k}))>",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app
                  (template_app (template_hole 6, template_var 3),
                   template_var 2),
                 template_var 1)),
             template_app
              (template_app (template_hole 5, template_var 0),
               template_var 1)),
           template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_var 3),
               template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_var 0),
                   template_hole 0)))))
         )),
    ("Hash_Map.take_Suc0", "?l ~= [] ==> take (Suc 0) ?l = [?l ! 0]",
     template_implication
      ([template_negation
         (template_equation (template_var 0, template_hole 5))],
       template_equation
        (template_app
          (template_app
            (template_hole 4,
             template_app (template_hole 3, template_hole 2)),
           template_var 0),
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 0),
               template_hole 2)),
           template_hole 5)))),
    ("Hash_Map.take_Suc0", "0 < length ?l ==> take (Suc 0) ?l = [?l ! 0]",
     template_implication
      ([template_inequation
         (less_than, template_hole 7,
          template_app (template_hole 6, template_var 0))],
       template_equation
        (template_app
          (template_app
            (template_hole 4,
             template_app (template_hole 3, template_hole 7)),
           template_var 0),
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_hole 7)),
           template_hole 0)))),
    ("Hash_Map.hm_size_rule",
     "<is_hashmap ?m ?ht> hm_size ?ht
      <%r. is_hashmap ?m ?ht * \<up> (r = card (dom ?m))>",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_var 1),
                 template_var 0)),
             template_app (template_hole 5, template_var 0)),
           t_empty)
         )),
    ("Hash_Map.hm_lookup_rule",
     "<is_hashmap ?m ?ht> hm_lookup ?k ?ht
      <%r. is_hashmap ?m ?ht * \<up> (r = ?m ?k)>",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_hole 5,
               template_app
                (template_app (template_hole 4, template_var 2),
                 template_var 1)),
             template_app
              (template_app (template_hole 3, template_var 0),
               template_var 1)),
           t_empty)
         )),
    ("Hash_Map.ls_update_map_of_neq",
     "?x ~= ?k ==> map_of (fst (ls_update ?k ?v ?ls)) ?x = map_of ?ls ?x",
     template_implication
      ([template_negation
         (template_equation (template_var 3, template_var 2))],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_hole 1,
               template_app
                (template_app
                  (template_app (template_hole 0, template_var 2),
                   template_var 1),
                 template_var 0))),
           template_var 3),
         template_app
          (template_app (template_hole 2, template_var 0),
           template_var 3)))),
    ("Hash_Map.take_Suc0",
     "Suc ?n <= length ?l ==> take (Suc 0) ?l = [?l ! 0]",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 7, template_var 1),
          template_app (template_hole 6, template_var 0))],
       template_equation
        (template_app
          (template_app
            (template_hole 4,
             template_app (template_hole 7, template_hole 3)),
           template_var 0),
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_hole 3)),
           template_hole 0)))),
    ("Hash_Map.hm_isEmpty_rule",
     "<is_hashmap ?m ?ht> hm_isEmpty ?ht
      <%r. is_hashmap ?m ?ht * \<up> (r = (?m = Map.empty))>",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_var 1),
                 template_var 0)),
             template_app (template_hole 5, template_var 0)),
           t_empty)
         )),
    ("Hash_Map.hm_update_rule",
     "<is_hashmap ?m
        ?ht> hm_update ?k ?v ?ht <is_hashmap (?m(?k |-> ?v))>\<^sub>t",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app (template_hole 5, template_var 3),
                 template_var 2)),
             template_app
              (template_app
                (template_app (template_hole 4, template_var 1),
                 template_var 0),
               template_var 2)),
           t_empty)
         )),
    ("Hash_Map.sum_list_length_card_dom_map_of_concat",
     "[| ht_hash ?l; ht_distinct ?l |]
      ==> sum_list (map length ?l) = card (dom (map_of (concat ?l)))",
     template_implication
      ([template_predicate (template_app (template_hole 9, template_var 0)),
        template_predicate
         (template_app (template_hole 8, template_var 0))],
       template_equation
        (template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, template_hole 4),
             template_var 0)),
         template_app
          (template_hole 3,
           template_app
            (template_hole 2,
             template_app
              (template_hole 1,
               template_app (template_hole 0, template_var 0))))))),
    ("Hash_Map.hm_size_rule'",
     "<is_hashmap' ?m ?l ?ht> hm_size ?ht
      <%r. is_hashmap' ?m ?l ?ht * \<up> (r = card (dom ?m))>",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app
                  (template_app (template_hole 6, template_var 2),
                   template_var 1),
                 template_var 0)),
             template_app (template_hole 5, template_var 0)),
           t_empty)
         )),
    ("Hash_Map.hm_lookup_rule'",
     "<is_hashmap' ?m ?l ?ht> hm_lookup ?k ?ht
      <%r. is_hashmap' ?m ?l ?ht * \<up> (r = ?m ?k)>",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_hole 5,
               template_app
                (template_app
                  (template_app (template_hole 4, template_var 3),
                   template_var 2),
                 template_var 1)),
             template_app
              (template_app (template_hole 3, template_var 0),
               template_var 1)),
           t_empty)
         )),
    ("Hash_Map.hm_update_rule'",
     "<is_hashmap' ?m ?l
        ?ht> hm_update ?k ?v ?ht <is_hashmap (?m(?k |-> ?v))>\<^sub>t",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app
                  (template_app (template_hole 6, template_var 4),
                   template_var 3),
                 template_var 2)),
             template_app
              (template_app
                (template_app (template_hole 5, template_var 1),
                 template_var 0),
               template_var 2)),
           t_empty)
         )),
    ("Hash_Map.hm_isEmpty_rule'",
     "<is_hashmap' ?m ?l ?ht> hm_isEmpty ?ht
      <%r. is_hashmap' ?m ?l ?ht * \<up> (r = (?m = Map.empty))>",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app
                  (template_app (template_hole 6, template_var 2),
                   template_var 1),
                 template_var 0)),
             template_app (template_hole 5, template_var 0)),
           t_empty)
         )),
    ("Hash_Map.concat_take_Suc_app_nth",
     "?x < length ?l ==>
      concat (take (Suc ?x) ?l) = concat (take ?x ?l) @ ?l ! ?x",
     template_implication
      ([template_inequation
         (less_than, template_var 1,
          template_app (template_hole 6, template_var 0))],
       template_equation
        (template_app
          (template_hole 4,
           template_app
            (template_app
              (template_hole 3,
               template_app (template_hole 2, template_var 1)),
             template_var 0)),
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_var 1),
                 template_var 0))),
           template_app
            (template_app (template_hole 0, template_var 0),
             template_var 1))))),
    ("Hash_Map.map_of_concat'",
     "?k : dom (map_of (?l ! ?i)) & ?i < length ?l ==>
      ?k : dom (map_of (concat ?l))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app
                 (template_app (template_hole 6, template_var 2),
                  template_app
                   (template_hole 5,
                    template_app
                     (template_hole 4,
                      template_app
                       (template_app (template_hole 3, template_var 1),
                        template_var 0))))),
              template_app
               (template_app (template_hole 2, template_var 0),
                template_app (template_hole 1, template_var 1)))
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 6, template_var 2),
             template_app
              (template_hole 5,
               template_app
                (template_hole 4,
                 template_app (template_hole 0, template_var 1))))
           ))),
    ("Hash_Map.map_of_concat''",
     "(?k : dom (map_of (concat ?l))) =
      (EX i. ?k : dom (map_of (?l ! i)) & i < length ?l)",
     template_equation
      (template_app
        (template_app (template_hole 8, template_var 1),
         template_app
          (template_hole 7,
           template_app
            (template_hole 6,
             template_app (template_hole 5, template_var 0)))),
       template_app (template_hole 4, t_empty))),
    ("Hash_Map.ls_delete_map_of",
     "distinct (map fst ?l) ==>
      map_of (fst (ls_delete ?k ?l)) ?x = (map_of ?l |` (- {?k})) ?x",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 10,
              template_app
               (template_app (template_hole 9, template_hole 8),
                template_var 2))
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 6,
             template_app
              (template_hole 5,
               template_app
                (template_app (template_hole 4, template_var 1),
                 template_var 2))),
           template_var 0),
         template_app
          (template_app
            (template_app
              (template_hole 3,
               template_app (template_hole 6, template_var 2)),
             template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 1),
                 template_hole 0))),
           template_var 0)))),
    ("Hash_Map.map_of_concat",
     "?k : dom (map_of (concat ?l)) ==>
      EX i. ?k : dom (map_of (?l ! i)) & i < length ?l",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 8, template_var 1),
              template_app
               (template_hole 7,
                template_app
                 (template_hole 6,
                  template_app (template_hole 5, template_var 0))))
            )],
       template_predicate (template_app (template_hole 4, t_empty)))),
    ("Hash_Map.map_of_concat'''",
     "EX i. ?k : dom (map_of (?l ! i)) & i < length ?l ==>
      ?k : dom (map_of (concat ?l))",
     template_implication
      ([template_predicate (template_app (template_hole 8, t_empty))],
       template_predicate
        (
           template_app
            (template_app (template_hole 6, template_var 1),
             template_app
              (template_hole 5,
               template_app
                (template_hole 4,
                 template_app (template_hole 0, template_var 0))))
           ))),
    ("Hash_Map.ht_hash_in_dom_in_dom_bounded_hashcode_nat",
     "[| ht_hash ?l; ?k : dom (map_of (concat ?l)) |]
      ==> ?k : dom (map_of (?l ! bounded_hashcode_nat (length ?l) ?k))",
     template_implication
      ([template_predicate (template_app (template_hole 7, template_var 1)),
        template_predicate
         (
            template_app
             (template_app (template_hole 6, template_var 0),
              template_app
               (template_hole 5,
                template_app
                 (template_hole 4,
                  template_app (template_hole 3, template_var 1))))
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 6, template_var 0),
             template_app
              (template_hole 5,
               template_app
                (template_hole 4,
                 template_app
                  (template_app (template_hole 2, template_var 1),
                   template_app
                    (template_app
                      (template_hole 1,
                       template_app (template_hole 0, template_var 1)),
                     template_var 0)))))
           ))),
    ("Hash_Map.ls_rehash_map_of",
     "[| ht_hash ?l; ht_distinct ?l; 1 < length ?l |]
      ==> map_of (concat (ls_rehash ?l)) = map_of (concat ?l)",
     template_implication
      ([template_predicate (template_app (template_hole 8, template_var 0)),
        template_predicate (template_app (template_hole 7, template_var 0)),
        template_inequation
         (less_than, template_hole 5,
          template_app (template_hole 4, template_var 0))],
       template_equation
        (template_app
          (template_hole 2,
           template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 0))),
         template_app
          (template_hole 2,
           template_app (template_hole 1, template_var 0))))),
    ("Hash_Map.take_set",
     "set (take ?n ?l) = {?l ! i |i. i < ?n & i < length ?l}",
     template_equation
      (template_app
        (template_hole 8,
         template_app
          (template_app (template_hole 7, template_var 1), template_var 0)),
       template_app (template_hole 6, t_empty))),
    ("Hash_Map.hm_it_has_next_rule",
     "<hm_is_it ?m ?ht ?m' ?it> hm_it_has_next ?it
      <%r. hm_is_it ?m ?ht ?m' ?it * \<up> (r = (?m' ~= Map.empty))>",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_hole 8,
               template_app
                (template_app
                  (template_app
                    (template_app (template_hole 7, template_var 3),
                     template_var 2),
                   template_var 1),
                 template_var 0)),
             template_app (template_hole 6, template_var 0)),
           t_empty)
         )),
    ("Hash_Map.concat_take_Suc_empty",
     "[| ?n < length ?l; ?l ! ?n = [] |]
      ==> concat (take (Suc ?n) ?l) = concat (take ?n ?l)",
     template_implication
      ([template_inequation
         (less_than, template_var 1,
          template_app (template_hole 6, template_var 0)),
        template_equation
         (template_app
           (template_app (template_hole 4, template_var 0), template_var 1),
          template_hole 3)],
       template_equation
        (template_app
          (template_hole 2,
           template_app
            (template_app
              (template_hole 1,
               template_app (template_hole 0, template_var 1)),
             template_var 0)),
         template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 1),
             template_var 0))))),
    ("Hash_Map.abs_update_map_of''",
     "[| ht_hash ?l; ht_distinct ?l; 1 < length ?l |]
      ==> map_of (concat (abs_update ?k ?v ?l)) ?k = Some ?v",
     template_implication
      ([template_predicate (template_app (template_hole 9, template_var 2)),
        template_predicate (template_app (template_hole 8, template_var 2)),
        template_inequation
         (less_than, template_hole 6,
          template_app (template_hole 5, template_var 2))],
       template_equation
        (template_app
          (template_app
            (template_hole 3,
             template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_app (template_hole 1, template_var 1),
                   template_var 0),
                 template_var 2))),
           template_var 1),
         template_app (template_hole 0, template_var 0)))),
    ("Hash_Map.ht_hash_dom_map_of_disj_drop",
     "[| ht_hash ?l; ?i < length ?l |]
      ==> dom (map_of (?l ! ?i)) Int
          dom (map_of (concat (drop (Suc ?i) ?l))) =
          {}",
     template_implication
      ([template_predicate
         (template_app (template_hole 11, template_var 1)),
        template_inequation
         (less_than, template_var 0,
          template_app (template_hole 9, template_var 1))],
       template_equation
        (template_app
          (template_app
            (template_hole 7,
             template_app
              (template_hole 6,
               template_app
                (template_hole 5,
                 template_app
                  (template_app (template_hole 4, template_var 1),
                   template_var 0)))),
           template_app
            (template_hole 6,
             template_app
              (template_hole 5,
               template_app
                (template_hole 3,
                 template_app
                  (template_app
                    (template_hole 2,
                     template_app (template_hole 1, template_var 0)),
                   template_var 1))))),
         template_hole 0))),
    ("Hash_Map.is_hashmap'_prec",
     "ALL s s'.
         ?h \<Turnstile>
         is_hashmap' ?m ?l ?ht * ?F1.0 \<and>\<^sub>A
         is_hashmap' ?m' ?l' ?ht * ?F2.0 -->
         ?l = ?l' & ?m = ?m'",
     template_predicate (template_app (template_hole 9, t_empty))),
    ("Hash_Map.ht_hash_in_dom_in_dom_bounded_hashcode_nat_eq",
     "[| ht_hash ?l; 1 < length ?l |]
      ==> (?k : dom (map_of (concat ?l))) =
          (?k : dom (map_of (?l ! bounded_hashcode_nat (length ?l) ?k)))",
     template_implication
      ([template_predicate
         (template_app (template_hole 10, template_var 1)),
        template_inequation
         (less_than, template_hole 8,
          template_app (template_hole 7, template_var 1))],
       template_equation
        (template_app
          (template_app (template_hole 5, template_var 0),
           template_app
            (template_hole 4,
             template_app
              (template_hole 3,
               template_app (template_hole 2, template_var 1)))),
         template_app
          (template_app (template_hole 5, template_var 0),
           template_app
            (template_hole 4,
             template_app
              (template_hole 3,
               template_app
                (template_app (template_hole 1, template_var 1),
                 template_app
                  (template_app
                    (template_hole 0,
                     template_app (template_hole 7, template_var 1)),
                   template_var 0)))))))),
    ("Hash_Map.ht_hash_ht_distinct_map_of",
     "[| ht_hash ?l; ht_distinct ?l; 1 < length ?l |]
      ==> map_of (concat ?l) ?k =
          map_of (?l ! bounded_hashcode_nat (length ?l) ?k) ?k",
     template_implication
      ([template_predicate (template_app (template_hole 9, template_var 1)),
        template_predicate (template_app (template_hole 8, template_var 1)),
        template_inequation
         (less_than, template_hole 6,
          template_app (template_hole 5, template_var 1))],
       template_equation
        (template_app
          (template_app
            (template_hole 3,
             template_app (template_hole 2, template_var 1)),
           template_var 0),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_app
                (template_app
                  (template_hole 0,
                   template_app (template_hole 5, template_var 1)),
                 template_var 0))),
           template_var 0)))),
    ("Hash_Map.ls_lookup_map_of",
     "[| ht_hash ?l; ht_distinct ?l; 1 < length ?l |]
      ==> ls_lookup ?k (?l ! bounded_hashcode_nat (length ?l) ?k) =
          map_of (concat ?l) ?k",
     template_implication
      ([template_predicate
         (template_app (template_hole 10, template_var 1)),
        template_predicate (template_app (template_hole 9, template_var 1)),
        template_inequation
         (less_than, template_hole 7,
          template_app (template_hole 6, template_var 1))],
       template_equation
        (template_app
          (template_app (template_hole 4, template_var 0),
           template_app
            (template_app (template_hole 3, template_var 1),
             template_app
              (template_app
                (template_hole 2,
                 template_app (template_hole 6, template_var 1)),
               template_var 0))),
         template_app
          (template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 1)),
           template_var 0)))),
    ("Hash_Map.abs_update_map_of",
     "[| ht_hash ?l; ht_distinct ?l; 1 < length ?l |]
      ==> map_of (concat (abs_update ?k ?v ?l)) = map_of (concat ?l)(?k |->
          ?v)",
     template_implication
      ([template_predicate
         (template_app (template_hole 10, template_var 2)),
        template_predicate (template_app (template_hole 9, template_var 2)),
        template_inequation
         (less_than, template_hole 7,
          template_app (template_hole 6, template_var 2))],
       template_equation
        (template_app
          (template_hole 4,
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_app (template_hole 2, template_var 1),
                 template_var 0),
               template_var 2))),
         template_app
          (template_app
            (template_app
              (template_hole 1,
               template_app
                (template_hole 4,
                 template_app (template_hole 3, template_var 2))),
             template_var 1),
           template_app (template_hole 0, template_var 0))))),
    ("Hash_Map.ht_hash_in_dom_bounded_hashcode_nat_in_dom",
     "[| ht_hash ?l; 1 < length ?l;
         ?k : dom (map_of (?l ! bounded_hashcode_nat (length ?l) ?k)) |]
      ==> ?k : dom (map_of (concat ?l))",
     template_implication
      ([template_predicate (template_app (template_hole 9, template_var 1)),
        template_inequation
         (less_than, template_hole 7,
          template_app (template_hole 6, template_var 1)),
        template_predicate
         (
            template_app
             (template_app (template_hole 5, template_var 0),
              template_app
               (template_hole 4,
                template_app
                 (template_hole 3,
                  template_app
                   (template_app (template_hole 2, template_var 1),
                    template_app
                     (template_app
                       (template_hole 1,
                        template_app (template_hole 6, template_var 1)),
                      template_var 0)))))
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 5, template_var 0),
             template_app
              (template_hole 4,
               template_app
                (template_hole 3,
                 template_app (template_hole 0, template_var 1))))
           ))),
    ("Hash_Map.abs_update_rehash_map_of",
     "[| ht_hash ?l; ht_distinct ?l; 1 < length ?l |]
      ==> map_of (concat (abs_update ?k ?v (ls_rehash ?l))) =
          map_of (concat ?l)(?k |-> ?v)",
     template_implication
      ([template_predicate
         (template_app (template_hole 11, template_var 2)),
        template_predicate
         (template_app (template_hole 10, template_var 2)),
        template_inequation
         (less_than, template_hole 8,
          template_app (template_hole 7, template_var 2))],
       template_equation
        (template_app
          (template_hole 5,
           template_app
            (template_hole 4,
             template_app
              (template_app
                (template_app (template_hole 3, template_var 1),
                 template_var 0),
               template_app (template_hole 2, template_var 2)))),
         template_app
          (template_app
            (template_app
              (template_hole 1,
               template_app
                (template_hole 5,
                 template_app (template_hole 4, template_var 2))),
             template_var 1),
           template_app (template_hole 0, template_var 0))))),
    ("Hash_Map.abs_update_map_of'",
     "[| ht_hash ?l; ht_distinct ?l; 1 < length ?l |]
      ==> map_of (concat (abs_update ?k ?v ?l)) ?x =
          (map_of (concat ?l)(?k |-> ?v)) ?x",
     template_implication
      ([template_predicate
         (template_app (template_hole 10, template_var 3)),
        template_predicate (template_app (template_hole 9, template_var 3)),
        template_inequation
         (less_than, template_hole 7,
          template_app (template_hole 6, template_var 3))],
       template_equation
        (template_app
          (template_app
            (template_hole 4,
             template_app
              (template_hole 3,
               template_app
                (template_app
                  (template_app (template_hole 2, template_var 2),
                   template_var 1),
                 template_var 3))),
           template_var 0),
         template_app
          (template_app
            (template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_hole 4,
                   template_app (template_hole 3, template_var 3))),
               template_var 2),
             template_app (template_hole 0, template_var 1)),
           template_var 0)))),
    ("Hash_Map.ht_hash_ht_distinct_in_dom_unique_value",
     "[| ht_hash ?l; ht_distinct ?l; 1 < length ?l;
         ?k : dom (map_of (concat ?l)) |]
      ==> EX! v. (?k, v) : set (concat ?l)",
     template_implication
      ([template_predicate
         (template_app (template_hole 12, template_var 1)),
        template_predicate
         (template_app (template_hole 11, template_var 1)),
        template_inequation
         (less_than, template_hole 9,
          template_app (template_hole 8, template_var 1)),
        template_predicate
         (
            template_app
             (template_app (template_hole 7, template_var 0),
              template_app
               (template_hole 6,
                template_app
                 (template_hole 5,
                  template_app (template_hole 4, template_var 1))))
            )],
       template_predicate (template_app (template_hole 3, t_empty)))),
    ("Hash_Map.ht_hash_in_dom_i_bounded_hashcode_nat_i",
     "[| ht_hash ?l; 1 < length ?l; ?i < length ?l;
         ?k : dom (map_of (?l ! ?i)) |]
      ==> ?i = bounded_hashcode_nat (length ?l) ?k",
     template_implication
      ([template_predicate (template_app (template_hole 9, template_var 2)),
        template_inequation
         (less_than, template_hole 7,
          template_app (template_hole 6, template_var 2)),
        template_inequation
         (less_than, template_var 1,
          template_app (template_hole 6, template_var 2)),
        template_predicate
         (
            template_app
             (template_app (template_hole 5, template_var 0),
              template_app
               (template_hole 4,
                template_app
                 (template_hole 3,
                  template_app
                   (template_app (template_hole 2, template_var 2),
                    template_var 1))))
            )],
       template_equation
        (template_var 1,
         template_app
          (template_app
            (template_hole 0,
             template_app (template_hole 6, template_var 2)),
           template_var 0)))),
    ("Hash_Map.hm_hashcode_eq",
     "[| ?j < length (?l ! ?i); ?i < length ?l;
         ?h \<Turnstile> is_hashtable ?l ?ht |]
      ==> bounded_hashcode_nat (length ?l) (fst (?l ! ?i ! ?j)) = ?i",
     template_implication
      ([template_inequation
         (less_than, template_var 4,
          template_app
           (template_hole 8,
            template_app
             (template_app (template_hole 7, template_var 3),
              template_var 2))),
        template_inequation
         (less_than, template_var 2,
          template_app (template_hole 6, template_var 3)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, template_var 3),
                  template_var 1)),
              template_var 0)
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 6, template_var 3)),
           template_app
            (template_hole 1,
             template_app
              (template_app
                (template_hole 0,
                 template_app
                  (template_app (template_hole 7, template_var 3),
                   template_var 2)),
               template_var 4))),
         template_var 2))),
    ("Hash_Map.abs_update_map_of'''",
     "[| ht_hash ?l; ht_distinct ?l; 1 < length ?l; ?x ~= ?k |]
      ==> map_of (concat (abs_update ?k ?v ?l)) ?x = map_of (concat ?l) ?x",
     template_implication
      ([template_predicate
         (template_app (template_hole 10, template_var 3)),
        template_predicate (template_app (template_hole 9, template_var 3)),
        template_inequation
         (less_than, template_hole 7,
          template_app (template_hole 6, template_var 3)),
        template_negation
         (template_equation (template_var 2, template_var 1))],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_hole 1,
               template_app
                (template_app
                  (template_app (template_hole 0, template_var 1),
                   template_var 0),
                 template_var 3))),
           template_var 2),
         template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 3)),
           template_var 2)))),
    ("Hash_Map.ls_insls_map_of",
     "[| ht_hash ?ld; ht_distinct ?ld; 1 < length ?ld;
         distinct (map fst ?xs) |]
      ==> map_of (concat (ls_insls ?xs ?ld)) =
          map_of (concat ?ld) ++ map_of ?xs",
     template_implication
      ([template_predicate
         (template_app (template_hole 12, template_var 1)),
        template_predicate
         (template_app (template_hole 11, template_var 1)),
        template_inequation
         (less_than, template_hole 9,
          template_app (template_hole 8, template_var 1)),
        template_predicate
         (
            template_app
             (template_hole 7,
              template_app
               (template_app (template_hole 6, template_hole 5),
                template_var 0))
            )],
       template_equation
        (template_app
          (template_hole 3,
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 1))),
         template_app
          (template_app
            (template_hole 0,
             template_app
              (template_hole 3,
               template_app (template_hole 2, template_var 1))),
           template_app (template_hole 3, template_var 0))))),
    ("Hash_Map.ht_hash_in_bounded_hashcode_nat_not_i_not_in_dom_i",
     "[| ht_hash ?l; 1 < length ?l; ?i < length ?l;
         ?i ~= bounded_hashcode_nat (length ?l) ?k |]
      ==> ?k ~: dom (map_of (?l ! ?i))",
     template_implication
      ([template_predicate
         (template_app (template_hole 10, template_var 2)),
        template_inequation
         (less_than, template_hole 8,
          template_app (template_hole 7, template_var 2)),
        template_inequation
         (less_than, template_var 1,
          template_app (template_hole 7, template_var 2)),
        template_negation
         (
            template_equation
             (template_var 1,
              template_app
               (template_app
                 (template_hole 4,
                  template_app (template_hole 7, template_var 2)),
                template_var 0))
            )],
       template_negation
        (
           template_predicate
            (
               template_app
                (template_app (template_hole 3, template_var 0),
                 template_app
                  (template_hole 2,
                   template_app
                    (template_hole 1,
                     template_app
                      (template_app (template_hole 0, template_var 2),
                       template_var 1))))
               )
           ))),
    ("Hash_Map.ht_hash_distinct",
     "ht_hash ?l ==>
      ALL i j.
         i ~= j & i < length ?l & j < length ?l -->
         set (?l ! i) Int set (?l ! j) = {}",
     template_implication
      ([template_predicate
         (template_app (template_hole 12, template_var 0))],
       template_predicate (template_app (template_hole 11, t_empty)))),
    ("Hash_Map.ht_hash_dom_map_of_disj",
     "[| ht_hash ?l; ?i < length ?l; ?j < length ?l; ?i ~= ?j |]
      ==> dom (map_of (?l ! ?i)) Int dom (map_of (?l ! ?j)) = {}",
     template_implication
      ([template_predicate
         (template_app (template_hole 10, template_var 2)),
        template_inequation
         (less_than, template_var 1,
          template_app (template_hole 8, template_var 2)),
        template_inequation
         (less_than, template_var 0,
          template_app (template_hole 8, template_var 2)),
        template_negation
         (template_equation (template_var 1, template_var 0))],
       template_equation
        (template_app
          (template_app
            (template_hole 4,
             template_app
              (template_hole 3,
               template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_var 2),
                   template_var 1)))),
           template_app
            (template_hole 3,
             template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 0)))),
         template_hole 0))),
    ("Hash_Map.hm_it_next_rule",
     "?m' ~= Map.empty ==>
      <hm_is_it ?m ?ht ?m' ?it> hm_it_next ?it
      <%((k, v), it').
          hm_is_it ?m ?ht (?m' |` (- {k})) it' * \<up> (?m' k = Some v)>",
     template_implication
      ([template_negation (template_equation (template_var 3, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 12,
                 template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 11, template_var 2),
                       template_var 1),
                     template_var 3),
                   template_var 0)),
               template_app (template_hole 10, template_var 0)),
             template_app
              (template_hole 9, template_app (template_hole 8, t_empty)))
           ))),
    ("Hash_Map.hm_it_next_rule'",
     "?l' ~= [] ==>
      <hm_is_it' ?l ?ht ?l' ?it> hm_it_next ?it
      <%((k, v), it').
          hm_is_it' ?l ?ht (butlast ?l') it' *
          \<up> (last ?l' = (k, v) & distinct (map fst ?l'))>",
     template_implication
      ([template_negation
         (template_equation (template_var 3, template_hole 15))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 14,
                 template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 13, template_var 2),
                       template_var 1),
                     template_var 3),
                   template_var 0)),
               template_app (template_hole 12, template_var 0)),
             template_app
              (template_hole 11, template_app (template_hole 10, t_empty)))
           ))),
    ("Hash_Map.skip_empty_aux",
     "[| concat (take (Suc ?n) ?l) = concat (take (Suc ?x) ?l);
         Suc ?n <= length ?l; ?x <= ?n |]
      ==> ALL i. ?x < i & i <= ?n --> ?l ! i = []",
     template_implication
      ([template_equation
         (template_app
           (template_hole 10,
            template_app
             (template_app
               (template_hole 9,
                template_app (template_hole 8, template_var 2)),
              template_var 1)),
          template_app
           (template_hole 10,
            template_app
             (template_app
               (template_hole 9,
                template_app (template_hole 8, template_var 0)),
              template_var 1))),
        template_inequation
         (less_equals, template_app (template_hole 8, template_var 2),
          template_app (template_hole 6, template_var 1)),
        template_inequation (less_equals, template_var 0, template_var 2)],
       template_predicate (template_app (template_hole 5, t_empty)))),
    ("Hash_Map.abs_update_map_of_hceq",
     "[| ht_hash ?l; ht_distinct ?l; 1 < length ?l; ?x ~= ?k;
         bounded_hashcode_nat (length ?l) ?x =
         bounded_hashcode_nat (length ?l) ?k |]
      ==> map_of (concat (abs_update ?k ?v ?l)) ?x = map_of (concat ?l) ?x",
     template_implication
      ([template_predicate
         (template_app (template_hole 12, template_var 3)),
        template_predicate
         (template_app (template_hole 11, template_var 3)),
        template_inequation
         (less_than, template_hole 9,
          template_app (template_hole 8, template_var 3)),
        template_negation
         (template_equation (template_var 2, template_var 1)),
        template_equation
         (template_app
           (template_app
             (template_hole 4,
              template_app (template_hole 8, template_var 3)),
            template_var 2),
          template_app
           (template_app
             (template_hole 4,
              template_app (template_hole 8, template_var 3)),
            template_var 1))],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_hole 1,
               template_app
                (template_app
                  (template_app (template_hole 0, template_var 1),
                   template_var 0),
                 template_var 3))),
           template_var 2),
         template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 3)),
           template_var 2)))),
    ("Hash_Map.abs_update_map_of_hcneq",
     "[| ht_hash ?l; ht_distinct ?l; 1 < length ?l; ?x ~= ?k;
         bounded_hashcode_nat (length ?l) ?x ~=
         bounded_hashcode_nat (length ?l) ?k |]
      ==> map_of (concat (abs_update ?k ?v ?l)) ?x = map_of (concat ?l) ?x",
     template_implication
      ([template_predicate
         (template_app (template_hole 12, template_var 3)),
        template_predicate
         (template_app (template_hole 11, template_var 3)),
        template_inequation
         (less_than, template_hole 9,
          template_app (template_hole 8, template_var 3)),
        template_negation
         (template_equation (template_var 2, template_var 1)),
        template_negation
         (
            template_equation
             (template_app
               (template_app
                 (template_hole 4,
                  template_app (template_hole 8, template_var 3)),
                template_var 2),
              template_app
               (template_app
                 (template_hole 4,
                  template_app (template_hole 8, template_var 3)),
                template_var 1))
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_hole 1,
               template_app
                (template_app
                  (template_app (template_hole 0, template_var 1),
                   template_var 0),
                 template_var 3))),
           template_var 2),
         template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 3)),
           template_var 2)))),
    ("Hash_Map.ls_copy_map_of",
     "[| ht_hash ?ls; ht_distinct ?ls; ht_hash ?ld; ht_distinct ?ld;
         1 < length ?ld; ?n <= length ?ls |]
      ==> map_of (concat (ls_copy ?n ?ls ?ld)) =
          map_of (concat ?ld) ++ map_of (concat (take ?n ?ls))",
     template_implication
      ([template_predicate
         (template_app (template_hole 11, template_var 2)),
        template_predicate
         (template_app (template_hole 10, template_var 2)),
        template_predicate
         (template_app (template_hole 11, template_var 1)),
        template_predicate
         (template_app (template_hole 10, template_var 1)),
        template_inequation
         (less_than, template_hole 8,
          template_app (template_hole 7, template_var 1)),
        template_inequation
         (less_equals, template_var 0,
          template_app (template_hole 7, template_var 2))],
       template_equation
        (template_app
          (template_hole 4,
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_app (template_hole 2, template_var 0),
                 template_var 2),
               template_var 1))),
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_hole 4,
               template_app (template_hole 3, template_var 1))),
           template_app
            (template_hole 4,
             template_app
              (template_hole 3,
               template_app
                (template_app (template_hole 0, template_var 0),
                 template_var 2))))))),
    ("Hash_Map.hm_it_adjust_rule",
     "?i < length ?l ==>
      <is_hashtable ?l ?ht> hm_it_adjust ?i ?ht
      <%j. is_hashtable ?l ?ht *
           \<up>
            (j <= ?i &
             concat (take (Suc ?i) ?l) = concat (take (Suc j) ?l) &
             (j = 0 | ?l ! j ~= []))>",
     template_implication
      ([template_inequation
         (less_than, template_var 2,
          template_app (template_hole 17, template_var 1))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 16,
                 template_app
                  (template_app (template_hole 15, template_var 1),
                   template_var 0)),
               template_app
                (template_app (template_hole 14, template_var 2),
                 template_var 0)),
             t_empty)
           ))),
    ("Hash_Map.nth_concat_splitE",
     "[| ?i < length (concat ?ls);
         !!j k.
            [| j < length ?ls; k < length (?ls ! j);
               concat ?ls ! ?i = ?ls ! j ! k;
               ?i = length (concat (take j ?ls)) + k |]
            ==> ?thesis |]
      ==> ?thesis",
     template_implication
      ([template_inequation
         (less_than, template_var 2,
          template_app
           (template_hole 9,
            template_app (template_hole 8, template_var 1))),
        template_predicate (template_app (template_hole 7, t_empty))],
       template_predicate (template_var 0))),
    ("Hash_Map.ls_insls_map_of'",
     "[| ht_hash ?ls; ht_distinct ?ls; ht_hash ?ld; ht_distinct ?ld;
         1 < length ?ld; ?n < length ?ls |]
      ==> map_of (concat (ls_insls (?ls ! ?n) ?ld)) ++
          map_of (concat (take ?n ?ls)) =
          map_of (concat ?ld) ++ map_of (concat (take (Suc ?n) ?ls))",
     template_implication
      ([template_predicate
         (template_app (template_hole 12, template_var 2)),
        template_predicate
         (template_app (template_hole 11, template_var 2)),
        template_predicate
         (template_app (template_hole 12, template_var 1)),
        template_predicate
         (template_app (template_hole 11, template_var 1)),
        template_inequation
         (less_than, template_hole 9,
          template_app (template_hole 8, template_var 1)),
        template_inequation
         (less_than, template_var 0,
          template_app (template_hole 8, template_var 2))],
       template_equation
        (template_app
          (template_app
            (template_hole 6,
             template_app
              (template_hole 5,
               template_app
                (template_hole 4,
                 template_app
                  (template_app
                    (template_hole 3,
                     template_app
                      (template_app (template_hole 2, template_var 2),
                       template_var 0)),
                   template_var 1)))),
           template_app
            (template_hole 5,
             template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 1, template_var 0),
                 template_var 2)))),
         template_app
          (template_app
            (template_hole 6,
             template_app
              (template_hole 5,
               template_app (template_hole 4, template_var 1))),
           template_app
            (template_hole 5,
             template_app
              (template_hole 4,
               template_app
                (template_app
                  (template_hole 1,
                   template_app (template_hole 0, template_var 0)),
                 template_var 2))))))),
    ("Hash_Map.update_ls_delete_map_of",
     "[| ht_hash ?l; ht_distinct ?l;
         ht_hash
          (?l[bounded_hashcode_nat (length ?l) ?k :=
                fst (ls_delete ?k
                      (?l ! bounded_hashcode_nat (length ?l) ?k))]);
         ht_distinct
          (?l[bounded_hashcode_nat (length ?l) ?k :=
                fst (ls_delete ?k
                      (?l ! bounded_hashcode_nat (length ?l) ?k))]);
         1 < length ?l |]
      ==> map_of
           (concat
             (?l[bounded_hashcode_nat (length ?l) ?k :=
                   fst (ls_delete ?k
                         (?l ! bounded_hashcode_nat (length ?l) ?k))]))
           ?x =
          (map_of (concat ?l) |` (- {?k})) ?x",
     template_implication
      ([template_predicate
         (template_app (template_hole 16, template_var 2)),
        template_predicate
         (template_app (template_hole 15, template_var 2)),
        template_predicate
         (
            template_app
             (template_hole 16,
              template_app
               (template_app
                 (template_app (template_hole 14, template_var 2),
                  template_app
                   (template_app
                     (template_hole 13,
                      template_app (template_hole 12, template_var 2)),
                    template_var 1)),
                template_app
                 (template_hole 11,
                  template_app
                   (template_app (template_hole 10, template_var 1),
                    template_app
                     (template_app (template_hole 9, template_var 2),
                      template_app
                       (template_app
                         (template_hole 13,
                          template_app (template_hole 12, template_var 2)),
                        template_var 1))))))
            ),
        template_predicate
         (
            template_app
             (template_hole 15,
              template_app
               (template_app
                 (template_app (template_hole 14, template_var 2),
                  template_app
                   (template_app
                     (template_hole 13,
                      template_app (template_hole 12, template_var 2)),
                    template_var 1)),
                template_app
                 (template_hole 11,
                  template_app
                   (template_app (template_hole 10, template_var 1),
                    template_app
                     (template_app (template_hole 9, template_var 2),
                      template_app
                       (template_app
                         (template_hole 13,
                          template_app (template_hole 12, template_var 2)),
                        template_var 1))))))
            ),
        template_inequation
         (less_than, template_hole 7,
          template_app (template_hole 12, template_var 2))],
       template_equation
        (template_app
          (template_app
            (template_hole 5,
             template_app
              (template_hole 4,
               template_app
                (template_app
                  (template_app (template_hole 14, template_var 2),
                   template_app
                    (template_app
                      (template_hole 13,
                       template_app (template_hole 12, template_var 2)),
                     template_var 1)),
                 template_app
                  (template_hole 11,
                   template_app
                    (template_app (template_hole 10, template_var 1),
                     template_app
                      (template_app (template_hole 9, template_var 2),
                       template_app
                        (template_app
                          (template_hole 13,
                           template_app (template_hole 12, template_var 2)),
                         template_var 1))))))),
           template_var 0),
         template_app
          (template_app
            (template_app
              (template_hole 3,
               template_app
                (template_hole 5,
                 template_app (template_hole 4, template_var 2))),
             template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 1),
                 template_hole 0))),
           template_var 0))))]
