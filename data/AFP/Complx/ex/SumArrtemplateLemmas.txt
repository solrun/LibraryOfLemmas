   [("SumArr.word_min_0", "min 0 ?x = 0",
     template_equation
      (template_app
        (template_app (template_hole 1, template_hole 0), template_var 0),
       template_hole 0)),
    ("SumArr.word_min_0", "min ?x 0 = 0",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), template_hole 0),
       template_hole 0)),
    ("SumArr.MAXSUM_le_plus", "?x < MAXSUM ==> MAXSUM <= MAXSUM + ?x",
     template_implication
      ([template_inequation (less_than, template_var 0, template_hole 2)],
       template_inequation
        (less_equals, template_hole 2,
         template_app
          (template_app (template_hole 0, template_hole 2),
           template_var 0)))),
    ("SumArr.sumarr_proc_simp", "[ann (lock ?n)] ! 0 = ann (lock ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 5,
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_hole 3,
                 template_app (template_hole 2, template_var 0))),
             template_hole 1)),
         template_hole 0),
       template_app
        (template_hole 3, template_app (template_hole 2, template_var 0)))),
    ("SumArr.sumarr_proc_simp", "[ann (sumarr ?n)] ! 0 = ann (sumarr ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 5,
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_hole 3,
                 template_app (template_hole 2, template_var 0))),
             template_hole 1)),
         template_hole 0),
       template_app
        (template_hole 3, template_app (template_hole 2, template_var 0)))),
    ("SumArr.sumarr_proc_simp", "[ann (unlock ?n)] ! 0 = ann (unlock ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 5,
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_hole 3,
                 template_app (template_hole 2, template_var 0))),
             template_hole 1)),
         template_hole 0),
       template_app
        (template_hole 3, template_app (template_hole 2, template_var 0)))),
    ("SumArr.post_call_sumarr",
     "[| local_postcond ?x 0; local_postcond ?x 1 |]
      ==> SumArr.postcond ?x",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 3, template_var 0),
              template_hole 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 3, template_var 0),
              template_hole 1)
            )],
       template_predicate
        (template_app (template_hole 0, template_var 0)))),
    ("SumArr.less_than_two_2", "?i < 2 ==> Suc 0 - ?i < 2",
     template_implication
      ([template_inequation
         (less_than, template_var 0,
          template_app
           (template_hole 5,
            template_app (template_hole 4, template_hole 3)))],
       template_inequation
        (less_than,
         template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 1, template_hole 0)),
           template_var 0),
         template_app
          (template_hole 5,
           template_app (template_hole 4, template_hole 3))))),
    ("SumArr.local_sum_MAXSUM",
     "[| ?k < length ?arr; MAXSUM <= ?arr ! ?k |]
      ==> local_sum ?arr = MAXSUM",
     template_implication
      ([template_inequation
         (less_than, template_var 1,
          template_app (template_hole 5, template_var 0)),
        template_inequation
         (less_equals, template_hole 3,
          template_app
           (template_app (template_hole 2, template_var 0),
            template_var 1))],
       template_equation
        (template_app (template_hole 0, template_var 0), template_hole 3))),
    ("SumArr.pre_call_sumarr",
     "[| ?i < 2; SumArr.precond ?x |] ==> ?x : pre (ann (call_sumarr ?i))",
     template_implication
      ([template_inequation
         (less_than, template_var 1,
          template_app
           (template_hole 7,
            template_app (template_hole 6, template_hole 5))),
        template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_app (template_hole 3, template_var 0),
             template_app
              (template_hole 2,
               template_app
                (template_hole 1,
                 template_app (template_hole 0, template_var 1))))
           ))),
    ("SumArr.imp_disjL_context'",
     "((?P --> ?R) & (?Q --> ?R)) = ((?P --> ?R) & (~ ?P & ?Q --> ?R))",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_app
          (template_app (template_hole 1, template_var 0), template_var 1)),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app
                (template_hole 2,
                 template_app (template_hole 0, template_var 2)),
               template_var 0)),
           template_var 1)))),
    ("SumArr.map_of_prod_1",
     "?i < ?n ==>
      map_of (map (%i. ((?p, i), ?g i)) [0..<?n]) (?p, ?i) = Some (?g ?i)",
     template_implication
      ([template_inequation (less_than, template_var 3, template_var 2)],
       template_equation
        (template_app
          (template_app
            (template_hole 6,
             template_app
              (template_app (template_hole 5, t_empty),
               template_app
                (template_app (template_hole 2, template_hole 1),
                 template_var 2))),
           template_app
            (template_app (template_hole 3, template_var 1),
             template_var 3)),
         template_app
          (template_hole 0,
           template_app (template_var 0, template_var 3))))),
    ("SumArr.oghoare_call_sumarr",
     "?i < 2 ==>
      \<Gamma>, \<Theta>
      |\<turnstile>\<^bsub>/?F\<^esub> call_sumarr ?i
 \<lbrace>\<acute>local_postcond ?i\<rbrace>, \<lbrace>False\<rbrace>",
     template_implication
      ([template_inequation
         (less_than, template_var 1,
          template_app
           (template_hole 11,
            template_app (template_hole 10, template_hole 9)))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 8, template_hole 7),
                       template_hole 6),
                     template_var 0),
                   template_app
                    (template_hole 5,
                     template_app (template_hole 4, template_var 1))),
                 template_app
                  (template_hole 3,
                   template_app (template_hole 4, template_var 1))),
               template_app (template_hole 2, t_empty)),
             template_app (template_hole 2, t_empty))
           ))),
    ("SumArr.oghoare_sumarr",
     "?i < 2 ==>
      \<Gamma>, \<Theta>
      |\<turnstile>\<^bsub>/?F\<^esub> sumarr ?i
 \<lbrace>\<acute>local_postcond ?i\<rbrace>, \<lbrace>False\<rbrace>",
     template_implication
      ([template_inequation
         (less_than, template_var 1,
          template_app
           (template_hole 11,
            template_app (template_hole 10, template_hole 9)))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 8, template_hole 7),
                       template_hole 6),
                     template_var 0),
                   template_app
                    (template_hole 5,
                     template_app (template_hole 4, template_var 1))),
                 template_app
                  (template_hole 3,
                   template_app (template_hole 4, template_var 1))),
               template_app (template_hole 2, t_empty)),
             template_app (template_hole 2, t_empty))
           ))),
    ("SumArr.less_than_two_inv",
     "[| ?i < 2; ?j < 2; ?i ~= ?j |] ==> Suc 0 - ?i = ?j",
     template_implication
      ([template_inequation
         (less_than, template_var 1,
          template_app
           (template_hole 7,
            template_app (template_hole 6, template_hole 5))),
        template_inequation
         (less_than, template_var 0,
          template_app
           (template_hole 7,
            template_app (template_hole 6, template_hole 5))),
        template_negation
         (template_equation (template_var 1, template_var 0))],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 1, template_hole 0)),
           template_var 1),
         template_var 0))),
    ("SumArr.map_of_prod_2",
     "[| ?i < ?n; ?p ~= ?q |]
      ==> (?m ++ map_of (map (%i. ((?p, i), ?g i)) [0..<?n])) (?q, ?i) =
          ?m (?q, ?i)",
     template_implication
      ([template_inequation (less_than, template_var 5, template_var 4),
        template_negation
         (template_equation (template_var 3, template_var 2))],
       template_equation
        (template_app
          (template_app
            (template_app (template_hole 6, template_var 1),
             template_app
              (template_hole 5,
               template_app
                (template_app (template_hole 4, t_empty),
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 4)))),
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 5)),
         template_app
          (template_var 1,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 5))))),
    ("SumArr.local_sum_MAXSUM'",
     "[| ?k < length ?arr; MAXSUM <= local_sum (take ?k ?arr) + ?arr ! ?k;
         local_sum (take ?k ?arr) <= MAXSUM; ?arr ! ?k <= MAXSUM |]
      ==> local_sum ?arr = MAXSUM",
     template_implication
      ([template_inequation
         (less_than, template_var 1,
          template_app (template_hole 7, template_var 0)),
        template_inequation
         (less_equals, template_hole 5,
          template_app
           (template_app
             (template_hole 4,
              template_app
               (template_hole 3,
                template_app
                 (template_app (template_hole 2, template_var 1),
                  template_var 0))),
            template_app
             (template_app (template_hole 1, template_var 0),
              template_var 1))),
        template_inequation
         (less_equals,
          template_app
           (template_hole 3,
            template_app
             (template_app (template_hole 2, template_var 1),
              template_var 0)),
          template_hole 5),
        template_inequation
         (less_equals,
          template_app
           (template_app (template_hole 1, template_var 0), template_var 1),
          template_hole 5)],
       template_equation
        (template_app (template_hole 3, template_var 0), template_hole 5))),
    ("SumArr.local_sum_Suc",
     "[| ?n < length ?arr; local_sum (take ?n ?arr) + ?arr ! ?n < MAXSUM;
         ?arr ! ?n < MAXSUM |]
      ==> local_sum (take ?n ?arr) + ?arr ! ?n =
          local_sum (take (Suc ?n) ?arr)",
     template_implication
      ([template_inequation
         (less_than, template_var 1,
          template_app (template_hole 8, template_var 0)),
        template_inequation
         (less_than,
          template_app
           (template_app
             (template_hole 6,
              template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, template_var 1),
                  template_var 0))),
            template_app
             (template_app (template_hole 3, template_var 0),
              template_var 1)),
          template_hole 2),
        template_inequation
         (less_than,
          template_app
           (template_app (template_hole 3, template_var 0), template_var 1),
          template_hole 2)],
       template_equation
        (template_app
          (template_app
            (template_hole 6,
             template_app
              (template_hole 5,
               template_app
                (template_app (template_hole 4, template_var 1),
                 template_var 0))),
           template_app
            (template_app (template_hole 3, template_var 0),
             template_var 1)),
         template_app
          (template_hole 5,
           template_app
            (template_app
              (template_hole 4,
               template_app (template_hole 0, template_var 1)),
             template_var 0))))),
    ("SumArr.sumarr_correct",
     "\<Gamma>, \<Theta>
      |\<tturnstile>\<^bsub>/?F\<^esub> \<lbrace>\<acute>SumArr.precond\<rbrace>
  COBEGIN
    SCHEME [0 \<le> m < 2]
      call_sumarr m
      \<lbrace>\<acute>local_postcond m\<rbrace>, \<lbrace>False\<rbrace>
  COEND
  \<lbrace>\<acute>SumArr.postcond\<rbrace>, \<lbrace>False\<rbrace>",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 21, template_hole 20),
                       template_hole 19),
                     template_var 0),
                   template_app (template_hole 18, t_empty)),
                 template_app
                  (template_hole 16,
                   template_app
                    (template_app (template_hole 15, t_empty),
                     template_app
                      (template_app (template_hole 8, template_hole 7),
                       template_app
                        (template_hole 6,
                         template_app
                          (template_hole 5, template_hole 4)))))),
               template_app
                (template_hole 3,
                 template_app
                  (template_app (template_hole 2, t_empty),
                   template_app
                    (template_app (template_hole 8, template_hole 7),
                     template_app
                      (template_hole 6,
                       template_app (template_hole 5, template_hole 4)))))),
             template_app (template_hole 18, t_empty)),
           template_app (template_hole 18, t_empty))
         )),
    ("SumArr.inter_aux_call_sumarr",
     "[| ?i < 2; ?j < 2; ?i ~= ?j |]
      ==> interfree_aux \<Gamma> \<Theta> ?F
           (com (call_sumarr ?i),
            (ann (call_sumarr ?i),
             \<lbrace>\<acute>local_postcond ?i\<rbrace>, {}),
            com (call_sumarr ?j), ann (call_sumarr ?j))",
     template_implication
      ([template_inequation
         (less_than, template_var 2,
          template_app
           (template_hole 18,
            template_app (template_hole 17, template_hole 16))),
        template_inequation
         (less_than, template_var 1,
          template_app
           (template_hole 18,
            template_app (template_hole 17, template_hole 16))),
        template_negation
         (template_equation (template_var 2, template_var 1))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 13, template_hole 12),
                 template_hole 11),
               template_var 0),
             template_app
              (template_app
                (template_hole 10,
                 template_app
                  (template_hole 9,
                   template_app (template_hole 8, template_var 2))),
               template_app
                (template_app
                  (template_hole 7,
                   template_app
                    (template_app
                      (template_hole 6,
                       template_app
                        (template_hole 5,
                         template_app (template_hole 8, template_var 2))),
                     template_app
                      (template_app
                        (template_hole 4,
                         template_app (template_hole 3, t_empty)),
                       template_hole 1))),
                 template_app
                  (template_app
                    (template_hole 0,
                     template_app
                      (template_hole 9,
                       template_app (template_hole 8, template_var 1))),
                   template_app
                    (template_hole 5,
                     template_app (template_hole 8, template_var 1))))))
           ))),
    ("SumArr.sumarr_proc_simp",
     "?n < 2 ==> \<Gamma> (''lock'', ?n) = Some (com (lock ?n))",
     template_implication
      ([template_inequation
         (less_than, template_var 0,
          template_app
           (template_hole 13,
            template_app (template_hole 12, template_hole 11)))],
       template_equation
        (template_app
          (template_hole 9,
           template_app
            (template_app
              (template_hole 8,
               template_app
                (template_app
                  (template_hole 7,
                   template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_hole 6, template_hole 5),
                                 template_hole 5),
                               template_hole 4),
                             template_hole 4),
                           template_hole 5),
                         template_hole 4),
                       template_hole 4),
                     template_hole 5)),
                 template_app
                  (template_app
                    (template_hole 7,
                     template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_hole 6, template_hole 4),
                                   template_hole 4),
                                 template_hole 4),
                               template_hole 4),
                             template_hole 5),
                           template_hole 4),
                         template_hole 4),
                       template_hole 5)),
                   template_app
                    (template_app
                      (template_hole 7,
                       template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_hole 6, template_hole 4),
                                     template_hole 4),
                                   template_hole 5),
                                 template_hole 5),
                               template_hole 5),
                             template_hole 4),
                           template_hole 4),
                         template_hole 5)),
                     template_app
                      (template_app
                        (template_hole 7,
                         template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app (template_hole 6, template_hole 4), template_hole 4),
                                     template_hole 5),
                                   template_hole 4),
                                 template_hole 5),
                               template_hole 4),
                             template_hole 4),
                           template_hole 5)),
                       template_hole 3))))),
             template_var 0)),
         template_app
          (template_hole 2,
           template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 0)))))),
    ("SumArr.sumarr_proc_simp",
     "?n < 2 ==> \<Theta> (''lock'', ?n) = Some [ann (lock ?n)]",
     template_implication
      ([template_inequation
         (less_than, template_var 0,
          template_app
           (template_hole 15,
            template_app (template_hole 14, template_hole 13)))],
       template_equation
        (template_app
          (template_hole 11,
           template_app
            (template_app
              (template_hole 10,
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_hole 8, template_hole 7),
                                 template_hole 7),
                               template_hole 6),
                             template_hole 6),
                           template_hole 7),
                         template_hole 6),
                       template_hole 6),
                     template_hole 7)),
                 template_app
                  (template_app
                    (template_hole 9,
                     template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_hole 8, template_hole 6),
                                   template_hole 6),
                                 template_hole 6),
                               template_hole 6),
                             template_hole 7),
                           template_hole 6),
                         template_hole 6),
                       template_hole 7)),
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_hole 8, template_hole 6),
                                     template_hole 6),
                                   template_hole 7),
                                 template_hole 7),
                               template_hole 7),
                             template_hole 6),
                           template_hole 6),
                         template_hole 7)),
                     template_app
                      (template_app
                        (template_hole 9,
                         template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app (template_hole 8, template_hole 6), template_hole 6),
                                     template_hole 7),
                                   template_hole 6),
                                 template_hole 7),
                               template_hole 6),
                             template_hole 6),
                           template_hole 7)),
                       template_hole 5))))),
             template_var 0)),
         template_app
          (template_hole 4,
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_hole 2,
                 template_app (template_hole 1, template_var 0))),
             template_hole 0))))),
    ("SumArr.sumarr_proc_simp_unfolded",
     "?n < 2 ==>
      \<Gamma> (''lock'', ?n) =
      Some
       (Await \<lbrace>\<acute>glock = 0\<rbrace>
         (Seq (Basic (glock_update (%_. 1)))
           (Basic (%s. s(| ghost_lock := (ghost_lock s)(?n := True) |)))))",
     template_implication
      ([template_inequation
         (less_than, template_var 0,
          template_app
           (template_hole 23,
            template_app (template_hole 22, template_hole 21)))],
       template_equation
        (template_app
          (template_hole 19,
           template_app
            (template_app
              (template_hole 18,
               template_app
                (template_app
                  (template_hole 17,
                   template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_hole 16, template_hole 15),
                                 template_hole 15),
                               template_hole 14),
                             template_hole 14),
                           template_hole 15),
                         template_hole 14),
                       template_hole 14),
                     template_hole 15)),
                 template_app
                  (template_app
                    (template_hole 17,
                     template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_hole 16, template_hole 14),
                                   template_hole 14),
                                 template_hole 14),
                               template_hole 14),
                             template_hole 15),
                           template_hole 14),
                         template_hole 14),
                       template_hole 15)),
                   template_app
                    (template_app
                      (template_hole 17,
                       template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_hole 16, template_hole 14),
                                     template_hole 14),
                                   template_hole 15),
                                 template_hole 15),
                               template_hole 15),
                             template_hole 14),
                           template_hole 14),
                         template_hole 15)),
                     template_app
                      (template_app
                        (template_hole 17,
                         template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app (template_hole 16, template_hole 14), template_hole 14),
                                     template_hole 15),
                                   template_hole 14),
                                 template_hole 15),
                               template_hole 14),
                             template_hole 14),
                           template_hole 15)),
                       template_hole 13))))),
             template_var 0)),
         template_app
          (template_hole 12,
           template_app
            (template_app
              (template_hole 11, template_app (template_hole 10, t_empty)),
             template_app
              (template_app
                (template_hole 6,
                 template_app
                  (template_hole 5,
                   template_app (template_hole 4, t_empty))),
               template_app (template_hole 5, t_empty))))))),
    ("SumArr.sumarr_proc_simp",
     "?n < 2 ==> \<Gamma> (''unlock'', ?n) = Some (com (unlock ?n))",
     template_implication
      ([template_inequation
         (less_than, template_var 0,
          template_app
           (template_hole 13,
            template_app (template_hole 12, template_hole 11)))],
       template_equation
        (template_app
          (template_hole 9,
           template_app
            (template_app
              (template_hole 8,
               template_app
                (template_app
                  (template_hole 7,
                   template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_hole 6, template_hole 5),
                                 template_hole 4),
                               template_hole 5),
                             template_hole 4),
                           template_hole 5),
                         template_hole 5),
                       template_hole 5),
                     template_hole 4)),
                 template_app
                  (template_app
                    (template_hole 7,
                     template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_hole 6, template_hole 4),
                                   template_hole 5),
                                 template_hole 5),
                               template_hole 5),
                             template_hole 4),
                           template_hole 5),
                         template_hole 5),
                       template_hole 4)),
                   template_app
                    (template_app
                      (template_hole 7,
                       template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_hole 6, template_hole 4),
                                     template_hole 4),
                                   template_hole 5),
                                 template_hole 5),
                               template_hole 4),
                             template_hole 5),
                           template_hole 5),
                         template_hole 4)),
                     template_app
                      (template_app
                        (template_hole 7,
                         template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app (template_hole 6, template_hole 5), template_hole 5),
                                     template_hole 5),
                                   template_hole 5),
                                 template_hole 4),
                               template_hole 5),
                             template_hole 5),
                           template_hole 4)),
                       template_app
                        (template_app
                          (template_hole 7,
                           template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app
  (template_app (template_hole 6, template_hole 5), template_hole 5),
 template_hole 4),
                                     template_hole 4),
                                   template_hole 4),
                                 template_hole 5),
                               template_hole 5),
                             template_hole 4)),
                         template_app
                          (template_app
                            (template_hole 7,
                             template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app
  (template_app
    (template_app (template_hole 6, template_hole 5), template_hole 5),
   template_hole 4),
 template_hole 5),
                                     template_hole 4),
                                   template_hole 5),
                                 template_hole 5),
                               template_hole 4)),
                           template_hole 3))))))),
             template_var 0)),
         template_app
          (template_hole 2,
           template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 0)))))),
    ("SumArr.sumarr_proc_simp",
     "?n < 2 ==> \<Gamma> (''sumarr'', ?n) = Some (com (sumarr ?n))",
     template_implication
      ([template_inequation
         (less_than, template_var 0,
          template_app
           (template_hole 13,
            template_app (template_hole 12, template_hole 11)))],
       template_equation
        (template_app
          (template_hole 9,
           template_app
            (template_app
              (template_hole 8,
               template_app
                (template_app
                  (template_hole 7,
                   template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_hole 6, template_hole 5),
                                 template_hole 5),
                               template_hole 4),
                             template_hole 4),
                           template_hole 5),
                         template_hole 5),
                       template_hole 5),
                     template_hole 4)),
                 template_app
                  (template_app
                    (template_hole 7,
                     template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_hole 6, template_hole 5),
                                   template_hole 4),
                                 template_hole 5),
                               template_hole 4),
                             template_hole 5),
                           template_hole 5),
                         template_hole 5),
                       template_hole 4)),
                   template_app
                    (template_app
                      (template_hole 7,
                       template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_hole 6, template_hole 5),
                                     template_hole 4),
                                   template_hole 5),
                                 template_hole 5),
                               template_hole 4),
                             template_hole 5),
                           template_hole 5),
                         template_hole 4)),
                     template_app
                      (template_app
                        (template_hole 7,
                         template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app (template_hole 6, template_hole 5), template_hole 4),
                                     template_hole 4),
                                   template_hole 4),
                                 template_hole 4),
                               template_hole 5),
                             template_hole 5),
                           template_hole 4)),
                       template_app
                        (template_app
                          (template_hole 7,
                           template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app
  (template_app (template_hole 6, template_hole 4), template_hole 5),
 template_hole 4),
                                     template_hole 4),
                                   template_hole 5),
                                 template_hole 5),
                               template_hole 5),
                             template_hole 4)),
                         template_app
                          (template_app
                            (template_hole 7,
                             template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app
  (template_app
    (template_app (template_hole 6, template_hole 4), template_hole 5),
   template_hole 4),
 template_hole 4),
                                     template_hole 5),
                                   template_hole 5),
                                 template_hole 5),
                               template_hole 4)),
                           template_hole 3))))))),
             template_var 0)),
         template_app
          (template_hole 2,
           template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 0)))))),
    ("SumArr.sumarr_proc_simp",
     "?n < 2 ==> \<Theta> (''unlock'', ?n) = Some [ann (unlock ?n)]",
     template_implication
      ([template_inequation
         (less_than, template_var 0,
          template_app
           (template_hole 15,
            template_app (template_hole 14, template_hole 13)))],
       template_equation
        (template_app
          (template_hole 11,
           template_app
            (template_app
              (template_hole 10,
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_hole 8, template_hole 7),
                                 template_hole 6),
                               template_hole 7),
                             template_hole 6),
                           template_hole 7),
                         template_hole 7),
                       template_hole 7),
                     template_hole 6)),
                 template_app
                  (template_app
                    (template_hole 9,
                     template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_hole 8, template_hole 6),
                                   template_hole 7),
                                 template_hole 7),
                               template_hole 7),
                             template_hole 6),
                           template_hole 7),
                         template_hole 7),
                       template_hole 6)),
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_hole 8, template_hole 6),
                                     template_hole 6),
                                   template_hole 7),
                                 template_hole 7),
                               template_hole 6),
                             template_hole 7),
                           template_hole 7),
                         template_hole 6)),
                     template_app
                      (template_app
                        (template_hole 9,
                         template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app (template_hole 8, template_hole 7), template_hole 7),
                                     template_hole 7),
                                   template_hole 7),
                                 template_hole 6),
                               template_hole 7),
                             template_hole 7),
                           template_hole 6)),
                       template_app
                        (template_app
                          (template_hole 9,
                           template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app
  (template_app (template_hole 8, template_hole 7), template_hole 7),
 template_hole 6),
                                     template_hole 6),
                                   template_hole 6),
                                 template_hole 7),
                               template_hole 7),
                             template_hole 6)),
                         template_app
                          (template_app
                            (template_hole 9,
                             template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app
  (template_app
    (template_app (template_hole 8, template_hole 7), template_hole 7),
   template_hole 6),
 template_hole 7),
                                     template_hole 6),
                                   template_hole 7),
                                 template_hole 7),
                               template_hole 6)),
                           template_hole 5))))))),
             template_var 0)),
         template_app
          (template_hole 4,
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_hole 2,
                 template_app (template_hole 1, template_var 0))),
             template_hole 0))))),
    ("SumArr.sumarr_proc_simp",
     "?n < 2 ==> \<Theta> (''sumarr'', ?n) = Some [ann (sumarr ?n)]",
     template_implication
      ([template_inequation
         (less_than, template_var 0,
          template_app
           (template_hole 15,
            template_app (template_hole 14, template_hole 13)))],
       template_equation
        (template_app
          (template_hole 11,
           template_app
            (template_app
              (template_hole 10,
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_hole 8, template_hole 7),
                                 template_hole 7),
                               template_hole 6),
                             template_hole 6),
                           template_hole 7),
                         template_hole 7),
                       template_hole 7),
                     template_hole 6)),
                 template_app
                  (template_app
                    (template_hole 9,
                     template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_hole 8, template_hole 7),
                                   template_hole 6),
                                 template_hole 7),
                               template_hole 6),
                             template_hole 7),
                           template_hole 7),
                         template_hole 7),
                       template_hole 6)),
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_hole 8, template_hole 7),
                                     template_hole 6),
                                   template_hole 7),
                                 template_hole 7),
                               template_hole 6),
                             template_hole 7),
                           template_hole 7),
                         template_hole 6)),
                     template_app
                      (template_app
                        (template_hole 9,
                         template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app (template_hole 8, template_hole 7), template_hole 6),
                                     template_hole 6),
                                   template_hole 6),
                                 template_hole 6),
                               template_hole 7),
                             template_hole 7),
                           template_hole 6)),
                       template_app
                        (template_app
                          (template_hole 9,
                           template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app
  (template_app (template_hole 8, template_hole 6), template_hole 7),
 template_hole 6),
                                     template_hole 6),
                                   template_hole 7),
                                 template_hole 7),
                               template_hole 7),
                             template_hole 6)),
                         template_app
                          (template_app
                            (template_hole 9,
                             template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app
  (template_app
    (template_app (template_hole 8, template_hole 6), template_hole 7),
   template_hole 6),
 template_hole 6),
                                     template_hole 7),
                                   template_hole 7),
                                 template_hole 7),
                               template_hole 6)),
                           template_hole 5))))))),
             template_var 0)),
         template_app
          (template_hole 4,
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_hole 2,
                 template_app (template_hole 1, template_var 0))),
             template_hole 0))))),
    ("SumArr.sumarr_proc_simp_unfolded",
     "?n < 2 ==>
      \<Gamma> (''unlock'', ?n) =
      Some
       (Await \<lbrace>True\<rbrace>
         (Seq (Basic (glock_update (%_. 0)))
           (Basic
             (%s. s(| ghost_lock := (ghost_lock s)(?n := False) |)))))",
     template_implication
      ([template_inequation
         (less_than, template_var 0,
          template_app
           (template_hole 20,
            template_app (template_hole 19, template_hole 18)))],
       template_equation
        (template_app
          (template_hole 16,
           template_app
            (template_app
              (template_hole 15,
               template_app
                (template_app
                  (template_hole 14,
                   template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_hole 13, template_hole 12),
                                 template_hole 11),
                               template_hole 12),
                             template_hole 11),
                           template_hole 12),
                         template_hole 12),
                       template_hole 12),
                     template_hole 11)),
                 template_app
                  (template_app
                    (template_hole 14,
                     template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_hole 13, template_hole 11),
                                   template_hole 12),
                                 template_hole 12),
                               template_hole 12),
                             template_hole 11),
                           template_hole 12),
                         template_hole 12),
                       template_hole 11)),
                   template_app
                    (template_app
                      (template_hole 14,
                       template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_hole 13, template_hole 11),
                                     template_hole 11),
                                   template_hole 12),
                                 template_hole 12),
                               template_hole 11),
                             template_hole 12),
                           template_hole 12),
                         template_hole 11)),
                     template_app
                      (template_app
                        (template_hole 14,
                         template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app (template_hole 13, template_hole 12), template_hole 12),
                                     template_hole 12),
                                   template_hole 12),
                                 template_hole 11),
                               template_hole 12),
                             template_hole 12),
                           template_hole 11)),
                       template_app
                        (template_app
                          (template_hole 14,
                           template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app
  (template_app (template_hole 13, template_hole 12), template_hole 12),
 template_hole 11),
                                     template_hole 11),
                                   template_hole 11),
                                 template_hole 12),
                               template_hole 12),
                             template_hole 11)),
                         template_app
                          (template_app
                            (template_hole 14,
                             template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app
  (template_app
    (template_app (template_hole 13, template_hole 12), template_hole 12),
   template_hole 11),
 template_hole 12),
                                     template_hole 11),
                                   template_hole 12),
                                 template_hole 12),
                               template_hole 11)),
                           template_hole 10))))))),
             template_var 0)),
         template_app
          (template_hole 9,
           template_app
            (template_app
              (template_hole 8, template_app (template_hole 7, t_empty)),
             template_app
              (template_app
                (template_hole 6,
                 template_app
                  (template_hole 5,
                   template_app (template_hole 4, t_empty))),
               template_app (template_hole 5, t_empty))))))),
    ("SumArr.sumarr_proc_simp_unfolded",
     "?n < 2 ==>
      \<Theta> (''lock'', ?n) =
      Some
       [AnnRec
         \<lbrace>(\<acute>lock_inv &
                   \<acute>tarr_inv ?n &
                   \<acute>garr_inv ?n &
                   \<acute>tid ?n = word_of_nat ?n + 1) &
                  \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
                  \<acute>sumarr_inv_till_lock ?n\<rbrace>
         (AnnComp (AnnExpr FAKE_ANN) (AnnExpr FAKE_ANN))]",
     template_implication
      ([template_inequation
         (less_than, template_var 0,
          template_app
           (template_hole 52,
            template_app (template_hole 51, template_hole 50)))],
       template_equation
        (template_app
          (template_hole 48,
           template_app
            (template_app
              (template_hole 47,
               template_app
                (template_app
                  (template_hole 46,
                   template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_hole 45, template_hole 44),
                                 template_hole 44),
                               template_hole 43),
                             template_hole 43),
                           template_hole 44),
                         template_hole 43),
                       template_hole 43),
                     template_hole 44)),
                 template_app
                  (template_app
                    (template_hole 46,
                     template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_hole 45, template_hole 43),
                                   template_hole 43),
                                 template_hole 43),
                               template_hole 43),
                             template_hole 44),
                           template_hole 43),
                         template_hole 43),
                       template_hole 44)),
                   template_app
                    (template_app
                      (template_hole 46,
                       template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_hole 45, template_hole 43),
                                     template_hole 43),
                                   template_hole 44),
                                 template_hole 44),
                               template_hole 44),
                             template_hole 43),
                           template_hole 43),
                         template_hole 44)),
                     template_app
                      (template_app
                        (template_hole 46,
                         template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app (template_hole 45, template_hole 43), template_hole 43),
                                     template_hole 44),
                                   template_hole 43),
                                 template_hole 44),
                               template_hole 43),
                             template_hole 43),
                           template_hole 44)),
                       template_hole 42))))),
             template_var 0)),
         template_app
          (template_hole 41,
           template_app
            (template_app
              (template_hole 40,
               template_app
                (template_app
                  (template_hole 39,
                   template_app (template_hole 38, t_empty)),
                 template_app
                  (template_app
                    (template_hole 3,
                     template_app (template_hole 2, template_hole 1)),
                   template_app (template_hole 2, template_hole 1)))),
             template_hole 0))))),
    ("SumArr.sumarr_proc_simp_unfolded",
     "?n < 2 ==>
      \<Theta> (''unlock'', ?n) =
      Some
       [AnnRec
         \<lbrace>(\<acute>lock_inv &
                   \<acute>tarr_inv ?n &
                   \<acute>garr_inv ?n &
                   \<acute>tid ?n = word_of_nat ?n + 1) &
                  \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
                  \<acute>glock = 1 &
                  \<acute>ghost_lock ?n &
                  bit \<acute>gdone (unat (\<acute>tid ?n - 1)) &
                  \<acute>sumarr_in_lock2 ?n\<rbrace>
         (AnnComp (AnnExpr FAKE_ANN) (AnnExpr FAKE_ANN))]",
     template_implication
      ([template_inequation
         (less_than, template_var 0,
          template_app
           (template_hole 51,
            template_app (template_hole 50, template_hole 49)))],
       template_equation
        (template_app
          (template_hole 47,
           template_app
            (template_app
              (template_hole 46,
               template_app
                (template_app
                  (template_hole 45,
                   template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_hole 44, template_hole 43),
                                 template_hole 42),
                               template_hole 43),
                             template_hole 42),
                           template_hole 43),
                         template_hole 43),
                       template_hole 43),
                     template_hole 42)),
                 template_app
                  (template_app
                    (template_hole 45,
                     template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_hole 44, template_hole 42),
                                   template_hole 43),
                                 template_hole 43),
                               template_hole 43),
                             template_hole 42),
                           template_hole 43),
                         template_hole 43),
                       template_hole 42)),
                   template_app
                    (template_app
                      (template_hole 45,
                       template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_hole 44, template_hole 42),
                                     template_hole 42),
                                   template_hole 43),
                                 template_hole 43),
                               template_hole 42),
                             template_hole 43),
                           template_hole 43),
                         template_hole 42)),
                     template_app
                      (template_app
                        (template_hole 45,
                         template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app (template_hole 44, template_hole 43), template_hole 43),
                                     template_hole 43),
                                   template_hole 43),
                                 template_hole 42),
                               template_hole 43),
                             template_hole 43),
                           template_hole 42)),
                       template_app
                        (template_app
                          (template_hole 45,
                           template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app
  (template_app (template_hole 44, template_hole 43), template_hole 43),
 template_hole 42),
                                     template_hole 42),
                                   template_hole 42),
                                 template_hole 43),
                               template_hole 43),
                             template_hole 42)),
                         template_app
                          (template_app
                            (template_hole 45,
                             template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app
  (template_app
    (template_app (template_hole 44, template_hole 43), template_hole 43),
   template_hole 42),
 template_hole 43),
                                     template_hole 42),
                                   template_hole 43),
                                 template_hole 43),
                               template_hole 42)),
                           template_hole 41))))))),
             template_var 0)),
         template_app
          (template_hole 40,
           template_app
            (template_app
              (template_hole 39,
               template_app
                (template_app
                  (template_hole 38,
                   template_app (template_hole 37, t_empty)),
                 template_app
                  (template_app
                    (template_hole 3,
                     template_app (template_hole 2, template_hole 1)),
                   template_app (template_hole 2, template_hole 1)))),
             template_hole 0))))),
    ("SumArr.sumarr_proc_simp_unfolded",
     "[AnnRec
        \<lbrace>(\<acute>lock_inv &
                  \<acute>tarr_inv ?n &
                  \<acute>garr_inv ?n &
                  \<acute>tid ?n = word_of_nat ?n + 1) &
                 \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
                 \<acute>glock = 1 &
                 \<acute>ghost_lock ?n &
                 bit \<acute>gdone (unat (\<acute>tid ?n - 1)) &
                 \<acute>sumarr_in_lock2 ?n\<rbrace>
        (AnnComp (AnnExpr FAKE_ANN) (AnnExpr FAKE_ANN))] !
      0 =
      AnnRec
       \<lbrace>(\<acute>lock_inv &
                 \<acute>tarr_inv ?n &
                 \<acute>garr_inv ?n &
                 \<acute>tid ?n = word_of_nat ?n + 1) &
                \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
                \<acute>glock = 1 &
                \<acute>ghost_lock ?n &
                bit \<acute>gdone (unat (\<acute>tid ?n - 1)) &
                \<acute>sumarr_in_lock2 ?n\<rbrace>
       (AnnComp (AnnExpr FAKE_ANN) (AnnExpr FAKE_ANN))",
     template_equation
      (template_app
        (template_app
          (template_hole 40,
           template_app
            (template_app
              (template_hole 39,
               template_app
                (template_app
                  (template_hole 38,
                   template_app (template_hole 37, t_empty)),
                 template_app
                  (template_app
                    (template_hole 3,
                     template_app (template_hole 2, template_hole 1)),
                   template_app (template_hole 2, template_hole 1)))),
             template_hole 0)),
         template_hole 30),
       template_app
        (template_app
          (template_hole 38, template_app (template_hole 37, t_empty)),
         template_app
          (template_app
            (template_hole 3,
             template_app (template_hole 2, template_hole 1)),
           template_app (template_hole 2, template_hole 1))))),
    ("SumArr.sumarr_proc_simp_unfolded",
     "[AnnRec
        \<lbrace>(\<acute>lock_inv &
                  \<acute>tarr_inv ?n &
                  \<acute>garr_inv ?n &
                  \<acute>tid ?n = word_of_nat ?n + 1) &
                 \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
                 \<acute>sumarr_inv_till_lock ?n\<rbrace>
        (AnnComp (AnnExpr FAKE_ANN) (AnnExpr FAKE_ANN))] !
      0 =
      AnnRec
       \<lbrace>(\<acute>lock_inv &
                 \<acute>tarr_inv ?n &
                 \<acute>garr_inv ?n &
                 \<acute>tid ?n = word_of_nat ?n + 1) &
                \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
                \<acute>sumarr_inv_till_lock ?n\<rbrace>
       (AnnComp (AnnExpr FAKE_ANN) (AnnExpr FAKE_ANN))",
     template_equation
      (template_app
        (template_app
          (template_hole 41,
           template_app
            (template_app
              (template_hole 40,
               template_app
                (template_app
                  (template_hole 39,
                   template_app (template_hole 38, t_empty)),
                 template_app
                  (template_app
                    (template_hole 3,
                     template_app (template_hole 2, template_hole 1)),
                   template_app (template_hole 2, template_hole 1)))),
             template_hole 0)),
         template_hole 31),
       template_app
        (template_app
          (template_hole 39, template_app (template_hole 38, t_empty)),
         template_app
          (template_app
            (template_hole 3,
             template_app (template_hole 2, template_hole 1)),
           template_app (template_hole 2, template_hole 1))))),
    ("SumArr.sumarr_proc_simp_unfolded",
     "?n < 2 ==>
      \<Gamma> (''sumarr'', ?n) =
      Some
       (Seq (Seq (Seq (Seq (Seq (Seq (Basic
 (%s. s(| tsum := (tsum s)(?n := 0) |)))
                                  (Basic
                                    (%s. s(| ti := (ti s)(?n := 0) |))))
                             (Catch
                               (While \<lbrace>\<acute>ti ?n < NSUM\<rbrace>
                                 (Seq (Seq
  (Guard
    (fst (InvalidMem,
          \<lbrace>array_in_bound (\<acute>tarr ?n)
                    (\<acute>ti ?n)\<rbrace>))
    (snd (InvalidMem,
          \<lbrace>array_in_bound (\<acute>tarr ?n)
                    (\<acute>ti ?n)\<rbrace>))
    (Basic
      (%s. s(| tsum := (tsum s)
                 (?n := tsum s ?n + array_nth (tarr s ?n) (ti s ?n)) |))))
  (Guard
    (fst (InvalidMem,
          \<lbrace>array_in_bound (\<acute>tarr ?n)
                    (\<acute>ti ?n)\<rbrace>))
    (snd (InvalidMem,
          \<lbrace>array_in_bound (\<acute>tarr ?n)
                    (\<acute>ti ?n)\<rbrace>))
    (Cond
      \<lbrace>MAXSUM <= array_nth (\<acute>tarr ?n) (\<acute>ti ?n) |
               MAXSUM <= \<acute>tsum ?n\<rbrace>
      (Seq (Basic (%s. s(| tsum := (tsum s)(?n := MAXSUM) |))) Throw)
      Skip)))
                                   (Basic
                                     (%s. s
   (| ti := (ti s)(?n := ti s ?n + 1) |)))))
                               Skip))
                        (Call (''lock'', ?n)))
                   (Basic (%s. s(| gsum := gsum s + tsum s ?n |))))
              (Basic (%s. s(| gdone := gdone s || tid s ?n |))))
         (Call (''unlock'', ?n)))",
     template_implication
      ([template_inequation
         (less_than, template_var 0,
          template_app
           (template_hole 47,
            template_app (template_hole 46, template_hole 45)))],
       template_equation
        (template_app
          (template_hole 43,
           template_app
            (template_app
              (template_hole 42,
               template_app
                (template_app
                  (template_hole 41,
                   template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_hole 40, template_hole 39),
                                 template_hole 39),
                               template_hole 38),
                             template_hole 38),
                           template_hole 39),
                         template_hole 39),
                       template_hole 39),
                     template_hole 38)),
                 template_app
                  (template_app
                    (template_hole 41,
                     template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_hole 40, template_hole 39),
                                   template_hole 38),
                                 template_hole 39),
                               template_hole 38),
                             template_hole 39),
                           template_hole 39),
                         template_hole 39),
                       template_hole 38)),
                   template_app
                    (template_app
                      (template_hole 41,
                       template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_hole 40, template_hole 39),
                                     template_hole 38),
                                   template_hole 39),
                                 template_hole 39),
                               template_hole 38),
                             template_hole 39),
                           template_hole 39),
                         template_hole 38)),
                     template_app
                      (template_app
                        (template_hole 41,
                         template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app (template_hole 40, template_hole 39), template_hole 38),
                                     template_hole 38),
                                   template_hole 38),
                                 template_hole 38),
                               template_hole 39),
                             template_hole 39),
                           template_hole 38)),
                       template_app
                        (template_app
                          (template_hole 41,
                           template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app
  (template_app (template_hole 40, template_hole 38), template_hole 39),
 template_hole 38),
                                     template_hole 38),
                                   template_hole 39),
                                 template_hole 39),
                               template_hole 39),
                             template_hole 38)),
                         template_app
                          (template_app
                            (template_hole 41,
                             template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app
  (template_app
    (template_app (template_hole 40, template_hole 38), template_hole 39),
   template_hole 38),
 template_hole 38),
                                     template_hole 39),
                                   template_hole 39),
                                 template_hole 39),
                               template_hole 38)),
                           template_hole 37))))))),
             template_var 0)),
         template_app
          (template_hole 36,
           template_app
            (template_app
              (template_hole 35,
               template_app
                (template_app
                  (template_hole 35,
                   template_app
                    (template_app
                      (template_hole 35,
                       template_app
                        (template_app
                          (template_hole 35,
                           template_app
                            (template_app
                              (template_hole 35,
                               template_app
                                (template_app
                                  (template_hole 35,
                                   template_app
                                    (template_hole 34, t_empty)),
                                 template_app (template_hole 34, t_empty))),
                             template_app
                              (template_app
                                (template_hole 27,
                                 template_app
                                  (template_app
                                    (template_hole 26,
                                     template_app
(template_hole 25, t_empty)),
                                   template_app
                                    (template_app
(template_hole 35,
 template_app
  (template_app
    (template_hole 35,
     template_app
      (template_app
        (template_app
          (template_hole 22,
           template_app
            (template_hole 21,
             template_app
              (template_app (template_hole 20, template_hole 19),
               template_app (template_hole 25, t_empty)))),
         template_app
          (template_hole 16,
           template_app
            (template_app (template_hole 20, template_hole 19),
             template_app (template_hole 25, t_empty)))),
       template_app (template_hole 34, t_empty))),
   template_app
    (template_app
      (template_app
        (template_hole 22,
         template_app
          (template_hole 21,
           template_app
            (template_app (template_hole 20, template_hole 19),
             template_app (template_hole 25, t_empty)))),
       template_app
        (template_hole 16,
         template_app
          (template_app (template_hole 20, template_hole 19),
           template_app (template_hole 25, t_empty)))),
     template_app
      (template_app
        (template_app
          (template_hole 13, template_app (template_hole 25, t_empty)),
         template_app
          (template_app
            (template_hole 35, template_app (template_hole 34, t_empty)),
           template_hole 9)),
       template_hole 8)))),
                                     template_app
(template_hole 34, t_empty)))),
                               template_hole 8))),
                         template_app
                          (template_hole 6,
                           template_app
                            (template_app
                              (template_hole 42,
                               template_app
                                (template_app
                                  (template_hole 41,
                                   template_app
                                    (template_app
(template_app
  (template_app
    (template_app
      (template_app
        (template_app
          (template_app (template_hole 40, template_hole 38),
           template_hole 38),
         template_hole 39),
       template_hole 39),
     template_hole 38),
   template_hole 39),
 template_hole 39),
                                     template_hole 38)),
                                 template_app
                                  (template_app
                                    (template_hole 41,
                                     template_app
(template_app
  (template_app
    (template_app
      (template_app
        (template_app
          (template_app
            (template_app (template_hole 40, template_hole 39),
             template_hole 39),
           template_hole 39),
         template_hole 39),
       template_hole 38),
     template_hole 39),
   template_hole 39),
 template_hole 38)),
                                   template_app
                                    (template_app
(template_hole 41,
 template_app
  (template_app
    (template_app
      (template_app
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 40, template_hole 39),
               template_hole 39),
             template_hole 38),
           template_hole 38),
         template_hole 38),
       template_hole 39),
     template_hole 39),
   template_hole 38)),
                                     template_app
(template_app
  (template_hole 41,
   template_app
    (template_app
      (template_app
        (template_app
          (template_app
            (template_app
              (template_app
                (template_app (template_hole 40, template_hole 39),
                 template_hole 39),
               template_hole 38),
             template_hole 39),
           template_hole 38),
         template_hole 39),
       template_hole 39),
     template_hole 38)),
 template_hole 37))))),
                             template_var 0)))),
                     template_app (template_hole 34, t_empty))),
                 template_app (template_hole 34, t_empty))),
             template_app
              (template_hole 6,
               template_app
                (template_app
                  (template_hole 42,
                   template_app
                    (template_app
                      (template_hole 41,
                       template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_hole 40, template_hole 39),
                                     template_hole 38),
                                   template_hole 39),
                                 template_hole 38),
                               template_hole 39),
                             template_hole 39),
                           template_hole 39),
                         template_hole 38)),
                     template_app
                      (template_app
                        (template_hole 41,
                         template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app (template_hole 40, template_hole 38), template_hole 39),
                                     template_hole 39),
                                   template_hole 39),
                                 template_hole 38),
                               template_hole 39),
                             template_hole 39),
                           template_hole 38)),
                       template_app
                        (template_app
                          (template_hole 41,
                           template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app
  (template_app (template_hole 40, template_hole 38), template_hole 38),
 template_hole 39),
                                     template_hole 39),
                                   template_hole 38),
                                 template_hole 39),
                               template_hole 39),
                             template_hole 38)),
                         template_app
                          (template_app
                            (template_hole 41,
                             template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app
  (template_app
    (template_app (template_hole 40, template_hole 39), template_hole 39),
   template_hole 39),
 template_hole 39),
                                     template_hole 38),
                                   template_hole 39),
                                 template_hole 39),
                               template_hole 38)),
                           template_app
                            (template_app
                              (template_hole 41,
                               template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app
  (template_app
    (template_app
      (template_app (template_hole 40, template_hole 39), template_hole 39),
     template_hole 38),
   template_hole 38),
 template_hole 38),
                                     template_hole 39),
                                   template_hole 39),
                                 template_hole 38)),
                             template_app
                              (template_app
                                (template_hole 41,
                                 template_app
                                  (template_app
                                    (template_app
(template_app
  (template_app
    (template_app
      (template_app
        (template_app (template_hole 40, template_hole 39),
         template_hole 39),
       template_hole 38),
     template_hole 39),
   template_hole 38),
 template_hole 39),
                                     template_hole 39),
                                   template_hole 38)),
                               template_hole 37))))))),
                 template_var 0))))))),
    ("SumArr.sumarr_proc_simp_unfolded",
     "?n < 2 ==>
      \<Theta> (''sumarr'', ?n) =
      Some
       [AnnComp
         (AnnComp
           (AnnComp
             (AnnComp
               (AnnComp
                 (AnnComp
                   (AnnExpr
                     \<lbrace>(\<acute>lock_inv &
                               \<acute>tarr_inv ?n &
                               \<acute>garr_inv ?n &
                               \<acute>tid ?n = word_of_nat ?n + 1) &
                              \<acute>sumarr_inv_till_lock ?n\<rbrace>)
                   (AnnExpr
                     \<lbrace>\<acute>tsum ?n = 0 &
                              (\<acute>lock_inv &
                               \<acute>tarr_inv ?n &
                               \<acute>garr_inv ?n &
                               \<acute>tid ?n = word_of_nat ?n + 1) &
                              \<acute>sumarr_inv_till_lock ?n\<rbrace>))
                 (AnnComp
                   (AnnWhile
                     \<lbrace>\<acute>tsum ?n = 0 &
                              (\<acute>lock_inv &
                               \<acute>tarr_inv ?n &
                               \<acute>garr_inv ?n &
                               \<acute>tid ?n = word_of_nat ?n + 1) &
                              \<acute>ti ?n = 0 &
                              \<acute>sumarr_inv_till_lock ?n\<rbrace>
                     \<lbrace>(\<acute>lock_inv &
                               \<acute>tarr_inv ?n &
                               \<acute>garr_inv ?n &
                               \<acute>tid ?n = word_of_nat ?n + 1) &
                              \<acute>ti ?n <= NSUM &
                              \<acute>tsum ?n <= MAXSUM &
                              \<acute>tsum ?n =
                              local_sum
                               (take (unat (\<acute>ti ?n))
                                 (\<acute>tarr ?n)) &
                              \<acute>sumarr_inv_till_lock ?n\<rbrace>
                     (AnnComp
                       (AnnComp
                         (AnnRec
                           \<lbrace>(\<acute>lock_inv &
                                     \<acute>tarr_inv ?n &
                                     \<acute>garr_inv ?n &
                                     \<acute>tid ?n = word_of_nat ?n + 1) &
                                    \<acute>ti ?n < NSUM &
                                    \<acute>tsum ?n <= MAXSUM &
                                    \<acute>tsum ?n =
                                    local_sum
                                     (take (unat (\<acute>ti ?n))
 (\<acute>tarr ?n)) &
                                    \<acute>sumarr_inv_till_lock ?n\<rbrace>
                           (AnnExpr
                             \<lbrace>(\<acute>lock_inv &
 \<acute>tarr_inv ?n &
 \<acute>garr_inv ?n & \<acute>tid ?n = word_of_nat ?n + 1) &
\<acute>ti ?n < NSUM &
\<acute>tsum ?n <= MAXSUM &
\<acute>tsum ?n =
local_sum (take (unat (\<acute>ti ?n)) (\<acute>tarr ?n)) &
\<acute>sumarr_inv_till_lock ?n\<rbrace>))
                         (AnnRec
                           \<lbrace>(\<acute>lock_inv &
                                     \<acute>tarr_inv ?n &
                                     \<acute>garr_inv ?n &
                                     \<acute>tid ?n = word_of_nat ?n + 1) &
                                    \<acute>ti ?n < NSUM &
                                    local_sum
                                     (take (unat (\<acute>ti ?n))
 (\<acute>tarr ?n))
                                    <= MAXSUM &
                                    (\<acute>tsum ?n < MAXSUM &
                                     array_nth (\<acute>tarr ?n)
(\<acute>ti ?n)
                                     < MAXSUM -->
                                     \<acute>tsum ?n =
                                     local_sum
(take (Suc (unat (\<acute>ti ?n))) (\<acute>tarr ?n))) &
                                    (MAXSUM
                                     <= array_nth (\<acute>tarr ?n)
   (\<acute>ti ?n) |
                                     MAXSUM <= \<acute>tsum ?n -->
                                     local_sum (\<acute>tarr ?n) = MAXSUM) &
                                    \<acute>sumarr_inv_till_lock ?n\<rbrace>
                           (AnnBin
                             \<lbrace>(\<acute>lock_inv &
 \<acute>tarr_inv ?n &
 \<acute>garr_inv ?n & \<acute>tid ?n = word_of_nat ?n + 1) &
\<acute>ti ?n < NSUM &
(\<acute>tsum ?n < MAXSUM &
 array_nth (\<acute>tarr ?n) (\<acute>ti ?n) < MAXSUM -->
 \<acute>tsum ?n =
 local_sum (take (Suc (unat (\<acute>ti ?n))) (\<acute>tarr ?n))) &
(MAXSUM <= array_nth (\<acute>tarr ?n) (\<acute>ti ?n) |
 MAXSUM <= \<acute>tsum ?n -->
 local_sum (\<acute>tarr ?n) = MAXSUM) &
\<acute>sumarr_inv_till_lock ?n\<rbrace>
                             (AnnComp
                               (AnnExpr
                                 \<lbrace>(\<acute>lock_inv &
     \<acute>tarr_inv ?n &
     \<acute>garr_inv ?n & \<acute>tid ?n = word_of_nat ?n + 1) &
    \<acute>ti ?n < NSUM &
    local_sum (\<acute>tarr ?n) = MAXSUM &
    \<acute>sumarr_inv_till_lock ?n\<rbrace>)
                               (AnnExpr
                                 \<lbrace>(\<acute>lock_inv &
     \<acute>tarr_inv ?n &
     \<acute>garr_inv ?n & \<acute>tid ?n = word_of_nat ?n + 1) &
    \<acute>ti ?n < NSUM &
    \<acute>tsum ?n <= MAXSUM &
    \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
    \<acute>sumarr_inv_till_lock ?n\<rbrace>))
                             (AnnExpr
                               \<lbrace>(\<acute>lock_inv &
   \<acute>tarr_inv ?n &
   \<acute>garr_inv ?n & \<acute>tid ?n = word_of_nat ?n + 1) &
  \<acute>ti ?n < NSUM &
  \<acute>tsum ?n <= MAXSUM &
  \<acute>tsum ?n =
  local_sum (take (Suc (unat (\<acute>ti ?n))) (\<acute>tarr ?n)) &
  \<acute>sumarr_inv_till_lock ?n\<rbrace>))))
                       (AnnExpr
                         \<lbrace>(\<acute>lock_inv &
                                   \<acute>tarr_inv ?n &
                                   \<acute>garr_inv ?n &
                                   \<acute>tid ?n = word_of_nat ?n + 1) &
                                  \<acute>ti ?n < NSUM &
                                  \<acute>tsum ?n <= MAXSUM &
                                  \<acute>tsum ?n =
                                  local_sum
                                   (take (Suc (unat (\<acute>ti ?n)))
                                     (\<acute>tarr ?n)) &
                                  \<acute>sumarr_inv_till_lock
                                   ?n\<rbrace>)))
                   (AnnExpr
                     \<lbrace>(\<acute>lock_inv &
                               \<acute>tarr_inv ?n &
                               \<acute>garr_inv ?n &
                               \<acute>tid ?n = word_of_nat ?n + 1) &
                              \<acute>tsum ?n =
                              local_sum (\<acute>tarr ?n) &
                              \<acute>sumarr_inv_till_lock ?n\<rbrace>)))
               (AnnCall
                 \<lbrace>(\<acute>lock_inv &
                           \<acute>tarr_inv ?n &
                           \<acute>garr_inv ?n &
                           \<acute>tid ?n = word_of_nat ?n + 1) &
                          \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
                          \<acute>sumarr_inv_till_lock ?n\<rbrace>
                 0))
             (AnnExpr
               \<lbrace>(\<acute>lock_inv &
                         \<acute>tarr_inv ?n &
                         \<acute>garr_inv ?n &
                         \<acute>tid ?n = word_of_nat ?n + 1) &
                        \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
                        \<acute>glock = 1 &
                        \<acute>ghost_lock ?n &
                        \<acute>sumarr_inv_till_lock ?n\<rbrace>))
           (AnnExpr
             \<lbrace>(\<acute>lock_inv &
                       \<acute>tarr_inv ?n &
                       \<acute>garr_inv ?n &
                       \<acute>tid ?n = word_of_nat ?n + 1) &
                      \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
                      \<acute>glock = 1 &
                      \<acute>ghost_lock ?n &
                      \<acute>sumarr_in_lock1 ?n\<rbrace>))
         (AnnCall
           \<lbrace>(\<acute>lock_inv &
                     \<acute>tarr_inv ?n &
                     \<acute>garr_inv ?n &
                     \<acute>tid ?n = word_of_nat ?n + 1) &
                    \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
                    \<acute>glock = 1 &
                    \<acute>ghost_lock ?n &
                    bit \<acute>gdone (unat (\<acute>tid ?n - 1)) &
                    \<acute>sumarr_in_lock2 ?n\<rbrace>
           0)]",
     template_implication
      ([template_inequation
         (less_than, template_var 0,
          template_app
           (template_hole 64,
            template_app (template_hole 63, template_hole 62)))],
       template_equation
        (template_app
          (template_hole 60,
           template_app
            (template_app
              (template_hole 59,
               template_app
                (template_app
                  (template_hole 58,
                   template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_hole 57, template_hole 56),
                                 template_hole 56),
                               template_hole 55),
                             template_hole 55),
                           template_hole 56),
                         template_hole 56),
                       template_hole 56),
                     template_hole 55)),
                 template_app
                  (template_app
                    (template_hole 58,
                     template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_hole 57, template_hole 56),
                                   template_hole 55),
                                 template_hole 56),
                               template_hole 55),
                             template_hole 56),
                           template_hole 56),
                         template_hole 56),
                       template_hole 55)),
                   template_app
                    (template_app
                      (template_hole 58,
                       template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_hole 57, template_hole 56),
                                     template_hole 55),
                                   template_hole 56),
                                 template_hole 56),
                               template_hole 55),
                             template_hole 56),
                           template_hole 56),
                         template_hole 55)),
                     template_app
                      (template_app
                        (template_hole 58,
                         template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app (template_hole 57, template_hole 56), template_hole 55),
                                     template_hole 55),
                                   template_hole 55),
                                 template_hole 55),
                               template_hole 56),
                             template_hole 56),
                           template_hole 55)),
                       template_app
                        (template_app
                          (template_hole 58,
                           template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app
  (template_app (template_hole 57, template_hole 55), template_hole 56),
 template_hole 55),
                                     template_hole 55),
                                   template_hole 56),
                                 template_hole 56),
                               template_hole 56),
                             template_hole 55)),
                         template_app
                          (template_app
                            (template_hole 58,
                             template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_app
  (template_app
    (template_app (template_hole 57, template_hole 55), template_hole 56),
   template_hole 55),
 template_hole 55),
                                     template_hole 56),
                                   template_hole 56),
                                 template_hole 56),
                               template_hole 55)),
                           template_hole 54))))))),
             template_var 0)),
         template_app
          (template_hole 53,
           template_app
            (template_app
              (template_hole 52,
               template_app
                (template_app
                  (template_hole 51,
                   template_app
                    (template_app
                      (template_hole 51,
                       template_app
                        (template_app
                          (template_hole 51,
                           template_app
                            (template_app
                              (template_hole 51,
                               template_app
                                (template_app
                                  (template_hole 51,
                                   template_app
                                    (template_app
(template_hole 51,
 template_app (template_hole 50, template_app (template_hole 49, t_empty))),
                                     template_app
(template_hole 50, template_app (template_hole 49, t_empty)))),
                                 template_app
                                  (template_app
                                    (template_hole 51,
                                     template_app
(template_app
  (template_app
    (template_hole 15, template_app (template_hole 49, t_empty)),
   template_app (template_hole 49, t_empty)),
 template_app
  (template_app
    (template_hole 51,
     template_app
      (template_app
        (template_hole 51,
         template_app
          (template_app
            (template_hole 9, template_app (template_hole 49, t_empty)),
           template_app
            (template_hole 50, template_app (template_hole 49, t_empty)))),
       template_app
        (template_app
          (template_hole 9, template_app (template_hole 49, t_empty)),
         template_app
          (template_app
            (template_app
              (template_hole 5, template_app (template_hole 49, t_empty)),
             template_app
              (template_app
                (template_hole 51,
                 template_app
                  (template_hole 50,
                   template_app (template_hole 49, t_empty))),
               template_app
                (template_hole 50,
                 template_app (template_hole 49, t_empty)))),
           template_app
            (template_hole 50,
             template_app (template_hole 49, t_empty)))))),
   template_app
    (template_hole 50, template_app (template_hole 49, t_empty))))),
                                   template_app
                                    (template_hole 50,
                                     template_app
(template_hole 49, t_empty))))),
                             template_app
                              (template_app
                                (template_hole 4,
                                 template_app (template_hole 49, t_empty)),
                               template_hole 42))),
                         template_app
                          (template_hole 50,
                           template_app (template_hole 49, t_empty)))),
                     template_app
                      (template_hole 50,
                       template_app (template_hole 49, t_empty)))),
                 template_app
                  (template_app
                    (template_hole 4,
                     template_app (template_hole 49, t_empty)),
                   template_hole 42))),
             template_hole 0))))),
    ("SumArr.sumarr_proc_simp_unfolded",
     "[AnnComp
        (AnnComp
          (AnnComp
            (AnnComp
              (AnnComp
                (AnnComp
                  (AnnExpr
                    \<lbrace>(\<acute>lock_inv &
                              \<acute>tarr_inv ?n &
                              \<acute>garr_inv ?n &
                              \<acute>tid ?n = word_of_nat ?n + 1) &
                             \<acute>sumarr_inv_till_lock ?n\<rbrace>)
                  (AnnExpr
                    \<lbrace>\<acute>tsum ?n = 0 &
                             (\<acute>lock_inv &
                              \<acute>tarr_inv ?n &
                              \<acute>garr_inv ?n &
                              \<acute>tid ?n = word_of_nat ?n + 1) &
                             \<acute>sumarr_inv_till_lock ?n\<rbrace>))
                (AnnComp
                  (AnnWhile
                    \<lbrace>\<acute>tsum ?n = 0 &
                             (\<acute>lock_inv &
                              \<acute>tarr_inv ?n &
                              \<acute>garr_inv ?n &
                              \<acute>tid ?n = word_of_nat ?n + 1) &
                             \<acute>ti ?n = 0 &
                             \<acute>sumarr_inv_till_lock ?n\<rbrace>
                    \<lbrace>(\<acute>lock_inv &
                              \<acute>tarr_inv ?n &
                              \<acute>garr_inv ?n &
                              \<acute>tid ?n = word_of_nat ?n + 1) &
                             \<acute>ti ?n <= NSUM &
                             \<acute>tsum ?n <= MAXSUM &
                             \<acute>tsum ?n =
                             local_sum
                              (take (unat (\<acute>ti ?n))
                                (\<acute>tarr ?n)) &
                             \<acute>sumarr_inv_till_lock ?n\<rbrace>
                    (AnnComp
                      (AnnComp
                        (AnnRec
                          \<lbrace>(\<acute>lock_inv &
                                    \<acute>tarr_inv ?n &
                                    \<acute>garr_inv ?n &
                                    \<acute>tid ?n = word_of_nat ?n + 1) &
                                   \<acute>ti ?n < NSUM &
                                   \<acute>tsum ?n <= MAXSUM &
                                   \<acute>tsum ?n =
                                   local_sum
                                    (take (unat (\<acute>ti ?n))
(\<acute>tarr ?n)) &
                                   \<acute>sumarr_inv_till_lock ?n\<rbrace>
                          (AnnExpr
                            \<lbrace>(\<acute>lock_inv &
\<acute>tarr_inv ?n &
\<acute>garr_inv ?n & \<acute>tid ?n = word_of_nat ?n + 1) &
                                     \<acute>ti ?n < NSUM &
                                     \<acute>tsum ?n <= MAXSUM &
                                     \<acute>tsum ?n =
                                     local_sum
(take (unat (\<acute>ti ?n)) (\<acute>tarr ?n)) &
                                     \<acute>sumarr_inv_till_lock
?n\<rbrace>))
                        (AnnRec
                          \<lbrace>(\<acute>lock_inv &
                                    \<acute>tarr_inv ?n &
                                    \<acute>garr_inv ?n &
                                    \<acute>tid ?n = word_of_nat ?n + 1) &
                                   \<acute>ti ?n < NSUM &
                                   local_sum
                                    (take (unat (\<acute>ti ?n))
(\<acute>tarr ?n))
                                   <= MAXSUM &
                                   (\<acute>tsum ?n < MAXSUM &
                                    array_nth (\<acute>tarr ?n)
                                     (\<acute>ti ?n)
                                    < MAXSUM -->
                                    \<acute>tsum ?n =
                                    local_sum
                                     (take (Suc (unat (\<acute>ti ?n)))
 (\<acute>tarr ?n))) &
                                   (MAXSUM
                                    <= array_nth (\<acute>tarr ?n)
  (\<acute>ti ?n) |
                                    MAXSUM <= \<acute>tsum ?n -->
                                    local_sum (\<acute>tarr ?n) = MAXSUM) &
                                   \<acute>sumarr_inv_till_lock ?n\<rbrace>
                          (AnnBin
                            \<lbrace>(\<acute>lock_inv &
\<acute>tarr_inv ?n &
\<acute>garr_inv ?n & \<acute>tid ?n = word_of_nat ?n + 1) &
                                     \<acute>ti ?n < NSUM &
                                     (\<acute>tsum ?n < MAXSUM &
array_nth (\<acute>tarr ?n) (\<acute>ti ?n) < MAXSUM -->
\<acute>tsum ?n =
local_sum (take (Suc (unat (\<acute>ti ?n))) (\<acute>tarr ?n))) &
                                     (MAXSUM
<= array_nth (\<acute>tarr ?n) (\<acute>ti ?n) |
MAXSUM <= \<acute>tsum ?n -->
local_sum (\<acute>tarr ?n) = MAXSUM) &
                                     \<acute>sumarr_inv_till_lock
?n\<rbrace>
                            (AnnComp
                              (AnnExpr
                                \<lbrace>(\<acute>lock_inv &
    \<acute>tarr_inv ?n &
    \<acute>garr_inv ?n & \<acute>tid ?n = word_of_nat ?n + 1) &
   \<acute>ti ?n < NSUM &
   local_sum (\<acute>tarr ?n) = MAXSUM &
   \<acute>sumarr_inv_till_lock ?n\<rbrace>)
                              (AnnExpr
                                \<lbrace>(\<acute>lock_inv &
    \<acute>tarr_inv ?n &
    \<acute>garr_inv ?n & \<acute>tid ?n = word_of_nat ?n + 1) &
   \<acute>ti ?n < NSUM &
   \<acute>tsum ?n <= MAXSUM &
   \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
   \<acute>sumarr_inv_till_lock ?n\<rbrace>))
                            (AnnExpr
                              \<lbrace>(\<acute>lock_inv &
  \<acute>tarr_inv ?n &
  \<acute>garr_inv ?n & \<acute>tid ?n = word_of_nat ?n + 1) &
 \<acute>ti ?n < NSUM &
 \<acute>tsum ?n <= MAXSUM &
 \<acute>tsum ?n =
 local_sum (take (Suc (unat (\<acute>ti ?n))) (\<acute>tarr ?n)) &
 \<acute>sumarr_inv_till_lock ?n\<rbrace>))))
                      (AnnExpr
                        \<lbrace>(\<acute>lock_inv &
                                  \<acute>tarr_inv ?n &
                                  \<acute>garr_inv ?n &
                                  \<acute>tid ?n = word_of_nat ?n + 1) &
                                 \<acute>ti ?n < NSUM &
                                 \<acute>tsum ?n <= MAXSUM &
                                 \<acute>tsum ?n =
                                 local_sum
                                  (take (Suc (unat (\<acute>ti ?n)))
                                    (\<acute>tarr ?n)) &
                                 \<acute>sumarr_inv_till_lock ?n\<rbrace>)))
                  (AnnExpr
                    \<lbrace>(\<acute>lock_inv &
                              \<acute>tarr_inv ?n &
                              \<acute>garr_inv ?n &
                              \<acute>tid ?n = word_of_nat ?n + 1) &
                             \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
                             \<acute>sumarr_inv_till_lock ?n\<rbrace>)))
              (AnnCall
                \<lbrace>(\<acute>lock_inv &
                          \<acute>tarr_inv ?n &
                          \<acute>garr_inv ?n &
                          \<acute>tid ?n = word_of_nat ?n + 1) &
                         \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
                         \<acute>sumarr_inv_till_lock ?n\<rbrace>
                0))
            (AnnExpr
              \<lbrace>(\<acute>lock_inv &
                        \<acute>tarr_inv ?n &
                        \<acute>garr_inv ?n &
                        \<acute>tid ?n = word_of_nat ?n + 1) &
                       \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
                       \<acute>glock = 1 &
                       \<acute>ghost_lock ?n &
                       \<acute>sumarr_inv_till_lock ?n\<rbrace>))
          (AnnExpr
            \<lbrace>(\<acute>lock_inv &
                      \<acute>tarr_inv ?n &
                      \<acute>garr_inv ?n &
                      \<acute>tid ?n = word_of_nat ?n + 1) &
                     \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
                     \<acute>glock = 1 &
                     \<acute>ghost_lock ?n &
                     \<acute>sumarr_in_lock1 ?n\<rbrace>))
        (AnnCall
          \<lbrace>(\<acute>lock_inv &
                    \<acute>tarr_inv ?n &
                    \<acute>garr_inv ?n &
                    \<acute>tid ?n = word_of_nat ?n + 1) &
                   \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
                   \<acute>glock = 1 &
                   \<acute>ghost_lock ?n &
                   bit \<acute>gdone (unat (\<acute>tid ?n - 1)) &
                   \<acute>sumarr_in_lock2 ?n\<rbrace>
          0)] !
      0 =
      AnnComp
       (AnnComp
         (AnnComp
           (AnnComp
             (AnnComp
               (AnnComp
                 (AnnExpr
                   \<lbrace>(\<acute>lock_inv &
                             \<acute>tarr_inv ?n &
                             \<acute>garr_inv ?n &
                             \<acute>tid ?n = word_of_nat ?n + 1) &
                            \<acute>sumarr_inv_till_lock ?n\<rbrace>)
                 (AnnExpr
                   \<lbrace>\<acute>tsum ?n = 0 &
                            (\<acute>lock_inv &
                             \<acute>tarr_inv ?n &
                             \<acute>garr_inv ?n &
                             \<acute>tid ?n = word_of_nat ?n + 1) &
                            \<acute>sumarr_inv_till_lock ?n\<rbrace>))
               (AnnComp
                 (AnnWhile
                   \<lbrace>\<acute>tsum ?n = 0 &
                            (\<acute>lock_inv &
                             \<acute>tarr_inv ?n &
                             \<acute>garr_inv ?n &
                             \<acute>tid ?n = word_of_nat ?n + 1) &
                            \<acute>ti ?n = 0 &
                            \<acute>sumarr_inv_till_lock ?n\<rbrace>
                   \<lbrace>(\<acute>lock_inv &
                             \<acute>tarr_inv ?n &
                             \<acute>garr_inv ?n &
                             \<acute>tid ?n = word_of_nat ?n + 1) &
                            \<acute>ti ?n <= NSUM &
                            \<acute>tsum ?n <= MAXSUM &
                            \<acute>tsum ?n =
                            local_sum
                             (take (unat (\<acute>ti ?n))
                               (\<acute>tarr ?n)) &
                            \<acute>sumarr_inv_till_lock ?n\<rbrace>
                   (AnnComp
                     (AnnComp
                       (AnnRec
                         \<lbrace>(\<acute>lock_inv &
                                   \<acute>tarr_inv ?n &
                                   \<acute>garr_inv ?n &
                                   \<acute>tid ?n = word_of_nat ?n + 1) &
                                  \<acute>ti ?n < NSUM &
                                  \<acute>tsum ?n <= MAXSUM &
                                  \<acute>tsum ?n =
                                  local_sum
                                   (take (unat (\<acute>ti ?n))
                                     (\<acute>tarr ?n)) &
                                  \<acute>sumarr_inv_till_lock ?n\<rbrace>
                         (AnnExpr
                           \<lbrace>(\<acute>lock_inv &
                                     \<acute>tarr_inv ?n &
                                     \<acute>garr_inv ?n &
                                     \<acute>tid ?n = word_of_nat ?n + 1) &
                                    \<acute>ti ?n < NSUM &
                                    \<acute>tsum ?n <= MAXSUM &
                                    \<acute>tsum ?n =
                                    local_sum
                                     (take (unat (\<acute>ti ?n))
 (\<acute>tarr ?n)) &
                                    \<acute>sumarr_inv_till_lock
                                     ?n\<rbrace>))
                       (AnnRec
                         \<lbrace>(\<acute>lock_inv &
                                   \<acute>tarr_inv ?n &
                                   \<acute>garr_inv ?n &
                                   \<acute>tid ?n = word_of_nat ?n + 1) &
                                  \<acute>ti ?n < NSUM &
                                  local_sum
                                   (take (unat (\<acute>ti ?n))
                                     (\<acute>tarr ?n))
                                  <= MAXSUM &
                                  (\<acute>tsum ?n < MAXSUM &
                                   array_nth (\<acute>tarr ?n)
                                    (\<acute>ti ?n)
                                   < MAXSUM -->
                                   \<acute>tsum ?n =
                                   local_sum
                                    (take (Suc (unat (\<acute>ti ?n)))
(\<acute>tarr ?n))) &
                                  (MAXSUM
                                   <= array_nth (\<acute>tarr ?n)
 (\<acute>ti ?n) |
                                   MAXSUM <= \<acute>tsum ?n -->
                                   local_sum (\<acute>tarr ?n) = MAXSUM) &
                                  \<acute>sumarr_inv_till_lock ?n\<rbrace>
                         (AnnBin
                           \<lbrace>(\<acute>lock_inv &
                                     \<acute>tarr_inv ?n &
                                     \<acute>garr_inv ?n &
                                     \<acute>tid ?n = word_of_nat ?n + 1) &
                                    \<acute>ti ?n < NSUM &
                                    (\<acute>tsum ?n < MAXSUM &
                                     array_nth (\<acute>tarr ?n)
(\<acute>ti ?n)
                                     < MAXSUM -->
                                     \<acute>tsum ?n =
                                     local_sum
(take (Suc (unat (\<acute>ti ?n))) (\<acute>tarr ?n))) &
                                    (MAXSUM
                                     <= array_nth (\<acute>tarr ?n)
   (\<acute>ti ?n) |
                                     MAXSUM <= \<acute>tsum ?n -->
                                     local_sum (\<acute>tarr ?n) = MAXSUM) &
                                    \<acute>sumarr_inv_till_lock ?n\<rbrace>
                           (AnnComp
                             (AnnExpr
                               \<lbrace>(\<acute>lock_inv &
   \<acute>tarr_inv ?n &
   \<acute>garr_inv ?n & \<acute>tid ?n = word_of_nat ?n + 1) &
  \<acute>ti ?n < NSUM &
  local_sum (\<acute>tarr ?n) = MAXSUM &
  \<acute>sumarr_inv_till_lock ?n\<rbrace>)
                             (AnnExpr
                               \<lbrace>(\<acute>lock_inv &
   \<acute>tarr_inv ?n &
   \<acute>garr_inv ?n & \<acute>tid ?n = word_of_nat ?n + 1) &
  \<acute>ti ?n < NSUM &
  \<acute>tsum ?n <= MAXSUM &
  \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
  \<acute>sumarr_inv_till_lock ?n\<rbrace>))
                           (AnnExpr
                             \<lbrace>(\<acute>lock_inv &
 \<acute>tarr_inv ?n &
 \<acute>garr_inv ?n & \<acute>tid ?n = word_of_nat ?n + 1) &
\<acute>ti ?n < NSUM &
\<acute>tsum ?n <= MAXSUM &
\<acute>tsum ?n =
local_sum (take (Suc (unat (\<acute>ti ?n))) (\<acute>tarr ?n)) &
\<acute>sumarr_inv_till_lock ?n\<rbrace>))))
                     (AnnExpr
                       \<lbrace>(\<acute>lock_inv &
                                 \<acute>tarr_inv ?n &
                                 \<acute>garr_inv ?n &
                                 \<acute>tid ?n = word_of_nat ?n + 1) &
                                \<acute>ti ?n < NSUM &
                                \<acute>tsum ?n <= MAXSUM &
                                \<acute>tsum ?n =
                                local_sum
                                 (take (Suc (unat (\<acute>ti ?n)))
                                   (\<acute>tarr ?n)) &
                                \<acute>sumarr_inv_till_lock ?n\<rbrace>)))
                 (AnnExpr
                   \<lbrace>(\<acute>lock_inv &
                             \<acute>tarr_inv ?n &
                             \<acute>garr_inv ?n &
                             \<acute>tid ?n = word_of_nat ?n + 1) &
                            \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
                            \<acute>sumarr_inv_till_lock ?n\<rbrace>)))
             (AnnCall
               \<lbrace>(\<acute>lock_inv &
                         \<acute>tarr_inv ?n &
                         \<acute>garr_inv ?n &
                         \<acute>tid ?n = word_of_nat ?n + 1) &
                        \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
                        \<acute>sumarr_inv_till_lock ?n\<rbrace>
               0))
           (AnnExpr
             \<lbrace>(\<acute>lock_inv &
                       \<acute>tarr_inv ?n &
                       \<acute>garr_inv ?n &
                       \<acute>tid ?n = word_of_nat ?n + 1) &
                      \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
                      \<acute>glock = 1 &
                      \<acute>ghost_lock ?n &
                      \<acute>sumarr_inv_till_lock ?n\<rbrace>))
         (AnnExpr
           \<lbrace>(\<acute>lock_inv &
                     \<acute>tarr_inv ?n &
                     \<acute>garr_inv ?n &
                     \<acute>tid ?n = word_of_nat ?n + 1) &
                    \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
                    \<acute>glock = 1 &
                    \<acute>ghost_lock ?n &
                    \<acute>sumarr_in_lock1 ?n\<rbrace>))
       (AnnCall
         \<lbrace>(\<acute>lock_inv &
                   \<acute>tarr_inv ?n &
                   \<acute>garr_inv ?n &
                   \<acute>tid ?n = word_of_nat ?n + 1) &
                  \<acute>tsum ?n = local_sum (\<acute>tarr ?n) &
                  \<acute>glock = 1 &
                  \<acute>ghost_lock ?n &
                  bit \<acute>gdone (unat (\<acute>tid ?n - 1)) &
                  \<acute>sumarr_in_lock2 ?n\<rbrace>
         0)",
     template_equation
      (template_app
        (template_app
          (template_hole 53,
           template_app
            (template_app
              (template_hole 52,
               template_app
                (template_app
                  (template_hole 51,
                   template_app
                    (template_app
                      (template_hole 51,
                       template_app
                        (template_app
                          (template_hole 51,
                           template_app
                            (template_app
                              (template_hole 51,
                               template_app
                                (template_app
                                  (template_hole 51,
                                   template_app
                                    (template_app
(template_hole 51,
 template_app (template_hole 50, template_app (template_hole 49, t_empty))),
                                     template_app
(template_hole 50, template_app (template_hole 49, t_empty)))),
                                 template_app
                                  (template_app
                                    (template_hole 51,
                                     template_app
(template_app
  (template_app
    (template_hole 15, template_app (template_hole 49, t_empty)),
   template_app (template_hole 49, t_empty)),
 template_app
  (template_app
    (template_hole 51,
     template_app
      (template_app
        (template_hole 51,
         template_app
          (template_app
            (template_hole 9, template_app (template_hole 49, t_empty)),
           template_app
            (template_hole 50, template_app (template_hole 49, t_empty)))),
       template_app
        (template_app
          (template_hole 9, template_app (template_hole 49, t_empty)),
         template_app
          (template_app
            (template_app
              (template_hole 5, template_app (template_hole 49, t_empty)),
             template_app
              (template_app
                (template_hole 51,
                 template_app
                  (template_hole 50,
                   template_app (template_hole 49, t_empty))),
               template_app
                (template_hole 50,
                 template_app (template_hole 49, t_empty)))),
           template_app
            (template_hole 50,
             template_app (template_hole 49, t_empty)))))),
   template_app
    (template_hole 50, template_app (template_hole 49, t_empty))))),
                                   template_app
                                    (template_hole 50,
                                     template_app
(template_hole 49, t_empty))))),
                             template_app
                              (template_app
                                (template_hole 4,
                                 template_app (template_hole 49, t_empty)),
                               template_hole 42))),
                         template_app
                          (template_hole 50,
                           template_app (template_hole 49, t_empty)))),
                     template_app
                      (template_hole 50,
                       template_app (template_hole 49, t_empty)))),
                 template_app
                  (template_app
                    (template_hole 4,
                     template_app (template_hole 49, t_empty)),
                   template_hole 42))),
             template_hole 0)),
         template_hole 42),
       template_app
        (template_app
          (template_hole 51,
           template_app
            (template_app
              (template_hole 51,
               template_app
                (template_app
                  (template_hole 51,
                   template_app
                    (template_app
                      (template_hole 51,
                       template_app
                        (template_app
                          (template_hole 51,
                           template_app
                            (template_app
                              (template_hole 51,
                               template_app
                                (template_hole 50,
                                 template_app (template_hole 49, t_empty))),
                             template_app
                              (template_hole 50,
                               template_app (template_hole 49, t_empty)))),
                         template_app
                          (template_app
                            (template_hole 51,
                             template_app
                              (template_app
                                (template_app
                                  (template_hole 15,
                                   template_app
                                    (template_hole 49, t_empty)),
                                 template_app (template_hole 49, t_empty)),
                               template_app
                                (template_app
                                  (template_hole 51,
                                   template_app
                                    (template_app
(template_hole 51,
 template_app
  (template_app (template_hole 9, template_app (template_hole 49, t_empty)),
   template_app
    (template_hole 50, template_app (template_hole 49, t_empty)))),
                                     template_app
(template_app (template_hole 9, template_app (template_hole 49, t_empty)),
 template_app
  (template_app
    (template_app
      (template_hole 5, template_app (template_hole 49, t_empty)),
     template_app
      (template_app
        (template_hole 51,
         template_app
          (template_hole 50, template_app (template_hole 49, t_empty))),
       template_app
        (template_hole 50, template_app (template_hole 49, t_empty)))),
   template_app
    (template_hole 50, template_app (template_hole 49, t_empty)))))),
                                 template_app
                                  (template_hole 50,
                                   template_app
                                    (template_hole 49, t_empty))))),
                           template_app
                            (template_hole 50,
                             template_app (template_hole 49, t_empty))))),
                     template_app
                      (template_app
                        (template_hole 4,
                         template_app (template_hole 49, t_empty)),
                       template_hole 42))),
                 template_app
                  (template_hole 50,
                   template_app (template_hole 49, t_empty)))),
             template_app
              (template_hole 50,
               template_app (template_hole 49, t_empty)))),
         template_app
          (template_app
            (template_hole 4, template_app (template_hole 49, t_empty)),
           template_hole 42))))]
