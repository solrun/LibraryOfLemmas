Loading theory "Draft.PQ" (required by "Draft.PQ_ImplementationMoreTemplates" via "Draft.PQ_Implementation")
Loading theory "HOL-Library.Nat_Bijection" (required by "Draft.PQ_ImplementationMoreTemplates" via "Draft.ExtrEqs" via "HOL-Library.Stream")
Loading theory "HOL-Library.Function_Algebras" (required by "Draft.PQ_ImplementationMoreTemplates" via "Draft.ExtrEqs" via "HOL-Library.BigO")
Loading theory "HOL-Library.Set_Algebras" (required by "Draft.PQ_ImplementationMoreTemplates" via "Draft.ExtrEqs" via "HOL-Library.BigO")
instantiation
  fun :: (type, plus) plus
  plus_fun == plus :: ('a => 'b) => ('a => 'b) => 'a => 'b
instantiation
  set :: (plus) plus
  plus_set == plus :: 'a set => 'a set => 'a set
instantiation
  fun :: (type, zero) zero
  zero_fun == zero_class.zero :: 'a => 'b
instantiation
  set :: (times) times
  times_set == times :: 'a set => 'a set => 'a set
instantiation
  fun :: (type, times) times
  times_fun == times :: ('a => 'b) => ('a => 'b) => 'a => 'b
instantiation
  set :: (zero) zero
  zero_set == zero_class.zero :: 'a set
instantiation
  fun :: (type, one) one
  one_fun == one_class.one :: 'a => 'b
instantiation
  set :: (one) one
  one_set == one_class.one :: 'a set
Found termination order: "(%p. size (snd p)) <*mlex*> {}"
### theory "HOL-Library.Function_Algebras"
### 0.134s elapsed time, 0.550s cpu time, 0.046s GC time
Loading theory "HOL-Library.Tree" (required by "Draft.PQ_ImplementationMoreTemplates" via "Draft.ExtrEqs" via "Draft.Templates")
### theory "HOL-Library.Set_Algebras"
### 0.212s elapsed time, 0.860s cpu time, 0.046s GC time
Loading theory "HOL-Library.BigO" (required by "Draft.PQ_ImplementationMoreTemplates" via "Draft.ExtrEqs")
Found termination order: "size_list size <*mlex*> {}"
### theory "Draft.PQ"
### 0.327s elapsed time, 1.298s cpu time, 0.134s GC time
Loading theory "Draft.Binomial_Queue" (required by "Draft.PQ_ImplementationMoreTemplates" via "Draft.PQ_Implementation")
### theory "HOL-Library.Nat_Bijection"
### 0.359s elapsed time, 1.429s cpu time, 0.134s GC time
Loading theory "HOL-Library.Stream" (required by "Draft.PQ_ImplementationMoreTemplates" via "Draft.ExtrEqs")
consts
  left :: "'a tree => 'a tree"
consts
  right :: "'a tree => 'a tree"
Found termination order: "size <*mlex*> {}"
consts
  shift :: "'a list => 'a stream => 'a stream"
Proofs for coinductive predicate(s) "streamsp"
  Proving monotonicity ...
Found termination order: "size <*mlex*> {}"
Found termination order: "size <*mlex*> {}"
consts
  snth :: "'a stream => nat => 'a"
consts
  priority :: "('a, 'b) bintree => 'a"
consts
  val :: "('a, 'b) bintree => 'b"
consts
  children :: "('a, 'b) bintree => ('a, 'b) bintree list"
consts
  stake :: "nat => 'a stream => 'a list"
Proofs for inductive predicate(s) "is_bintree_list"
  Proving monotonicity ...
class height = type +
  fixes height :: "'a => nat"
consts
  sdrop :: "nat => 'a stream => 'a stream"
instantiation
  tree :: (type) height
  height_tree == height :: 'a tree => nat
Proofs for inductive predicate(s) "is_heap_list"
  Proving monotonicity ...
consts
  sfilter :: "('a => bool) => 'a stream => 'a stream"
Found termination order: "size <*mlex*> {}"
Proofs for inductive predicate(s) "is_binqueue"
  Proving monotonicity ...
consts
  cycle :: "'a list => 'a stream"
Proofs for inductive predicate(s) "normalized"
  Proving monotonicity ...
### theory "HOL-Library.BigO"
### 1.033s elapsed time, 3.904s cpu time, 0.935s GC time
Found termination order: "size <*mlex*> {}"
consts
  siterate :: "('a => 'a) => 'a => 'a stream"
consts
  normalize' ::
    "('a, 'b) bintree option list => ('a, 'b) bintree option list"
consts
  flat :: "'a list stream => 'a stream"
Found termination order: "size <*mlex*> {}"
consts
  sinterleave :: "'a stream => 'a stream => 'a stream"
consts
  szip :: "'a stream => 'b stream => ('a * 'b) stream"
Found termination order: "size <*mlex*> {}"
Found termination order:
  "(%p. size_list (size_option size) (snd p)) <*mlex*> {}"
consts
  smap2 :: "('a => 'b => 'c) => 'a stream => 'b stream => 'c stream"
### theory "HOL-Library.Stream"
### 1.123s elapsed time, 4.065s cpu time, 0.930s GC time
Found termination order: "size <*mlex*> {}"
Found termination order: "size <*mlex*> {}"
Found termination order: "size <*mlex*> {}"
Found termination order: "(%p. size (fst p)) <*mlex*> {}"
consts
  find :: "'a => ('a, 'b) bintree option list => ('a, 'b) bintree option"
Found termination order: "size <*mlex*> {}"
consts
  match :: "'a => ('a, 'b) bintree option => ('a, 'b) bintree option"
Found termination order: "(%p. size (snd p)) <*mlex*> {}"
### theory "Draft.Binomial_Queue"
### 1.506s elapsed time, 4.938s cpu time, 1.005s GC time
Loading theory "Draft.PQ_Implementation" (required by "Draft.PQ_ImplementationMoreTemplates")
Found termination order: "size <*mlex*> {}"
consts
  bt_dfs :: "(('a, 'b) bintree => 'c) => ('a, 'b) bintree => 'c list"
  bts_dfs :: "(('a, 'b) bintree => 'c) => ('a, 'b) bintree list => 'c list"
### theory "HOL-Library.Tree"
### 2.010s elapsed time, 6.365s cpu time, 1.155s GC time
Loading theory "Draft.Templates" (required by "Draft.PQ_ImplementationMoreTemplates" via "Draft.ExtrEqs")
datatype template_term
=
     t_empty
   | template_app of template_term * template_term
   | template_hole of int
   | template_var of int
datatype sign
= equals | greater_equals | greater_than | less_equals | less_than
datatype template
=
     template_bimplication of template * template
   | template_dunno
   | template_equation of template_term * template_term
   | template_implication of template list * template
   | template_inequation of sign * template_term * template_term
   | template_negation of template
   | template_predicate of template_term
constructor t_empty: template_term
constructor template_app: template_term * template_term -> template_term
constructor template_hole: int -> template_term
constructor template_var: int -> template_term
constructor equals: sign
constructor greater_equals: sign
constructor greater_than: sign
constructor less_equals: sign
constructor less_than: sign
constructor template_bimplication: template * template -> template
constructor template_dunno: template
constructor template_equation: template_term * template_term -> template
constructor template_implication: template list * template -> template
constructor template_inequation:
   sign * template_term * template_term -> template
constructor template_negation: template -> template
constructor template_predicate: template_term -> template
val vfs = fn: term -> (indexname * typ) list * (string * typ) list
val indexOf = fn: ''a list -> ''a -> int -> int
val has_eq = fn: term -> bool
val term2template = fn:
   (indexname * typ) list -> (string * typ) list -> term -> template_term
val lemma2predicate = fn: term -> term -> template
val makeTemplatewithContext = fn: term -> term -> template
val lemma2template = fn: term -> template
val thm2template = fn: thm -> template
val tterm2string = fn: template_term -> string
val template2string = fn: template -> string
val t = "height ?t <= size ?t": thm
val th =
   Const ("HOL.Trueprop", "bool => prop") $
     (Const ("Orderings.ord_class.less_eq", "nat => nat => bool") $
       (Const ("Tree.height_class.height", "?'a tree => nat") $
         Var (("t", 0), "?'a tree")) $
       (Const ("Nat.size_class.size", "?'a tree => nat") $
         Var (("t", 0), "?'a tree"))):
   term
### theory "Draft.Templates"
### 0.070s elapsed time, 0.169s cpu time, 0.063s GC time
Loading theory "Draft.ExtrEqs" (required by "Draft.PQ_ImplementationMoreTemplates")
Found termination order:
  "(%p. size_list (size_option size) (snd p)) <*mlex*> {}"
consts
  alist :: "('a, 'b) bintree => 'b * 'a"
consts
  bt_augment :: "('a, 'b) bintree => ('b, 'a) pq => ('b, 'a) pq"
  bts_augment :: "('a, 'b) bintree list => ('b, 'a) pq => ('b, 'a) pq"
Found termination order: "size_list (size_option size) <*mlex*> {}"
### theory "Draft.PQ_Implementation"
### 0.775s elapsed time, 1.636s cpu time, 0.187s GC time
val eqpattern =
   Pattern
    (
       Const ("HOL.Trueprop", "bool => prop") $
         (Const ("HOL.eq", "?'a => ?'a => bool") $
           Var (("_dummy_", 1), "?'a") $ Var (("_dummy_", 2), "?'a"))
       ):
   term Find_Theorems.criterion
val badeqpattern = Pattern (Const ("Pure.eq", "?'a => ?'a => prop")):
   term Find_Theorems.criterion
val undefpattern =
   Pattern
    (
       Const ("HOL.Trueprop", "bool => prop") $
         (Const ("HOL.eq", "?'a => ?'a => bool") $
           Var (("_dummy_", 1), "?'a") $ Const ("HOL.undefined", "?'a"))
       ):
   term Find_Theorems.criterion
val thmpattern =
   Pattern
    (Const ("HOL.Trueprop", "bool => prop") $ Var (("_dummy_", 1), "bool")):
   term Find_Theorems.criterion
val badnames =
   ["*nitpick*", "*Nitpick*", "*full_exhaustive*", "*_def*", "Enum.finite*",
    "*Quickcheck*", "ATP*", "*Nunchaku*", "*Code*", "*BNF*", "*SMT*",
    "*.*.*"]:
   string list
val unwanted_names =
   [(false, Name "*nitpick*"), (false, Name "*Nitpick*"),
    (false, Name "*full_exhaustive*"), (false, Name "*_def*"),
    (false, Name "Enum.finite*"), (false, Name "*Quickcheck*"),
    (false, Name "ATP*"), (false, Name "*Nunchaku*"),
    (false, Name "*Code*"), (false, Name "*BNF*"), (false, Name "*SMT*"),
    (false, Name "*.*.*")]:
   (bool * term Find_Theorems.criterion) list
val has_vars = fn: term -> bool
val get_all_eqs = fn: string -> Proof.context -> (string * thm) list
val get_all_thms = fn: string -> Proof.context -> (string * thm) list
val get_noneq_thms = fn: string -> Proof.context -> (string * thm) list
val template_eqs = fn:
   string -> Proof.context -> (string * thm * template) list
val template_thms = fn:
   string -> Proof.context -> (string * thm * template) list
### theory "Draft.ExtrEqs"
### 0.544s elapsed time, 1.062s cpu time, 0.134s GC time
Loading theory "Draft.PQ_ImplementationMoreTemplates"
val templateLemmas =
   [("PQ_Implementation.alist_split_pre", "val ?t = (fst o alist) ?t",
     template_equation
      (template_app (template_hole 3, template_var 0),
       template_app
        (template_app
          (template_app (template_hole 2, template_hole 1),
           template_hole 0),
         template_var 0))),
    ("PQ_Implementation.alist_split_pre", "priority ?t = (snd o alist) ?t",
     template_equation
      (template_app (template_hole 3, template_var 0),
       template_app
        (template_app
          (template_app (template_hole 2, template_hole 1),
           template_hole 0),
         template_var 0))),
    ("PQ_Implementation.None", "pqueue (None # ?xs) = pqueue ?xs",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_hole 0),
           template_var 0)),
       template_app (template_hole 2, template_var 0))),
    ("PQ_Implementation.alist_normalize_idem",
     "elements (Binomial_Queue.normalize ?xs) = elements ?xs",
     template_equation
      (template_app
        (template_app (template_hole 2, template_hole 1),
         template_app (template_hole 0, template_var 0)),
       template_app
        (template_app (template_hole 2, template_hole 1), template_var 0))),
    ("PQ_Implementation.vals_pqueue",
     "set (vals ?xs) = set (PQ.values (pqueue ?xs))",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_hole 2),
           template_var 0)),
       template_app
        (template_hole 4,
         template_app
          (template_hole 1,
           template_app (template_hole 0, template_var 0))))),
    ("PQ_Implementation.dfs_map_Some_idem",
     "dfs ?f (map Some ?xs) = bts_dfs ?f ?xs",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 1),
         template_app
          (template_app (template_hole 2, template_hole 1),
           template_var 0)),
       template_app
        (template_app (template_hole 0, template_var 1), template_var 0))),
    ("PQ_Implementation.bt_augment_v_subset",
     "set (PQ.values ?q) <= set (PQ.values (bt_augment ?t ?q))",
     template_inequation
      (less_equals,
       template_app
        (template_hole 2, template_app (template_hole 1, template_var 1)),
       template_app
        (template_hole 2,
         template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 0),
             template_var 1))))),
    ("PQ_Implementation.bt_augment_v_subset",
     "set (PQ.values ?q) <= set (PQ.values (bts_augment ?ts ?q))",
     template_inequation
      (less_equals,
       template_app
        (template_hole 2, template_app (template_hole 1, template_var 1)),
       template_app
        (template_hole 2,
         template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 0),
             template_var 1))))),
    ("PQ_Implementation.bt_augment_alist_subset",
     "set (pq.alist_of ?q) <= set (pq.alist_of (bt_augment ?t ?q))",
     template_inequation
      (less_equals,
       template_app
        (template_hole 2, template_app (template_hole 1, template_var 1)),
       template_app
        (template_hole 2,
         template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 0),
             template_var 1))))),
    ("PQ_Implementation.bt_augment_alist_subset",
     "set (pq.alist_of ?q) <= set (pq.alist_of (bts_augment ?ts ?q))",
     template_inequation
      (less_equals,
       template_app
        (template_hole 2, template_app (template_hole 1, template_var 1)),
       template_app
        (template_hole 2,
         template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 0),
             template_var 1))))),
    ("PQ_Implementation.Some",
     "pqueue (Some ?t # ?xs) = bt_augment ?t (pqueue ?xs)",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 1)),
           template_var 0)),
       template_app
        (template_app (template_hole 0, template_var 1),
         template_app (template_hole 3, template_var 0)))),
    ("PQ_Implementation.set_bts_dfs_rev",
     "set (bts_dfs ?f (rev ?ts)) = set (bts_dfs ?f ?ts)",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1),
           template_app (template_hole 0, template_var 0))),
       template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1),
           template_var 0)))),
    ("PQ_Implementation.set_dfs_rev",
     "set (dfs ?f (rev ?xs)) = set (dfs ?f ?xs)",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1),
           template_app (template_hole 0, template_var 0))),
       template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1),
           template_var 0)))),
    ("PQ_Implementation.alist_split_set",
     "set (vals ?xs) = fst ` set (elements ?xs)",
     template_equation
      (template_app
        (template_hole 7,
         template_app
          (template_app (template_hole 6, template_hole 5),
           template_var 0)),
       template_app
        (template_app (template_hole 4, template_hole 3),
         template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_hole 0),
             template_var 0))))),
    ("PQ_Implementation.alist_split_set",
     "set (prios ?xs) = snd ` set (elements ?xs)",
     template_equation
      (template_app
        (template_hole 7,
         template_app
          (template_app (template_hole 6, template_hole 5),
           template_var 0)),
       template_app
        (template_app (template_hole 4, template_hole 3),
         template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_hole 0),
             template_var 0))))),
    ("PQ_Implementation.bt_dfs_simp",
     "bt_dfs ?f ?t = ?f ?t # bts_dfs ?f (children ?t)",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 1), template_var 0),
       template_app
        (template_app
          (template_hole 2, template_app (template_var 1, template_var 0)),
         template_app
          (template_app (template_hole 1, template_var 1),
           template_app (template_hole 0, template_var 0))))),
    ("PQ_Implementation.bt_dfs_comp",
     "bt_dfs (?f o ?g) ?t = map ?f (bt_dfs ?g ?t)",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 1, template_var 2),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("PQ_Implementation.bt_dfs_comp",
     "bts_dfs (?f o ?g) ?ts = map ?f (bts_dfs ?g ?ts)",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 1, template_var 2),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("PQ_Implementation.dfs_comp",
     "dfs (?f o ?g) ?xs = map ?f (dfs ?g ?xs)",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 1, template_var 2),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("PQ_Implementation.empty_empty",
     "normalized ?xs ==> (?xs = []) = PQ.is_empty (pqueue ?xs)",
     template_implication
      ([template_predicate
         (template_app (template_hole 5, template_var 0))],
       template_equation
        (template_app
          (template_app (template_hole 3, template_var 0), template_hole 2),
         template_app
          (template_hole 1,
           template_app (template_hole 0, template_var 0))))),
    ("PQ_Implementation.bt_dfs_distinct_children",
     "distinct (bt_dfs ?f ?x) ==> distinct (bts_dfs ?f (children ?x))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 3,
              template_app
               (template_app (template_hole 2, template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_app (template_hole 0, template_var 0)))
           ))),
    ("PQ_Implementation.bts_dfs_rev_distinct",
     "distinct (bts_dfs ?f ?ts) ==> distinct (bts_dfs ?f (rev ?ts))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 2,
              template_app
               (template_app (template_hole 1, template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_app (template_hole 0, template_var 0)))
           ))),
    ("PQ_Implementation.dfs_match_subset",
     "set (dfs ?f (map (match ?a) ?xs)) <= set (dfs ?f ?xs)",
     template_inequation
      (less_equals,
       template_app
        (template_hole 3,
         template_app
          (template_app (template_hole 2, template_var 2),
           template_app
            (template_app
              (template_hole 1,
               template_app (template_hole 0, template_var 1)),
             template_var 0))),
       template_app
        (template_hole 3,
         template_app
          (template_app (template_hole 2, template_var 2),
           template_var 0)))),
    ("PQ_Implementation.bt_dfs_comp_distinct",
     "distinct (bt_dfs (?f o ?g) ?t) ==> distinct (bt_dfs ?g ?t)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 4,
              template_app
               (template_app
                 (template_hole 3,
                  template_app
                   (template_app (template_hole 2, template_var 2),
                    template_var 1)),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))
           ))),
    ("PQ_Implementation.bt_dfs_comp_distinct",
     "distinct (bts_dfs (?f o ?g) ?ts) ==> distinct (bts_dfs ?g ?ts)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 4,
              template_app
               (template_app
                 (template_hole 3,
                  template_app
                   (template_app (template_hole 2, template_var 2),
                    template_var 1)),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))
           ))),
    ("PQ_Implementation.dfs_comp_distinct",
     "distinct (dfs (?f o ?g) ?xs) ==> distinct (dfs ?g ?xs)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 4,
              template_app
               (template_app
                 (template_hole 3,
                  template_app
                   (template_app (template_hole 2, template_var 2),
                    template_var 1)),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))
           ))),
    ("PQ_Implementation.vals_add_Cons",
     "set (vals (add ?x ?xs)) = set (vals (?x # ?xs))",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_hole 2),
           template_app
            (template_app (template_hole 1, template_var 1),
             template_var 0))),
       template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_hole 2),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0))))),
    ("PQ_Implementation.bts_dfs_append",
     "bts_dfs ?f (?ts @ ?rs) = bts_dfs ?f ?ts @ bts_dfs ?f ?rs",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 2),
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1)),
         template_app
          (template_app (template_hole 2, template_var 2),
           template_var 0)))),
    ("PQ_Implementation.dfs_append",
     "dfs ?f (?xs @ ?ys) = dfs ?f ?xs @ dfs ?f ?ys",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 2),
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1)),
         template_app
          (template_app (template_hole 2, template_var 2),
           template_var 0)))),
    ("PQ_Implementation.dfs_match_distinct",
     "distinct (dfs ?f ?xs) ==> distinct (dfs ?f (map (match ?a) ?xs))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 3,
              template_app
               (template_app (template_hole 2, template_var 2),
                template_var 1))
            )],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_var 2),
               template_app
                (template_app
                  (template_hole 1,
                   template_app (template_hole 0, template_var 0)),
                 template_var 1)))
           ))),
    ("PQ_Implementation.bt_augment_simp",
     "bt_augment ?t ?q =
      PQ.push (val ?t) (priority ?t) (fold bt_augment (children ?t) ?q)",
     template_equation
      (template_app
        (template_app (template_hole 5, template_var 1), template_var 0),
       template_app
        (template_app
          (template_app
            (template_hole 4,
             template_app (template_hole 3, template_var 1)),
           template_app (template_hole 2, template_var 1)),
         template_app
          (template_app
            (template_app (template_hole 1, template_hole 5),
             template_app (template_hole 0, template_var 1)),
           template_var 0)))),
    ("PQ_Implementation.bt_augment_Node",
     "bt_augment (bintree.Node ?a ?v ?ts) ?q =
      PQ.push ?v ?a (fold bt_augment ?ts ?q)",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app
              (template_app (template_hole 2, template_var 3),
               template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_app (template_hole 1, template_var 2), template_var 3),
         template_app
          (template_app
            (template_app (template_hole 0, template_hole 3),
             template_var 1),
           template_var 0)))),
    ("PQ_Implementation.bt_val_augment",
     "set (bt_dfs val ?t) Un set (PQ.values ?q) =
      set (PQ.values (bt_augment ?t ?q))",
     template_equation
      (template_app
        (template_app
          (template_hole 5,
           template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_var 1))),
         template_app
          (template_hole 4,
           template_app (template_hole 1, template_var 0))),
       template_app
        (template_hole 4,
         template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0))))),
    ("PQ_Implementation.bt_val_augment",
     "set (bts_dfs val ?ts) Un set (PQ.values ?q) =
      set (PQ.values (bts_augment ?ts ?q))",
     template_equation
      (template_app
        (template_app
          (template_hole 5,
           template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_var 1))),
         template_app
          (template_hole 4,
           template_app (template_hole 1, template_var 0))),
       template_app
        (template_hole 4,
         template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0))))),
    ("PQ_Implementation.bt_augment_v_in",
     "?v : set (PQ.values ?q) ==> ?v : set (PQ.values (bt_augment ?t ?q))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 3, template_var 2),
              template_app
               (template_hole 2,
                template_app (template_hole 1, template_var 1)))
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 3, template_var 2),
             template_app
              (template_hole 2,
               template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_var 0),
                   template_var 1))))
           ))),
    ("PQ_Implementation.bt_augment_v_in",
     "?v : set (PQ.values ?q) ==>
      ?v : set (PQ.values (bts_augment ?ts ?q))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 3, template_var 2),
              template_app
               (template_hole 2,
                template_app (template_hole 1, template_var 1)))
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 3, template_var 2),
             template_app
              (template_hole 2,
               template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_var 0),
                   template_var 1))))
           ))),
    ("PQ_Implementation.bt_augment_v_commute",
     "set (PQ.values (bt_augment ?t (bt_augment ?r ?q))) =
      set (PQ.values (bt_augment ?r (bt_augment ?t ?q)))",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0)))),
       template_app
        (template_hole 2,
         template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 1),
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 0)))))),
    ("PQ_Implementation.bt_augment_v_commute",
     "set (PQ.values (bt_augment ?t (bts_augment ?rs ?q))) =
      set (PQ.values (bts_augment ?rs (bt_augment ?t ?q)))",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0)))),
       template_app
        (template_hole 3,
         template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 0, template_var 1),
             template_app
              (template_app (template_hole 1, template_var 2),
               template_var 0)))))),
    ("PQ_Implementation.bt_augment_v_merge",
     "set (PQ.values (bt_augment (merge ?t ?r) ?q)) =
      set (PQ.values (bt_augment ?t (bt_augment ?r ?q)))",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_hole 2,
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 1)),
             template_var 0))),
       template_app
        (template_hole 3,
         template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 0)))))),
    ("PQ_Implementation.bt_augment_v_commute",
     "set (PQ.values (bts_augment ?ts (bts_augment ?rs ?q))) =
      set (PQ.values (bts_augment ?rs (bts_augment ?ts ?q)))",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0)))),
       template_app
        (template_hole 2,
         template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 1),
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 0)))))),
    ("PQ_Implementation.insert_v_push",
     "set (vals (Binomial_Queue.insert ?a ?v ?xs)) =
      set (PQ.values (PQ.push ?v ?a (pqueue ?xs)))",
     template_equation
      (template_app
        (template_hole 6,
         template_app
          (template_app (template_hole 5, template_hole 4),
           template_app
            (template_app
              (template_app (template_hole 3, template_var 2),
               template_var 1),
             template_var 0))),
       template_app
        (template_hole 6,
         template_app
          (template_hole 2,
           template_app
            (template_app
              (template_app (template_hole 1, template_var 1),
               template_var 2),
             template_app (template_hole 0, template_var 0)))))),
    ("PQ_Implementation.prios_pqueue",
     "distinct (vals ?xs) ==>
      set (prios ?xs) = set (priorities (pqueue ?xs))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 8,
              template_app
               (template_app (template_hole 7, template_hole 6),
                template_var 0))
            )],
       template_equation
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_var 0)),
         template_app
          (template_hole 4,
           template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 0)))))),
    ("PQ_Implementation.alist_pqueue",
     "distinct (vals ?xs) ==>
      set (elements ?xs) = set (pq.alist_of (pqueue ?xs))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 8,
              template_app
               (template_app (template_hole 7, template_hole 6),
                template_var 0))
            )],
       template_equation
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_var 0)),
         template_app
          (template_hole 4,
           template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 0)))))),
    ("PQ_Implementation.bt_dfs_Min_priority",
     "is_heap_list (priority ?t) (children ?t) ==>
      priority ?t = Min (set (bt_dfs priority ?t))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app (template_hole 5, template_var 0)),
              template_app (template_hole 4, template_var 0))
            )],
       template_equation
        (template_app (template_hole 5, template_var 0),
         template_app
          (template_hole 2,
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_hole 5),
               template_var 0)))))),
    ("PQ_Implementation.vals_merge",
     "set (bt_dfs val (merge ?t ?r)) =
      set (bt_dfs val ?t) Un set (bt_dfs val ?r)",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_hole 2),
           template_app
            (template_app (template_hole 1, template_var 1),
             template_var 0))),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_var 1))),
         template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_var 0))))),
    ("PQ_Implementation.vals_meld",
     "set (vals (meld ?xs ?ys)) = set (vals ?xs) Un set (vals ?ys)",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_hole 2),
           template_app
            (template_app (template_hole 1, template_var 1),
             template_var 0))),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_var 1))),
         template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_var 0))))),
    ("PQ_Implementation.vals_insert",
     "set (vals (Binomial_Queue.insert ?a ?v ?xs)) =
      set (vals ?xs) Un {?v}",
     template_equation
      (template_app
        (template_hole 6,
         template_app
          (template_app (template_hole 5, template_hole 4),
           template_app
            (template_app
              (template_app (template_hole 3, template_var 2),
               template_var 1),
             template_var 0))),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_hole 6,
             template_app
              (template_app (template_hole 5, template_hole 4),
               template_var 0))),
         template_app
          (template_app (template_hole 1, template_var 1),
           template_hole 0)))),
    ("PQ_Implementation.bt_augment_v_push_commute",
     "set (PQ.values (bt_augment ?t (PQ.push ?v ?a ?q))) =
      set (PQ.values (PQ.push ?v ?a (bt_augment ?t ?q)))",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 3),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 1),
               template_var 0)))),
       template_app
        (template_hole 3,
         template_app
          (template_hole 2,
           template_app
            (template_app
              (template_app (template_hole 0, template_var 2),
               template_var 1),
             template_app
              (template_app (template_hole 1, template_var 3),
               template_var 0)))))),
    ("PQ_Implementation.bt_augment_v_push_commute",
     "set (PQ.values (bts_augment ?ts (PQ.push ?v ?a ?q))) =
      set (PQ.values (PQ.push ?v ?a (bts_augment ?ts ?q)))",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 3),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 1),
               template_var 0)))),
       template_app
        (template_hole 3,
         template_app
          (template_hole 2,
           template_app
            (template_app
              (template_app (template_hole 0, template_var 2),
               template_var 1),
             template_app
              (template_app (template_hole 1, template_var 3),
               template_var 0)))))),
    ("PQ_Implementation.in_set_in_alist",
     "Some ?t : set ?xs ==> (val ?t, priority ?t) : set (elements ?xs)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 9,
                template_app (template_hole 8, template_var 1)),
              template_app (template_hole 7, template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app
                  (template_hole 5,
                   template_app (template_hole 4, template_var 1)),
                 template_app (template_hole 3, template_var 1))),
             template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_hole 0),
                 template_var 0)))
           ))),
    ("PQ_Implementation.dfs_distinct_member",
     "[| distinct (dfs ?f ?xs); Some ?x : set ?xs |]
      ==> distinct (bt_dfs ?f ?x)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 5,
              template_app
               (template_app (template_hole 4, template_var 2),
                template_var 1))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app (template_hole 2, template_var 0)),
              template_app (template_hole 1, template_var 1))
            )],
       template_predicate
        (
           template_app
            (template_hole 5,
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 0))
           ))),
    ("PQ_Implementation.set_dfs_Cons",
     "set (dfs ?f (?x # ?xs)) = set (dfs ?f ?xs) Un set (dfs ?f [?x])",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_var 2),
           template_app
            (template_app (template_hole 2, template_var 1),
             template_var 0))),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_var 2),
               template_var 0))),
         template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 2),
             template_app
              (template_app (template_hole 2, template_var 1),
               template_hole 0)))))),
    ("PQ_Implementation.bt_augment_v_push",
     "set (PQ.values (bt_augment ?t (PQ.push ?v ?a ?q))) =
      set (PQ.values (bt_augment ?t ?q)) Un {?v}",
     template_equation
      (template_app
        (template_hole 6,
         template_app
          (template_hole 5,
           template_app
            (template_app (template_hole 4, template_var 3),
             template_app
              (template_app
                (template_app (template_hole 3, template_var 2),
                 template_var 1),
               template_var 0)))),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_hole 6,
             template_app
              (template_hole 5,
               template_app
                (template_app (template_hole 4, template_var 3),
                 template_var 0)))),
         template_app
          (template_app (template_hole 1, template_var 2),
           template_hole 0)))),
    ("PQ_Implementation.bt_augment_v_push",
     "set (PQ.values (bts_augment ?ts (PQ.push ?v ?a ?q))) =
      set (PQ.values (bts_augment ?ts ?q)) Un {?v}",
     template_equation
      (template_app
        (template_hole 6,
         template_app
          (template_hole 5,
           template_app
            (template_app (template_hole 4, template_var 3),
             template_app
              (template_app
                (template_app (template_hole 3, template_var 2),
                 template_var 1),
               template_var 0)))),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_hole 6,
             template_app
              (template_hole 5,
               template_app
                (template_app (template_hole 4, template_var 3),
                 template_var 0)))),
         template_app
          (template_app (template_hole 1, template_var 2),
           template_hole 0)))),
    ("PQ_Implementation.bt_augment_alist_in",
     "(?v, ?a) : set (pq.alist_of ?q) ==>
      (?v, ?a) : set (pq.alist_of (bt_augment ?t ?q))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app
                 (template_app (template_hole 3, template_var 3),
                  template_var 2)),
              template_app
               (template_hole 2,
                template_app (template_hole 1, template_var 1)))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_var 3),
                 template_var 2)),
             template_app
              (template_hole 2,
               template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_var 0),
                   template_var 1))))
           ))),
    ("PQ_Implementation.bt_augment_alist_in",
     "(?v, ?a) : set (pq.alist_of ?q) ==>
      (?v, ?a) : set (pq.alist_of (bts_augment ?ts ?q))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app
                 (template_app (template_hole 3, template_var 3),
                  template_var 2)),
              template_app
               (template_hole 2,
                template_app (template_hole 1, template_var 1)))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_var 3),
                 template_var 2)),
             template_app
              (template_hole 2,
               template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_var 0),
                   template_var 1))))
           ))),
    ("PQ_Implementation.bt_augment_v_union",
     "set (PQ.values (bt_augment ?t (bt_augment ?r ?q))) =
      set (PQ.values (bt_augment ?t ?q)) Un
      set (PQ.values (bt_augment ?r ?q))",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 0)))),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_hole 3,
             template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 0)))),
         template_app
          (template_hole 3,
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 0)))))),
    ("PQ_Implementation.bts_augment_v_union",
     "set (PQ.values (bt_augment ?t (bts_augment ?rs ?q))) =
      set (PQ.values (bt_augment ?t ?q)) Un
      set (PQ.values (bts_augment ?rs ?q))",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 0)))),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_hole 4,
             template_app
              (template_hole 3,
               template_app
                (template_app (template_hole 2, template_var 2),
                 template_var 0)))),
         template_app
          (template_hole 4,
           template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 0)))))),
    ("PQ_Implementation.bt_augment_v_union",
     "set (PQ.values (bts_augment ?ts (bt_augment ?r ?q))) =
      set (PQ.values (bts_augment ?ts ?q)) Un
      set (PQ.values (bt_augment ?r ?q))",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 0)))),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_hole 4,
             template_app
              (template_hole 3,
               template_app
                (template_app (template_hole 2, template_var 2),
                 template_var 0)))),
         template_app
          (template_hole 4,
           template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 0)))))),
    ("PQ_Implementation.bts_augment_v_union",
     "set (PQ.values (bts_augment ?ts (bts_augment ?rs ?q))) =
      set (PQ.values (bts_augment ?ts ?q)) Un
      set (PQ.values (bts_augment ?rs ?q))",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 0)))),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_hole 3,
             template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 0)))),
         template_app
          (template_hole 3,
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 0)))))),
    ("PQ_Implementation.alist_add_Cons",
     "distinct (vals (?x # ?xs)) ==>
      set (elements (add ?x ?xs)) = set (elements (?x # ?xs))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 8,
              template_app
               (template_app (template_hole 7, template_hole 6),
                template_app
                 (template_app (template_hole 5, template_var 1),
                  template_var 0)))
            )],
       template_equation
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))),
         template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_app
              (template_app (template_hole 5, template_var 1),
               template_var 0)))))),
    ("PQ_Implementation.alist_pqueue_priority",
     "[| distinct (vals ?xs); (?v, ?a) : set (elements ?xs) |]
      ==> PQ.priority (pqueue ?xs) ?v = Some ?a",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 11,
              template_app
               (template_app (template_hole 10, template_hole 9),
                template_var 2))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app
                 (template_app (template_hole 7, template_var 1),
                  template_var 0)),
              template_app
               (template_hole 6,
                template_app
                 (template_app (template_hole 5, template_hole 4),
                  template_var 2)))
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 2)),
           template_var 1),
         template_app (template_hole 0, template_var 0)))),
    ("PQ_Implementation.is_binqueue_min_Min_prios",
     "[| is_binqueue ?l ?xs; normalized ?xs; ?xs ~= [] |]
      ==> Binomial_Queue.min ?xs = Some (Min (set (prios ?xs)))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 11, template_var 1),
              template_var 0)
            ),
        template_predicate
         (template_app (template_hole 10, template_var 0)),
        template_negation
         (template_equation (template_var 0, template_hole 7))],
       template_equation
        (template_app (template_hole 5, template_var 0),
         template_app
          (template_hole 4,
           template_app
            (template_hole 3,
             template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_hole 0),
                 template_var 0))))))),
    ("PQ_Implementation.dfs_match_not_in",
     "ALL t. Some t : set ?xs --> priority t ~= ?a ==>
      set (dfs ?f (map (match ?a) ?xs)) = set (dfs ?f ?xs)",
     template_implication
      ([template_predicate (template_app (template_hole 12, t_empty))],
       template_equation
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 0),
             template_app
              (template_app
                (template_hole 1,
                 template_app (template_hole 0, template_var 1)),
               template_var 2))),
         template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 0),
             template_var 2))))),
    ("PQ_Implementation.insert_p_push",
     "[| distinct (vals ?xs); ?v ~: set (vals ?xs) |]
      ==> set (prios (Binomial_Queue.insert ?a ?v ?xs)) =
          set (priorities (PQ.push ?v ?a (pqueue ?xs)))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 13,
              template_app
               (template_app (template_hole 12, template_hole 11),
                template_var 2))
            ),
        template_negation
         (
            template_predicate
             (
                template_app
                 (template_app (template_hole 9, template_var 1),
                  template_app
                   (template_hole 8,
                    template_app
                     (template_app (template_hole 12, template_hole 11),
                      template_var 2)))
                )
            )],
       template_equation
        (template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, template_hole 4),
             template_app
              (template_app
                (template_app (template_hole 3, template_var 0),
                 template_var 1),
               template_var 2))),
         template_app
          (template_hole 6,
           template_app
            (template_hole 2,
             template_app
              (template_app
                (template_app (template_hole 1, template_var 1),
                 template_var 0),
               template_app (template_hole 0, template_var 2))))))),
    ("PQ_Implementation.insert_push",
     "[| distinct (vals ?xs); ?v ~: set (vals ?xs) |]
      ==> set (elements (Binomial_Queue.insert ?a ?v ?xs)) =
          set (pq.alist_of (PQ.push ?v ?a (pqueue ?xs)))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 13,
              template_app
               (template_app (template_hole 12, template_hole 11),
                template_var 2))
            ),
        template_negation
         (
            template_predicate
             (
                template_app
                 (template_app (template_hole 9, template_var 1),
                  template_app
                   (template_hole 8,
                    template_app
                     (template_app (template_hole 12, template_hole 11),
                      template_var 2)))
                )
            )],
       template_equation
        (template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, template_hole 4),
             template_app
              (template_app
                (template_app (template_hole 3, template_var 0),
                 template_var 1),
               template_var 2))),
         template_app
          (template_hole 6,
           template_app
            (template_hole 2,
             template_app
              (template_app
                (template_app (template_hole 1, template_var 1),
                 template_var 0),
               template_app (template_hole 0, template_var 2))))))),
    ("PQ_Implementation.vals_merge_distinct",
     "[| distinct (bt_dfs val ?t); distinct (bt_dfs val ?r);
         set (bt_dfs val ?t) Int set (bt_dfs val ?r) = {} |]
      ==> distinct (bt_dfs val (merge ?t ?r))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 7,
              template_app
               (template_app (template_hole 6, template_hole 5),
                template_var 1))
            ),
        template_predicate
         (
            template_app
             (template_hole 7,
              template_app
               (template_app (template_hole 6, template_hole 5),
                template_var 0))
            ),
        template_equation
         (template_app
           (template_app
             (template_hole 3,
              template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 6, template_hole 5),
                  template_var 1))),
            template_app
             (template_hole 2,
              template_app
               (template_app (template_hole 6, template_hole 5),
                template_var 0))),
          template_hole 1)],
       template_predicate
        (
           template_app
            (template_hole 7,
             template_app
              (template_app (template_hole 6, template_hole 5),
               template_app
                (template_app (template_hole 0, template_var 1),
                 template_var 0)))
           ))),
    ("PQ_Implementation.vals_meld_distinct",
     "[| distinct (vals ?xs); distinct (vals ?ys);
         set (vals ?xs) Int set (vals ?ys) = {} |]
      ==> distinct (vals (meld ?xs ?ys))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 7,
              template_app
               (template_app (template_hole 6, template_hole 5),
                template_var 1))
            ),
        template_predicate
         (
            template_app
             (template_hole 7,
              template_app
               (template_app (template_hole 6, template_hole 5),
                template_var 0))
            ),
        template_equation
         (template_app
           (template_app
             (template_hole 3,
              template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 6, template_hole 5),
                  template_var 1))),
            template_app
             (template_hole 2,
              template_app
               (template_app (template_hole 6, template_hole 5),
                template_var 0))),
          template_hole 1)],
       template_predicate
        (
           template_app
            (template_hole 7,
             template_app
              (template_app (template_hole 6, template_hole 5),
               template_app
                (template_app (template_hole 0, template_var 1),
                 template_var 0)))
           ))),
    ("PQ_Implementation.bt_alist_augment",
     "[| distinct (bt_dfs val ?t);
         set (bt_dfs val ?t) Int set (PQ.values ?q) = {} |]
      ==> set (bt_dfs alist ?t) Un set (pq.alist_of ?q) =
          set (pq.alist_of (bt_augment ?t ?q))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 14,
              template_app
               (template_app (template_hole 13, template_hole 12),
                template_var 1))
            ),
        template_equation
         (template_app
           (template_app
             (template_hole 10,
              template_app
               (template_hole 9,
                template_app
                 (template_app (template_hole 13, template_hole 12),
                  template_var 1))),
            template_app
             (template_hole 9,
              template_app (template_hole 8, template_var 0))),
          template_hole 7)],
       template_equation
        (template_app
          (template_app
            (template_hole 5,
             template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_hole 2),
                 template_var 1))),
           template_app
            (template_hole 4,
             template_app (template_hole 1, template_var 0))),
         template_app
          (template_hole 4,
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0)))))),
    ("PQ_Implementation.bt_alist_augment",
     "[| distinct (bts_dfs val ?ts);
         set (bts_dfs val ?ts) Int set (PQ.values ?q) = {} |]
      ==> set (bts_dfs alist ?ts) Un set (pq.alist_of ?q) =
          set (pq.alist_of (bts_augment ?ts ?q))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 14,
              template_app
               (template_app (template_hole 13, template_hole 12),
                template_var 1))
            ),
        template_equation
         (template_app
           (template_app
             (template_hole 10,
              template_app
               (template_hole 9,
                template_app
                 (template_app (template_hole 13, template_hole 12),
                  template_var 1))),
            template_app
             (template_hole 9,
              template_app (template_hole 8, template_var 0))),
          template_hole 7)],
       template_equation
        (template_app
          (template_app
            (template_hole 5,
             template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_hole 2),
                 template_var 1))),
           template_app
            (template_hole 4,
             template_app (template_hole 1, template_var 0))),
         template_app
          (template_hole 4,
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0)))))),
    ("PQ_Implementation.alist_insert",
     "[| distinct (vals ?xs); ?v ~: set (vals ?xs) |]
      ==> set (elements (Binomial_Queue.insert ?a ?v ?xs)) =
          set (elements ?xs) Un {(?v, ?a)}",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 14,
              template_app
               (template_app (template_hole 13, template_hole 12),
                template_var 2))
            ),
        template_negation
         (
            template_predicate
             (
                template_app
                 (template_app (template_hole 10, template_var 1),
                  template_app
                   (template_hole 9,
                    template_app
                     (template_app (template_hole 13, template_hole 12),
                      template_var 2)))
                )
            )],
       template_equation
        (template_app
          (template_hole 7,
           template_app
            (template_app (template_hole 6, template_hole 5),
             template_app
              (template_app
                (template_app (template_hole 4, template_var 0),
                 template_var 1),
               template_var 2))),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_hole 5),
                 template_var 2))),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 1),
                 template_var 0)),
             template_hole 0))))),
    ("PQ_Implementation.vals_add_distinct",
     "[| distinct (vals ?xs); distinct (vals [?x]);
         set (vals ?xs) Int set (vals [?x]) = {} |]
      ==> distinct (vals (add ?x ?xs))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 9,
              template_app
               (template_app (template_hole 8, template_hole 7),
                template_var 1))
            ),
        template_predicate
         (
            template_app
             (template_hole 9,
              template_app
               (template_app (template_hole 8, template_hole 7),
                template_app
                 (template_app (template_hole 6, template_var 0),
                  template_hole 5)))
            ),
        template_equation
         (template_app
           (template_app
             (template_hole 3,
              template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 8, template_hole 7),
                  template_var 1))),
            template_app
             (template_hole 2,
              template_app
               (template_app (template_hole 8, template_hole 7),
                template_app
                 (template_app (template_hole 6, template_var 0),
                  template_hole 5)))),
          template_hole 1)],
       template_predicate
        (
           template_app
            (template_hole 9,
             template_app
              (template_app (template_hole 8, template_hole 7),
               template_app
                (template_app (template_hole 0, template_var 0),
                 template_var 1)))
           ))),
    ("PQ_Implementation.find_min_v_min",
     "[| is_binqueue ?l ?xs; ?xs ~= []; normalized ?xs; distinct (vals ?xs);
         distinct (prios ?xs) |]
      ==> val (the (find_min ?xs)) = PQ.min (pqueue ?xs)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 15, template_var 1),
              template_var 0)
            ),
        template_negation
         (template_equation (template_var 0, template_hole 12)),
        template_predicate
         (template_app (template_hole 11, template_var 0)),
        template_predicate
         (
            template_app
             (template_hole 10,
              template_app
               (template_app (template_hole 9, template_hole 8),
                template_var 0))
            ),
        template_predicate
         (
            template_app
             (template_hole 7,
              template_app
               (template_app (template_hole 6, template_hole 5),
                template_var 0))
            )],
       template_equation
        (template_app
          (template_hole 8,
           template_app
            (template_hole 3,
             template_app (template_hole 2, template_var 0))),
         template_app
          (template_hole 1,
           template_app (template_hole 0, template_var 0))))),
    ("PQ_Implementation.min_p_min",
     "[| is_binqueue ?l ?xs; ?xs ~= []; normalized ?xs; distinct (vals ?xs);
         distinct (prios ?xs) |]
      ==> Binomial_Queue.min ?xs =
          PQ.priority (pqueue ?xs) (PQ.min (pqueue ?xs))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 15, template_var 1),
              template_var 0)
            ),
        template_negation
         (template_equation (template_var 0, template_hole 12)),
        template_predicate
         (template_app (template_hole 11, template_var 0)),
        template_predicate
         (
            template_app
             (template_hole 10,
              template_app
               (template_app (template_hole 9, template_hole 8),
                template_var 0))
            ),
        template_predicate
         (
            template_app
             (template_hole 7,
              template_app
               (template_app (template_hole 6, template_hole 5),
                template_var 0))
            )],
       template_equation
        (template_app (template_hole 3, template_var 0),
         template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 0)),
           template_app
            (template_hole 0,
             template_app (template_hole 1, template_var 0)))))),
    ("PQ_Implementation.alist_delete_min",
     "[| distinct (vals ?xs); distinct (prios ?xs);
         find_min ?xs = Some (bintree.Node ?a ?v ?ts) |]
      ==> set (elements (delete_min ?xs)) =
          set (elements ?xs) - {(?v, ?a)}",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 18,
              template_app
               (template_app (template_hole 17, template_hole 16),
                template_var 3))
            ),
        template_predicate
         (
            template_app
             (template_hole 15,
              template_app
               (template_app (template_hole 14, template_hole 13),
                template_var 3))
            ),
        template_equation
         (template_app (template_hole 11, template_var 3),
          template_app
           (template_hole 10,
            template_app
             (template_app
               (template_app (template_hole 9, template_var 2),
                template_var 1),
              template_var 0)))],
       template_equation
        (template_app
          (template_hole 7,
           template_app
            (template_app (template_hole 6, template_hole 5),
             template_app (template_hole 4, template_var 3))),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_hole 5),
                 template_var 3))),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 1),
                 template_var 2)),
             template_hole 0))))),
    ("PQ_Implementation.alist_remove_min",
     "[| is_binqueue ?l ?xs; distinct (vals ?xs); distinct (prios ?xs);
         normalized ?xs; ?xs ~= [] |]
      ==> set (elements (delete_min ?xs)) =
          set (pq.alist_of (remove_min (pqueue ?xs)))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 18, template_var 1),
              template_var 0)
            ),
        template_predicate
         (
            template_app
             (template_hole 17,
              template_app
               (template_app (template_hole 16, template_hole 15),
                template_var 0))
            ),
        template_predicate
         (
            template_app
             (template_hole 14,
              template_app
               (template_app (template_hole 13, template_hole 12),
                template_var 0))
            ),
        template_predicate
         (template_app (template_hole 11, template_var 0)),
        template_negation
         (template_equation (template_var 0, template_hole 8))],
       template_equation
        (template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, template_hole 4),
             template_app (template_hole 3, template_var 0))),
         template_app
          (template_hole 6,
           template_app
            (template_hole 2,
             template_app
              (template_hole 1,
               template_app (template_hole 0, template_var 0))))))),
    ("PQ_Implementation.find_min_p_min",
     "[| is_binqueue ?l ?xs; ?xs ~= []; normalized ?xs; distinct (vals ?xs);
         distinct (prios ?xs) |]
      ==> priority (the (find_min ?xs)) =
          the (PQ.priority (pqueue ?xs) (PQ.min (pqueue ?xs)))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 17, template_var 1),
              template_var 0)
            ),
        template_negation
         (template_equation (template_var 0, template_hole 14)),
        template_predicate
         (template_app (template_hole 13, template_var 0)),
        template_predicate
         (
            template_app
             (template_hole 12,
              template_app
               (template_app (template_hole 11, template_hole 10),
                template_var 0))
            ),
        template_predicate
         (
            template_app
             (template_hole 9,
              template_app
               (template_app (template_hole 8, template_hole 7),
                template_var 0))
            )],
       template_equation
        (template_app
          (template_hole 7,
           template_app
            (template_hole 5,
             template_app (template_hole 4, template_var 0))),
         template_app
          (template_hole 3,
           template_app
            (template_app
              (template_hole 2,
               template_app (template_hole 1, template_var 0)),
             template_app
              (template_hole 0,
               template_app (template_hole 1, template_var 0))))))),
    ("PQ_Implementation.bt_augment_alist_union",
     "[| distinct (bts_dfs val (?r # ?ts));
         set (bts_dfs val (?r # ?ts)) Int set (PQ.values ?q) = {} |]
      ==> set (pq.alist_of (bts_augment ?ts (bt_augment ?r ?q))) =
          set (pq.alist_of (bts_augment ?ts ?q)) Un
          set (pq.alist_of (bt_augment ?r ?q))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 14,
              template_app
               (template_app (template_hole 13, template_hole 12),
                template_app
                 (template_app (template_hole 11, template_var 2),
                  template_var 1)))
            ),
        template_equation
         (template_app
           (template_app
             (template_hole 9,
              template_app
               (template_hole 8,
                template_app
                 (template_app (template_hole 13, template_hole 12),
                  template_app
                   (template_app (template_hole 11, template_var 2),
                    template_var 1)))),
            template_app
             (template_hole 8,
              template_app (template_hole 7, template_var 0))),
          template_hole 6)],
       template_equation
        (template_app
          (template_hole 4,
           template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_var 1),
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 0)))),
         template_app
          (template_app
            (template_hole 0,
             template_app
              (template_hole 4,
               template_app
                (template_hole 3,
                 template_app
                  (template_app (template_hole 2, template_var 1),
                   template_var 0)))),
           template_app
            (template_hole 4,
             template_app
              (template_hole 3,
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 0))))))),
    ("PQ_Implementation.alist_merge",
     "[| distinct (bt_dfs val ?t); distinct (bt_dfs val ?r);
         set (bt_dfs val ?t) Int set (bt_dfs val ?r) = {} |]
      ==> set (bt_dfs alist (merge ?t ?r)) =
          set (bt_dfs alist ?t) Un set (bt_dfs alist ?r)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 12,
              template_app
               (template_app (template_hole 11, template_hole 10),
                template_var 1))
            ),
        template_predicate
         (
            template_app
             (template_hole 12,
              template_app
               (template_app (template_hole 11, template_hole 10),
                template_var 0))
            ),
        template_equation
         (template_app
           (template_app
             (template_hole 8,
              template_app
               (template_hole 7,
                template_app
                 (template_app (template_hole 11, template_hole 10),
                  template_var 1))),
            template_app
             (template_hole 7,
              template_app
               (template_app (template_hole 11, template_hole 10),
                template_var 0))),
          template_hole 6)],
       template_equation
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 0))),
         template_app
          (template_app
            (template_hole 0,
             template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_hole 2),
                 template_var 1))),
           template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_var 0)))))),
    ("PQ_Implementation.alist_meld",
     "[| distinct (vals ?xs); distinct (vals ?ys);
         set (vals ?xs) Int set (vals ?ys) = {} |]
      ==> set (elements (meld ?xs ?ys)) =
          set (elements ?xs) Un set (elements ?ys)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 12,
              template_app
               (template_app (template_hole 11, template_hole 10),
                template_var 1))
            ),
        template_predicate
         (
            template_app
             (template_hole 12,
              template_app
               (template_app (template_hole 11, template_hole 10),
                template_var 0))
            ),
        template_equation
         (template_app
           (template_app
             (template_hole 8,
              template_app
               (template_hole 7,
                template_app
                 (template_app (template_hole 11, template_hole 10),
                  template_var 1))),
            template_app
             (template_hole 7,
              template_app
               (template_app (template_hole 11, template_hole 10),
                template_var 0))),
          template_hole 6)],
       template_equation
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 0))),
         template_app
          (template_app
            (template_hole 0,
             template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_hole 2),
                 template_var 1))),
           template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_var 0)))))),
    ("PQ_Implementation.dfs_match",
     "[| distinct (prios ?xs); distinct (dfs ?f ?xs); Some ?t : set ?xs;
         priority ?t = ?a |]
      ==> set (dfs ?f (map (match ?a) ?xs)) =
          set (dfs ?f ?xs) - set (bt_dfs ?f ?t)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 14,
              template_app
               (template_app (template_hole 13, template_hole 12),
                template_var 3))
            ),
        template_predicate
         (
            template_app
             (template_hole 11,
              template_app
               (template_app (template_hole 10, template_var 2),
                template_var 3))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 9,
                template_app (template_hole 8, template_var 1)),
              template_app (template_hole 7, template_var 3))
            ),
        template_equation
         (template_app (template_hole 12, template_var 1), template_var 0)],
       template_equation
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 10, template_var 2),
             template_app
              (template_app
                (template_hole 3,
                 template_app (template_hole 2, template_var 0)),
               template_var 3))),
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 10, template_var 2),
                 template_var 3))),
           template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 1)))))),
    ("PQ_Implementation.bt_augment_alist_union",
     "[| distinct (bts_dfs val [?r, ?t]);
         set (bts_dfs val [?r, ?t]) Int set (PQ.values ?q) = {} |]
      ==> set (pq.alist_of (bt_augment ?t (bt_augment ?r ?q))) =
          set (pq.alist_of (bt_augment ?t ?q)) Un
          set (pq.alist_of (bt_augment ?r ?q))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 14,
              template_app
               (template_app (template_hole 13, template_hole 12),
                template_app
                 (template_app (template_hole 11, template_var 2),
                  template_app
                   (template_app (template_hole 11, template_var 1),
                    template_hole 10))))
            ),
        template_equation
         (template_app
           (template_app
             (template_hole 8,
              template_app
               (template_hole 7,
                template_app
                 (template_app (template_hole 13, template_hole 12),
                  template_app
                   (template_app (template_hole 11, template_var 2),
                    template_app
                     (template_app (template_hole 11, template_var 1),
                      template_hole 10))))),
            template_app
             (template_hole 7,
              template_app (template_hole 6, template_var 0))),
          template_hole 5)],
       template_equation
        (template_app
          (template_hole 3,
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 0)))),
         template_app
          (template_app
            (template_hole 0,
             template_app
              (template_hole 3,
               template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_var 1),
                   template_var 0)))),
           template_app
            (template_hole 3,
             template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 0)))))))]:
   (string * thm * template) list
### theory "Draft.PQ_ImplementationMoreTemplates"
### 0.300s elapsed time, 0.386s cpu time, 0.000s GC time
val it = (): unit
