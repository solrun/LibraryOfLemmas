   [("Affine_Form.pdevs_apply_zero_pdevs",
     "pdevs_apply zero_pdevs ?i = (0::?'a)",
     template_equation
      (template_app
        (template_app (template_hole 2, template_hole 1), template_var 0),
       template_hole 0)),
    ("Affine_Form.pdevs_val_zero_pdevs",
     "pdevs_val ?e zero_pdevs = (0::?'a)",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 0), template_hole 1),
       template_hole 0)),
    ("Affine_Form.pdevs_of_list_dense_list_of_pdevs",
     "pdevs_of_list (dense_list_of_pdevs ?x) = ?x",
     template_equation
      (template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)),
       template_var 0)),
    ("Affine_Form.pdevs_apply_pdevs_of_list_Nil",
     "pdevs_apply (pdevs_of_list []) ?i = (0::?'a)",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app (template_hole 2, template_hole 1)),
         template_var 0),
       template_hole 0)),
    ("Affine_Form.pdevs_val_zero", "pdevs_val (%_. 0) ?x = (0::?'a)",
     template_equation
      (template_app
        (template_app (template_hole 2, t_empty), template_var 0),
       template_hole 0)),
    ("Affine_Form.degree_uminus_pdevs",
     "degree (uminus_pdevs ?x) = degree ?x",
     template_equation
      (template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)),
       template_app (template_hole 1, template_var 0))),
    ("Affine_Form.msum_pdevs_zero_ident", "msum_pdevs 0 zero_pdevs ?x = ?x",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 2, template_hole 1),
           template_hole 0),
         template_var 0),
       template_var 0)),
    ("Affine_Form.fst_uminus_aform", "fst (uminus_aform ?Y) = - fst ?Y",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 0, template_app (template_hole 2, template_var 0)))),
    ("Affine_Form.pdevs_apply_uminus_pdevs",
     "pdevs_apply (uminus_pdevs ?x) = - pdevs_apply ?x",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 0, template_app (template_hole 2, template_var 0)))),
    ("Affine_Form.Affine_independent_aform",
     "Affine (independent_aform ?X ?Y) = Affine ?Y",
     template_equation
      (template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1), template_var 0)),
       template_app (template_hole 1, template_var 0))),
    ("Affine_Form.pdevs_of_list_scaleR_0",
     "pdevs_of_list (map ((*\<^sub>R) 0) ?xs) = zero_pdevs",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app
            (template_hole 3,
             template_app (template_hole 2, template_hole 1)),
           template_var 0)),
       template_hole 0)),
    ("Affine_Form.tdev_pdevs_of_list",
     "tdev (pdevs_of_list ?xs) = sum_list (map abs ?xs)",
     template_equation
      (template_app
        (template_hole 4, template_app (template_hole 3, template_var 0)),
       template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_hole 0),
           template_var 0)))),
    ("Affine_Form.msum_aform_zero_ident",
     "msum_aform 0 (0::?'a, zero_pdevs) ?x = ?x",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 4, template_hole 3),
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_hole 0)),
         template_var 0),
       template_var 0)),
    ("Affine_Form.sum_list_list_of_pdevs",
     "sum_list (map snd (list_of_pdevs ?x)) =
      sum_list (dense_list_of_pdevs ?x)",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_hole 2),
           template_app (template_hole 1, template_var 0))),
       template_app
        (template_hole 4, template_app (template_hole 0, template_var 0)))),
    ("Affine_Form.aform_val_uminus_aform",
     "aform_val ?e (uminus_aform ?X) = - aform_val ?e ?X",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 1),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 0,
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("Affine_Form.pdevs_val_uminus_pdevs",
     "pdevs_val ?e (uminus_pdevs ?x) = - pdevs_val ?e ?x",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 1),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 0,
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("Affine_Form.tdev_nonpos_iff",
     "(tdev ?X <= (0::?'a)) = (tdev ?X = (0::?'a))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app (template_hole 2, template_var 0)),
              template_hole 1)
            )],
       template_equation
        (template_app (template_hole 2, template_var 0), template_hole 1))),
    ("Affine_Form.scaleR_sum_list",
     "?a *\<^sub>R sum_list ?xs = sum_list (map ((*\<^sub>R) ?a) ?xs)",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 1),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 1,
         template_app
          (template_app
            (template_hole 0,
             template_app (template_hole 2, template_var 1)),
           template_var 0)))),
    ("Affine_Form.pdevs_val_const_pdevs_of_list",
     "pdevs_val (%_. ?c) (pdevs_of_list ?xs) = ?c *\<^sub>R sum_list ?xs",
     template_equation
      (template_app
        (template_app (template_hole 3, t_empty),
         template_app (template_hole 2, template_var 0)),
       template_app
        (template_app (template_hole 1, template_var 1),
         template_app (template_hole 0, template_var 0)))),
    ("Affine_Form.pdevs_domain_prod_of_pdevs",
     "pdevs_domain (prod_of_pdevs ?x ?y) =
      pdevs_domain ?x Un pdevs_domain ?y",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 0, template_var 0)))),
    ("Affine_Form.pdevs_of_list_map_scaleR",
     "pdevs_of_list (map ((*\<^sub>R) ?r) ?xs) =
      scaleR_pdevs ?r (pdevs_of_list ?xs)",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 1)),
           template_var 0)),
       template_app
        (template_app (template_hole 0, template_var 1),
         template_app (template_hole 3, template_var 0)))),
    ("Affine_Form.pdevs_apply_pdevs_scaleR",
     "pdevs_apply (pdevs_scaleR ?X ?y) ?n = pdevs_apply ?X ?n *\<^sub>R ?y",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 0)),
         template_var 1))),
    ("Affine_Form.pdevs_apply_scaleR_pdevs",
     "pdevs_apply (scaleR_pdevs ?x ?Y) ?n = ?x *\<^sub>R pdevs_apply ?Y ?n",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 0, template_var 2),
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("Affine_Form.fst_msum_aform",
     "fst (msum_aform ?n ?f ?g) = fst ?f + fst ?g",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1),
           template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("Affine_Form.pdevs_val_pdevs_scaleR",
     "pdevs_val ?e (pdevs_scaleR ?X ?y) = pdevs_val ?e ?X *\<^sub>R ?y",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 2),
         template_app
          (template_app (template_hole 2, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1)),
         template_var 0))),
    ("Affine_Form.pdevs_val_scaleR_pdevs",
     "pdevs_val ?e (scaleR_pdevs ?x ?Y) = ?x *\<^sub>R pdevs_val ?e ?Y",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 2),
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app (template_hole 0, template_var 1),
         template_app
          (template_app (template_hole 2, template_var 2),
           template_var 0)))),
    ("Affine_Form.pdevs_apply_pdev_upd",
     "pdevs_apply (pdev_upd ?X ?n ?x) = (pdevs_apply ?X)(?n := ?x)",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1),
           template_var 0)),
       template_app
        (template_app
          (template_app
            (template_hole 0,
             template_app (template_hole 2, template_var 2)),
           template_var 1),
         template_var 0))),
    ("Affine_Form.in_pdevs_domain",
     "(?i : pdevs_domain ?x) = (pdevs_apply ?x ?i ~= (0::?'a))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 5, template_var 1),
              template_app (template_hole 4, template_var 0))
            )],
       template_negation
        (
           template_equation
            (template_app
              (template_app (template_hole 1, template_var 0),
               template_var 1),
             template_hole 0)
           ))),
    ("Affine_Form.pdevs_apply_pdevs_inner",
     "pdevs_apply (pdevs_inner ?p ?a) ?i = pdevs_apply ?p ?i \<bullet> ?a",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 0)),
         template_var 1))),
    ("Affine_Form.pdevs_val_pdevs_inner",
     "pdevs_val ?e (pdevs_inner ?p ?a) = pdevs_val ?e ?p \<bullet> ?a",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 2),
         template_app
          (template_app (template_hole 2, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1)),
         template_var 0))),
    ("Affine_Form.pdevs_val_sum_list",
     "pdevs_val (%_. ?c) ?X =
      ?c *\<^sub>R sum_list (map snd (list_of_pdevs ?X))",
     template_equation
      (template_app
        (template_app (template_hole 5, t_empty), template_var 0),
       template_app
        (template_app (template_hole 4, template_var 1),
         template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_app (template_hole 0, template_var 0)))))),
    ("Affine_Form.degree_pdevs_scaleR",
     "degree (pdevs_scaleR ?r ?x) =
      (if ?x = (0::?'a) then 0 else degree ?r)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 6,
              template_app
               (template_app (template_hole 5, template_var 1),
                template_var 0))
            )],
       template_dunno)),
    ("Affine_Form.degree_scaleR_pdevs",
     "degree (scaleR_pdevs ?r ?x) = (if ?r = 0 then 0 else degree ?x)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 5,
              template_app
               (template_app (template_hole 4, template_var 1),
                template_var 0))
            )],
       template_dunno)),
    ("Affine_Form.Joints_singleton_image",
     "Joints [?x] = (%x. [x]) ` Affine ?x",
     template_equation
      (template_app
        (template_hole 6,
         template_app
          (template_app (template_hole 5, template_var 0),
           template_hole 4)),
       template_app
        (template_app (template_hole 3, t_empty),
         template_app (template_hole 0, template_var 0)))),
    ("Affine_Form.tdev_eq_zero_iff",
     "(tdev ?X = 0) = (ALL e. pdevs_val e ?X = 0)",
     template_equation
      (template_app
        (template_app
          (template_hole 4, template_app (template_hole 3, template_var 0)),
         template_hole 2),
       template_app (template_hole 1, t_empty))),
    ("Affine_Form.rev_perm",
     "(mset (rev ?xs) = mset ?ys) = (mset ?xs = mset ?ys)",
     template_bimplication
      (template_equation
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 1)),
         template_app (template_hole 1, template_var 0)),
       template_equation
        (template_app (template_hole 1, template_var 1),
         template_app (template_hole 1, template_var 0)))),
    ("Affine_Form.snd_msum_aform",
     "snd (msum_aform ?n ?f ?g) = msum_pdevs ?n (snd ?f) (snd ?g)",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1),
           template_var 0)),
       template_app
        (template_app
          (template_app (template_hole 0, template_var 2),
           template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("Affine_Form.pdevs_apply_add_pdevs",
     "pdevs_apply (add_pdevs ?X ?Y) ?n =
      pdevs_apply ?X ?n + pdevs_apply ?Y ?n",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 0)),
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("Affine_Form.pdevs_val_cmul",
     "pdevs_val (%i. ?u * ?e i) ?xs = ?u *\<^sub>R pdevs_val ?e ?xs",
     template_equation
      (template_app
        (template_app (template_hole 2, t_empty), template_var 0),
       template_app
        (template_app (template_hole 0, template_var 2),
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("Affine_Form.pdevs_apply_One_pdevs",
     "pdevs_apply One_pdevs ?i =
      (if ?i < length Basis_list then Basis_list ! ?i else (0::?'a))",
     template_equation
      (template_app
        (template_app (template_hole 7, template_hole 6), template_var 0),
       template_app
        (template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app (template_hole 4, template_var 0),
               template_app (template_hole 3, template_hole 2))),
           template_app
            (template_app (template_hole 1, template_hole 2),
             template_var 0)),
         template_hole 0))),
    ("Affine_Form.pdevs_val_add_pdevs",
     "pdevs_val ?e (add_pdevs ?X ?Y) = pdevs_val ?e ?X + pdevs_val ?e ?Y",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 2),
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1)),
         template_app
          (template_app (template_hole 2, template_var 2),
           template_var 0)))),
    ("Affine_Form.singleton_mem_Joints",
     "([?x] : Joints [?X]) = (?x : Affine ?X)",
     template_equation
      (template_app
        (template_app
          (template_hole 7,
           template_app
            (template_app (template_hole 6, template_var 1),
             template_hole 5)),
         template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 0),
             template_hole 2))),
       template_app
        (template_app (template_hole 1, template_var 1),
         template_app (template_hole 0, template_var 0)))),
    ("Affine_Form.partition_permI",
     "mset (filter ?p ?xs @ filter (Not o ?p) ?xs) = mset ?xs",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_var 1),
               template_var 0)),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_hole 0),
                 template_var 1)),
             template_var 0))),
       template_app (template_hole 4, template_var 0))),
    ("Affine_Form.apply_pdevs_prod_of_pdevs",
     "pdevs_apply (prod_of_pdevs ?x ?y) ?i =
      (pdevs_apply ?x ?i, pdevs_apply ?y ?i)",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 0)),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Affine_Form.pdevs_val_prod_of_pdevs",
     "pdevs_val ?e (prod_of_pdevs ?x ?y) =
      (pdevs_val ?e ?x, pdevs_val ?e ?y)",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 2),
         template_app
          (template_app (template_hole 3, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_app
          (template_app (template_hole 0, template_var 2),
           template_var 0)))),
    ("Affine_Form.aform_val_inner2_aform",
     "aform_val ?e (inner2_aform ?Z ?n ?i) =
      inner2 (aform_val ?e ?Z) ?n ?i",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 3),
         template_app
          (template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1),
           template_var 0)),
       template_app
        (template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 3),
               template_var 2)),
           template_var 1),
         template_var 0))),
    ("Affine_Form.pdevs_apply_pdevs_of_list",
     "pdevs_apply (pdevs_of_list ?xs) ?i =
      (if ?i < length ?xs then ?xs ! ?i else (0::?'a))",
     template_equation
      (template_app
        (template_app
          (template_hole 6, template_app (template_hole 5, template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_var 0),
               template_app (template_hole 2, template_var 1))),
           template_app
            (template_app (template_hole 1, template_var 1),
             template_var 0)),
         template_hole 0))),
    ("Affine_Form.sum_list_partition",
     "sum_list (filter ?p ?xs) + sum_list (filter (Not o ?p) ?xs) =
      sum_list ?xs",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_var 1),
               template_var 0))),
         template_app
          (template_hole 3,
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_hole 0),
                 template_var 1)),
             template_var 0))),
       template_app (template_hole 3, template_var 0))),
    ("Affine_Form.pdevs_val_pdevs_domain",
     "pdevs_val ?e ?X =
      (SUM i:pdevs_domain ?X. ?e i *\<^sub>R pdevs_apply ?X i)",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 1), template_var 0),
       template_app
        (template_app (template_hole 3, t_empty),
         template_app (template_hole 0, template_var 0)))),
    ("Affine_Form.tdev_pdevs_of_ivl",
     "tdev (pdevs_of_ivl ?l ?u) = \<bar>?u - ?l\<bar> /\<^sub>R 2",
     template_equation
      (template_app
        (template_hole 8,
         template_app
          (template_app (template_hole 7, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 6,
           template_app
            (template_hole 5,
             template_app
              (template_hole 4,
               template_app (template_hole 3, template_hole 2)))),
         template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 0),
             template_var 1))))),
    ("Affine_Form.closed_segment_real",
     "closed_segment ?a ?b = (if ?a <= ?b then {?a..?b} else {?b..?a})",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 1), template_var 0),
       template_app
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 0)),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0)),
         template_app
          (template_app (template_hole 0, template_var 0),
           template_var 1)))),
    ("Affine_Form.map_filter",
     "map ?f (filter (%x. ?P (?f x)) ?xs) = filter ?P (map ?f ?xs)",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 2),
         template_app
          (template_app (template_hole 1, t_empty), template_var 0)),
       template_app
        (template_app (template_hole 0, template_var 1),
         template_app
          (template_app (template_hole 2, template_var 2),
           template_var 0)))),
    ("Affine_Form.sum_list_filter_dense_list_of_pdevs",
     "sum_list (filter ?p (dense_list_of_pdevs ?x)) =
      sum_list (map snd (filter (?p o snd) (list_of_pdevs ?x)))",
     template_equation
      (template_app
        (template_hole 7,
         template_app
          (template_app (template_hole 6, template_var 1),
           template_app (template_hole 5, template_var 0))),
       template_app
        (template_hole 7,
         template_app
          (template_app (template_hole 4, template_hole 3),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 1),
                 template_hole 3)),
             template_app (template_hole 0, template_var 0)))))),
    ("Affine_Form.pdevs_apply_inner_scaleR_pdevs",
     "pdevs_apply (inner_scaleR_pdevs ?a ?x) ?i =
      (?a \<bullet> pdevs_apply ?x ?i) *\<^sub>R pdevs_apply ?x ?i",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_app
              (template_app (template_hole 3, template_var 1),
               template_var 0))),
         template_app
          (template_app (template_hole 3, template_var 1),
           template_var 0)))),
    ("Affine_Form.pdevs_val_sum",
     "pdevs_val ?e ?X = (SUM i<degree ?X. ?e i *\<^sub>R pdevs_apply ?X i)",
     template_equation
      (template_app
        (template_app (template_hole 5, template_var 1), template_var 0),
       template_app
        (template_app (template_hole 4, t_empty),
         template_app
          (template_hole 1,
           template_app (template_hole 0, template_var 0))))),
    ("Affine_Form.sum_list_take_pdevs_val_eq",
     "sum_list (take ?d ?xs) =
      pdevs_val (%i. if i < ?d then 1 else 0) (pdevs_of_list ?xs)",
     template_equation
      (template_app
        (template_hole 7,
         template_app
          (template_app (template_hole 6, template_var 1), template_var 0)),
       template_app
        (template_app (template_hole 5, t_empty),
         template_app (template_hole 0, template_var 0)))),
    ("Affine_Form.list_of_pdevs_perm_filter_nonzero",
     "mset (map snd (list_of_pdevs ?X)) =
      mset (filter ((~=) (0::?'a)) (dense_list_of_pdevs ?X))",
     template_equation
      (template_app
        (template_hole 8,
         template_app
          (template_app (template_hole 7, template_hole 6),
           template_app (template_hole 5, template_var 0))),
       template_app
        (template_hole 8,
         template_app
          (template_app (template_hole 4, t_empty),
           template_app (template_hole 0, template_var 0))))),
    ("Affine_Form.pdevs_apply_filter_pdevs",
     "pdevs_apply (filter_pdevs ?I ?x) ?i =
      (if ?I ?i (pdevs_apply ?x ?i) then pdevs_apply ?x ?i else (0::?'a))",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_var 2, template_var 0),
               template_app
                (template_app (template_hole 3, template_var 1),
                 template_var 0))),
           template_app
            (template_app (template_hole 3, template_var 1),
             template_var 0)),
         template_hole 0))),
    ("Affine_Form.pdevs_val_minus",
     "pdevs_val (%i. ?e i - ?f i) ?xs =
      pdevs_val ?e ?xs - pdevs_val ?f ?xs",
     template_equation
      (template_app
        (template_app (template_hole 2, t_empty), template_var 0),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 0)),
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("Affine_Form.pdevs_val_add",
     "pdevs_val (%i. ?e i + ?f i) ?xs =
      pdevs_val ?e ?xs + pdevs_val ?f ?xs",
     template_equation
      (template_app
        (template_app (template_hole 2, t_empty), template_var 0),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 0)),
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("Affine_Form.degree_pdevs_of_list_scaleR",
     "degree (pdevs_of_list (map ((*\<^sub>R) ?c) ?xs)) =
      (if ?c ~= 0 then degree (pdevs_of_list ?xs) else 0)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 8,
              template_app
               (template_hole 7,
                template_app
                 (template_app
                   (template_hole 6,
                    template_app (template_hole 5, template_var 1)),
                  template_var 0)))
            )],
       template_dunno)),
    ("Affine_Form.Max_Collect_less_nat",
     "Max {i. i < ?k} = (if ?k = 0 then Max {} else ?k - 1)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 7, template_app (template_hole 6, t_empty))
            )],
       template_dunno)),
    ("Affine_Form.pdevs_apply_unop_pdevs",
     "pdevs_apply (unop_pdevs ?f ?x) ?i =
      (if pdevs_apply ?x ?i = (0::?'b) then 0::?'a
       else ?f (pdevs_apply ?x ?i))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_app (template_hole 5, template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_dunno)),
    ("Affine_Form.sorted_list_of_pdevs_domain_eq",
     "sorted_list_of_set (pdevs_domain ?X) =
      filter ((~=) (0::?'a) o pdevs_apply ?X) [0..<degree ?X]",
     template_equation
      (template_app
        (template_hole 10, template_app (template_hole 9, template_var 0)),
       template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app (template_hole 7, t_empty),
             template_app (template_hole 3, template_var 0))),
         template_app
          (template_app (template_hole 2, template_hole 1),
           template_app (template_hole 0, template_var 0))))),
    ("Affine_Form.pdevs_apply_pdevs_of_list_Cons",
     "pdevs_apply (pdevs_of_list (?x # ?xs)) ?i =
      (if ?i = 0 then ?x else pdevs_apply (pdevs_of_list ?xs) (?i - 1))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app
                 (template_hole 6,
                  template_app
                   (template_app (template_hole 5, template_var 2),
                    template_var 1))),
              template_var 0)
            )],
       template_dunno)),
    ("Affine_Form.pdevs_val_map",
     "pdevs_val ?e (pdevs_of_list ?xs) =
      (SUM n<-[0..<length ?xs]. ?e n *\<^sub>R ?xs ! n)",
     template_equation
      (template_app
        (template_app (template_hole 8, template_var 1),
         template_app (template_hole 7, template_var 0)),
       template_app
        (template_hole 6,
         template_app
          (template_app (template_hole 5, t_empty),
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_app (template_hole 0, template_var 0)))))),
    ("Affine_Form.pdevs_val_filter_pdevs_eval",
     "pdevs_val ?e (filter_pdevs ?p ?x) =
      pdevs_val (%i. if ?p i (pdevs_apply ?x i) then ?e i else 0) ?x",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 2),
         template_app
          (template_app (template_hole 3, template_var 1), template_var 0)),
       template_app
        (template_app (template_hole 4, t_empty), template_var 0))),
    ("Affine_Form.pdevs_apply_pdevs_inner2",
     "pdevs_apply (pdevs_inner2 ?p ?a ?b) ?i =
      (pdevs_apply ?p ?i \<bullet> ?a, pdevs_apply ?p ?i \<bullet> ?b)",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app
              (template_app (template_hole 3, template_var 3),
               template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 3),
                 template_var 0)),
             template_var 2)),
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 3),
               template_var 0)),
           template_var 1)))),
    ("Affine_Form.pdevs_apply_msum_pdevs",
     "pdevs_apply (msum_pdevs ?n ?f ?g) ?i =
      (if ?i < ?n then pdevs_apply ?f ?i else pdevs_apply ?g (?i - ?n))",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app
              (template_app (template_hole 3, template_var 3),
               template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 3)),
           template_app
            (template_app (template_hole 4, template_var 2),
             template_var 0)),
         template_app
          (template_app (template_hole 4, template_var 1),
           template_app
            (template_app (template_hole 0, template_var 0),
             template_var 3))))),
    ("Affine_Form.pdevs_val_pdevs_of_list_eq",
     "pdevs_val ?e (pdevs_of_list (?x # ?xs)) =
      ?e 0 *\<^sub>R ?x + pdevs_val (?e o (+) 1) (pdevs_of_list ?xs)",
     template_equation
      (template_app
        (template_app (template_hole 8, template_var 2),
         template_app
          (template_hole 7,
           template_app
            (template_app (template_hole 6, template_var 1),
             template_var 0))),
       template_app
        (template_app
          (template_hole 5,
           template_app
            (template_app
              (template_hole 4,
               template_app (template_var 2, template_hole 3)),
             template_var 1)),
         template_app
          (template_app
            (template_hole 8,
             template_app
              (template_app (template_hole 2, template_var 2),
               template_app (template_hole 1, template_hole 0))),
           template_app (template_hole 7, template_var 0))))),
    ("Affine_Form.mem_Joints_singleton",
     "(?x : Joints [?X]) = (EX y. ?x = [y] & y : Affine ?X)",
     template_equation
      (template_app
        (template_app (template_hole 10, template_var 1),
         template_app
          (template_hole 9,
           template_app
            (template_app (template_hole 8, template_var 0),
             template_hole 7))),
       template_app (template_hole 6, t_empty))),
    ("Affine_Form.pdevs_applys_filter_pdevs_list",
     "pdevs_applys (filter_pdevs_list ?I ?X) ?i =
      (if ?I ?i (pdevs_applys ?X ?i) then pdevs_applys ?X ?i
       else map (%_. 0::?'a) ?X)",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_var 2, template_var 0),
               template_app
                (template_app (template_hole 4, template_var 1),
                 template_var 0))),
           template_app
            (template_app (template_hole 4, template_var 1),
             template_var 0)),
         template_app
          (template_app (template_hole 1, t_empty), template_var 1)))),
    ("Affine_Form.pdevs_val_zip",
     "pdevs_val ?e (pdevs_of_list ?xs) =
      sum_list (map2 (%i. (*\<^sub>R) (?e i)) [0..<length ?xs] ?xs)",
     template_equation
      (template_app
        (template_app (template_hole 9, template_var 1),
         template_app (template_hole 8, template_var 0)),
       template_app
        (template_hole 7,
         template_app
          (template_app
            (template_hole 6, template_app (template_hole 5, t_empty)),
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app (template_hole 2, template_hole 1),
                 template_app (template_hole 0, template_var 0))),
             template_var 0))))),
    ("Affine_Form.pdevs_domain_pdevs_of_list_Cons",
     "pdevs_domain (pdevs_of_list (?x # ?xs)) =
      (if ?x = (0::?'a) then {} else {0}) Un
      (+) 1 ` pdevs_domain (pdevs_of_list ?xs)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 12,
              template_app
               (template_hole 11,
                template_app
                 (template_app (template_hole 10, template_var 1),
                  template_var 0)))
            )],
       template_dunno)),
    ("Affine_Form.valuate_ex",
     "(?x : valuate ?f) = (EX e. (ALL i. e i : {- 1..1}) & ?x = ?f e)",
     template_equation
      (template_app
        (template_app (template_hole 9, template_var 1),
         template_app (template_hole 8, template_var 0)),
       template_app (template_hole 7, t_empty))),
    ("Affine_Form.Joints_rotate",
     "(?xs @ [?x] : Joints (?XS @ [?X])) = (?x # ?xs : Joints (?X # ?XS))",
     template_equation
      (template_app
        (template_app
          (template_hole 7,
           template_app
            (template_app (template_hole 6, template_var 3),
             template_app
              (template_app (template_hole 5, template_var 2),
               template_hole 4))),
         template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 1),
             template_app
              (template_app (template_hole 1, template_var 0),
               template_hole 0)))),
       template_app
        (template_app
          (template_hole 7,
           template_app
            (template_app (template_hole 5, template_var 2),
             template_var 3)),
         template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 1, template_var 0),
             template_var 1))))),
    ("Affine_Form.pdevs_val_pdev_upd",
     "pdevs_val ?e (pdev_upd ?X ?n ?x) =
      pdevs_val ?e ?X + ?e ?n *\<^sub>R ?x -
      ?e ?n *\<^sub>R pdevs_apply ?X ?n",
     template_equation
      (template_app
        (template_app (template_hole 5, template_var 3),
         template_app
          (template_app
            (template_app (template_hole 4, template_var 2),
             template_var 1),
           template_var 0)),
       template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 5, template_var 3),
                 template_var 2)),
             template_app
              (template_app
                (template_hole 1,
                 template_app (template_var 3, template_var 1)),
               template_var 0))),
         template_app
          (template_app
            (template_hole 1,
             template_app (template_var 3, template_var 1)),
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1))))),
    ("Affine_Form.degree_eq_Suc_max",
     "degree ?x =
      (if ALL i. pdevs_apply ?x i = (0::?'a) then 0
       else Suc (Max {i. pdevs_apply ?x i ~= (0::?'a)}))",
     template_equation
      (template_app (template_hole 10, template_var 0),
       template_app
        (template_app
          (template_app
            (template_hole 9, template_app (template_hole 8, t_empty)),
           template_hole 4),
         template_app
          (template_hole 3,
           template_app
            (template_hole 2, template_app (template_hole 1, t_empty)))))),
    ("Affine_Form.pdevs_apply_pdevs_of_list_append",
     "pdevs_apply (pdevs_of_list (?xs @ ?zs)) ?i =
      (if ?i < length ?xs then pdevs_apply (pdevs_of_list ?xs) ?i
       else pdevs_apply (pdevs_of_list ?zs) (?i - length ?xs))",
     template_equation
      (template_app
        (template_app
          (template_hole 6,
           template_app
            (template_hole 5,
             template_app
              (template_app (template_hole 4, template_var 2),
               template_var 1))),
         template_var 0),
       template_app
        (template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_var 0),
               template_app (template_hole 1, template_var 2))),
           template_app
            (template_app
              (template_hole 6,
               template_app (template_hole 5, template_var 2)),
             template_var 0)),
         template_app
          (template_app
            (template_hole 6,
             template_app (template_hole 5, template_var 1)),
           template_app
            (template_app (template_hole 0, template_var 0),
             template_app (template_hole 1, template_var 2)))))),
    ("Affine_Form.list_of_pdevs_eq",
     "rev (list_of_pdevs ?X) =
      filter ((~=) (0::?'a) o snd)
       (map (%i. (i, pdevs_apply ?X i)) [0..<degree ?X])",
     template_equation
      (template_app
        (template_hole 13, template_app (template_hole 12, template_var 0)),
       template_app
        (template_app
          (template_hole 11,
           template_app
            (template_app (template_hole 10, t_empty), template_hole 6)),
         template_app
          (template_app (template_hole 5, t_empty),
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_app (template_hole 0, template_var 0)))))),
    ("Affine_Form.pdevs_val_upd",
     "pdevs_val (?e(?n := ?e')) ?X =
      pdevs_val ?e ?X - ?e ?n * pdevs_apply ?X ?n +
      ?e' * pdevs_apply ?X ?n",
     template_equation
      (template_app
        (template_app
          (template_hole 5,
           template_app
            (template_app
              (template_app (template_hole 4, template_var 3),
               template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 5, template_var 3),
                 template_var 0)),
             template_app
              (template_app
                (template_hole 1,
                 template_app (template_var 3, template_var 2)),
               template_app
                (template_app (template_hole 0, template_var 0),
                 template_var 2)))),
         template_app
          (template_app (template_hole 1, template_var 1),
           template_app
            (template_app (template_hole 0, template_var 0),
             template_var 2))))),
    ("Affine_Form.pdevs_val_filter_pdevs_dom",
     "pdevs_val ?e (filter_pdevs ?I ?x) =
      (SUM i:pdevs_domain ?x Int {i. ?I i (pdevs_apply ?x i)}.
          ?e i *\<^sub>R pdevs_apply ?x i)",
     template_equation
      (template_app
        (template_app (template_hole 7, template_var 2),
         template_app
          (template_app (template_hole 6, template_var 1), template_var 0)),
       template_app
        (template_app (template_hole 5, t_empty),
         template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 0)),
           template_app (template_hole 0, t_empty))))),
    ("Affine_Form.filter_pdevs_raw_nonzeros",
     "{i. filter_pdevs_raw ?s ?f i ~= (0::?'a)} =
      {i. ?f i ~= (0::?'a)} Int {x. ?s x (?f x)}",
     template_equation
      (template_app (template_hole 5, t_empty),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 5, t_empty)),
         template_app (template_hole 5, t_empty)))),
    ("Affine_Form.pdevs_val_filter_pdevs",
     "pdevs_val ?e (filter_pdevs ?I ?x) =
      (SUM i:{..<degree ?x} Int {i. ?I i (pdevs_apply ?x i)}.
          ?e i *\<^sub>R pdevs_apply ?x i)",
     template_equation
      (template_app
        (template_app (template_hole 8, template_var 2),
         template_app
          (template_app (template_hole 7, template_var 1), template_var 0)),
       template_app
        (template_app (template_hole 6, t_empty),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_hole 2,
               template_app (template_hole 1, template_var 0))),
           template_app (template_hole 0, t_empty))))),
    ("Affine_Form.Joints_swap",
     "(?x # ?y # ?xs : Joints (?X # ?Y # ?XS)) =
      (?y # ?x # ?xs : Joints (?Y # ?X # ?XS))",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 5),
             template_app
              (template_app (template_hole 2, template_var 4),
               template_var 3))),
         template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0)))),
       template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 4),
             template_app
              (template_app (template_hole 2, template_var 5),
               template_var 3))),
         template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 1),
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 0)))))),
    ("Affine_Form.pdevs_apply_binop_pdevs",
     "pdevs_apply (binop_pdevs ?f ?x ?y) ?i =
      (if pdevs_apply ?x ?i = (0::?'b) & pdevs_apply ?y ?i = (0::?'c)
       then 0::?'a else ?f (pdevs_apply ?x ?i) (pdevs_apply ?y ?i))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 10,
                template_app
                 (template_app
                   (template_app (template_hole 9, template_var 3),
                    template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_dunno)),
    ("Affine_Form.pdevs_apply_pdevs_of_ivl",
     "pdevs_apply (pdevs_of_ivl ?l ?u) ?i =
      (if ?i < length Basis_list
       then ((?u - ?l) \<bullet> Basis_list ! ?i / 2) *\<^sub>R
            Basis_list ! ?i
       else (0::?'a))",
     template_equation
      (template_app
        (template_app
          (template_hole 14,
           template_app
            (template_app (template_hole 13, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_app
            (template_hole 12,
             template_app
              (template_app (template_hole 11, template_var 0),
               template_app (template_hole 10, template_hole 9))),
           template_app
            (template_app
              (template_hole 8,
               template_app
                (template_app
                  (template_hole 7,
                   template_app
                    (template_app
                      (template_hole 6,
                       template_app
                        (template_app (template_hole 5, template_var 1),
                         template_var 2)),
                     template_app
                      (template_app (template_hole 4, template_hole 9),
                       template_var 0))),
                 template_app
                  (template_hole 3,
                   template_app (template_hole 2, template_hole 1)))),
             template_app
              (template_app (template_hole 4, template_hole 9),
               template_var 0))),
         template_hole 0))),
    ("Affine_Form.degree_pdevs_of_list_eq'",
     "degree (pdevs_of_list ?xs) =
      Min {n. n <= length ?xs &
              (ALL m>=n. m < length ?xs --> ?xs ! m = (0::?'a))}",
     template_equation
      (template_app
        (template_hole 12, template_app (template_hole 11, template_var 0)),
       template_app
        (template_hole 10, template_app (template_hole 9, t_empty)))),
    ("Affine_Form.nonzeros_msum_pdevs_raw",
     "{i. msum_pdevs_raw ?n ?f ?g i ~= (0::?'a)} =
      {0..<?n} Int {i. ?f i ~= (0::?'a)} Un (+) ?n ` {i. ?g i ~= (0::?'a)}",
     template_equation
      (template_app (template_hole 10, t_empty),
       template_app
        (template_app
          (template_hole 5,
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_hole 2),
                 template_var 2)),
             template_app (template_hole 10, t_empty))),
         template_app
          (template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 2)),
           template_app (template_hole 10, t_empty))))),
    ("Affine_Form.Collect_extract_image",
     "{?g (?f x y) |x y. ?P x y} = ?g ` {?f x y |x y. ?P x y}",
     template_equation
      (template_app (template_hole 7, t_empty),
       template_app
        (template_app (template_hole 2, template_var 2),
         template_app (template_hole 1, t_empty))))]
