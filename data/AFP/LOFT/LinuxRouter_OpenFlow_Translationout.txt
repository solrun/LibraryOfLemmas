Loading theory "Draft.OpenFlow_Helpers" (required by "Draft.LinuxRouter_OpenFlow_TranslationTemplates" via "Draft.LinuxRouter_OpenFlow_Translation" via "Draft.Semantics_OpenFlow")
Loading theory "Draft.Sort_Descending" (required by "Draft.LinuxRouter_OpenFlow_TranslationTemplates" via "Draft.LinuxRouter_OpenFlow_Translation" via "Draft.Semantics_OpenFlow" via "Draft.List_Group")
Loading theory "HOL-Library.Nat_Bijection" (required by "Draft.LinuxRouter_OpenFlow_TranslationTemplates" via "Draft.ExtrEqs" via "HOL-Library.Stream")
Loading theory "HOL-Library.Function_Algebras" (required by "Draft.LinuxRouter_OpenFlow_TranslationTemplates" via "Draft.ExtrEqs" via "HOL-Library.BigO")
instantiation
  fun :: (type, plus) plus
  plus_fun == plus :: ('a => 'b) => ('a => 'b) => 'a => 'b
instantiation
  fun :: (type, zero) zero
  zero_fun == zero_class.zero :: 'a => 'b
instantiation
  fun :: (type, times) times
  times_fun == times :: ('a => 'b) => ('a => 'b) => 'a => 'b
instantiation
  fun :: (type, one) one
  one_fun == one_class.one :: 'a => 'b
class linorder = order +
  assumes "linear": "!!x y. x <= y | y <= x"
Found termination order: "size_list size <*mlex*> {}"
Found termination order: "(%p. size (snd p)) <*mlex*> {}"
### theory "Draft.OpenFlow_Helpers"
### 0.158s elapsed time, 0.644s cpu time, 0.035s GC time
Loading theory "HOL-Library.Set_Algebras" (required by "Draft.LinuxRouter_OpenFlow_TranslationTemplates" via "Draft.ExtrEqs" via "HOL-Library.BigO")
### theory "HOL-Library.Function_Algebras"
### 0.158s elapsed time, 0.644s cpu time, 0.035s GC time
Loading theory "HOL-Library.Tree" (required by "Draft.LinuxRouter_OpenFlow_TranslationTemplates" via "Draft.ExtrEqs" via "Draft.Templates")
instantiation
  set :: (plus) plus
  plus_set == plus :: 'a set => 'a set => 'a set
instantiation
  set :: (times) times
  times_set == times :: 'a set => 'a set => 'a set
instantiation
  set :: (zero) zero
  zero_set == zero_class.zero :: 'a set
instantiation
  set :: (one) one
  one_set == one_class.one :: 'a set
Found termination order: "size_list size <*mlex*> {}"
Found termination order: "length <*mlex*> {}"
### theory "HOL-Library.Set_Algebras"
### 0.211s elapsed time, 0.827s cpu time, 0.087s GC time
Loading theory "HOL-Library.BigO" (required by "Draft.LinuxRouter_OpenFlow_TranslationTemplates" via "Draft.ExtrEqs")
### theory "HOL-Library.Nat_Bijection"
### 0.374s elapsed time, 1.491s cpu time, 0.122s GC time
Loading theory "HOL-Library.Stream" (required by "Draft.LinuxRouter_OpenFlow_TranslationTemplates" via "Draft.ExtrEqs")
### theory "Draft.Sort_Descending"
### 0.385s elapsed time, 1.537s cpu time, 0.122s GC time
Loading theory "Draft.List_Group" (required by "Draft.LinuxRouter_OpenFlow_TranslationTemplates" via "Draft.LinuxRouter_OpenFlow_Translation" via "Draft.Semantics_OpenFlow")
### theory "Draft.List_Group"
### 0.150s elapsed time, 0.577s cpu time, 0.085s GC time
Loading theory "Draft.Semantics_OpenFlow" (required by "Draft.LinuxRouter_OpenFlow_TranslationTemplates" via "Draft.LinuxRouter_OpenFlow_Translation")
consts
  left :: "'a tree => 'a tree"
consts
  right :: "'a tree => 'a tree"
Found termination order: "size <*mlex*> {}"
consts
  shift :: "'a list => 'a stream => 'a stream"
Proofs for coinductive predicate(s) "streamsp"
  Proving monotonicity ...
Found termination order: "size <*mlex*> {}"
consts
  snth :: "'a stream => nat => 'a"
Found termination order: "size <*mlex*> {}"
consts
  stake :: "nat => 'a stream => 'a list"
consts
  sdrop :: "nat => 'a stream => 'a stream"
class height = type +
  fixes height :: "'a => nat"
instantiation
  tree :: (type) height
  height_tree == height :: 'a tree => nat
consts
  sfilter :: "('a => bool) => 'a stream => 'a stream"
Found termination order: "size <*mlex*> {}"
consts
  cycle :: "'a list => 'a stream"
consts
  siterate :: "('a => 'a) => 'a => 'a stream"
Found termination order: "size <*mlex*> {}"
consts
  flat :: "'a list stream => 'a stream"
Found termination order: "size <*mlex*> {}"
consts
  sinterleave :: "'a stream => 'a stream => 'a stream"
### theory "HOL-Library.BigO"
### 0.917s elapsed time, 3.459s cpu time, 0.768s GC time
Loading theory "Draft.OpenFlow_Matches" (required by "Draft.LinuxRouter_OpenFlow_TranslationTemplates" via "Draft.LinuxRouter_OpenFlow_Translation")
consts
  szip :: "'a stream => 'b stream => ('a * 'b) stream"
Found termination order: "size <*mlex*> {}"
consts
  smap2 :: "('a => 'b => 'c) => 'a stream => 'b stream => 'c stream"
### theory "HOL-Library.Stream"
### 1.019s elapsed time, 3.848s cpu time, 0.872s GC time
Found termination order: "size <*mlex*> {}"
Found termination order: "size <*mlex*> {}"
"[[1], [2, 2, 2], [3], [1], [4], [5, 5, 5]]"
  :: "int list list"
Found termination order: "size <*mlex*> {}"
Found termination order: "(%p. size (fst p)) <*mlex*> {}"
"[[(1, [])], [(2, ''a''), (2, ''b''), (2, ''c'')], [(3, ''c'')], [(1, [])],
  [(4, [])]]"
  :: "(int * char list) list list"
Found termination order: "size <*mlex*> {}"
Found termination order: "(%p. size (snd p)) <*mlex*> {}"
Found termination order: "size <*mlex*> {}"
### theory "HOL-Library.Tree"
### 2.089s elapsed time, 7.595s cpu time, 1.227s GC time
Loading theory "Draft.Templates" (required by "Draft.LinuxRouter_OpenFlow_TranslationTemplates" via "Draft.ExtrEqs")
datatype template_term
=
     t_empty
   | template_app of template_term * template_term
   | template_hole of int
   | template_var of int
datatype sign
= equals | greater_equals | greater_than | less_equals | less_than
datatype template
=
     template_bimplication of template * template
   | template_dunno
   | template_equation of template_term * template_term
   | template_implication of template list * template
   | template_inequation of sign * template_term * template_term
   | template_negation of template
   | template_predicate of template_term
constructor t_empty: template_term
constructor template_app: template_term * template_term -> template_term
constructor template_hole: int -> template_term
constructor template_var: int -> template_term
constructor equals: sign
constructor greater_equals: sign
constructor greater_than: sign
constructor less_equals: sign
constructor less_than: sign
constructor template_bimplication: template * template -> template
constructor template_dunno: template
constructor template_equation: template_term * template_term -> template
constructor template_implication: template list * template -> template
constructor template_inequation:
   sign * template_term * template_term -> template
constructor template_negation: template -> template
constructor template_predicate: template_term -> template
val vfs = fn: term -> (indexname * typ) list * (string * typ) list
val indexOf = fn: ''a list -> ''a -> int -> int
val has_eq = fn: term -> bool
val term2template = fn:
   (indexname * typ) list -> (string * typ) list -> term -> template_term
val lemma2predicate = fn: term -> term -> template
val makeTemplatewithContext = fn: term -> term -> template
val lemma2template = fn: term -> template
val thm2template = fn: thm -> template
val tterm2string = fn: template_term -> string
val template2string = fn: template -> string
val t = "height ?t <= size ?t": thm
val th =
   Const ("HOL.Trueprop", "bool => prop") $
     (Const ("Orderings.ord_class.less_eq", "nat => nat => bool") $
       (Const ("Tree.height_class.height", "?'a tree => nat") $
         Var (("t", 0), "?'a tree")) $
       (Const ("Nat.size_class.size", "?'a tree => nat") $
         Var (("t", 0), "?'a tree"))):
   term
### theory "Draft.Templates"
### 0.059s elapsed time, 0.204s cpu time, 0.000s GC time
Loading theory "Draft.ExtrEqs" (required by "Draft.LinuxRouter_OpenFlow_TranslationTemplates")
find_consts
  "(('a \<times> 'b) \<Rightarrow> 'c) \<Rightarrow> 'a \<Rightarrow> 'b \<Rightarrow> 'c"
found 2 constant(s):
BNF_Wellorder_Constructions.curr ::
  "'a set => ('a * 'b => 'c) => 'a => 'b => 'c"
Product_Type.curry :: "('a * 'b => 'c) => 'a => 'b => 'c"
find_consts
  "('a \<Rightarrow> 'b \<Rightarrow> 'c) \<Rightarrow> ('a \<times> 'b) \<Rightarrow> 'c"
found 4 constant(s):
Hs_Compat.uncurry :: "('b => 'c => 'a) => 'b * 'c => 'a"
Product_Type.internal_case_prod :: "('a => 'b => 'c) => 'a * 'b => 'c"
Product_Type.old.prod.rec_prod :: "('a => 'b => 't) => 'a * 'b => 't"
Product_Type.prod.case_prod :: "('a => 'b => 'c) => 'a * 'b => 'c"
find_consts
  "('a \<Rightarrow> 'b \<Rightarrow> 'c \<Rightarrow> 'd) \<Rightarrow> ('a \<times> 'b \<times> 'c) \<Rightarrow> 'd"
found 1 constant(s):
Semantics_OpenFlow.split3 :: "('b => 'c => 'd => 'a) => 'b * 'c * 'd => 'a"
Found termination order: "(%p. size_list size (fst (snd p))) <*mlex*> {}"
val eqpattern =
   Pattern
    (
       Const ("HOL.Trueprop", "bool => prop") $
         (Const ("HOL.eq", "?'a => ?'a => bool") $
           Var (("_dummy_", 1), "?'a") $ Var (("_dummy_", 2), "?'a"))
       ):
   term Find_Theorems.criterion
val badeqpattern = Pattern (Const ("Pure.eq", "?'a => ?'a => prop")):
   term Find_Theorems.criterion
val undefpattern =
   Pattern
    (
       Const ("HOL.Trueprop", "bool => prop") $
         (Const ("HOL.eq", "?'a => ?'a => bool") $
           Var (("_dummy_", 1), "?'a") $ Const ("HOL.undefined", "?'a"))
       ):
   term Find_Theorems.criterion
val thmpattern =
   Pattern
    (Const ("HOL.Trueprop", "bool => prop") $ Var (("_dummy_", 1), "bool")):
   term Find_Theorems.criterion
val badnames =
   ["*nitpick*", "*Nitpick*", "*full_exhaustive*", "*_def*", "Enum.finite*",
    "*Quickcheck*", "ATP*", "*Nunchaku*", "*Code*", "*BNF*", "*SMT*",
    "*.*.*"]:
   string list
val unwanted_names =
   [(false, Name "*nitpick*"), (false, Name "*Nitpick*"),
    (false, Name "*full_exhaustive*"), (false, Name "*_def*"),
    (false, Name "Enum.finite*"), (false, Name "*Quickcheck*"),
    (false, Name "ATP*"), (false, Name "*Nunchaku*"),
    (false, Name "*Code*"), (false, Name "*BNF*"), (false, Name "*SMT*"),
    (false, Name "*.*.*")]:
   (bool * term Find_Theorems.criterion) list
val has_vars = fn: term -> bool
val get_all_eqs = fn: string -> Proof.context -> (string * thm) list
val get_all_thms = fn: string -> Proof.context -> (string * thm) list
val get_noneq_thms = fn: string -> Proof.context -> (string * thm) list
val template_eqs = fn:
   string -> Proof.context -> (string * thm * template) list
val template_thms = fn:
   string -> Proof.context -> (string * thm * template) list
### theory "Draft.ExtrEqs"
### 0.897s elapsed time, 2.803s cpu time, 1.005s GC time
Found termination order: "(%p. size_list size (snd p)) <*mlex*> {}"
### theory "Draft.Semantics_OpenFlow"
### 2.761s elapsed time, 9.345s cpu time, 2.059s GC time
### Cannot skip proof of schematic goal statement
Found termination order: "{}"
instantiation
  of_match_field :: linorder
  less_eq_of_match_field == less_eq ::
    of_match_field => of_match_field => bool
  less_of_match_field == less :: of_match_field => of_match_field => bool
Found termination order: "{}"
"map_option"
  :: "('a => 'b) => 'a option => 'b option"
### theory "Draft.OpenFlow_Matches"
### 4.204s elapsed time, 9.529s cpu time, 2.457s GC time
Loading theory "Draft.OpenFlow_Action" (required by "Draft.LinuxRouter_OpenFlow_TranslationTemplates" via "Draft.LinuxRouter_OpenFlow_Translation")
Found termination order: "(%p. size_list size (snd p)) <*mlex*> {}"
### theory "Draft.OpenFlow_Action"
### 0.565s elapsed time, 0.616s cpu time, 0.043s GC time
Loading theory "Draft.LinuxRouter_OpenFlow_Translation" (required by "Draft.LinuxRouter_OpenFlow_TranslationTemplates")
"{}"
  :: "(char list * ('a, 'b) simple_packet_ext_scheme) set"
"{(''oif'', p(| p_l2dst := 66 |))}"
  :: "(char list * ('a, 'b) simple_packet_ext_scheme) set"
consts
  annotate_rlen :: "'a list => (nat * 'a) list"
consts
  annotate_rlen_code :: "'a list => nat * (nat * 'a) list"
### theory "Draft.LinuxRouter_OpenFlow_Translation"
### 1.612s elapsed time, 2.638s cpu time, 0.197s GC time
Loading theory "Draft.LinuxRouter_OpenFlow_TranslationTemplates"
val templateLemmas =
   [("LinuxRouter_OpenFlow_Translation.distinct_annotate_rlen",
     "distinct (annotate_rlen ?l)",
     template_predicate
      (
         template_app
          (template_hole 1, template_app (template_hole 0, template_var 0))
         )),
    ("LinuxRouter_OpenFlow_Translation.custom_simpset",
     "SMT.fun_app ?f = ?f",
     template_equation
      (template_app (template_hole 0, template_var 0), template_var 0)),
    ("LinuxRouter_OpenFlow_Translation.distinct_fst_annotate_rlen",
     "distinct (map fst (annotate_rlen ?l))",
     template_predicate
      (
         template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_app (template_hole 0, template_var 0)))
         )),
    ("LinuxRouter_OpenFlow_Translation.prefix_match_00",
     "prefix_match_semantics (PrefixMatch 0 0) ?p",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_hole 1),
               template_hole 0)),
           template_var 0)
         )),
    ("LinuxRouter_OpenFlow_Translation.annotate_rlen_len",
     "fst (annotate_rlen_code ?r) = length ?r",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app (template_hole 0, template_var 0))),
    ("LinuxRouter_OpenFlow_Translation.map_snd_annotate_rlen",
     "map snd (annotate_rlen ?l) = ?l",
     template_equation
      (template_app
        (template_app (template_hole 2, template_hole 1),
         template_app (template_hole 0, template_var 0)),
       template_var 0)),
    ("LinuxRouter_OpenFlow_Translation.annotate_rlen_code",
     "annotate_rlen ?s = snd (annotate_rlen_code ?s)",
     template_equation
      (template_app (template_hole 2, template_var 0),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("LinuxRouter_OpenFlow_Translation.lr_of_tran_s1_valid",
     "valid_prefixes ?rt ==> gsfw_valid (lr_of_tran_s1 ?rt)",
     template_implication
      ([template_predicate
         (template_app (template_hole 2, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 0))
           ))),
    ("LinuxRouter_OpenFlow_Translation.custom_simpset",
     "?f o ?g = (%x. ?f (?g x))",
     template_equation
      (template_app
        (template_app (template_hole 0, template_var 1), template_var 0),
       t_empty)),
    ("LinuxRouter_OpenFlow_Translation.simple_action_ne",
     "(?b ~= Accept) = (?b = Drop)",
     template_bimplication
      (template_negation
        (template_equation (template_var 0, template_hole 1)),
       template_equation (template_var 0, template_hole 0))),
    ("LinuxRouter_OpenFlow_Translation.simple_action_ne",
     "(?b ~= Drop) = (?b = Accept)",
     template_bimplication
      (template_negation
        (template_equation (template_var 0, template_hole 1)),
       template_equation (template_var 0, template_hole 0))),
    ("LinuxRouter_OpenFlow_Translation.custom_simpset",
     "concat (map ?f ?xs) = List.maps ?f ?xs",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app (template_hole 0, template_var 1), template_var 0))),
    ("LinuxRouter_OpenFlow_Translation.distinct_simple_match_to_of_match",
     "distinct ?ifs ==> distinct (simple_match_to_of_match ?m ?ifs)",
     template_implication
      ([template_predicate
         (template_app (template_hole 2, template_var 1))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 0),
               template_var 1))
           ))),
    ("LinuxRouter_OpenFlow_Translation.inj_inj_on",
     "inj ?F ==> inj_on ?F ?A",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 1),
              template_hole 0)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 1, template_var 1), template_var 0)
           ))),
    ("LinuxRouter_OpenFlow_Translation.custom_simpset",
     "set (map ?f ?xs) = ?f ` set ?xs",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_app (template_hole 2, template_var 1), template_var 0)),
       template_app
        (template_app (template_hole 1, template_var 1),
         template_app (template_hole 0, template_var 0)))),
    ("LinuxRouter_OpenFlow_Translation.simple_match_port_alt",
     "simple_match_port ?m ?p =
      (?p : wordinterval_to_set (uncurry WordInterval ?m))",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 1), template_var 0),
       template_app
        (template_app (template_hole 3, template_var 0),
         template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_hole 0),
             template_var 1))))),
    ("LinuxRouter_OpenFlow_Translation.map_snd_apfst",
     "map snd (map (apfst ?x) ?l) = map snd ?l",
     template_equation
      (template_app
        (template_app (template_hole 5, template_hole 4),
         template_app
          (template_app
            (template_hole 3,
             template_app (template_hole 2, template_var 1)),
           template_var 0)),
       template_app
        (template_app (template_hole 1, template_hole 0), template_var 0))),
    ("LinuxRouter_OpenFlow_Translation.fst_annotate_rlen",
     "map fst (annotate_rlen ?l) = rev [0..<length ?l]",
     template_equation
      (template_app
        (template_app (template_hole 6, template_hole 5),
         template_app (template_hole 4, template_var 0)),
       template_app
        (template_hole 3,
         template_app
          (template_app (template_hole 2, template_hole 1),
           template_app (template_hole 0, template_var 0))))),
    ("LinuxRouter_OpenFlow_Translation.aux", "?v = Some ?x ==> the ?v = ?x",
     template_implication
      ([template_equation
         (template_var 1, template_app (template_hole 2, template_var 0))],
       template_equation
        (template_app (template_hole 0, template_var 1), template_var 0))),
    ("LinuxRouter_OpenFlow_Translation.custom_simpset",
     "set (concat ?xs) = \<Union> (set ` set ?xs)",
     template_equation
      (template_app
        (template_hole 4, template_app (template_hole 3, template_var 0)),
       template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, t_empty),
           template_app (template_hole 0, template_var 0))))),
    ("LinuxRouter_OpenFlow_Translation.and_assoc",
     "(?a & ?b & ?c) = ((?a & ?b) & ?c)",
     template_equation
      (template_app
        (template_app (template_hole 0, template_var 2),
         template_app
          (template_app (template_hole 0, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1)),
         template_var 0))),
    ("LinuxRouter_OpenFlow_Translation.custom_simpset",
     "map ?f (map ?g ?xs) = map (?f o ?g) ?xs",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 2),
         template_app
          (template_app (template_hole 2, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1)),
         template_var 0))),
    ("LinuxRouter_OpenFlow_Translation.sorted_lr_of_tran_s3",
     "sorted_descending (map fst ?f) ==>
      sorted_descending (map fst (lr_of_tran_s3 ?s ?f))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 5,
              template_app
               (template_app (template_hole 4, template_hole 3),
                template_var 1))
            )],
       template_predicate
        (
           template_app
            (template_hole 5,
             template_app
              (template_app (template_hole 2, template_hole 1),
               template_app
                (template_app (template_hole 0, template_var 0),
                 template_var 1)))
           ))),
    ("LinuxRouter_OpenFlow_Translation.custom_simpset",
     "set (List.maps ?f ?a) = (UN a:set ?a. set (?f a))",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_var 1), template_var 0)),
       template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, t_empty),
           template_app (template_hole 0, template_var 0))))),
    ("LinuxRouter_OpenFlow_Translation.custom_simpset",
     "(?z : ?f ` ?A) = (EX x:?A. ?z = ?f x)",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 2),
         template_app
          (template_app (template_hole 2, template_var 1), template_var 0)),
       template_app
        (template_app (template_hole 1, template_var 0), t_empty))),
    ("LinuxRouter_OpenFlow_Translation.lr_of_tran_sorted_descending",
     "Inr ?r = lr_of_tran ?rt ?fw ?ifs ==>
      sorted_descending (map ofe_prio ?r)",
     template_implication
      ([template_equation
         (template_app (template_hole 4, template_var 3),
          template_app
           (template_app
             (template_app (template_hole 3, template_var 2),
              template_var 1),
            template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 3))
           ))),
    ("LinuxRouter_OpenFlow_Translation.in_annotate_rlen",
     "(?a, ?x) : set (annotate_rlen ?l) ==> ?x : set ?l",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, template_var 2),
                  template_var 1)),
              template_app
               (template_hole 3,
                template_app (template_hole 2, template_var 0)))
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 1, template_var 1),
             template_app (template_hole 0, template_var 0))
           ))),
    ("LinuxRouter_OpenFlow_Translation.fst_annotate_rlen_le",
     "(?k, ?a) : set (annotate_rlen ?l) ==> ?k < length ?l",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, template_var 2),
                  template_var 1)),
              template_app
               (template_hole 3,
                template_app (template_hole 2, template_var 0)))
            )],
       template_inequation
        (less_than, template_var 2,
         template_app (template_hole 0, template_var 0)))),
    ("LinuxRouter_OpenFlow_Translation.lr_of_tran_s1_split",
     "lr_of_tran_s1 (?a # ?rt) =
      (route2match ?a, routing_oiface ?a) # lr_of_tran_s1 ?rt",
     template_equation
      (template_app
        (template_hole 6,
         template_app
          (template_app (template_hole 5, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app
              (template_hole 3,
               template_app (template_hole 2, template_var 1)),
             template_app
              (template_hole 1,
               template_app (template_hole 0, template_var 1)))),
         template_app (template_hole 6, template_var 0)))),
    ("LinuxRouter_OpenFlow_Translation.no_oif_matchD",
     "no_oif_match ?fw ==>
      simple_fw ?fw ?p = simple_fw ?fw (?p(| p_oiface := ?any |))",
     template_implication
      ([template_predicate
         (template_app (template_hole 3, template_var 2))],
       template_equation
        (template_app
          (template_app (template_hole 1, template_var 2), template_var 1),
         template_app
          (template_app (template_hole 1, template_var 2),
           template_app
            (template_app (template_hole 0, t_empty), template_var 1))))),
    ("LinuxRouter_OpenFlow_Translation.OF_unsafe_safe_match_linear_eq",
     "list_all (all_prerequisites o ofe_fields) ?oft ==>
      OF_match_linear OF_match_fields_unsafe ?oft =
      OF_match_linear OF_match_fields_safe ?oft",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app
                 (template_app (template_hole 6, template_hole 5),
                  template_hole 4)),
              template_var 0)
            )],
       template_equation
        (template_app
          (template_app (template_hole 2, template_hole 1), template_var 0),
         template_app
          (template_app (template_hole 2, template_hole 0),
           template_var 0)))),
    ("LinuxRouter_OpenFlow_Translation.OF_unsafe_safe_match3_eq",
     "list_all (all_prerequisites o ofe_fields) ?oft ==>
      OF_priority_match OF_match_fields_unsafe ?oft =
      OF_priority_match OF_match_fields_safe ?oft",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app
                 (template_app (template_hole 6, template_hole 5),
                  template_hole 4)),
              template_var 0)
            )],
       template_equation
        (template_app
          (template_app (template_hole 2, template_hole 1), template_var 0),
         template_app
          (template_app (template_hole 2, template_hole 0),
           template_var 0)))),
    ("LinuxRouter_OpenFlow_Translation.simple_match_to_of_match_generates_prereqs",
     "[| simple_match_valid ?m;
         ?r : set (simple_match_to_of_match ?m ?ifs) |]
      ==> all_prerequisites ?r",
     template_implication
      ([template_predicate (template_app (template_hole 4, template_var 2)),
        template_predicate
         (
            template_app
             (template_app (template_hole 3, template_var 1),
              template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 2),
                  template_var 0)))
            )],
       template_predicate
        (template_app (template_hole 0, template_var 1)))),
    ("LinuxRouter_OpenFlow_Translation.distinct_lroft_s3",
     "[| distinct (map fst ?amr); distinct ?ifs |]
      ==> distinct (lr_of_tran_s3 ?ifs ?amr)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 5,
              template_app
               (template_app (template_hole 4, template_hole 3),
                template_var 1))
            ),
        template_predicate
         (template_app (template_hole 2, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 0),
               template_var 1))
           ))),
    ("LinuxRouter_OpenFlow_Translation.route2match_correct",
     "valid_prefix (routing_match ?a) ==>
      prefix_match_semantics (routing_match ?a) (p_dst ?p) =
      simple_matches (route2match ?a) ?p",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 6,
              template_app (template_hole 5, template_var 1))
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 3,
             template_app (template_hole 5, template_var 1)),
           template_app (template_hole 2, template_var 0)),
         template_app
          (template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 1)),
           template_var 0)))),
    ("LinuxRouter_OpenFlow_Translation.distinct_of_prio_hlp",
     "length ?l < unat (- 1) ==>
      distinct (map word_of_nat (map fst (annotate_rlen ?l)))",
     template_implication
      ([template_inequation
         (less_than, template_app (template_hole 9, template_var 0),
          template_app
           (template_hole 8,
            template_app (template_hole 7, template_hole 6)))],
       template_predicate
        (
           template_app
            (template_hole 5,
             template_app
              (template_app (template_hole 4, template_hole 3),
               template_app
                (template_app (template_hole 2, template_hole 1),
                 template_app (template_hole 0, template_var 0))))
           ))),
    ("LinuxRouter_OpenFlow_Translation.custom_simpset",
     "(?b : \<Union> (?B ` ?A)) = (EX x:?A. ?b : ?B x)",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 2),
         template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, t_empty), template_var 0))),
       template_app
        (template_app (template_hole 0, template_var 0), t_empty))),
    ("LinuxRouter_OpenFlow_Translation.match_ifaceAny_eq",
     "oiface ?m = ifaceAny ==>
      simple_matches ?m ?p = simple_matches ?m (?p(| p_oiface := ?any |))",
     template_implication
      ([template_equation
         (template_app (template_hole 4, template_var 2), template_hole 3)],
       template_equation
        (template_app
          (template_app (template_hole 1, template_var 2), template_var 1),
         template_app
          (template_app (template_hole 1, template_var 2),
           template_app
            (template_app (template_hole 0, t_empty), template_var 1))))),
    ("LinuxRouter_OpenFlow_Translation.sorted_annotated",
     "length ?l <= unat (- 1) ==>
      sorted_descending
       (map fst (map (apfst word_of_nat) (annotate_rlen ?l)))",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 10, template_var 0),
          template_app
           (template_hole 9,
            template_app (template_hole 8, template_hole 7)))],
       template_predicate
        (
           template_app
            (template_hole 6,
             template_app
              (template_app (template_hole 5, template_hole 4),
               template_app
                (template_app
                  (template_hole 3,
                   template_app (template_hole 2, template_hole 1)),
                 template_app (template_hole 0, template_var 0))))
           ))),
    ("LinuxRouter_OpenFlow_Translation.lr_of_tran_no_overlaps",
     "[| distinct ?ifs; Inr ?t = lr_of_tran ?rt ?fw ?ifs |]
      ==> no_overlaps OF_match_fields_unsafe ?t",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 3)),
        template_equation
         (template_app (template_hole 3, template_var 2),
          template_app
           (template_app
             (template_app (template_hole 2, template_var 1),
              template_var 0),
            template_var 3))],
       template_predicate
        (
           template_app
            (template_app (template_hole 1, template_hole 0),
             template_var 2)
           ))),
    ("LinuxRouter_OpenFlow_Translation.simple_match_valid_fbs",
     "[| valid_prefixes ?rt; simple_fw_valid ?fw |]
      ==> list_all simple_match_valid
           (map fst (lr_of_tran_fbs ?rt ?fw ?ifs))",
     template_implication
      ([template_predicate (template_app (template_hole 6, template_var 2)),
        template_predicate
         (template_app (template_hole 5, template_var 1))],
       template_predicate
        (
           template_app
            (template_app (template_hole 4, template_hole 3),
             template_app
              (template_app (template_hole 2, template_hole 1),
               template_app
                (template_app
                  (template_app (template_hole 0, template_var 2),
                   template_var 1),
                 template_var 0)))
           ))),
    ("LinuxRouter_OpenFlow_Translation.prefix_match_semantics_simple_match",
     "[| toprefixmatch ?m = Some ?pm; valid_prefix ?pm |]
      ==> prefix_match_semantics ?pm = simple_match_ip ?m",
     template_implication
      ([template_equation
         (template_app (template_hole 5, template_var 1),
          template_app (template_hole 4, template_var 0)),
        template_predicate
         (template_app (template_hole 3, template_var 0))],
       template_equation
        (template_app (template_hole 1, template_var 0),
         template_app (template_hole 0, template_var 1)))),
    ("LinuxRouter_OpenFlow_Translation.sorted_word_upt",
     "length ?l <= unat (- 1) ==>
      sorted_descending (map word_of_nat (rev [0..<Suc (length ?l)]))",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 10, template_var 0),
          template_app
           (template_hole 9,
            template_app (template_hole 8, template_hole 7)))],
       template_predicate
        (
           template_app
            (template_hole 6,
             template_app
              (template_app (template_hole 5, template_hole 4),
               template_app
                (template_hole 3,
                 template_app
                  (template_app (template_hole 2, template_hole 1),
                   template_app
                    (template_hole 0,
                     template_app (template_hole 10, template_var 0))))))
           ))),
    ("LinuxRouter_OpenFlow_Translation.simple_match_dst_alt",
     "simple_match_valid ?r ==>
      simple_match_ip (dst ?r) ?p =
      prefix_match_semantics (PrefixMatch (fst (dst ?r)) (snd (dst ?r)))
       ?p",
     template_implication
      ([template_predicate
         (template_app (template_hole 7, template_var 1))],
       template_equation
        (template_app
          (template_app
            (template_hole 5,
             template_app (template_hole 4, template_var 1)),
           template_var 0),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_hole 1,
                   template_app (template_hole 4, template_var 1))),
               template_app
                (template_hole 0,
                 template_app (template_hole 4, template_var 1)))),
           template_var 0)))),
    ("LinuxRouter_OpenFlow_Translation.simple_match_src_alt",
     "simple_match_valid ?r ==>
      simple_match_ip (src ?r) ?p =
      prefix_match_semantics (PrefixMatch (fst (src ?r)) (snd (src ?r)))
       ?p",
     template_implication
      ([template_predicate
         (template_app (template_hole 7, template_var 1))],
       template_equation
        (template_app
          (template_app
            (template_hole 5,
             template_app (template_hole 4, template_var 1)),
           template_var 0),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_hole 1,
                   template_app (template_hole 4, template_var 1))),
               template_app
                (template_hole 0,
                 template_app (template_hole 4, template_var 1)))),
           template_var 0)))),
    ("LinuxRouter_OpenFlow_Translation.no_overlaps_lroft_s3_hlp",
     "[| distinct (map fst ?amr); distinct ?ifs |]
      ==> no_overlaps OF_match_fields_unsafe
           (map (split3 OFEntry) (lr_of_tran_s3 ?ifs ?amr))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 9,
              template_app
               (template_app (template_hole 8, template_hole 7),
                template_var 1))
            ),
        template_predicate
         (template_app (template_hole 6, template_var 0))],
       template_predicate
        (
           template_app
            (template_app (template_hole 5, template_hole 4),
             template_app
              (template_app
                (template_hole 3,
                 template_app (template_hole 2, template_hole 1)),
               template_app
                (template_app (template_hole 0, template_var 0),
                 template_var 1)))
           ))),
    ("LinuxRouter_OpenFlow_Translation.max_16_word_max", "?a <= 65535",
     template_inequation
      (less_equals, template_var 0,
       template_app
        (template_hole 2,
         template_app
          (template_hole 1,
           template_app
            (template_hole 1,
             template_app
              (template_hole 1,
               template_app
                (template_hole 1,
                 template_app
                  (template_hole 1,
                   template_app
                    (template_hole 1,
                     template_app
                      (template_hole 1,
                       template_app
                        (template_hole 1,
                         template_app
                          (template_hole 1,
                           template_app
                            (template_hole 1,
                             template_app
                              (template_hole 1,
                               template_app
                                (template_hole 1,
                                 template_app
                                  (template_hole 1,
                                   template_app
                                    (template_hole 1,
                                     template_app
(template_hole 1, template_hole 0)))))))))))))))))),
    ("LinuxRouter_OpenFlow_Translation.distinct_of_nat_list",
     "[| distinct ?l; ALL e:set ?l. e <= unat (- 1) |]
      ==> distinct (map word_of_nat ?l)",
     template_implication
      ([template_predicate (template_app (template_hole 9, template_var 0)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app (template_hole 7, template_var 0)),
              t_empty)
            )],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 0))
           ))),
    ("LinuxRouter_OpenFlow_Translation.no_oif_match_fbs",
     "no_oif_match ?fw ==>
      list_all (%m. oiface (fst (snd m)) = ifaceAny)
       (map (apfst of_nat) (annotate_rlen (lr_of_tran_fbs ?rt ?fw ?ifs)))",
     template_implication
      ([template_predicate
         (template_app (template_hole 11, template_var 2))],
       template_predicate
        (
           template_app
            (template_app (template_hole 10, t_empty),
             template_app
              (template_app
                (template_hole 4,
                 template_app (template_hole 3, template_hole 2)),
               template_app
                (template_hole 1,
                 template_app
                  (template_app
                    (template_app (template_hole 0, template_var 1),
                     template_var 2),
                   template_var 0))))
           ))),
    ("LinuxRouter_OpenFlow_Translation.annotate_first_le_hlp",
     "length ?l < unat (- 1) ==>
      ALL e:set (map fst (annotate_rlen ?l)). e <= unat (- 1)",
     template_implication
      ([template_inequation
         (less_than, template_app (template_hole 9, template_var 0),
          template_app
           (template_hole 8,
            template_app (template_hole 7, template_hole 6)))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 5,
               template_app
                (template_hole 4,
                 template_app
                  (template_app (template_hole 3, template_hole 2),
                   template_app (template_hole 1, template_var 0)))),
             t_empty)
           ))),
    ("LinuxRouter_OpenFlow_Translation.OF_match_linear_not_noD",
     "OF_match_linear ?\<gamma> ?oms ?p ~= NoAction ==>
      EX ome. ome : set ?oms & ?\<gamma> (ofe_fields ome) ?p",
     template_implication
      ([template_negation
         (
            template_equation
             (template_app
               (template_app
                 (template_app (template_hole 6, template_var 2),
                  template_var 1),
                template_var 0),
              template_hole 5)
            )],
       template_predicate (template_app (template_hole 4, t_empty)))),
    ("LinuxRouter_OpenFlow_Translation.sorted_lr_of_tran_s3_hlp",
     "[| ALL x:set ?f. fst x <= ?a; ?b : set (lr_of_tran_s3 ?s ?f) |]
      ==> fst ?b <= ?a",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app (template_hole 6, template_var 3)),
              t_empty)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 3, template_var 1),
              template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 0),
                  template_var 3)))
            )],
       template_inequation
        (less_equals, template_app (template_hole 0, template_var 1),
         template_var 2))),
    ("LinuxRouter_OpenFlow_Translation.lr_of_tran_prereqs",
     "[| valid_prefixes ?rt; simple_fw_valid ?fw;
         lr_of_tran ?rt ?fw ?ifs = Inr ?oft |]
      ==> list_all (all_prerequisites o ofe_fields) ?oft",
     template_implication
      ([template_predicate (template_app (template_hole 8, template_var 3)),
        template_predicate (template_app (template_hole 7, template_var 2)),
        template_equation
         (template_app
           (template_app
             (template_app (template_hole 5, template_var 3),
              template_var 2),
            template_var 1),
          template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app (template_hole 2, template_hole 1),
                 template_hole 0)),
             template_var 0)
           ))),
    ("LinuxRouter_OpenFlow_Translation.simple_match_valid_fbs_rlen",
     "[| valid_prefixes ?rt; simple_fw_valid ?fw;
         (?a, ?aa, ?ab, ?b)
         : set (annotate_rlen (lr_of_tran_fbs ?rt ?fw ?ifs)) |]
      ==> simple_match_valid ?aa",
     template_implication
      ([template_predicate (template_app (template_hole 9, template_var 6)),
        template_predicate (template_app (template_hole 8, template_var 5)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app
                 (template_app (template_hole 6, template_var 4),
                  template_app
                   (template_app (template_hole 5, template_var 3),
                    template_app
                     (template_app (template_hole 4, template_var 2),
                      template_var 1)))),
              template_app
               (template_hole 3,
                template_app
                 (template_hole 2,
                  template_app
                   (template_app
                     (template_app (template_hole 1, template_var 6),
                      template_var 5),
                    template_var 0))))
            )],
       template_predicate
        (template_app (template_hole 0, template_var 3)))),
    ("LinuxRouter_OpenFlow_Translation.smtoms_eq_hlp",
     "(simple_match_to_of_match_single ?r ?a ?b ?c ?d =
       simple_match_to_of_match_single ?r ?f ?g ?h ?i) =
      (?a = ?f & ?b = ?g & ?c = ?h & ?d = ?i)",
     template_bimplication
      (template_equation
        (template_app
          (template_app
            (template_app
              (template_app
                (template_app (template_hole 4, template_var 8),
                 template_var 7),
               template_var 6),
             template_var 5),
           template_var 4),
         template_app
          (template_app
            (template_app
              (template_app
                (template_app (template_hole 4, template_var 8),
                 template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app (template_hole 2, template_var 7),
                 template_var 3)),
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app (template_hole 1, template_var 6),
                   template_var 2)),
               template_app
                (template_app
                  (template_hole 3,
                   template_app
                    (template_app (template_hole 0, template_var 5),
                     template_var 1)),
                 template_app
                  (template_app (template_hole 0, template_var 4),
                   template_var 0))))
           ))),
    ("LinuxRouter_OpenFlow_Translation.s1_correct",
     "[| valid_prefixes ?rt; has_default_route ?rt |]
      ==> EX rm ra.
             generalized_sfw (lr_of_tran_s1 ?rt) ?p = Some (rm, ra) &
             ra = output_iface (routing_table_semantics ?rt (p_dst ?p))",
     template_implication
      ([template_predicate
         (template_app (template_hole 13, template_var 1)),
        template_predicate
         (template_app (template_hole 12, template_var 1))],
       template_predicate (template_app (template_hole 11, t_empty)))),
    ("LinuxRouter_OpenFlow_Translation.simple_match_to_of_matchD",
     "[| ?gr : set (simple_match_to_of_match ?r ?ifs);
         OF_match_fields ?gr ?p = Some True;
         match_iface (oiface ?r) (p_oiface ?p); simple_match_valid ?r |]
      ==> simple_matches ?r ?p",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 11, template_var 3),
              template_app
               (template_hole 10,
                template_app
                 (template_app (template_hole 9, template_var 2),
                  template_var 1)))
            ),
        template_equation
         (template_app
           (template_app (template_hole 7, template_var 3), template_var 0),
          template_app (template_hole 6, template_hole 5)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app (template_hole 3, template_var 2)),
              template_app (template_hole 2, template_var 0))
            ),
        template_predicate
         (template_app (template_hole 1, template_var 2))],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 2), template_var 0)
           ))),
    ("LinuxRouter_OpenFlow_Translation.lr_of_tran_fbs_dropD",
     "[| valid_prefixes ?rt; has_default_route ?rt; no_oif_match ?fw;
         generalized_sfw (lr_of_tran_fbs ?rt ?fw ?ifs) ?p =
         Some (?r, ?oif, Drop) |]
      ==> simple_linux_router_nol12 ?rt ?fw ?p = None",
     template_implication
      ([template_predicate
         (template_app (template_hole 12, template_var 5)),
        template_predicate
         (template_app (template_hole 11, template_var 5)),
        template_predicate
         (template_app (template_hole 10, template_var 4)),
        template_equation
         (template_app
           (template_app
             (template_hole 8,
              template_app
               (template_app
                 (template_app (template_hole 7, template_var 5),
                  template_var 4),
                template_var 3)),
            template_var 2),
          template_app
           (template_hole 6,
            template_app
             (template_app (template_hole 5, template_var 1),
              template_app
               (template_app (template_hole 4, template_var 0),
                template_hole 3))))],
       template_equation
        (template_app
          (template_app
            (template_app (template_hole 1, template_var 5),
             template_var 4),
           template_var 2),
         template_hole 0))),
    ("LinuxRouter_OpenFlow_Translation.no_overlaps_lroft_hlp2",
     "[| distinct (map fst ?amr); !!r. distinct (?fm r) |]
      ==> distinct
           (concat
             (map (%(p, r, c, a). map (%b. (p, b, ?fs a c)) (?fm r))
               ?amr))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 13,
              template_app
               (template_app (template_hole 12, template_hole 11),
                template_var 2))
            ),
        template_predicate (template_app (template_hole 10, t_empty))],
       template_predicate
        (
           template_app
            (template_hole 8,
             template_app
              (template_hole 7,
               template_app
                (template_app
                  (template_hole 6,
                   template_app (template_hole 5, t_empty)),
                 template_var 2)))
           ))),
    ("LinuxRouter_OpenFlow_Translation.lr_of_tran_fbs_acceptD",
     "[| valid_prefixes ?rt; has_default_route ?rt; no_oif_match ?fw;
         generalized_sfw (lr_of_tran_fbs ?rt ?fw ?ifs) ?p =
         Some (?r, ?oif, Accept) |]
      ==> simple_linux_router_nol12 ?rt ?fw ?p =
          Some (?p(| p_oiface := ?oif |))",
     template_implication
      ([template_predicate
         (template_app (template_hole 13, template_var 5)),
        template_predicate
         (template_app (template_hole 12, template_var 5)),
        template_predicate
         (template_app (template_hole 11, template_var 4)),
        template_equation
         (template_app
           (template_app
             (template_hole 9,
              template_app
               (template_app
                 (template_app (template_hole 8, template_var 5),
                  template_var 4),
                template_var 3)),
            template_var 2),
          template_app
           (template_hole 7,
            template_app
             (template_app (template_hole 6, template_var 1),
              template_app
               (template_app (template_hole 5, template_var 0),
                template_hole 4))))],
       template_equation
        (template_app
          (template_app
            (template_app (template_hole 2, template_var 5),
             template_var 4),
           template_var 2),
         template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, t_empty), template_var 2))))),
    ("LinuxRouter_OpenFlow_Translation.lr_of_tran_s3_Cons",
     "lr_of_tran_s3 ?ifs (?a # ?ard) =
      concat
       (map (%(p, r, c, a).
                map (%b. (p, b,
                          case a of Accept => [Forward c] | Drop => []))
                 (simple_match_to_of_match r ?ifs))
         [?a]) @
      lr_of_tran_s3 ?ifs ?ard",
     template_equation
      (template_app
        (template_app (template_hole 16, template_var 2),
         template_app
          (template_app (template_hole 15, template_var 1),
           template_var 0)),
       template_app
        (template_app
          (template_hole 14,
           template_app
            (template_hole 13,
             template_app
              (template_app
                (template_hole 12,
                 template_app (template_hole 11, t_empty)),
               template_app
                (template_app (template_hole 15, template_var 1),
                 template_hole 0)))),
         template_app
          (template_app (template_hole 16, template_var 2),
           template_var 0)))),
    ("LinuxRouter_OpenFlow_Translation.s3_noaction_hlp",
     "[| simple_match_valid ?ac; ~ simple_matches ?ac ?p;
         match_iface (oiface ?ac) (p_oiface ?p) |]
      ==> OF_match_linear OF_match_fields_safe
           (map (%x. split3 OFEntry
                      (?x1.0, x,
                       case ?ba of Accept => [Forward ?ad] | Drop => []))
             (simple_match_to_of_match ?ac ?ifs))
           ?p =
          NoAction",
     template_implication
      ([template_predicate
         (template_app (template_hole 19, template_var 5)),
        template_negation
         (
            template_predicate
             (
                template_app
                 (template_app (template_hole 17, template_var 5),
                  template_var 4)
                )
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 16,
                template_app (template_hole 15, template_var 5)),
              template_app (template_hole 14, template_var 4))
            )],
       template_equation
        (template_app
          (template_app
            (template_app (template_hole 12, template_hole 11),
             template_app
              (template_app (template_hole 10, t_empty),
               template_app
                (template_app (template_hole 1, template_var 5),
                 template_var 0))),
           template_var 4),
         template_hole 0))),
    ("LinuxRouter_OpenFlow_Translation.no_overlaps_lroft_hlp3",
     "[| distinct (map fst ?amr);
         (?aa, ?ab, ?ac) : set (lr_of_tran_s3 ?ifs ?amr);
         (?ba, ?bb, ?bc) : set (lr_of_tran_s3 ?ifs ?amr); ?ac ~= ?bc |]
      ==> ?aa ~= ?ba",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 10,
              template_app
               (template_app (template_hole 9, template_hole 8),
                template_var 7))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app
                 (template_app (template_hole 6, template_var 6),
                  template_app
                   (template_app (template_hole 5, template_var 5),
                    template_var 4))),
              template_app
               (template_hole 4,
                template_app
                 (template_app (template_hole 3, template_var 3),
                  template_var 7)))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app
                 (template_app (template_hole 6, template_var 2),
                  template_app
                   (template_app (template_hole 5, template_var 1),
                    template_var 0))),
              template_app
               (template_hole 4,
                template_app
                 (template_app (template_hole 3, template_var 3),
                  template_var 7)))
            ),
        template_negation
         (template_equation (template_var 4, template_var 0))],
       template_negation
        (template_equation (template_var 6, template_var 2)))),
    ("LinuxRouter_OpenFlow_Translation.lr_of_tran_correct",
     "[| lr_of_tran ?rt ?fw ?ifs = Inr ?oft; p_l2type ?p = 2048;
         p_iiface ?p : set ?ifs |]
      ==> OF_priority_match OF_match_fields_safe ?oft ?p ~= NoAction",
     template_implication
      ([template_equation
         (template_app
           (template_app
             (template_app (template_hole 14, template_var 4),
              template_var 3),
            template_var 2),
          template_app (template_hole 13, template_var 1)),
        template_equation
         (template_app (template_hole 11, template_var 0),
          template_app
           (template_hole 10,
            template_app
             (template_hole 9,
              template_app
               (template_hole 9,
                template_app
                 (template_hole 9,
                  template_app
                   (template_hole 9,
                    template_app
                     (template_hole 9,
                      template_app
                       (template_hole 9,
                        template_app
                         (template_hole 9,
                          template_app
                           (template_hole 9,
                            template_app
                             (template_hole 9,
                              template_app
                               (template_hole 9,
                                template_app
                                 (template_hole 9,
                                  template_hole 8))))))))))))),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app (template_hole 6, template_var 0)),
              template_app (template_hole 5, template_var 2))
            )],
       template_negation
        (
           template_equation
            (template_app
              (template_app
                (template_app (template_hole 2, template_hole 1),
                 template_var 1),
               template_var 0),
             template_hole 0)
           ))),
    ("LinuxRouter_OpenFlow_Translation.lr_of_tran_correct",
     "[| lr_of_tran ?rt ?fw ?ifs = Inr ?oft; p_l2type ?p = 2048;
         p_iiface ?p : set ?ifs |]
      ==> OF_priority_match OF_match_fields_safe ?oft ?p ~= Undefined",
     template_implication
      ([template_equation
         (template_app
           (template_app
             (template_app (template_hole 14, template_var 4),
              template_var 3),
            template_var 2),
          template_app (template_hole 13, template_var 1)),
        template_equation
         (template_app (template_hole 11, template_var 0),
          template_app
           (template_hole 10,
            template_app
             (template_hole 9,
              template_app
               (template_hole 9,
                template_app
                 (template_hole 9,
                  template_app
                   (template_hole 9,
                    template_app
                     (template_hole 9,
                      template_app
                       (template_hole 9,
                        template_app
                         (template_hole 9,
                          template_app
                           (template_hole 9,
                            template_app
                             (template_hole 9,
                              template_app
                               (template_hole 9,
                                template_app
                                 (template_hole 9,
                                  template_hole 8))))))))))))),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app (template_hole 6, template_var 0)),
              template_app (template_hole 5, template_var 2))
            )],
       template_negation
        (
           template_equation
            (template_app
              (template_app
                (template_app (template_hole 2, template_hole 1),
                 template_var 1),
               template_var 0),
             template_hole 0)
           ))),
    ("LinuxRouter_OpenFlow_Translation.lr_of_tran_fbs_dropI",
     "[| valid_prefixes ?rt; has_default_route ?rt; no_oif_match ?fw;
         has_default_policy ?fw;
         simple_linux_router_nol12 ?rt ?fw ?p = None |]
      ==> EX r oif.
             generalized_sfw (lr_of_tran_fbs ?rt ?fw ?ifs) ?p =
             Some (r, oif, Drop)",
     template_implication
      ([template_predicate
         (template_app (template_hole 15, template_var 3)),
        template_predicate
         (template_app (template_hole 14, template_var 3)),
        template_predicate
         (template_app (template_hole 13, template_var 2)),
        template_predicate
         (template_app (template_hole 12, template_var 2)),
        template_equation
         (template_app
           (template_app
             (template_app (template_hole 10, template_var 3),
              template_var 2),
            template_var 1),
          template_hole 9)],
       template_predicate (template_app (template_hole 8, t_empty)))),
    ("LinuxRouter_OpenFlow_Translation.distinct_simple_match_to_of_match_portlist_hlp",
     "distinct ?ifs ==>
      distinct
       (if fst ?ps = 0 & snd ?ps = - 1 then [None]
        else if fst ?ps <= snd ?ps
             then map (Some o (%pfx. (pfxm_prefix pfx, ~~ pfxm_mask pfx)))
                   (wordinterval_CIDR_split_prefixmatch
                     (WordInterval (fst ?ps) (snd ?ps)))
             else [])",
     template_implication
      ([template_predicate
         (template_app (template_hole 22, template_var 1))],
       template_predicate
        (
           template_app
            (template_hole 21,
             template_app
              (template_app
                (template_app
                  (template_hole 20,
                   template_app
                    (template_app
                      (template_hole 19,
                       template_app
                        (template_app
                          (template_hole 18,
                           template_app (template_hole 17, template_var 0)),
                         template_hole 16)),
                     template_app
                      (template_app
                        (template_hole 18,
                         template_app (template_hole 15, template_var 0)),
                       template_app (template_hole 14, template_hole 13)))),
                 template_app
                  (template_app (template_hole 12, template_hole 11),
                   template_hole 10)),
               template_app
                (template_app
                  (template_app
                    (template_hole 20,
                     template_app
                      (template_app
                        (template_hole 9,
                         template_app (template_hole 17, template_var 0)),
                       template_app (template_hole 15, template_var 0))),
                   template_app
                    (template_app
                      (template_hole 8,
                       template_app
                        (template_app (template_hole 7, template_hole 6),
                         t_empty)),
                     template_app
                      (template_hole 1,
                       template_app
                        (template_app
                          (template_hole 0,
                           template_app (template_hole 17, template_var 0)),
                         template_app
                          (template_hole 15, template_var 0))))),
                 template_hole 10)))
           ))),
    ("LinuxRouter_OpenFlow_Translation.lr_of_tran_fbs_acceptI",
     "[| valid_prefixes ?rt; has_default_route ?rt; no_oif_match ?fw;
         has_default_policy ?fw;
         simple_linux_router_nol12 ?rt ?fw ?p =
         Some (?p(| p_oiface := ?oif |)) |]
      ==> EX r. generalized_sfw (lr_of_tran_fbs ?rt ?fw ?ifs) ?p =
                Some (r, ?oif, Accept)",
     template_implication
      ([template_predicate
         (template_app (template_hole 15, template_var 4)),
        template_predicate
         (template_app (template_hole 14, template_var 4)),
        template_predicate
         (template_app (template_hole 13, template_var 3)),
        template_predicate
         (template_app (template_hole 12, template_var 3)),
        template_equation
         (template_app
           (template_app
             (template_app (template_hole 10, template_var 4),
              template_var 3),
            template_var 2),
          template_app
           (template_hole 9,
            template_app
             (template_app (template_hole 8, t_empty), template_var 2)))],
       template_predicate (template_app (template_hole 7, t_empty)))),
    ("LinuxRouter_OpenFlow_Translation.lr_of_tran_correct",
     "[| lr_of_tran ?rt ?fw ?ifs = Inr ?oft; p_l2type ?p = 2048;
         p_iiface ?p : set ?ifs |]
      ==> OF_priority_match OF_match_fields_safe ?oft ?p = Action ?ls -->
          length ?ls <= 1",
     template_implication
      ([template_equation
         (template_app
           (template_app
             (template_app (template_hole 17, template_var 5),
              template_var 4),
            template_var 3),
          template_app (template_hole 16, template_var 2)),
        template_equation
         (template_app (template_hole 14, template_var 1),
          template_app
           (template_hole 13,
            template_app
             (template_hole 12,
              template_app
               (template_hole 12,
                template_app
                 (template_hole 12,
                  template_app
                   (template_hole 12,
                    template_app
                     (template_hole 12,
                      template_app
                       (template_hole 12,
                        template_app
                         (template_hole 12,
                          template_app
                           (template_hole 12,
                            template_app
                             (template_hole 12,
                              template_app
                               (template_hole 12,
                                template_app
                                 (template_hole 12,
                                  template_hole 11))))))))))))),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 10,
                template_app (template_hole 9, template_var 1)),
              template_app (template_hole 8, template_var 3))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app
                  (template_hole 6,
                   template_app
                    (template_app
                      (template_app (template_hole 5, template_hole 4),
                       template_var 2),
                     template_var 1)),
                 template_app (template_hole 3, template_var 0))),
             template_app
              (template_app
                (template_hole 2,
                 template_app (template_hole 1, template_var 0)),
               template_hole 0))
           ))),
    ("LinuxRouter_OpenFlow_Translation.eq",
     "[| simple_match_valid ?r; simple_matches ?r ?p;
         p_iiface ?p : set ?ifs; p_l2type ?p = 2048 |]
      ==> EX gr:set (simple_match_to_of_match ?r ?ifs).
             OF_match_fields gr ?p = Some True",
     template_implication
      ([template_predicate
         (template_app (template_hole 16, template_var 2)),
        template_predicate
         (
            template_app
             (template_app (template_hole 15, template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 14,
                template_app (template_hole 13, template_var 1)),
              template_app (template_hole 12, template_var 0))
            ),
        template_equation
         (template_app (template_hole 10, template_var 1),
          template_app
           (template_hole 9,
            template_app
             (template_hole 8,
              template_app
               (template_hole 8,
                template_app
                 (template_hole 8,
                  template_app
                   (template_hole 8,
                    template_app
                     (template_hole 8,
                      template_app
                       (template_hole 8,
                        template_app
                         (template_hole 8,
                          template_app
                           (template_hole 8,
                            template_app
                             (template_hole 8,
                              template_app
                               (template_hole 8,
                                template_app
                                 (template_hole 8,
                                  template_hole 7)))))))))))))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_hole 5,
                 template_app
                  (template_app (template_hole 4, template_var 2),
                   template_var 0))),
             t_empty)
           ))),
    ("LinuxRouter_OpenFlow_Translation.lr_of_tran_correct",
     "[| lr_of_tran ?rt ?fw ?ifs = Inr ?oft; p_l2type ?p = 2048;
         p_iiface ?p : set ?ifs |]
      ==> EX ls.
             length ls <= 1 &
             OF_priority_match OF_match_fields_safe ?oft ?p = Action ls",
     template_implication
      ([template_equation
         (template_app
           (template_app
             (template_app (template_hole 18, template_var 4),
              template_var 3),
            template_var 2),
          template_app (template_hole 17, template_var 1)),
        template_equation
         (template_app (template_hole 15, template_var 0),
          template_app
           (template_hole 14,
            template_app
             (template_hole 13,
              template_app
               (template_hole 13,
                template_app
                 (template_hole 13,
                  template_app
                   (template_hole 13,
                    template_app
                     (template_hole 13,
                      template_app
                       (template_hole 13,
                        template_app
                         (template_hole 13,
                          template_app
                           (template_hole 13,
                            template_app
                             (template_hole 13,
                              template_app
                               (template_hole 13,
                                template_app
                                 (template_hole 13,
                                  template_hole 12))))))))))))),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 11,
                template_app (template_hole 10, template_var 0)),
              template_app (template_hole 9, template_var 2))
            )],
       template_predicate (template_app (template_hole 8, t_empty)))),
    ("LinuxRouter_OpenFlow_Translation.lr_of_tran_correct",
     "[| lr_of_tran ?rt ?fw ?ifs = Inr ?oft; p_l2type ?p = 2048;
         p_iiface ?p : set ?ifs |]
      ==> (OF_priority_match OF_match_fields_safe ?oft ?p = Action []) =
          (simple_linux_router_nol12 ?rt ?fw ?p = None)",
     template_implication
      ([template_equation
         (template_app
           (template_app
             (template_app (template_hole 18, template_var 4),
              template_var 3),
            template_var 2),
          template_app (template_hole 17, template_var 1)),
        template_equation
         (template_app (template_hole 15, template_var 0),
          template_app
           (template_hole 14,
            template_app
             (template_hole 13,
              template_app
               (template_hole 13,
                template_app
                 (template_hole 13,
                  template_app
                   (template_hole 13,
                    template_app
                     (template_hole 13,
                      template_app
                       (template_hole 13,
                        template_app
                         (template_hole 13,
                          template_app
                           (template_hole 13,
                            template_app
                             (template_hole 13,
                              template_app
                               (template_hole 13,
                                template_app
                                 (template_hole 13,
                                  template_hole 12))))))))))))),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 11,
                template_app (template_hole 10, template_var 0)),
              template_app (template_hole 9, template_var 2))
            )],
       template_bimplication
        (template_equation
          (template_app
            (template_app
              (template_app (template_hole 6, template_hole 5),
               template_var 1),
             template_var 0),
           template_app (template_hole 4, template_hole 3)),
         template_equation
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 4),
               template_var 3),
             template_var 0),
           template_hole 0)))),
    ("LinuxRouter_OpenFlow_Translation.no_overlaps_lroft_s3_hlp_hlp",
     "[| distinct (map fst ?amr); OF_match_fields_unsafe ?ab ?p;
         ?ab ~= ?ad | ?ba ~= ?bb; OF_match_fields_unsafe ?ad ?p;
         (?ac, ?ab, ?ba) : set (lr_of_tran_s3 ?ifs ?amr);
         (?ac, ?ad, ?bb) : set (lr_of_tran_s3 ?ifs ?amr) |]
      ==> False",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 13,
              template_app
               (template_app (template_hole 12, template_hole 11),
                template_var 7))
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 10, template_var 6),
              template_var 5)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 9,
                template_app
                 (template_hole 8,
                  template_app
                   (template_app (template_hole 7, template_var 6),
                    template_var 4))),
              template_app
               (template_hole 8,
                template_app
                 (template_app (template_hole 6, template_var 3),
                  template_var 2)))
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 10, template_var 4),
              template_var 5)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, template_var 1),
                  template_app
                   (template_app (template_hole 3, template_var 6),
                    template_var 3))),
              template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 0),
                  template_var 7)))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, template_var 1),
                  template_app
                   (template_app (template_hole 3, template_var 4),
                    template_var 2))),
              template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 0),
                  template_var 7)))
            )],
       template_predicate (template_hole 0))),
    ("LinuxRouter_OpenFlow_Translation.replicate_FT_hlp",
     "[| ?x <= 16 & ?y <= 16;
         replicate (16 - ?x) False @ replicate ?x True =
         replicate (16 - ?y) False @ replicate ?y True |]
      ==> ?x = ?y",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 11,
                template_app
                 (template_app (template_hole 10, template_var 1),
                  template_app
                   (template_hole 9,
                    template_app
                     (template_hole 8,
                      template_app
                       (template_hole 8,
                        template_app
                         (template_hole 8,
                          template_app
                           (template_hole 8, template_hole 7))))))),
              template_app
               (template_app (template_hole 10, template_var 0),
                template_app
                 (template_hole 9,
                  template_app
                   (template_hole 8,
                    template_app
                     (template_hole 8,
                      template_app
                       (template_hole 8,
                        template_app
                         (template_hole 8, template_hole 7)))))))
            ),
        template_equation
         (template_app
           (template_app
             (template_hole 5,
              template_app
               (template_app
                 (template_hole 4,
                  template_app
                   (template_app
                     (template_hole 3,
                      template_app
                       (template_hole 9,
                        template_app
                         (template_hole 8,
                          template_app
                           (template_hole 8,
                            template_app
                             (template_hole 8,
                              template_app
                               (template_hole 8, template_hole 7)))))),
                    template_var 1)),
                template_hole 2)),
            template_app
             (template_app (template_hole 4, template_var 1),
              template_hole 1)),
          template_app
           (template_app
             (template_hole 5,
              template_app
               (template_app
                 (template_hole 4,
                  template_app
                   (template_app
                     (template_hole 3,
                      template_app
                       (template_hole 9,
                        template_app
                         (template_hole 8,
                          template_app
                           (template_hole 8,
                            template_app
                             (template_hole 8,
                              template_app
                               (template_hole 8, template_hole 7)))))),
                    template_var 0)),
                template_hole 2)),
            template_app
             (template_app (template_hole 4, template_var 0),
              template_hole 1)))],
       template_equation (template_var 1, template_var 0))),
    ("LinuxRouter_OpenFlow_Translation.lr_of_tran_correct",
     "[| lr_of_tran ?rt ?fw ?ifs = Inr ?oft; p_l2type ?p = 2048;
         p_iiface ?p : set ?ifs |]
      ==> (OF_priority_match OF_match_fields_safe ?oft ?p =
           Action [Forward ?oif]) =
          (simple_linux_router_nol12 ?rt ?fw ?p =
           Some (?p(| p_oiface := ?oif |)))",
     template_implication
      ([template_equation
         (template_app
           (template_app
             (template_app (template_hole 21, template_var 5),
              template_var 4),
            template_var 3),
          template_app (template_hole 20, template_var 2)),
        template_equation
         (template_app (template_hole 18, template_var 1),
          template_app
           (template_hole 17,
            template_app
             (template_hole 16,
              template_app
               (template_hole 16,
                template_app
                 (template_hole 16,
                  template_app
                   (template_hole 16,
                    template_app
                     (template_hole 16,
                      template_app
                       (template_hole 16,
                        template_app
                         (template_hole 16,
                          template_app
                           (template_hole 16,
                            template_app
                             (template_hole 16,
                              template_app
                               (template_hole 16,
                                template_app
                                 (template_hole 16,
                                  template_hole 15))))))))))))),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 14,
                template_app (template_hole 13, template_var 1)),
              template_app (template_hole 12, template_var 3))
            )],
       template_bimplication
        (template_equation
          (template_app
            (template_app
              (template_app (template_hole 9, template_hole 8),
               template_var 2),
             template_var 1),
           template_app
            (template_hole 7,
             template_app
              (template_app
                (template_hole 6,
                 template_app (template_hole 5, template_var 0)),
               template_hole 4))),
         template_equation
          (template_app
            (template_app
              (template_app (template_hole 2, template_var 5),
               template_var 4),
             template_var 1),
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, t_empty),
               template_var 1)))))),
    ("LinuxRouter_OpenFlow_Translation.s3_correct",
     "[| list_all simple_match_valid (map (fst o snd) ?ard);
         p_l2type ?p = 2048; p_iiface ?p : set ?ifs;
         list_all (%m. oiface (fst (snd m)) = ifaceAny) ?ard |]
      ==> (OF_match_linear OF_match_fields_safe (pack_OF_entries ?ifs ?ard)
            ?p =
           Action ?ao) =
          (EX r af.
              generalized_sfw (map snd ?ard) ?p = Some (r, af) &
              (if snd af = Drop then ?ao = []
               else ?ao = [Forward (fst af)]))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 40, template_hole 39),
              template_app
               (template_app
                 (template_hole 38,
                  template_app
                   (template_app (template_hole 37, template_hole 36),
                    template_hole 35)),
                template_var 3))
            ),
        template_equation
         (template_app (template_hole 33, template_var 2),
          template_app
           (template_hole 32,
            template_app
             (template_hole 31,
              template_app
               (template_hole 31,
                template_app
                 (template_hole 31,
                  template_app
                   (template_hole 31,
                    template_app
                     (template_hole 31,
                      template_app
                       (template_hole 31,
                        template_app
                         (template_hole 31,
                          template_app
                           (template_hole 31,
                            template_app
                             (template_hole 31,
                              template_app
                               (template_hole 31,
                                template_app
                                 (template_hole 31,
                                  template_hole 30))))))))))))),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 29,
                template_app (template_hole 28, template_var 2)),
              template_app (template_hole 27, template_var 1))
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 26, t_empty), template_var 3)
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 21,
             template_app
              (template_app
                (template_app (template_hole 20, template_hole 19),
                 template_app
                  (template_app (template_hole 18, template_var 1),
                   template_var 3)),
               template_var 2)),
           template_app (template_hole 17, template_var 0)),
         template_app (template_hole 16, t_empty))))]:
   (string * thm * template) list
### theory "Draft.LinuxRouter_OpenFlow_TranslationTemplates"
### 0.991s elapsed time, 1.219s cpu time, 0.117s GC time
val it = (): unit
