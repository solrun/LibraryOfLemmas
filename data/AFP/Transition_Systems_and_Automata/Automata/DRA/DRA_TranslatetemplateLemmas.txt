   [("DRA_Translate.drae_image_param",
     "(drae_image, drae_image)
      : (?S \<rightarrow> ?T) \<rightarrow>
        \<langle>?L, ?S\<rangle>drae_rel \<rightarrow> \<langle>?L,
        ?T\<rangle>drae_rel",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 18,
             template_app
              (template_app (template_hole 17, template_hole 16),
               template_hole 15)),
           template_app
            (template_app
              (template_hole 14,
               template_app
                (template_app (template_hole 13, template_hole 12),
                 template_app
                  (template_app
                    (template_hole 11,
                     template_app
                      (template_app (template_hole 10, template_hole 9),
                       template_var 2)),
                   template_var 1))),
             template_app
              (template_app
                (template_hole 8,
                 template_app
                  (template_app (template_hole 7, template_hole 6),
                   template_app
                    (template_app
                      (template_hole 5,
                       template_app
                        (template_app (template_hole 4, template_hole 3),
                         template_var 0)),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app (template_hole 1, template_hole 0),
                     template_var 0)),
                 template_var 1))))
         )),
    ("DRA_Translate.trans_algo_refine",
     "[| finite (nodes ?A); finite (alphabet ?A); inj_on ?f (nodes ?A);
         ?N = nodes ?A; ?L = alphabet ?A; ?S = transition ?A |]
      ==> (trans_algo ?N ?L ?S ?f, SPEC ((=) (trans_spec ?A ?f)))
          : \<langle>Id\<rangle>nres_rel",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 18,
              template_app (template_hole 17, template_var 4))
            ),
        template_predicate
         (
            template_app
             (template_hole 16,
              template_app (template_hole 15, template_var 4))
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 14, template_var 3),
              template_app (template_hole 17, template_var 4))
            ),
        template_equation
         (template_var 2, template_app (template_hole 17, template_var 4)),
        template_equation
         (template_var 1, template_app (template_hole 15, template_var 4)),
        template_equation
         (template_var 0, template_app (template_hole 10, template_var 4))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 9,
               template_app
                (template_app
                  (template_hole 8,
                   template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 7, template_var 2),
                         template_var 1),
                       template_var 0),
                     template_var 3)),
                 template_app
                  (template_hole 6,
                   template_app
                    (template_hole 5,
                     template_app
                      (template_hole 4,
                       template_app
                        (template_app (template_hole 3, template_var 4),
                         template_var 3)))))),
             template_app
              (template_app (template_hole 2, template_hole 1),
               template_hole 0))
           ))),
    ("DRA_Translate.inj_f",
     "[| finite (nodes ?A); is_bounded_hashcode ?S ?seq ?bhc;
         is_valid_def_hm_size TYPE(?'statei) ?hms;
         (?seq, (=)) : ?S \<rightarrow> ?S \<rightarrow> bool_rel;
         (?Ai, ?A) : \<langle>Id, ?S\<rangle>drai_dra_rel |]
      ==> inj_on (f ?Ai ?A ?seq ?bhc ?hms) (nodes ?A)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 22,
              template_app (template_hole 21, template_var 5))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 20, template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 19, template_hole 18),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 17,
                template_app
                 (template_app (template_hole 16, template_var 3),
                  template_hole 15)),
              template_app
               (template_app
                 (template_hole 14,
                  template_app
                   (template_app (template_hole 13, template_hole 12),
                    template_var 4)),
                template_app
                 (template_app
                   (template_hole 11,
                    template_app
                     (template_app (template_hole 10, template_hole 9),
                      template_var 4)),
                  template_hole 8)))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app
                 (template_app (template_hole 6, template_var 0),
                  template_var 5)),
              template_app
               (template_app
                 (template_hole 5,
                  template_app
                   (template_app (template_hole 4, template_hole 3),
                    template_hole 2)),
                template_var 4))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 0, template_var 0),
                       template_var 5),
                     template_var 3),
                   template_var 2),
                 template_var 1)),
             template_app (template_hole 21, template_var 5))
           ))),
    ("DRA_Translate.f'_inj",
     "[| finite (nodes ?A); is_bounded_hashcode ?S ?seq ?bhc;
         is_valid_def_hm_size TYPE(?'statei) ?hms;
         (?seq, (=)) : ?S \<rightarrow> ?S \<rightarrow> bool_rel;
         (?Ai, ?A) : \<langle>Id, ?S\<rangle>drai_dra_rel |]
      ==> inj_on (f' ?Ai ?A ?seq ?bhc ?hms) (nodes ?A)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 22,
              template_app (template_hole 21, template_var 5))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 20, template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 19, template_hole 18),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 17,
                template_app
                 (template_app (template_hole 16, template_var 3),
                  template_hole 15)),
              template_app
               (template_app
                 (template_hole 14,
                  template_app
                   (template_app (template_hole 13, template_hole 12),
                    template_var 4)),
                template_app
                 (template_app
                   (template_hole 11,
                    template_app
                     (template_app (template_hole 10, template_hole 9),
                      template_var 4)),
                  template_hole 8)))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app
                 (template_app (template_hole 6, template_var 0),
                  template_var 5)),
              template_app
               (template_app
                 (template_hole 5,
                  template_app
                   (template_app (template_hole 4, template_hole 3),
                    template_hole 2)),
                template_var 4))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 0, template_var 0),
                       template_var 5),
                     template_var 3),
                   template_var 2),
                 template_var 1)),
             template_app (template_hole 21, template_var 5))
           ))),
    ("DRA_Translate.f'_dom",
     "[| finite (nodes ?A); is_bounded_hashcode ?S ?seq ?bhc;
         is_valid_def_hm_size TYPE(?'statei) ?hms;
         (?seq, (=)) : ?S \<rightarrow> ?S \<rightarrow> bool_rel;
         (?Ai, ?A) : \<langle>Id, ?S\<rangle>drai_dra_rel |]
      ==> dom (f' ?Ai ?A ?seq ?bhc ?hms) = nodes ?A",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 23,
              template_app (template_hole 22, template_var 5))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 21, template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 20, template_hole 19),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 18,
                template_app
                 (template_app (template_hole 17, template_var 3),
                  template_hole 16)),
              template_app
               (template_app
                 (template_hole 15,
                  template_app
                   (template_app (template_hole 14, template_hole 13),
                    template_var 4)),
                template_app
                 (template_app
                   (template_hole 12,
                    template_app
                     (template_app (template_hole 11, template_hole 10),
                      template_var 4)),
                  template_hole 9)))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app
                 (template_app (template_hole 7, template_var 0),
                  template_var 5)),
              template_app
               (template_app
                 (template_hole 6,
                  template_app
                   (template_app (template_hole 5, template_hole 4),
                    template_hole 3)),
                template_var 4))
            )],
       template_equation
        (template_app
          (template_hole 1,
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 0),
                   template_var 5),
                 template_var 3),
               template_var 2),
             template_var 1)),
         template_app (template_hole 22, template_var 5)))),
    ("DRA_Translate.rel_range",
     "[| finite (nodes ?A); is_bounded_hashcode ?S ?seq ?bhc;
         is_valid_def_hm_size TYPE(?'statei) ?hms;
         (?seq, (=)) : ?S \<rightarrow> ?S \<rightarrow> bool_rel;
         (?Ai, ?A) : \<langle>Id, ?S\<rangle>drai_dra_rel |]
      ==> Range (rel ?Ai ?A ?seq ?bhc ?hms) = nodes ?A",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 23,
              template_app (template_hole 22, template_var 5))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 21, template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 20, template_hole 19),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 18,
                template_app
                 (template_app (template_hole 17, template_var 3),
                  template_hole 16)),
              template_app
               (template_app
                 (template_hole 15,
                  template_app
                   (template_app (template_hole 14, template_hole 13),
                    template_var 4)),
                template_app
                 (template_app
                   (template_hole 12,
                    template_app
                     (template_app (template_hole 11, template_hole 10),
                      template_var 4)),
                  template_hole 9)))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app
                 (template_app (template_hole 7, template_var 0),
                  template_var 5)),
              template_app
               (template_app
                 (template_hole 6,
                  template_app
                   (template_app (template_hole 5, template_hole 4),
                    template_hole 3)),
                template_var 4))
            )],
       template_equation
        (template_app
          (template_hole 1,
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 0),
                   template_var 5),
                 template_var 3),
               template_var 2),
             template_var 1)),
         template_app (template_hole 22, template_var 5)))),
    ("DRA_Translate.inj_g",
     "[| finite (nodes ?A); is_bounded_hashcode ?S ?seq ?bhc;
         is_valid_def_hm_size TYPE(?'statei) ?hms;
         (?seq, (=)) : ?S \<rightarrow> ?S \<rightarrow> bool_rel;
         (?Ai, ?A) : \<langle>Id, ?S\<rangle>drai_dra_rel |]
      ==> inj_on (g ?Ai ?A ?seq ?bhc ?hms)
           (f ?Ai ?A ?seq ?bhc ?hms ` nodes ?A)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 24,
              template_app (template_hole 23, template_var 5))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 22, template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 21, template_hole 20),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 19,
                template_app
                 (template_app (template_hole 18, template_var 3),
                  template_hole 17)),
              template_app
               (template_app
                 (template_hole 16,
                  template_app
                   (template_app (template_hole 15, template_hole 14),
                    template_var 4)),
                template_app
                 (template_app
                   (template_hole 13,
                    template_app
                     (template_app (template_hole 12, template_hole 11),
                      template_var 4)),
                  template_hole 10)))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 9,
                template_app
                 (template_app (template_hole 8, template_var 0),
                  template_var 5)),
              template_app
               (template_app
                 (template_hole 7,
                  template_app
                   (template_app (template_hole 6, template_hole 5),
                    template_hole 4)),
                template_var 4))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 2, template_var 0),
                       template_var 5),
                     template_var 3),
                   template_var 2),
                 template_var 1)),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 0, template_var 0),
                         template_var 5),
                       template_var 3),
                     template_var 2),
                   template_var 1)),
               template_app (template_hole 23, template_var 5)))
           ))),
    ("DRA_Translate.rel_domain",
     "[| finite (nodes ?A); is_bounded_hashcode ?S ?seq ?bhc;
         is_valid_def_hm_size TYPE(?'statei) ?hms;
         (?seq, (=)) : ?S \<rightarrow> ?S \<rightarrow> bool_rel;
         (?Ai, ?A) : \<langle>Id, ?S\<rangle>drai_dra_rel |]
      ==> Domain (rel ?Ai ?A ?seq ?bhc ?hms) =
          f ?Ai ?A ?seq ?bhc ?hms ` nodes ?A",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 25,
              template_app (template_hole 24, template_var 5))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 23, template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 22, template_hole 21),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 20,
                template_app
                 (template_app (template_hole 19, template_var 3),
                  template_hole 18)),
              template_app
               (template_app
                 (template_hole 17,
                  template_app
                   (template_app (template_hole 16, template_hole 15),
                    template_var 4)),
                template_app
                 (template_app
                   (template_hole 14,
                    template_app
                     (template_app (template_hole 13, template_hole 12),
                      template_var 4)),
                  template_hole 11)))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 10,
                template_app
                 (template_app (template_hole 9, template_var 0),
                  template_var 5)),
              template_app
               (template_app
                 (template_hole 8,
                  template_app
                   (template_app (template_hole 7, template_hole 6),
                    template_hole 5)),
                template_var 4))
            )],
       template_equation
        (template_app
          (template_hole 3,
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 2, template_var 0),
                   template_var 5),
                 template_var 3),
               template_var 2),
             template_var 1)),
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app
                (template_app
                  (template_app
                    (template_app (template_hole 0, template_var 0),
                     template_var 5),
                   template_var 3),
                 template_var 2),
               template_var 1)),
           template_app (template_hole 24, template_var 5))))),
    ("DRA_Translate.to_draei_impl_refine'",
     "[| finite (nodes ?A); is_bounded_hashcode ?S ?seq ?bhc;
         is_valid_def_hm_size TYPE(?'statei) ?hms;
         (?seq, (=)) : ?S \<rightarrow> ?S \<rightarrow> bool_rel;
         (?Ai, ?A) : \<langle>Id, ?S\<rangle>drai_dra_rel |]
      ==> (to_draei_impl ?seq ?bhc ?hms ?Ai, to_draei ?A)
          : \<langle>Id_on (alphabet ?A),
          rel ?Ai ?A ?seq ?bhc ?hms\<rangle>draei_dra_rel",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 30,
              template_app (template_hole 29, template_var 5))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 28, template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 27, template_hole 26),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 25,
                template_app
                 (template_app (template_hole 24, template_var 3),
                  template_hole 23)),
              template_app
               (template_app
                 (template_hole 22,
                  template_app
                   (template_app (template_hole 21, template_hole 20),
                    template_var 4)),
                template_app
                 (template_app
                   (template_hole 19,
                    template_app
                     (template_app (template_hole 18, template_hole 17),
                      template_var 4)),
                  template_hole 16)))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 15,
                template_app
                 (template_app (template_hole 14, template_var 0),
                  template_var 5)),
              template_app
               (template_app
                 (template_hole 13,
                  template_app
                   (template_app (template_hole 12, template_hole 11),
                    template_hole 10)),
                template_var 4))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 9,
               template_app
                (template_app
                  (template_hole 8,
                   template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 7, template_var 3),
                         template_var 2),
                       template_var 1),
                     template_var 0)),
                 template_app (template_hole 6, template_var 5))),
             template_app
              (template_app
                (template_hole 5,
                 template_app
                  (template_app (template_hole 4, template_hole 3),
                   template_app
                    (template_hole 2,
                     template_app (template_hole 1, template_var 5)))),
               template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 0, template_var 0),
                       template_var 5),
                     template_var 3),
                   template_var 2),
                 template_var 1)))
           ))),
    ("DRA_Translate.f'_refine",
     "[| finite (nodes ?A); is_bounded_hashcode ?S ?seq ?bhc;
         is_valid_def_hm_size TYPE(?'statei) ?hms;
         (?seq, (=)) : ?S \<rightarrow> ?S \<rightarrow> bool_rel;
         (?Ai, ?A) : \<langle>Id, ?S\<rangle>drai_dra_rel |]
      ==> (to_draei_impl ?seq ?bhc ?hms ?Ai,
           drae_image ((the \<circ>\<circ>\<circ> f' ?Ai ?A ?seq) ?bhc ?hms)
            (dra_drae ?A))
          : \<langle>Id, nat_rel\<rangle>draei_drae_rel",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 32,
              template_app (template_hole 31, template_var 5))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 30, template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 29, template_hole 28),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 27,
                template_app
                 (template_app (template_hole 26, template_var 3),
                  template_hole 25)),
              template_app
               (template_app
                 (template_hole 24,
                  template_app
                   (template_app (template_hole 23, template_hole 22),
                    template_var 4)),
                template_app
                 (template_app
                   (template_hole 21,
                    template_app
                     (template_app (template_hole 20, template_hole 19),
                      template_var 4)),
                  template_hole 18)))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 17,
                template_app
                 (template_app (template_hole 16, template_var 0),
                  template_var 5)),
              template_app
               (template_app
                 (template_hole 15,
                  template_app
                   (template_app (template_hole 14, template_hole 13),
                    template_hole 12)),
                template_var 4))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 11,
               template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 9, template_var 3),
                         template_var 2),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_hole 8,
                     template_app
                      (template_app (template_hole 7, template_hole 6),
                       template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_hole 5, template_var 0),
                               template_var 5),
                             template_var 3),
                           template_var 2),
                         template_var 1))),
                   template_app (template_hole 4, template_var 5)))),
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app (template_hole 2, template_hole 1),
                   template_hole 12)),
               template_hole 0))
           ))),
    ("DRA_Translate.to_draei_impl_refine''",
     "[| finite (nodes ?A); is_bounded_hashcode ?S ?seq ?bhc;
         is_valid_def_hm_size TYPE(?'statei) ?hms;
         (?seq, (=)) : ?S \<rightarrow> ?S \<rightarrow> bool_rel;
         (?Ai, ?A) : \<langle>?L, ?S\<rangle>drai_dra_rel |]
      ==> (RETURN (to_draei_impl ?seq ?bhc ?hms ?Ai),
           op_set_enumerate (nodes ?A) >>=
           (%f. RETURN (drae_image (the o f) (dra_drae ?A))))
          : \<langle>\<langle>?L,
          nat_rel\<rangle>draei_drae_rel\<rangle>nres_rel",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 36,
              template_app (template_hole 35, template_var 6))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 34, template_var 5),
                template_var 4),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 33, template_hole 32),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 31,
                template_app
                 (template_app (template_hole 30, template_var 4),
                  template_hole 29)),
              template_app
               (template_app
                 (template_hole 28,
                  template_app
                   (template_app (template_hole 27, template_hole 26),
                    template_var 5)),
                template_app
                 (template_app
                   (template_hole 25,
                    template_app
                     (template_app (template_hole 24, template_hole 23),
                      template_var 5)),
                  template_hole 22)))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 21,
                template_app
                 (template_app (template_hole 20, template_var 1),
                  template_var 6)),
              template_app
               (template_app
                 (template_hole 19,
                  template_app
                   (template_app (template_hole 18, template_hole 17),
                    template_var 0)),
                template_var 5))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 16,
               template_app
                (template_app
                  (template_hole 15,
                   template_app
                    (template_hole 14,
                     template_app
                      (template_app
                        (template_app
                          (template_app (template_hole 13, template_var 4),
                           template_var 3),
                         template_var 2),
                       template_var 1))),
                 template_app
                  (template_app
                    (template_hole 12,
                     template_app
                      (template_hole 11,
                       template_app (template_hole 35, template_var 6))),
                   t_empty))),
             template_app
              (template_app (template_hole 5, template_hole 4),
               template_app
                (template_app
                  (template_hole 3,
                   template_app
                    (template_app (template_hole 2, template_hole 1),
                     template_var 0)),
                 template_hole 0)))
           ))),
    ("DRA_Translate.drae_image_dra_drae",
     "drae_image ?f (dra_drae ?A) =
      drae (alphabet ?A) (?f (initial ?A))
       (UN p:nodes ?A.
           UN a:alphabet ?A.
              ?f ` {p} \<times> {a} \<times> ?f ` {transition ?A a p})
       (map (%(P, Q). (?f ` {p: nodes ?A. P p}, ?f ` {p: nodes ?A. Q p}))
         (condition ?A))",
     template_equation
      (template_app
        (template_app (template_hole 23, template_var 1),
         template_app (template_hole 22, template_var 0)),
       template_app
        (template_app
          (template_app
            (template_app
              (template_hole 21,
               template_app (template_hole 20, template_var 0)),
             template_app
              (template_var 1,
               template_app (template_hole 19, template_var 0))),
           template_app
            (template_hole 18,
             template_app
              (template_app (template_hole 17, t_empty),
               template_app (template_hole 7, template_var 0)))),
         template_app
          (template_app
            (template_hole 6, template_app (template_hole 5, t_empty)),
           template_app (template_hole 0, template_var 0))))),
    ("DRA_Translate.1",
     "[| finite (nodes ?A); is_bounded_hashcode ?S ?seq ?bhc;
         is_valid_def_hm_size TYPE(?'statei) ?hms;
         (?seq, (=)) : ?S \<rightarrow> ?S \<rightarrow> bool_rel;
         (?Ai, ?A) : \<langle>Id, ?S\<rangle>drai_dra_rel |]
      ==> EX f'.
             (to_draei_impl ?seq ?bhc ?hms ?Ai,
              drae_image (the o f') (dra_drae ?A))
             : \<langle>Id, nat_rel\<rangle>draei_drae_rel &
             dom f' = nodes ?A & inj_on f' (nodes ?A)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 36,
              template_app (template_hole 35, template_var 5))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 34, template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 33, template_hole 32),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 31,
                template_app
                 (template_app (template_hole 30, template_var 3),
                  template_hole 29)),
              template_app
               (template_app
                 (template_hole 28,
                  template_app
                   (template_app (template_hole 27, template_hole 26),
                    template_var 4)),
                template_app
                 (template_app
                   (template_hole 25,
                    template_app
                     (template_app (template_hole 24, template_hole 23),
                      template_var 4)),
                  template_hole 22)))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 21,
                template_app
                 (template_app (template_hole 20, template_var 0),
                  template_var 5)),
              template_app
               (template_app
                 (template_hole 19,
                  template_app
                   (template_app (template_hole 18, template_hole 17),
                    template_hole 16)),
                template_var 4))
            )],
       template_predicate (template_app (template_hole 15, t_empty)))),
    ("DRA_Translate.to_draei_impl_refine",
     "[| SIDE_PRECOND (finite (nodes ?A));
         SIDE_GEN_ALGO (is_bounded_hashcode ?S ?seq ?bhc);
         SIDE_GEN_ALGO (is_valid_def_hm_size TYPE(?'statei) ?hms);
         GEN_OP ?seq (=) (?S \<rightarrow> ?S \<rightarrow> bool_rel);
         (?Ai, ?A) : \<langle>Id, ?S\<rangle>drai_dra_rel |]
      ==> (to_draei_impl ?seq ?bhc ?hms ?Ai,
           (Autoref_Tagging.OP to_draei :::
            \<langle>Id, ?S\<rangle>drai_dra_rel \<rightarrow>
            \<langle>Id_on (alphabet ?A),
            rel ?Ai ?A ?seq ?bhc ?hms\<rangle>draei_dra_rel) $
           ?A)
          : \<langle>Id_on (alphabet ?A),
          rel ?Ai ?A ?seq ?bhc ?hms\<rangle>draei_dra_rel",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 45,
              template_app
               (template_hole 44,
                template_app
                 (template_hole 43,
                  template_app
                   (template_hole 42,
                    template_app (template_hole 41, template_var 5)))))
            ),
        template_predicate
         (
            template_app
             (template_hole 45,
              template_app
               (template_hole 40,
                template_app
                 (template_app
                   (template_app (template_hole 39, template_var 4),
                    template_var 3),
                  template_var 2)))
            ),
        template_predicate
         (
            template_app
             (template_hole 45,
              template_app
               (template_hole 40,
                template_app
                 (template_app (template_hole 38, template_hole 37),
                  template_var 1)))
            ),
        template_predicate
         (
            template_app
             (template_hole 45,
              template_app
               (template_hole 36,
                template_app
                 (template_app
                   (template_hole 35,
                    template_app
                     (template_app (template_hole 34, template_var 3),
                      template_app
                       (template_app
                         (template_hole 33,
                          template_app
                           (template_hole 32, template_hole 31)),
                        template_app
                         (template_hole 30,
                          template_app
                           (template_app
                             (template_hole 29,
                              template_app
                               (template_app
                                 (template_hole 28, template_hole 27),
                                template_var 4)),
                            template_app
                             (template_app
                               (template_hole 26,
                                template_app
                                 (template_app
                                   (template_hole 25, template_hole 24),
                                  template_var 4)),
                              template_hole 23)))))),
                  template_app
                   (template_app
                     (template_hole 29,
                      template_app
                       (template_app (template_hole 28, template_hole 27),
                        template_var 4)),
                    template_app
                     (template_app
                       (template_hole 26,
                        template_app
                         (template_app (template_hole 25, template_hole 24),
                          template_var 4)),
                      template_hole 23)))))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 22,
                template_app
                 (template_app (template_hole 21, template_var 0),
                  template_var 5)),
              template_app
               (template_app
                 (template_hole 20,
                  template_app
                   (template_app (template_hole 19, template_hole 18),
                    template_hole 17)),
                template_var 4))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 16,
               template_app
                (template_app
                  (template_hole 15,
                   template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 14, template_var 3),
                         template_var 2),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_hole 13,
                     template_app
                      (template_app
                        (template_hole 12,
                         template_app (template_hole 11, template_hole 10)),
                       template_app
                        (template_hole 9,
                         template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_app
                                (template_hole 7, template_hole 6),
                               template_app
                                (template_app
                                  (template_hole 20,
                                   template_app
                                    (template_app
(template_hole 19, template_hole 18),
                                     template_hole 17)),
                                 template_var 4))),
                           template_app
                            (template_app
                              (template_hole 5,
                               template_app
                                (template_app
                                  (template_hole 4, template_hole 3),
                                 template_app
                                  (template_hole 2,
                                   template_app
                                    (template_hole 1, template_var 5)))),
                             template_app
                              (template_app
                                (template_app
                                  (template_app
                                    (template_app
(template_hole 0, template_var 0),
                                     template_var 5),
                                   template_var 3),
                                 template_var 2),
                               template_var 1)))))),
                   template_var 5))),
             template_app
              (template_app
                (template_hole 5,
                 template_app
                  (template_app (template_hole 4, template_hole 3),
                   template_app
                    (template_hole 2,
                     template_app (template_hole 1, template_var 5)))),
               template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 0, template_var 0),
                       template_var 5),
                     template_var 3),
                   template_var 2),
                 template_var 1)))
           ))),
    ("DRA_Translate.to_draei_impl",
     "[| finite (nodes ?A); is_bounded_hashcode ?S ?seq ?bhc;
         is_valid_def_hm_size TYPE(?'statei) ?hms;
         (?seq, (=)) : ?S \<rightarrow> ?S \<rightarrow> bool_rel;
         (?Ai, ?A) : \<langle>?L, ?S\<rangle>drai_dra_rel |]
      ==> (RETURN
            (let x = dra_nodes ?seq ?bhc ?hms ?Ai;
                 xa = snd ((map_iterator_dom o
                            Impl_Array_Hash_Map.ahm_iteratei)
                            x (%_. True)
                            (%x (k, m).
                                (Suc k,
                                 Impl_Array_Hash_Map.ahm_update ?seq ?bhc x
                                  k m))
                            (0, Impl_Array_Hash_Map.ahm_empty ?hms));
                 xb = (map_iterator_dom o Impl_Array_Hash_Map.ahm_iteratei)
                       x (%xa. True)
                       (%xb. foldli (alphabeti ?Ai) (%xc. True)
                              (%xc \<sigma>'.
                                  let xd = transitioni ?Ai xc xb
                                  in (the
 (Impl_Array_Hash_Map.ahm_lookup ?seq ?bhc xb xa),
xc, the (Impl_Array_Hash_Map.ahm_lookup ?seq ?bhc xd xa)) #
                                     \<sigma>'))
                       []
             in draei (alphabeti ?Ai)
                 (the (Impl_Array_Hash_Map.ahm_lookup ?seq ?bhc
                        (initiali ?Ai) xa))
                 xb (map (%(xb, xc).
                             (gen_image
                               (map_iterator_dom o
                                Impl_Array_Hash_Map.ahm_iteratei)
                               [] (glist_insert (=))
                               (%xi. the
(Impl_Array_Hash_Map.ahm_lookup ?seq ?bhc xi xa))
                               (gen_filter
                                 (map_iterator_dom o
                                  Impl_Array_Hash_Map.ahm_iteratei)
                                 (Impl_Array_Hash_Map.ahm_empty ?hms)
                                 (map2set_insert
                                   (Impl_Array_Hash_Map.ahm_update ?seq
                                     ?bhc))
                                 xb x),
                              gen_image
                               (map_iterator_dom o
                                Impl_Array_Hash_Map.ahm_iteratei)
                               [] (glist_insert (=))
                               (%xi. the
(Impl_Array_Hash_Map.ahm_lookup ?seq ?bhc xi xa))
                               (gen_filter
                                 (map_iterator_dom o
                                  Impl_Array_Hash_Map.ahm_iteratei)
                                 (Impl_Array_Hash_Map.ahm_empty ?hms)
                                 (map2set_insert
                                   (Impl_Array_Hash_Map.ahm_update ?seq
                                     ?bhc))
                                 xc x)))
                      (conditioni ?Ai))),
           let N = nodes ?A
           in op_set_enumerate N >>=
              (%f. ASSERT (dom f = N) >>=
                   (%_. ASSERT (f (initial ?A) ~= None) >>=
                        (%_. ASSERT
                              (ALL a:alphabet ?A.
                                  ALL p:dom f.
                                     f (transition ?A a p) ~= None) >>=
                             (%_. trans_algo N (alphabet ?A) (transition ?A)
                                   (%x. the (f x)) >>=
                                  (%T.
RETURN
 (drae (alphabet ?A) (the (f (initial ?A))) T
   (map (%(P, Q).
            ((%x. the (f x)) ` {p: N. P p}, (%x. the (f x)) ` {p: N. Q p}))
     (condition ?A)))))))))
          : \<langle>\<langle>?L,
          nat_rel\<rangle>draei_drae_rel\<rangle>nres_rel",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 103,
              template_app (template_hole 102, template_var 6))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 101, template_var 5),
                template_var 4),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 100, template_hole 99),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 98,
                template_app
                 (template_app (template_hole 97, template_var 4),
                  template_hole 96)),
              template_app
               (template_app
                 (template_hole 95,
                  template_app
                   (template_app (template_hole 94, template_hole 93),
                    template_var 5)),
                template_app
                 (template_app
                   (template_hole 92,
                    template_app
                     (template_app (template_hole 91, template_hole 90),
                      template_var 5)),
                  template_hole 89)))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 88,
                template_app
                 (template_app (template_hole 87, template_var 1),
                  template_var 6)),
              template_app
               (template_app
                 (template_hole 86,
                  template_app
                   (template_app (template_hole 85, template_hole 84),
                    template_var 0)),
                template_var 5))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 83,
               template_app
                (template_app
                  (template_hole 82,
                   template_app
                    (template_hole 81,
                     template_app
                      (template_app
                        (template_hole 80,
                         template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_hole 79, template_var 4),
                               template_var 3),
                             template_var 2),
                           template_var 1)),
                       t_empty))),
                 template_app
                  (template_app
                    (template_hole 32,
                     template_app (template_hole 102, template_var 6)),
                   t_empty))),
             template_app
              (template_app (template_hole 5, template_hole 4),
               template_app
                (template_app
                  (template_hole 3,
                   template_app
                    (template_app (template_hole 2, template_hole 1),
                     template_var 0)),
                 template_hole 0)))
           )))]
