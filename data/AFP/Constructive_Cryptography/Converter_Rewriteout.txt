Loading theory "HOL-Library.BigO" (required by "Draft.Converter_RewriteTemplates" via "Draft.ExtrEqs")
Loading theory "Draft.Resource" (required by "Draft.Converter_RewriteTemplates" via "Draft.Converter_Rewrite" via "Draft.Converter")
Loading theory "Draft.Templates" (required by "Draft.Converter_RewriteTemplates" via "Draft.ExtrEqs")
datatype template_term
=
     t_empty
   | template_app of template_term * template_term
   | template_hole of int
   | template_var of int
datatype sign
= equals | greater_equals | greater_than | less_equals | less_than
datatype template
=
     template_bimplication of template * template
   | template_dunno
   | template_equation of template_term * template_term
   | template_implication of template list * template
   | template_inequation of sign * template_term * template_term
   | template_negation of template
   | template_predicate of template_term
constructor t_empty: template_term
constructor template_app: template_term * template_term -> template_term
constructor template_hole: int -> template_term
constructor template_var: int -> template_term
constructor equals: sign
constructor greater_equals: sign
constructor greater_than: sign
constructor less_equals: sign
constructor less_than: sign
constructor template_bimplication: template * template -> template
constructor template_dunno: template
constructor template_equation: template_term * template_term -> template
constructor template_implication: template list * template -> template
constructor template_inequation:
   sign * template_term * template_term -> template
constructor template_negation: template -> template
constructor template_predicate: template_term -> template
val vfs = fn: term -> (indexname * typ) list * (string * typ) list
val indexOf = fn: ''a list -> ''a -> int -> int
val has_eq = fn: term -> bool
val term2template = fn:
   (indexname * typ) list -> (string * typ) list -> term -> template_term
val lemma2predicate = fn: term -> term -> template
val makeTemplatewithContext = fn: term -> term -> template
val lemma2template = fn: term -> template
val thm2template = fn: thm -> template
val tterm2string = fn: template_term -> string
val template2string = fn: template -> string
val t = "height ?t <= size ?t": thm
val th =
   Const ("HOL.Trueprop", "bool => prop") $
     (Const ("Orderings.ord_class.less_eq", "nat => nat => bool") $
       (Const ("Tree.height_class.height", "?'a tree => nat") $
         Var (("t", 0), "?'a tree")) $
       (Const ("Nat.size_class.size", "?'a tree => nat") $
         Var (("t", 0), "?'a tree"))):
   term
### theory "Draft.Templates"
### 0.080s elapsed time, 0.286s cpu time, 0.000s GC time
### theory "HOL-Library.BigO"
### 0.689s elapsed time, 1.528s cpu time, 0.104s GC time
Loading theory "Draft.ExtrEqs" (required by "Draft.Converter_RewriteTemplates")
consts
  map_resource :: "('a', 'b) resource => ('a, 'b') resource"
Proofs for coinductive predicate(s) "rel_resource"
  Proving monotonicity ...
Proofs for coinductive predicate(s) "lossless_resource"
  Proving monotonicity ...
consts
  resource_of_oracle :: "'s => ('a, 'b) resource"
consts
  parallel_resource ::
    "('a, 'b) resource => ('c, 'd) resource => ('a + 'c, 'b + 'd) resource"
Proofs for coinductive predicate(s) "WT_resource"
val eqpattern =
   Pattern
    (
       Const ("HOL.Trueprop", "bool => prop") $
         (Const ("HOL.eq", "?'a => ?'a => bool") $
           Var (("_dummy_", 1), "?'a") $ Var (("_dummy_", 2), "?'a"))
       ):
   term Find_Theorems.criterion
val badeqpattern = Pattern (Const ("Pure.eq", "?'a => ?'a => prop")):
   term Find_Theorems.criterion
val undefpattern =
   Pattern
    (
       Const ("HOL.Trueprop", "bool => prop") $
         (Const ("HOL.eq", "?'a => ?'a => bool") $
           Var (("_dummy_", 1), "?'a") $ Const ("HOL.undefined", "?'a"))
       ):
   term Find_Theorems.criterion
val thmpattern =
   Pattern
    (Const ("HOL.Trueprop", "bool => prop") $ Var (("_dummy_", 1), "bool")):
   term Find_Theorems.criterion
val badnames =
   ["*nitpick*", "*Nitpick*", "*full_exhaustive*", "*_def*", "Enum.finite*",
    "*Quickcheck*", "ATP*", "*Nunchaku*", "*Code*", "*BNF*", "*SMT*",
    "*.*.*"]:
   string list
val unwanted_names =
   [(false, Name "*nitpick*"), (false, Name "*Nitpick*"),
    (false, Name "*full_exhaustive*"), (false, Name "*_def*"),
    (false, Name "Enum.finite*"), (false, Name "*Quickcheck*"),
    (false, Name "ATP*"), (false, Name "*Nunchaku*"),
    (false, Name "*Code*"), (false, Name "*BNF*"), (false, Name "*SMT*"),
    (false, Name "*.*.*")]:
   (bool * term Find_Theorems.criterion) list
val has_vars = fn: term -> bool
val get_all_eqs = fn: string -> Proof.context -> (string * thm) list
val get_all_thms = fn: string -> Proof.context -> (string * thm) list
val get_noneq_thms = fn: string -> Proof.context -> (string * thm) list
val template_eqs = fn:
   string -> Proof.context -> (string * thm * template) list
val template_thms = fn:
   string -> Proof.context -> (string * thm * template) list
### theory "Draft.ExtrEqs"
### 0.518s elapsed time, 1.059s cpu time, 0.105s GC time
  Proving monotonicity ...
### theory "Draft.Resource"
### 1.444s elapsed time, 2.853s cpu time, 0.209s GC time
Loading theory "Draft.Converter" (required by "Draft.Converter_RewriteTemplates" via "Draft.Converter_Rewrite")
consts
  map_converter ::
    "('a', 'b, 'out, 'in') converter => ('a, 'b', 'out', 'in) converter"
Proofs for inductive predicate(s) "outsp_converter"
  Proving monotonicity ...
Proofs for inductive predicate(s) "resultsp_converter"
  Proving monotonicity ...
Proofs for coinductive predicate(s) "rel_converter"
  Proving monotonicity ...
Proofs for inductive predicate(s) "pred_converter"
  Proving monotonicity ...
Proofs for coinductive predicate(s) "WT_converter"
  Proving monotonicity ...
Proofs for coinductive predicate(s) "plossless_converter"
  Proving monotonicity ...
consts
  converter_of_callee :: "'s => ('a, 'b, 'out, 'in) converter"
consts
  parallel_converter ::
    "('a, 'b, 'out, 'in) converter
     => ('c, 'd, 'out, 'in) converter
        => ('a + 'c, 'b + 'd, 'out, 'in) converter"
consts
  id_converter :: "('a, 'b, 'a, 'b) converter"
consts
  parallel_converter2 ::
    "('a, 'b, 'out, 'in) converter
     => ('c, 'd, 'out', 'in') converter
        => ('a + 'c, 'b + 'd, 'out + 'out', 'in + 'in') converter"
consts
  left_interface ::
    "('a, 'b, 'out, 'in) converter
     => ('a, 'b, 'out + 'out', 'in + 'in') converter"
consts
  right_interface ::
    "('a, 'b, 'out, 'in) converter
     => ('a, 'b, 'out' + 'out, 'in' + 'in) converter"
consts
  converter_of_resource :: "('a, 'b) resource => ('a, 'b, 'c, 'd) converter"
consts
  restrict_converter ::
    "('a, 'b, 'c, 'd) converter => ('a, 'b, 'c, 'd) converter"
consts
  attach ::
    "('a, 'b, 'out, 'in) converter
     => ('out, 'in) resource => ('a, 'b) resource"
consts
  comp_converter ::
    "('a, 'b, 'out, 'in) converter
     => ('out, 'in, 'out', 'in') converter
        => ('a, 'b, 'out', 'in') converter"
Proofs for coinductive predicate(s) "interaction_any_bounded_converter"
  Proving monotonicity ...
### theory "Draft.Converter"
### 3.716s elapsed time, 4.138s cpu time, 0.632s GC time
Loading theory "Draft.Converter_Rewrite" (required by "Draft.Converter_RewriteTemplates")
Proofs for coinductive predicate(s) "eq_resource_on"
  Proving monotonicity ...
Proofs for inductive predicate(s) "eq_\<I>_generat"
  Proving monotonicity ...
Proofs for coinductive predicate(s) "eq_\<I>_gpv"
  Proving monotonicity ...
Proofs for coinductive predicate(s) "eq_\<I>_converter"
  Proving monotonicity ...
### theory "Draft.Converter_Rewrite"
### 0.476s elapsed time, 0.506s cpu time, 0.029s GC time
Loading theory "Draft.Converter_RewriteTemplates"
val templateLemmas =
   [("Converter_Rewrite.eq_resource_on_refl",
     "?A \<turnstile>\<^sub>R ?res \<sim> ?res",
     template_predicate
      (
         template_app
          (template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0),
           template_var 0)
         )),
    ("Converter_Rewrite.eq_resource_on_empty",
     "{} \<turnstile>\<^sub>R ?res \<sim> ?res'",
     template_predicate
      (
         template_app
          (template_app
            (template_app (template_hole 1, template_hole 0),
             template_var 1),
           template_var 0)
         )),
    ("Converter_Rewrite.eq_\<I>_gpv_Fail", "eq_\<I>_gpv ?A ?\<I> Fail Fail",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app (template_hole 2, template_var 1),
               template_var 0),
             template_hole 1),
           template_hole 0)
         )),
    ("Converter_Rewrite.eq_resource_on_UNIV_iff",
     "UNIV \<turnstile>\<^sub>R ?res \<sim> ?res' = (?res = ?res')",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 2, template_hole 1),
                template_var 1),
              template_var 0)
            )],
       template_equation (template_var 1, template_var 0))),
    ("Converter_Rewrite.eq_\<I>_gpv_conversep",
     "eq_\<I>_gpv ?A^--1 ?\<I> = (eq_\<I>_gpv ?A ?\<I>)^--1",
     template_equation
      (template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, template_var 1)),
         template_var 0),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Converter_Rewrite.eq_resource_on_reflI",
     "?res = ?res' ==> ?A \<turnstile>\<^sub>R ?res \<sim> ?res'",
     template_implication
      ([template_equation (template_var 2, template_var 1)],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 0, template_var 0),
               template_var 2),
             template_var 1)
           ))),
    ("Converter_Rewrite.eq_resource_on_UNIV_D",
     "UNIV \<turnstile>\<^sub>R ?res \<sim> ?res' ==> ?res = ?res'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 2, template_hole 1),
                template_var 1),
              template_var 0)
            )],
       template_equation (template_var 1, template_var 0))),
    ("Converter_Rewrite.id_converter_eq_self",
     "?\<I> <= ?\<I>' ==>
      ?\<I>,?\<I>' \<turnstile>\<^sub>C id_converter \<sim> id_converter",
     template_implication
      ([template_inequation (less_equals, template_var 1, template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 1, template_var 1),
                 template_var 0),
               template_hole 0),
             template_hole 0)
           ))),
    ("Converter_Rewrite.eq_resource_on_sym",
     "?A \<turnstile>\<^sub>R ?res' \<sim> ?res ==>
      ?A \<turnstile>\<^sub>R ?res \<sim> ?res'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 0, template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 0, template_var 2),
               template_var 0),
             template_var 1)
           ))),
    ("Converter_Rewrite.eq_\<I>_converter_eq",
     "\<I>_full,\<I>_full \<turnstile>\<^sub>C ?conv1.0 \<sim> ?conv2.0 ==>
      ?conv1.0 = ?conv2.0",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 3, template_hole 2),
                  template_hole 1),
                template_var 1),
              template_var 0)
            )],
       template_equation (template_var 1, template_var 0))),
    ("Converter_Rewrite.parallel_converter2_id_id",
     "?\<I>1.0 \<oplus>\<^sub>\<I>
      ?\<I>2.0,?\<I>1.0 \<oplus>\<^sub>\<I> ?\<I>2.0 \<turnstile>\<^sub>C
      parallel_converter2 id_converter id_converter \<sim> id_converter",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_hole 5,
                 template_app
                  (template_app (template_hole 4, template_var 1),
                   template_var 0)),
               template_app
                (template_app (template_hole 4, template_var 1),
                 template_var 0)),
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_hole 1)),
           template_hole 0)
         )),
    ("Converter_Rewrite.eq_\<I>_gpv_Done_iff",
     "eq_\<I>_gpv ?A ?\<I> (Generative_Probabilistic_Value.Done ?x)
       (Generative_Probabilistic_Value.Done ?y) =
      ?A ?x ?y",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app (template_hole 2, template_var 3),
             template_var 2),
           template_app (template_hole 1, template_var 1)),
         template_app (template_hole 0, template_var 0)),
       template_app
        (template_app (template_var 3, template_var 1), template_var 0))),
    ("Converter_Rewrite.eq_\<I>_generat_simps",
     "eq_\<I>_generat ?A ?\<I> ?D (Pure ?x) (IO ?out' ?c') = False",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 3, template_var 5),
               template_var 4),
             template_var 3),
           template_app (template_hole 2, template_var 2)),
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_hole 0)),
    ("Converter_Rewrite.eq_\<I>_generat_simps",
     "eq_\<I>_generat ?A ?\<I> ?D (IO ?out ?c) (Pure ?y) = False",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 3, template_var 5),
               template_var 4),
             template_var 3),
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1)),
         template_app (template_hole 1, template_var 0)),
       template_hole 0)),
    ("Converter_Rewrite.eq_\<I>_converter_reflI",
     "?\<I>, ?\<I>' \<turnstile>\<^sub>C ?conv \<surd> ==>
      ?\<I>,?\<I>' \<turnstile>\<^sub>C ?conv \<sim> ?conv",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 1, template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 1),
               template_var 0),
             template_var 0)
           ))),
    ("Converter_Rewrite.eq_\<I>_generat_conversep",
     "eq_\<I>_generat ?A^--1 ?\<I> ?D^--1 =
      (eq_\<I>_generat ?A ?\<I> ?D)^--1",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 4,
             template_app (template_hole 3, template_var 2)),
           template_var 1),
         template_app (template_hole 2, template_var 0)),
       template_app
        (template_hole 1,
         template_app
          (template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1),
           template_var 0)))),
    ("Converter_Rewrite.eq_\<I>_generat_simps",
     "eq_\<I>_generat ?A ?\<I> ?D (Pure ?x) (Pure ?y) = ?A ?x ?y",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 2, template_var 4),
               template_var 3),
             template_var 2),
           template_app (template_hole 1, template_var 1)),
         template_app (template_hole 0, template_var 0)),
       template_app
        (template_app (template_var 4, template_var 1), template_var 0))),
    ("Converter_Rewrite.eq_\<I>_gpv_Done",
     "?A ?x ?y ==>
      eq_\<I>_gpv ?A ?\<I> (Generative_Probabilistic_Value.Done ?x)
       (Generative_Probabilistic_Value.Done ?y)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_var 3, template_var 2), template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 2, template_var 3),
                 template_var 0),
               template_app (template_hole 1, template_var 2)),
             template_app (template_hole 0, template_var 1))
           ))),
    ("Converter_Rewrite.eq_\<I>_converter_sym",
     "?\<I>,?\<I>' \<turnstile>\<^sub>C ?conv' \<sim> ?conv ==>
      ?\<I>,?\<I>' \<turnstile>\<^sub>C ?conv \<sim> ?conv'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 0, template_var 3),
                  template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 0, template_var 3),
                 template_var 2),
               template_var 0),
             template_var 1)
           ))),
    ("Converter_Rewrite.eq_\<I>_gpv_into_rel_gpv",
     "eq_\<I>_gpv ?A \<I>_full ?gpv ?gpv' ==> rel_gpv ?A (=) ?gpv ?gpv'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 3, template_var 2),
                  template_hole 2),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 1, template_var 2),
                 template_hole 0),
               template_var 1),
             template_var 0)
           ))),
    ("Converter_Rewrite.eq_\<I>_gpv_relcompp",
     "eq_\<I>_gpv (?A OO ?A') ?\<I> =
      eq_\<I>_gpv ?A ?\<I> OO eq_\<I>_gpv ?A' ?\<I>",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 0)),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Converter_Rewrite.eq_\<I>_restrict_gpv",
     "eq_\<I>_gpv ?A ?\<I> ?gpv ?gpv' ==>
      eq_\<I>_gpv ?A ?\<I> (restrict_gpv ?\<I> ?gpv) ?gpv'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 1, template_var 3),
                  template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 1, template_var 3),
                 template_var 2),
               template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 1)),
             template_var 0)
           ))),
    ("Converter_Rewrite.eq_resource_on_mono",
     "[| ?A' \<turnstile>\<^sub>R ?res \<sim> ?res'; ?A <= ?A' |]
      ==> ?A \<turnstile>\<^sub>R ?res \<sim> ?res'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 1, template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_inequation (less_equals, template_var 0, template_var 3)],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 1, template_var 0),
               template_var 2),
             template_var 1)
           ))),
    ("Converter_Rewrite.eq_\<I>_gpvD_WT1",
     "[| eq_\<I>_gpv ?A ?\<I> ?gpv ?gpv';
         ?\<I> \<turnstile>g ?gpv \<surd> |]
      ==> ?\<I> \<turnstile>g ?gpv' \<surd>",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 2, template_var 3),
                  template_var 2),
                template_var 1),
              template_var 0)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 2),
              template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 2), template_var 0)
           ))),
    ("Converter_Rewrite.eq_\<I>_converterD_WT",
     "?\<I>,?\<I>' \<turnstile>\<^sub>C ?conv1.0 \<sim> ?conv2.0 ==>
      ?\<I>, ?\<I>' \<turnstile>\<^sub>C ?conv1.0 \<surd> = ?\<I>,
      ?\<I>' \<turnstile>\<^sub>C ?conv2.0 \<surd>",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 2, template_var 3),
                  template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_equation
        (template_app
          (template_app
            (template_app (template_hole 0, template_var 3),
             template_var 2),
           template_var 1),
         template_app
          (template_app
            (template_app (template_hole 0, template_var 3),
             template_var 2),
           template_var 0)))),
    ("Converter_Rewrite.eq_\<I>_restrict_gpv_full",
     "eq_\<I>_gpv ?A ?\<I> ?gpv ?gpv' ==>
      eq_\<I>_gpv ?A \<I>_full (restrict_gpv ?\<I> ?gpv)
       (restrict_gpv ?\<I> ?gpv')",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 3, template_var 3),
                  template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 3, template_var 3),
                 template_hole 2),
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 1)),
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 0))
           ))),
    ("Converter_Rewrite.eq_\<I>_gpv_left_gpv_cong",
     "eq_\<I>_gpv ?A ?\<I> ?gpv ?gpv' ==>
      eq_\<I>_gpv ?A (?\<I> \<oplus>\<^sub>\<I> ?\<I>') (left_gpv ?gpv)
       (left_gpv ?gpv')",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 4, template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 3, template_var 4),
                 template_app
                  (template_app (template_hole 2, template_var 3),
                   template_var 0)),
               template_app (template_hole 1, template_var 2)),
             template_app (template_hole 0, template_var 1))
           ))),
    ("Converter_Rewrite.eq_\<I>_gpv_right_gpv_cong",
     "eq_\<I>_gpv ?A ?\<I>' ?gpv ?gpv' ==>
      eq_\<I>_gpv ?A (?\<I> \<oplus>\<^sub>\<I> ?\<I>') (right_gpv ?gpv)
       (right_gpv ?gpv')",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 4, template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 3, template_var 4),
                 template_app
                  (template_app (template_hole 2, template_var 0),
                   template_var 3)),
               template_app (template_hole 1, template_var 2)),
             template_app (template_hole 0, template_var 1))
           ))),
    ("Converter_Rewrite.eq_\<I>_generat_into_rel_generat",
     "eq_\<I>_generat ?A \<I>_full ?D ?generat ?generat' ==>
      rel_generat ?A (=) (rel_fun (=) ?D) ?generat ?generat'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 5, template_var 3),
                    template_hole 4),
                  template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 3, template_var 3),
                   template_hole 2),
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 2)),
               template_var 1),
             template_var 0)
           ))),
    ("Converter_Rewrite.eq_resource_on_trans",
     "[| ?A \<turnstile>\<^sub>R ?res \<sim> ?res';
         ?A \<turnstile>\<^sub>R ?res' \<sim> ?res'' |]
      ==> ?A \<turnstile>\<^sub>R ?res \<sim> ?res''",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 0, template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 0, template_var 3),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 0, template_var 3),
               template_var 2),
             template_var 0)
           ))),
    ("Converter_Rewrite.eq_\<I>_gpv_map_gpv1",
     "eq_\<I>_gpv ?A ?\<I> (map_gpv ?f id ?gpv) ?gpv' =
      eq_\<I>_gpv (%x. ?A (?f x)) ?\<I> ?gpv ?gpv'",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app (template_hole 3, template_var 4),
             template_var 3),
           template_app
            (template_app
              (template_app (template_hole 2, template_var 2),
               template_hole 1),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_app
            (template_app (template_hole 0, t_empty), template_var 3),
           template_var 1),
         template_var 0))),
    ("Converter_Rewrite.eq_\<I>_gpv_mono",
     "[| ?A <= ?A'; ?\<I> <= ?\<I>' |]
      ==> eq_\<I>_gpv ?A ?\<I> <= eq_\<I>_gpv ?A' ?\<I>'",
     template_implication
      ([template_inequation (less_equals, template_var 3, template_var 2),
        template_inequation (less_equals, template_var 1, template_var 0)],
       template_inequation
        (less_equals,
         template_app
          (template_app (template_hole 0, template_var 3), template_var 1),
         template_app
          (template_app (template_hole 0, template_var 2),
           template_var 0)))),
    ("Converter_Rewrite.eq_\<I>_converterD_WT1",
     "[| ?\<I>,?\<I>' \<turnstile>\<^sub>C ?conv1.0 \<sim> ?conv2.0;
         ?\<I>, ?\<I>' \<turnstile>\<^sub>C ?conv1.0 \<surd> |]
      ==> ?\<I>, ?\<I>' \<turnstile>\<^sub>C ?conv2.0 \<surd>",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 1, template_var 3),
                  template_var 2),
                template_var 1),
              template_var 0)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 0, template_var 3),
                template_var 2),
              template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 0, template_var 3),
               template_var 2),
             template_var 0)
           ))),
    ("Converter_Rewrite.eq_\<I>_generat_relcompp",
     "eq_\<I>_generat ?A ?\<I> ?D OO eq_\<I>_generat ?A' ?\<I> ?D' =
      eq_\<I>_generat (?A OO ?A') ?\<I> (?D OO ?D')",
     template_equation
      (template_app
        (template_app
          (template_hole 5,
           template_app
            (template_app
              (template_app (template_hole 4, template_var 4),
               template_var 3),
             template_var 2)),
         template_app
          (template_app
            (template_app (template_hole 3, template_var 1),
             template_var 3),
           template_var 0)),
       template_app
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 4),
               template_var 1)),
           template_var 3),
         template_app
          (template_app (template_hole 0, template_var 2),
           template_var 0)))),
    ("Converter_Rewrite.eq_\<I>_generat_iff2",
     "eq_\<I>_generat ?A ?\<I> ?D ?g (Pure ?x) =
      (EX x. ?g = Pure x & ?A x ?x)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 5, template_var 4),
               template_var 3),
             template_var 2),
           template_var 1),
         template_app (template_hole 4, template_var 0)),
       template_app (template_hole 3, t_empty))),
    ("Converter_Rewrite.eq_\<I>_generat_iff1",
     "eq_\<I>_generat ?A ?\<I> ?D (Pure ?x) ?g' =
      (EX y. ?g' = Pure y & ?A ?x y)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 5, template_var 4),
               template_var 3),
             template_var 2),
           template_app (template_hole 4, template_var 1)),
         template_var 0),
       template_app (template_hole 3, t_empty))),
    ("Converter_Rewrite.eq_\<I>_gpv_map_gpv2",
     "eq_\<I>_gpv ?A ?\<I> ?gpv (map_gpv ?f id ?gpv') =
      eq_\<I>_gpv (%x y. ?A x (?f y)) ?\<I> ?gpv ?gpv'",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app (template_hole 3, template_var 4),
             template_var 3),
           template_var 2),
         template_app
          (template_app
            (template_app (template_hole 2, template_var 1),
             template_hole 1),
           template_var 0)),
       template_app
        (template_app
          (template_app
            (template_app (template_hole 0, t_empty), template_var 3),
           template_var 2),
         template_var 0))),
    ("Converter_Rewrite.eq_\<I>_gpvD",
     "eq_\<I>_gpv ?A ?\<I> ?gpv ?gpv' ==>
      rel_spmf (eq_\<I>_generat ?A ?\<I> (eq_\<I>_gpv ?A ?\<I>))
       (the_gpv ?gpv) (the_gpv ?gpv')",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 5, template_var 3),
                  template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 4,
                 template_app
                  (template_hole 3,
                   template_app
                    (template_app
                      (template_app (template_hole 2, template_var 3),
                       template_var 2),
                     template_app
                      (template_app (template_hole 5, template_var 3),
                       template_var 2)))),
               template_app (template_hole 1, template_var 1)),
             template_app (template_hole 0, template_var 0))
           ))),
    ("Converter_Rewrite.eq_\<I>_attach",
     "[| ?\<I>' \<turnstile>res ?res \<surd>;
         \<I>_full,?\<I>' \<turnstile>\<^sub>C ?conv \<sim> ?conv' |]
      ==> attach ?conv ?res = attach ?conv' ?res",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 4, template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 3, template_hole 2),
                  template_var 3),
                template_var 1),
              template_var 0)
            )],
       template_equation
        (template_app
          (template_app (template_hole 0, template_var 1), template_var 2),
         template_app
          (template_app (template_hole 0, template_var 0),
           template_var 2)))),
    ("Converter_Rewrite.eq_\<I>_converter_trans",
     "[| ?\<I>,?\<I>' \<turnstile>\<^sub>C ?conv \<sim> ?conv';
         ?\<I>,?\<I>' \<turnstile>\<^sub>C ?conv' \<sim> ?conv'' |]
      ==> ?\<I>,?\<I>' \<turnstile>\<^sub>C ?conv \<sim> ?conv''",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 0, template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 0, template_var 4),
                  template_var 3),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 3),
               template_var 2),
             template_var 0)
           ))),
    ("Converter_Rewrite.eq_\<I>_restrict_converter",
     "[| ?\<I>, ?\<I>' \<turnstile>\<^sub>C ?cnv \<surd>;
         outs_\<I> ?\<I> <= ?A |]
      ==> ?\<I>,?\<I>' \<turnstile>\<^sub>C
          restrict_converter ?A ?\<I>' ?cnv \<sim> ?cnv",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 4, template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_inequation
         (less_equals, template_app (template_hole 2, template_var 3),
          template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 1, template_var 3),
                 template_var 2),
               template_app
                (template_app
                  (template_app (template_hole 0, template_var 0),
                   template_var 2),
                 template_var 1)),
             template_var 1)
           ))),
    ("Converter_Rewrite.comp_converter_cong",
     "[| \<I>_full,?\<I> \<turnstile>\<^sub>C ?conv1.0 \<sim> ?conv1';
         ?\<I>,\<I>_full \<turnstile>\<^sub>C ?conv2.0 \<sim> ?conv2' |]
      ==> comp_converter ?conv1.0 ?conv2.0 =
          comp_converter ?conv1' ?conv2'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 5, template_hole 4),
                  template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 3, template_var 4),
                  template_hole 2),
                template_var 1),
              template_var 0)
            )],
       template_equation
        (template_app
          (template_app (template_hole 0, template_var 3), template_var 1),
         template_app
          (template_app (template_hole 0, template_var 2),
           template_var 0)))),
    ("Converter_Rewrite.eq_\<I>_attach_on",
     "[| ?\<I>' \<turnstile>res ?res \<surd>;
         \<I>_uniform ?A UNIV,?\<I>' \<turnstile>\<^sub>C ?conv \<sim>
         ?conv' |]
      ==> ?A \<turnstile>\<^sub>R attach ?conv ?res \<sim>
          attach ?conv' ?res",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 5, template_var 4),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_hole 4,
                    template_app
                     (template_app (template_hole 3, template_var 2),
                      template_hole 2)),
                  template_var 4),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 1, template_var 2),
               template_app
                (template_app (template_hole 0, template_var 1),
                 template_var 3)),
             template_app
              (template_app (template_hole 0, template_var 0),
               template_var 3))
           ))),
    ("Converter_Rewrite.eq_\<I>_restrict_converter_cong",
     "[| ?\<I>,?\<I>' \<turnstile>\<^sub>C ?cnv \<sim> ?cnv';
         ?A <= outs_\<I> ?\<I> |]
      ==> restrict_converter ?A ?\<I>' ?cnv =
          restrict_converter ?A ?\<I>' ?cnv'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 4, template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_inequation
         (less_equals, template_var 0,
          template_app (template_hole 2, template_var 4))],
       template_equation
        (template_app
          (template_app
            (template_app (template_hole 0, template_var 0),
             template_var 3),
           template_var 2),
         template_app
          (template_app
            (template_app (template_hole 0, template_var 0),
             template_var 3),
           template_var 1)))),
    ("Converter_Rewrite.eq_\<I>_gpvD_results_gpv2",
     "[| eq_\<I>_gpv ?A ?\<I> ?gpv ?gpv'; ?y : results_gpv ?\<I> ?gpv' |]
      ==> EX x:results_gpv ?\<I> ?gpv. ?A x ?y",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 4, template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 3, template_var 0),
              template_app
               (template_app (template_hole 2, template_var 3),
                template_var 1))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 3),
                 template_var 2)),
             t_empty)
           ))),
    ("Converter_Rewrite.eq_\<I>_converter_mono",
     "[| ?\<I>1.0,?\<I>2.0 \<turnstile>\<^sub>C ?conv \<sim> ?conv';
         ?\<I>1' <= ?\<I>1.0; ?\<I>2.0 <= ?\<I>2' |]
      ==> ?\<I>1',?\<I>2' \<turnstile>\<^sub>C ?conv \<sim> ?conv'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 2, template_var 5),
                  template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_inequation (less_equals, template_var 1, template_var 5),
        template_inequation (less_equals, template_var 4, template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 2, template_var 1),
                 template_var 0),
               template_var 3),
             template_var 2)
           ))),
    ("Converter_Rewrite.eq_resource_onD",
     "[| ?A \<turnstile>\<^sub>R ?res \<sim> ?res'; ?a : ?A |]
      ==> rel_spmf (rel_prod (=) (eq_resource_on ?A)) (run_resource ?res ?a)
           (run_resource ?res' ?a)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 6, template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 5, template_var 0),
              template_var 3)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 4,
                 template_app
                  (template_hole 3,
                   template_app
                    (template_app (template_hole 2, template_hole 1),
                     template_app (template_hole 6, template_var 3)))),
               template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 0)),
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))
           ))),
    ("Converter_Rewrite.eq_\<I>_comp_cong",
     "[| ?\<I>1.0,?\<I>2.0 \<turnstile>\<^sub>C ?conv1.0 \<sim> ?conv1';
         ?\<I>2.0,?\<I>3.0 \<turnstile>\<^sub>C ?conv2.0 \<sim> ?conv2' |]
      ==> ?\<I>1.0,?\<I>3.0 \<turnstile>\<^sub>C
          comp_converter ?conv1.0 ?conv2.0 \<sim>
          comp_converter ?conv1' ?conv2'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 3, template_var 6),
                  template_var 5),
                template_var 4),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 2, template_var 5),
                  template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 1, template_var 6),
                 template_var 2),
               template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 1)),
             template_app
              (template_app (template_hole 0, template_var 3),
               template_var 0))
           ))),
    ("Converter_Rewrite.eq_\<I>_generat_map1",
     "eq_\<I>_generat ?A ?\<I> ?D (map_generat ?f id ((o) ?g) ?generat)
       ?generat' =
      eq_\<I>_generat (%x. ?A (?f x)) ?\<I> (%x. ?D (?g x)) ?generat
       ?generat'",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 4, template_var 6),
               template_var 5),
             template_var 4),
           template_app
            (template_app
              (template_app
                (template_app (template_hole 3, template_var 3),
                 template_hole 2),
               template_app (template_hole 1, template_var 2)),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 0, t_empty), template_var 5),
             t_empty),
           template_var 1),
         template_var 0))),
    ("Converter_Rewrite.eq_\<I>_gpv_mono''",
     "(!!x y. ?A x y --> ?A' x y) ==>
      eq_\<I>_gpv ?A ?\<I> ?gpv ?gpv' --> eq_\<I>_gpv ?A' ?\<I> ?gpv ?gpv'",
     template_implication
      ([template_predicate (template_app (template_hole 4, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app
                  (template_app
                    (template_app (template_hole 0, template_var 4),
                     template_var 2),
                   template_var 1),
                 template_var 0)),
             template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 3),
                   template_var 2),
                 template_var 1),
               template_var 0))
           ))),
    ("Converter_Rewrite.eq_\<I>_gpv_reflI",
     "[| !!x. x : results_gpv ?\<I> ?gpv ==> ?A x x;
         ?\<I> \<turnstile>g ?gpv \<surd> |]
      ==> eq_\<I>_gpv ?A ?\<I> ?gpv ?gpv",
     template_implication
      ([template_predicate (template_app (template_hole 5, t_empty)),
        template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 2),
              template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 0, template_var 0),
                 template_var 2),
               template_var 1),
             template_var 1)
           ))),
    ("Converter_Rewrite.eq_\<I>_generat_mono",
     "[| ?A <= ?A'; ?D <= ?D'; ?\<I> <= ?\<I>' |]
      ==> eq_\<I>_generat ?A ?\<I> ?D <= eq_\<I>_generat ?A' ?\<I>' ?D'",
     template_implication
      ([template_inequation (less_equals, template_var 5, template_var 4),
        template_inequation (less_equals, template_var 3, template_var 2),
        template_inequation (less_equals, template_var 1, template_var 0)],
       template_inequation
        (less_equals,
         template_app
          (template_app
            (template_app (template_hole 0, template_var 5),
             template_var 1),
           template_var 3),
         template_app
          (template_app
            (template_app (template_hole 0, template_var 4),
             template_var 0),
           template_var 2)))),
    ("Converter_Rewrite.eq_\<I>_attach_on'",
     "[| ?\<I>' \<turnstile>res ?res \<surd>;
         ?\<I>,?\<I>' \<turnstile>\<^sub>C ?conv \<sim> ?conv';
         ?A <= outs_\<I> ?\<I> |]
      ==> ?A \<turnstile>\<^sub>R attach ?conv ?res \<sim>
          attach ?conv' ?res",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 5, template_var 5),
              template_var 4)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 4, template_var 3),
                  template_var 5),
                template_var 2),
              template_var 1)
            ),
        template_inequation
         (less_equals, template_var 0,
          template_app (template_hole 2, template_var 3))],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 1, template_var 0),
               template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 4)),
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 4))
           ))),
    ("Converter_Rewrite.eq_\<I>_generat_map",
     "eq_\<I>_generat ?A ?\<I> ?D ?generat
       (map_generat ?f id id ?generat') =
      eq_\<I>_generat (%x y. ?A x (?f y)) ?\<I> (%x y. ?D x (id y)) ?generat
       ?generat'",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 5, template_var 5),
               template_var 4),
             template_var 3),
           template_var 2),
         template_app
          (template_app
            (template_app
              (template_app (template_hole 4, template_var 1),
               template_hole 3),
             template_hole 2),
           template_var 0)),
       template_app
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 1, t_empty), template_var 4),
             t_empty),
           template_var 2),
         template_var 0))),
    ("Converter_Rewrite.parallel_converter2_eq_\<I>_cong",
     "[| ?\<I>1.0,?\<I>1' \<turnstile>\<^sub>C ?conv1.0 \<sim> ?conv1';
         ?\<I>2.0,?\<I>2' \<turnstile>\<^sub>C ?conv2.0 \<sim> ?conv2' |]
      ==> ?\<I>1.0 \<oplus>\<^sub>\<I>
          ?\<I>2.0,?\<I>1' \<oplus>\<^sub>\<I> ?\<I>2' \<turnstile>\<^sub>C
          parallel_converter2 ?conv1.0 ?conv2.0 \<sim>
          parallel_converter2 ?conv1' ?conv2'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 5, template_var 7),
                  template_var 6),
                template_var 5),
              template_var 4)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 4, template_var 3),
                  template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 3,
                   template_app
                    (template_app (template_hole 2, template_var 7),
                     template_var 3)),
                 template_app
                  (template_app (template_hole 1, template_var 6),
                   template_var 2)),
               template_app
                (template_app (template_hole 0, template_var 5),
                 template_var 1)),
             template_app
              (template_app (template_hole 0, template_var 4),
               template_var 0))
           ))),
    ("Converter_Rewrite.eq_resource_on_resource_of_oracleI",
     "[| rel_fun ?S (rel_fun (eq_on ?A) (rel_spmf (rel_prod (=) ?S))) ?r1.0
          ?r2.0;
         ?S ?s1.0 ?s2.0 |]
      ==> ?A \<turnstile>\<^sub>R resource_of_oracle ?r1.0 ?s1.0 \<sim>
          resource_of_oracle ?r2.0 ?s2.0",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 9, template_var 5),
                  template_app
                   (template_app
                     (template_hole 8,
                      template_app (template_hole 7, template_var 4)),
                    template_app
                     (template_hole 6,
                      template_app
                       (template_hole 5,
                        template_app
                         (template_app (template_hole 4, template_hole 3),
                          template_var 5))))),
                template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_var 5, template_var 1), template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 2, template_var 4),
               template_app
                (template_app (template_hole 1, template_var 3),
                 template_var 1)),
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 0))
           ))),
    ("Converter_Rewrite.eq_\<I>_generat_map2",
     "eq_\<I>_generat ?A ?\<I> ?D ?generat
       (map_generat ?f id ((o) ?g) ?generat') =
      eq_\<I>_generat (%x y. ?A x (?f y)) ?\<I> (%x y. ?D x (?g y)) ?generat
       ?generat'",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 4, template_var 6),
               template_var 5),
             template_var 4),
           template_var 3),
         template_app
          (template_app
            (template_app
              (template_app (template_hole 3, template_var 2),
               template_hole 2),
             template_app (template_hole 1, template_var 1)),
           template_var 0)),
       template_app
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 0, t_empty), template_var 5),
             t_empty),
           template_var 3),
         template_var 0))),
    ("Converter_Rewrite.eq_\<I>_gpv_mono'",
     "[| eq_\<I>_gpv ?A ?\<I> ?gpv ?gpv'; !!x y. ?A x y ==> ?A' x y;
         ?\<I> <= ?\<I>' |]
      ==> eq_\<I>_gpv ?A' ?\<I>' ?gpv ?gpv'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 3, template_var 5),
                  template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_predicate (template_app (template_hole 2, t_empty)),
        template_inequation (less_equals, template_var 4, template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 3, template_var 1),
                 template_var 0),
               template_var 3),
             template_var 2)
           ))),
    ("Converter_Rewrite.eq_\<I>_converterD",
     "[| ?\<I>,?\<I>' \<turnstile>\<^sub>C ?conv \<sim> ?conv';
         ?q : outs_\<I> ?\<I> |]
      ==> eq_\<I>_gpv
           (rel_prod (eq_onp (%r. r : responses_\<I> ?\<I> ?q))
             (eq_\<I>_converter ?\<I> ?\<I>'))
           ?\<I>' (run_converter ?conv ?q) (run_converter ?conv' ?q)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 8, template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 7, template_var 0),
              template_app (template_hole 6, template_var 4))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 5,
                   template_app
                    (template_app
                      (template_hole 4,
                       template_app (template_hole 3, t_empty)),
                     template_app
                      (template_app (template_hole 8, template_var 4),
                       template_var 3))),
                 template_var 3),
               template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 0)),
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))
           ))),
    ("Converter_Rewrite.exec_gpv_eq_resource_on",
     "[| outs_\<I> ?\<I> \<turnstile>\<^sub>R ?res \<sim> ?res';
         ?\<I> \<turnstile>g ?gpv \<surd>;
         ?\<I> \<turnstile>res ?res \<surd> |]
      ==> rel_spmf (rel_prod (=) (eq_resource_on (outs_\<I> ?\<I>)))
           (exec_gpv run_resource ?gpv ?res)
           (exec_gpv run_resource ?gpv ?res')",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_hole 9,
                  template_app (template_hole 8, template_var 3)),
                template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 7, template_var 3),
              template_var 0)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 6, template_var 3),
              template_var 2)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 5,
                 template_app
                  (template_hole 4,
                   template_app
                    (template_app (template_hole 3, template_hole 2),
                     template_app
                      (template_hole 9,
                       template_app (template_hole 8, template_var 3))))),
               template_app
                (template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 0),
                 template_var 2)),
             template_app
              (template_app
                (template_app (template_hole 1, template_hole 0),
                 template_var 0),
               template_var 1))
           ))),
    ("Converter_Rewrite.eq_\<I>_generat_simps",
     "eq_\<I>_generat ?A ?\<I> ?D (IO ?out ?c) (IO ?out' ?c') =
      (?out' = ?out &
       ?out : outs_\<I> ?\<I> &
       (ALL x. x : responses_\<I> ?\<I> ?out --> ?D (?c x) (?c' x)))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 10, template_var 6),
                    template_var 5),
                  template_var 4),
                template_app
                 (template_app (template_hole 9, template_var 3),
                  template_var 2)),
              template_app
               (template_app (template_hole 8, template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_var 1),
                 template_var 3)),
             template_app
              (template_app
                (template_hole 7,
                 template_app
                  (template_app (template_hole 5, template_var 3),
                   template_app (template_hole 4, template_var 5))),
               template_app (template_hole 3, t_empty)))
           ))),
    ("Converter_Rewrite.eq_\<I>_gpv_Pause",
     "[| ?out : outs_\<I> ?\<I>;
         !!input.
            input : responses_\<I> ?\<I> ?out ==>
            eq_\<I>_gpv ?A ?\<I> (?rpv input) (?rpv' input) |]
      ==> eq_\<I>_gpv ?A ?\<I>
           (Generative_Probabilistic_Value.Pause ?out ?rpv)
           (Generative_Probabilistic_Value.Pause ?out ?rpv')",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 7, template_var 4),
              template_app (template_hole 6, template_var 3))
            ),
        template_predicate (template_app (template_hole 5, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 2, template_var 2),
                 template_var 3),
               template_app
                (template_app (template_hole 1, template_var 4),
                 template_var 1)),
             template_app
              (template_app (template_hole 0, template_var 4),
               template_var 0))
           ))),
    ("Converter_Rewrite.eq_\<I>_generat_iff2",
     "eq_\<I>_generat ?A ?\<I> ?D ?g (IO ?out ?c) =
      (EX c. ?g = IO ?out c &
             ?out : outs_\<I> ?\<I> &
             (ALL x. x : responses_\<I> ?\<I> ?out --> ?D (c x) (?c x)))",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 11, template_var 5),
               template_var 4),
             template_var 3),
           template_var 2),
         template_app
          (template_app (template_hole 10, template_var 1),
           template_var 0)),
       template_app (template_hole 9, t_empty))),
    ("Converter_Rewrite.eq_\<I>_generat_iff1",
     "eq_\<I>_generat ?A ?\<I> ?D (IO ?out ?c) ?g' =
      (EX c'.
          ?g' = IO ?out c' &
          ?out : outs_\<I> ?\<I> &
          (ALL x. x : responses_\<I> ?\<I> ?out --> ?D (?c x) (c' x)))",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 11, template_var 5),
               template_var 4),
             template_var 3),
           template_app
            (template_app (template_hole 10, template_var 2),
             template_var 1)),
         template_var 0),
       template_app (template_hole 9, t_empty))),
    ("Converter_Rewrite.eq_\<I>_generat_mono''",
     "[| !!x y. ?A x y --> ?A' x y; !!x y. ?D x y --> ?D' x y |]
      ==> eq_\<I>_generat ?A ?\<I> ?D ?x ?y -->
          eq_\<I>_generat ?A' ?\<I> ?D' ?x ?y",
     template_implication
      ([template_predicate (template_app (template_hole 6, t_empty)),
        template_predicate (template_app (template_hole 2, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 0, template_var 6),
                       template_var 2),
                     template_var 4),
                   template_var 1),
                 template_var 0)),
             template_app
              (template_app
                (template_app
                  (template_app
                    (template_app (template_hole 0, template_var 5),
                     template_var 2),
                   template_var 3),
                 template_var 1),
               template_var 0))
           ))),
    ("Converter_Rewrite.eq_\<I>_gpv_coinduct",
     "[| ?X ?gpv ?gpv';
         !!gpv gpv'.
            ?X gpv gpv' ==>
            rel_spmf
             (eq_\<I>_generat ?A ?\<I>
               (%gpv gpv'. ?X gpv gpv' | eq_\<I>_gpv ?A ?\<I> gpv gpv'))
             (the_gpv gpv) (the_gpv gpv') |]
      ==> eq_\<I>_gpv ?A ?\<I> ?gpv ?gpv'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_var 4, template_var 3), template_var 2)
            ),
        template_predicate (template_app (template_hole 8, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 2, template_var 1),
                 template_var 0),
               template_var 3),
             template_var 2)
           ))),
    ("Converter_Rewrite.eq_resource_on_coinduct",
     "[| ?X ?res ?res';
         !!res res' a.
            [| ?X res res'; a : ?A |]
            ==> rel_spmf
                 (rel_prod (=)
                   (%res res'.
                       ?X res res' | ?A \<turnstile>\<^sub>R res \<sim>
                       res'))
                 (run_resource res a) (run_resource res' a) |]
      ==> ?A \<turnstile>\<^sub>R ?res \<sim> ?res'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_var 3, template_var 2), template_var 1)
            ),
        template_predicate (template_app (template_hole 9, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 1, template_var 0),
               template_var 2),
             template_var 1)
           ))),
    ("Converter_Rewrite.eq_\<I>_generat_reflI",
     "[| !!x. x : generat_pures ?generat ==> ?A x x;
         !!out c.
            ?generat = IO out c ==>
            out : outs_\<I> ?\<I> &
            (ALL input:responses_\<I> ?\<I> out. ?D (c input) (c input)) |]
      ==> eq_\<I>_generat ?A ?\<I> ?D ?generat ?generat",
     template_implication
      ([template_predicate (template_app (template_hole 13, t_empty)),
        template_predicate (template_app (template_hole 9, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 2),
                   template_var 1),
                 template_var 0),
               template_var 3),
             template_var 3)
           ))),
    ("Converter_Rewrite.eq_\<I>_generat_mono'",
     "[| eq_\<I>_generat ?A ?\<I> ?D ?x ?y; !!x y. ?A x y ==> ?A' x y;
         !!x y. ?D x y ==> ?D' x y; ?\<I> <= ?\<I>' |]
      ==> eq_\<I>_generat ?A' ?\<I>' ?D' ?x ?y",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 5, template_var 7),
                    template_var 6),
                  template_var 5),
                template_var 4),
              template_var 3)
            ),
        template_predicate (template_app (template_hole 4, t_empty)),
        template_predicate (template_app (template_hole 2, t_empty)),
        template_inequation (less_equals, template_var 6, template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 5, template_var 2),
                   template_var 0),
                 template_var 1),
               template_var 4),
             template_var 3)
           ))),
    ("Converter_Rewrite.eq_\<I>_converter_coinduct",
     "[| ?X ?conv ?conv';
         !!conv conv' q.
            [| ?X conv conv'; q : outs_\<I> ?\<I> |]
            ==> eq_\<I>_gpv
                 (rel_prod (eq_onp (%r. r : responses_\<I> ?\<I> q))
                   (%conv conv'.
                       ?X conv conv' | ?\<I>,?\<I>' \<turnstile>\<^sub>C
                       conv \<sim> conv'))
                 ?\<I>' (run_converter conv q) (run_converter conv' q) |]
      ==> ?\<I>,?\<I>' \<turnstile>\<^sub>C ?conv \<sim> ?conv'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_var 4, template_var 3), template_var 2)
            ),
        template_predicate (template_app (template_hole 11, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 1, template_var 1),
                 template_var 0),
               template_var 3),
             template_var 2)
           ))),
    ("Converter_Rewrite.eq_\<I>_gpv_inline",
     "[| !!s1 s2 q.
            [| ?S s1 s2; q : outs_\<I> ?\<I> |]
            ==> eq_\<I>_gpv
                 (rel_prod (eq_onp (%r. r : responses_\<I> ?\<I> q)) ?S)
                 ?\<I>' (?callee1.0 s1 q) (?callee2.0 s2 q);
         ?S ?s1.0 ?s2.0; eq_\<I>_gpv ?A ?\<I> ?gpv1.0 ?gpv2.0 |]
      ==> eq_\<I>_gpv (rel_prod ?A ?S) ?\<I>'
           (inline ?callee1.0 ?gpv1.0 ?s1.0)
           (inline ?callee2.0 ?gpv2.0 ?s2.0)",
     template_implication
      ([template_predicate (template_app (template_hole 15, t_empty)),
        template_predicate
         (
            template_app
             (template_app (template_var 9, template_var 4), template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 4, template_var 2),
                  template_var 8),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 3,
                   template_app
                    (template_app (template_hole 2, template_var 2),
                     template_var 9)),
                 template_var 7),
               template_app
                (template_app
                  (template_app (template_hole 1, template_var 6),
                   template_var 1),
                 template_var 4)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 5),
                 template_var 0),
               template_var 3))
           ))),
    ("Converter_Rewrite.eq_\<I>_gpv_coinduct_bind",
     "[| ?X ?gpv ?gpv';
         !!gpv gpv'.
            ?X gpv gpv' ==>
            rel_spmf
             (eq_\<I>_generat ?A ?\<I>
               (%gpv gpv'.
                   ?X gpv gpv' |
                   eq_\<I>_gpv ?A ?\<I> gpv gpv' |
                   (EX gpv'' gpv''' B f g.
                       gpv = gpv'' >>= f &
                       gpv' = gpv''' >>= g &
                       eq_\<I>_gpv B ?\<I> gpv'' gpv''' &
                       rel_fun B ?X f g)))
             (the_gpv gpv) (the_gpv gpv') |]
      ==> eq_\<I>_gpv ?A ?\<I> ?gpv ?gpv'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_var 4, template_var 3), template_var 2)
            ),
        template_predicate (template_app (template_hole 20, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 14, template_var 1),
                 template_var 0),
               template_var 3),
             template_var 2)
           ))),
    ("Converter_Rewrite.eq_\<I>_gpv_inline1",
     "[| !!s1 s2 q.
            [| ?S s1 s2; q : outs_\<I> ?\<I> |]
            ==> eq_\<I>_gpv
                 (rel_prod (eq_onp (%r. r : responses_\<I> ?\<I> q)) ?S)
                 ?\<I>' (?callee1.0 s1 q) (?callee2.0 s2 q);
         ?S ?s1.0 ?s2.0; eq_\<I>_gpv ?A ?\<I> ?gpv1.0 ?gpv2.0 |]
      ==> rel_spmf
           (rel_sum (rel_prod ?A ?S)
             (%(q, rpv1, rpv2) (q', rpv1', rpv2').
                 q = q' &
                 q' : outs_\<I> ?\<I>' &
                 (EX q'':outs_\<I> ?\<I>.
                     (ALL r:responses_\<I> ?\<I>' q'.
                         eq_\<I>_gpv
                          (rel_prod
                            (eq_onp (%r'. r' : responses_\<I> ?\<I> q''))
                            ?S)
                          ?\<I>' (rpv1 r) (rpv1' r)) &
                     (ALL r':responses_\<I> ?\<I> q''.
                         eq_\<I>_gpv ?A ?\<I> (rpv2 r') (rpv2' r')))))
           (inline1 ?callee1.0 ?gpv1.0 ?s1.0)
           (inline1 ?callee2.0 ?gpv2.0 ?s2.0)",
     template_implication
      ([template_predicate (template_app (template_hole 29, t_empty)),
        template_predicate
         (
            template_app
             (template_app (template_var 9, template_var 4), template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 18, template_var 2),
                  template_var 8),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 17,
                 template_app
                  (template_hole 16,
                   template_app
                    (template_app
                      (template_hole 15,
                       template_app
                        (template_app (template_hole 14, template_var 2),
                         template_var 9)),
                     template_app (template_hole 13, t_empty)))),
               template_app
                (template_app
                  (template_app (template_hole 1, template_var 6),
                   template_var 1),
                 template_var 4)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 5),
                 template_var 0),
               template_var 3))
           )))]:
   (string * thm * template) list
### theory "Draft.Converter_RewriteTemplates"
### 2.004s elapsed time, 2.821s cpu time, 0.858s GC time
val it = (): unit
