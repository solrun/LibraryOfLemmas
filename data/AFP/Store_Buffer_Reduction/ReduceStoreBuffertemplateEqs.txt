   [("ReduceStoreBuffer.restrict_map_UNIV", "?S |` UNIV = ?S",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), template_hole 0),
       template_var 0)),
    ("ReduceStoreBuffer.restrict_map_id", "?m |` dom ?m = ?m",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0),
         template_app (template_hole 0, template_var 0)),
       template_var 0)),
    ("ReduceStoreBuffer.augment_empty",
     "?S \<oplus>\<^bsub>?x\<^esub> {} = ?S",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 1, template_var 1), template_var 0),
         template_hole 0),
       template_var 1)),
    ("ReduceStoreBuffer.restrict_shared_empty_set",
     "?S \<ominus>\<^bsub>{}\<^esub> {} = ?S",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 1, template_var 0), template_hole 0),
         template_hole 0),
       template_var 0)),
    ("ReduceStoreBuffer.rev_load_tmps",
     "load_tmps (rev ?xs) = load_tmps ?xs",
     template_equation
      (template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)),
       template_app (template_hole 1, template_var 0))),
    ("ReduceStoreBuffer.rev_read_tmps",
     "read_tmps (rev ?xs) = read_tmps ?xs",
     template_equation
      (template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)),
       template_app (template_hole 1, template_var 0))),
    ("ReduceStoreBuffer.restrict_shared_UNIV",
     "?m \<ominus>\<^bsub>?A\<^esub> UNIV = Map.empty",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 2, template_var 1), template_var 0),
         template_hole 1),
       t_empty)),
    ("ReduceStoreBuffer.address_of_simps",
     "address_of (Prog\<^sub>s\<^sub>b ?p ?p' ?is) = {}",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_Ghost\<^sub>s\<^sub>b_simps",
     "is_Ghost\<^sub>s\<^sub>b (Prog\<^sub>s\<^sub>b ?p ?p' ?is) = False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_Prog\<^sub>s\<^sub>b_simps",
     "is_Prog\<^sub>s\<^sub>b (Prog\<^sub>s\<^sub>b ?p ?p' ?is) = True",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_Read\<^sub>s\<^sub>b_simps",
     "is_Read\<^sub>s\<^sub>b (Prog\<^sub>s\<^sub>b ?p ?p' ?is) = False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_Write\<^sub>s\<^sub>b_simps",
     "is_Write\<^sub>s\<^sub>b (Prog\<^sub>s\<^sub>b ?p ?p' ?is) = False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_non_volatile_Read\<^sub>s\<^sub>b_simps",
     "is_non_volatile_Read\<^sub>s\<^sub>b
       (Prog\<^sub>s\<^sub>b ?p ?p' ?is) =
      False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_non_volatile_Write\<^sub>s\<^sub>b_simps",
     "is_non_volatile_Write\<^sub>s\<^sub>b
       (Prog\<^sub>s\<^sub>b ?p ?p' ?is) =
      False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_volatile_simps",
     "is_volatile (Prog\<^sub>s\<^sub>b ?p ?p' ?is) = False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_volatile_Read\<^sub>s\<^sub>b_simps",
     "is_volatile_Read\<^sub>s\<^sub>b (Prog\<^sub>s\<^sub>b ?p ?p' ?is) =
      False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_volatile_Write\<^sub>s\<^sub>b_simps",
     "is_volatile_Write\<^sub>s\<^sub>b (Prog\<^sub>s\<^sub>b ?p ?p' ?is) =
      False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.prog_instrs_filter_is_Prog\<^sub>s\<^sub>b",
     "prog_instrs (filter is_Prog\<^sub>s\<^sub>b ?xs) = prog_instrs ?xs",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_hole 0),
           template_var 0)),
       template_app (template_hole 2, template_var 0))),
    ("ReduceStoreBuffer.restrict_shared_empty",
     "Map.empty \<ominus>\<^bsub>?A\<^esub> ?L = Map.empty",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 1, t_empty), template_var 1),
         template_var 0),
       t_empty)),
    ("ReduceStoreBuffer.inter_neg", "?X Int - ?L = ?X - ?L",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 1),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_app (template_hole 0, template_var 1), template_var 0))),
    ("ReduceStoreBuffer.address_of_simps",
     "address_of (Ghost\<^sub>s\<^sub>b ?A ?L ?R ?W) = {}",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_volatile_split",
     "is_volatile ?r =
      (is_volatile_Read\<^sub>s\<^sub>b ?r |
       is_volatile_Write\<^sub>s\<^sub>b ?r)",
     template_equation
      (template_app (template_hole 3, template_var 0),
       template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 0)),
         template_app (template_hole 0, template_var 0)))),
    ("ReduceStoreBuffer.is_Ghost\<^sub>s\<^sub>b_simps",
     "is_Ghost\<^sub>s\<^sub>b (Read\<^sub>s\<^sub>b ?volatile ?a ?t ?v) =
      False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_Ghost\<^sub>s\<^sub>b_simps",
     "is_Ghost\<^sub>s\<^sub>b (Ghost\<^sub>s\<^sub>b ?A ?L ?R ?W) = True",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_Prog\<^sub>s\<^sub>b_simps",
     "is_Prog\<^sub>s\<^sub>b (Read\<^sub>s\<^sub>b ?volatile ?a ?t ?v) =
      False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_Prog\<^sub>s\<^sub>b_simps",
     "is_Prog\<^sub>s\<^sub>b (Ghost\<^sub>s\<^sub>b ?A ?L ?R ?W) = False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_Read\<^sub>s\<^sub>b_simps",
     "is_Read\<^sub>s\<^sub>b (Read\<^sub>s\<^sub>b ?volatile ?a ?t ?v) =
      True",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_Read\<^sub>s\<^sub>b_simps",
     "is_Read\<^sub>s\<^sub>b (Ghost\<^sub>s\<^sub>b ?A ?L ?R ?W) = False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_Write\<^sub>s\<^sub>b_simps",
     "is_Write\<^sub>s\<^sub>b (Read\<^sub>s\<^sub>b ?volatile ?a ?t ?v) =
      False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_Write\<^sub>s\<^sub>b_simps",
     "is_Write\<^sub>s\<^sub>b (Ghost\<^sub>s\<^sub>b ?A ?L ?R ?W) = False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_non_volatile_Read\<^sub>s\<^sub>b_simps",
     "is_non_volatile_Read\<^sub>s\<^sub>b
       (Ghost\<^sub>s\<^sub>b ?A ?L ?R ?W) =
      False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_non_volatile_Write\<^sub>s\<^sub>b_simps",
     "is_non_volatile_Write\<^sub>s\<^sub>b
       (Read\<^sub>s\<^sub>b ?volatile ?a ?t ?v) =
      False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_non_volatile_Write\<^sub>s\<^sub>b_simps",
     "is_non_volatile_Write\<^sub>s\<^sub>b
       (Ghost\<^sub>s\<^sub>b ?A ?L ?R ?W) =
      False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_volatile_simps",
     "is_volatile (Read\<^sub>s\<^sub>b ?volatile ?a ?t ?v) = ?volatile",
     template_equation
      (template_app
        (template_hole 1,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 0, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_var 3)),
    ("ReduceStoreBuffer.is_volatile_simps",
     "is_volatile (Ghost\<^sub>s\<^sub>b ?A ?L ?R ?W) = False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_volatile_Read\<^sub>s\<^sub>b_simps",
     "is_volatile_Read\<^sub>s\<^sub>b
       (Read\<^sub>s\<^sub>b ?volatile ?a ?t ?v) =
      ?volatile",
     template_equation
      (template_app
        (template_hole 1,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 0, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_var 3)),
    ("ReduceStoreBuffer.is_volatile_Read\<^sub>s\<^sub>b_simps",
     "is_volatile_Read\<^sub>s\<^sub>b (Ghost\<^sub>s\<^sub>b ?A ?L ?R ?W) =
      False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_volatile_Write\<^sub>s\<^sub>b_simps",
     "is_volatile_Write\<^sub>s\<^sub>b
       (Read\<^sub>s\<^sub>b ?volatile ?a ?t ?v) =
      False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_volatile_Write\<^sub>s\<^sub>b_simps",
     "is_volatile_Write\<^sub>s\<^sub>b
       (Ghost\<^sub>s\<^sub>b ?A ?L ?R ?W) =
      False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.hd_prog_idem",
     "hd_prog (hd_prog ?p ?xs) ?xs = hd_prog ?p ?xs",
     template_equation
      (template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0)),
         template_var 0),
       template_app
        (template_app (template_hole 0, template_var 1), template_var 0))),
    ("ReduceStoreBuffer.last_prog_hd_prog",
     "last_prog (hd_prog ?p ?xs) ?xs = last_prog ?p ?xs",
     template_equation
      (template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0)),
         template_var 0),
       template_app
        (template_app (template_hole 1, template_var 1), template_var 0))),
    ("ReduceStoreBuffer.last_prog_idem",
     "last_prog (last_prog ?p ?sb) ?sb = last_prog ?p ?sb",
     template_equation
      (template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0)),
         template_var 0),
       template_app
        (template_app (template_hole 0, template_var 1), template_var 0))),
    ("ReduceStoreBuffer.acquired_no_pending_write",
     "acquired False ?xs ?A = acquired False ?xs ?B",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 1, template_hole 0), template_var 2),
         template_var 1),
       template_app
        (template_app
          (template_app (template_hole 1, template_hole 0), template_var 2),
         template_var 0))),
    ("ReduceStoreBuffer.acquired_reads_no_pending_write",
     "acquired_reads False ?xs ?A = acquired_reads False ?xs ?B",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 1, template_hole 0), template_var 2),
         template_var 1),
       template_app
        (template_app
          (template_app (template_hole 1, template_hole 0), template_var 2),
         template_var 0))),
    ("ReduceStoreBuffer.outstanding_refs_takeWhile_opposite",
     "outstanding_refs ?P (takeWhile (Not o ?P) ?xs) = {}",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 1),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_hole 1),
               template_var 1)),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.takeWhile_not_vol_write_outstanding_refs",
     "outstanding_refs is_volatile_Write\<^sub>s\<^sub>b
       (takeWhile (Not o is_volatile_Write\<^sub>s\<^sub>b) ?sb) =
      {}",
     template_equation
      (template_app
        (template_app (template_hole 5, template_hole 4),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_hole 1),
               template_hole 4)),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_non_volatile_Read\<^sub>s\<^sub>b_simps",
     "is_non_volatile_Read\<^sub>s\<^sub>b
       (Read\<^sub>s\<^sub>b ?volatile ?a ?t ?v) =
      (~ ?volatile)",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_app (template_hole 0, template_var 3))),
    ("ReduceStoreBuffer.all_acquired_append",
     "all_acquired (?xs @ ?ys) = all_acquired ?xs Un all_acquired ?ys",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("ReduceStoreBuffer.all_shared_append",
     "all_shared (?xs @ ?ys) = all_shared ?xs Un all_shared ?ys",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("ReduceStoreBuffer.all_unshared_append",
     "all_unshared (?xs @ ?ys) = all_unshared ?xs Un all_unshared ?ys",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("ReduceStoreBuffer.load_tmps_append",
     "load_tmps (?xs @ ?ys) = load_tmps ?xs Un load_tmps ?ys",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("ReduceStoreBuffer.read_tmps_append",
     "read_tmps (?xs @ ?ys) = read_tmps ?xs Un read_tmps ?ys",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("ReduceStoreBuffer.dom_augment",
     "dom (?m \<oplus>\<^bsub>?W\<^esub> ?S) = dom ?m Un ?S",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1),
           template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 2)),
         template_var 0))),
    ("ReduceStoreBuffer.dom_restrict_shared",
     "dom (?m \<ominus>\<^bsub>?A\<^esub> ?L) = dom ?m - ?L",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1),
           template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 2)),
         template_var 0))),
    ("ReduceStoreBuffer.address_of_simps",
     "address_of (Read\<^sub>s\<^sub>b ?volatile ?a ?t ?v) = {?a}",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 2, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_app
        (template_app (template_hole 1, template_var 2), template_hole 0))),
    ("ReduceStoreBuffer.acquired_False_takeWhile_non_volatile_Write\<^sub>s\<^sub>b",
     "acquired False
       (takeWhile (Not o is_volatile_Write\<^sub>s\<^sub>b) ?sb) ?A =
      {}",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 6, template_hole 5),
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_hole 2),
                 template_hole 1)),
             template_var 1)),
         template_var 0),
       template_hole 0)),
    ("ReduceStoreBuffer.store_sops_append",
     "store_sops (?xs @ ?ys) = store_sops ?xs Un store_sops ?ys",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("ReduceStoreBuffer.write_sops_append",
     "write_sops (?xs @ ?ys) = write_sops ?xs Un write_sops ?ys",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("ReduceStoreBuffer.instrs_append",
     "instrs (?xs @ ?ys) = instrs ?xs @ instrs ?ys",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("ReduceStoreBuffer.prog_instrs_append",
     "prog_instrs (?xs @ ?ys) = prog_instrs ?xs @ prog_instrs ?ys",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("ReduceStoreBuffer.share_append",
     "share (?xs @ ?ys) ?S = share ?ys (share ?xs ?S)",
     template_equation
      (template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 1, template_var 1),
         template_app
          (template_app (template_hole 1, template_var 2),
           template_var 0)))),
    ("ReduceStoreBuffer.outstanding_is_Read\<^sub>s\<^sub>b_refs_conv",
     "outstanding_refs is_Read\<^sub>s\<^sub>b ?sb =
      outstanding_refs is_non_volatile_Read\<^sub>s\<^sub>b ?sb Un
      outstanding_refs is_volatile_Read\<^sub>s\<^sub>b ?sb",
     template_equation
      (template_app
        (template_app (template_hole 4, template_hole 3), template_var 0),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 4, template_hole 1),
             template_var 0)),
         template_app
          (template_app (template_hole 4, template_hole 0),
           template_var 0)))),
    ("ReduceStoreBuffer.outstanding_is_Write\<^sub>s\<^sub>b_refs_conv",
     "outstanding_refs is_Write\<^sub>s\<^sub>b ?sb =
      outstanding_refs is_non_volatile_Write\<^sub>s\<^sub>b ?sb Un
      outstanding_refs is_volatile_Write\<^sub>s\<^sub>b ?sb",
     template_equation
      (template_app
        (template_app (template_hole 4, template_hole 3), template_var 0),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 4, template_hole 1),
             template_var 0)),
         template_app
          (template_app (template_hole 4, template_hole 0),
           template_var 0)))),
    ("ReduceStoreBuffer.outstanding_refs_is_Write\<^sub>s\<^sub>b_union",
     "outstanding_refs is_Write\<^sub>s\<^sub>b ?xs =
      outstanding_refs is_volatile_Write\<^sub>s\<^sub>b ?xs Un
      outstanding_refs is_non_volatile_Write\<^sub>s\<^sub>b ?xs",
     template_equation
      (template_app
        (template_app (template_hole 4, template_hole 3), template_var 0),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 4, template_hole 1),
             template_var 0)),
         template_app
          (template_app (template_hole 4, template_hole 0),
           template_var 0)))),
    ("ReduceStoreBuffer.outstanding_volatile_refs_conv",
     "outstanding_refs is_volatile ?sb =
      outstanding_refs is_volatile_Write\<^sub>s\<^sub>b ?sb Un
      outstanding_refs is_volatile_Read\<^sub>s\<^sub>b ?sb",
     template_equation
      (template_app
        (template_app (template_hole 4, template_hole 3), template_var 0),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 4, template_hole 1),
             template_var 0)),
         template_app
          (template_app (template_hole 4, template_hole 0),
           template_var 0)))),
    ("ReduceStoreBuffer.dom_augment_rels_shared_eq",
     "dom (augment_rels ?S ?R ?\<R>) = dom (augment_rels ?S' ?R ?\<R>)",
     template_equation
      (template_app
        (template_hole 1,
         template_app
          (template_app
            (template_app (template_hole 0, template_var 3),
             template_var 2),
           template_var 1)),
       template_app
        (template_hole 1,
         template_app
          (template_app
            (template_app (template_hole 0, template_var 0),
             template_var 2),
           template_var 1)))),
    ("ReduceStoreBuffer.dom_release_shared_eq",
     "dom (release ?sb ?\<S>' ?\<R>) = dom (release ?sb ?\<S> ?\<R>)",
     template_equation
      (template_app
        (template_hole 1,
         template_app
          (template_app
            (template_app (template_hole 0, template_var 3),
             template_var 2),
           template_var 1)),
       template_app
        (template_hole 1,
         template_app
          (template_app
            (template_app (template_hole 0, template_var 3),
             template_var 0),
           template_var 1)))),
    ("ReduceStoreBuffer.last_prog_append_Prog\<^sub>s\<^sub>b",
     "last_prog ?x (?sb @ [Prog\<^sub>s\<^sub>b ?p ?p' ?mis]) = ?p'",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 4),
         template_app
          (template_app (template_hole 3, template_var 3),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_app (template_hole 1, template_var 2),
                   template_var 1),
                 template_var 0)),
             template_hole 0))),
       template_var 1)),
    ("ReduceStoreBuffer.is_Ghost\<^sub>s\<^sub>b_simps",
     "is_Ghost\<^sub>s\<^sub>b
       (Write\<^sub>s\<^sub>b ?volatile ?a ?sop ?v ?A ?L ?R ?W) =
      False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 1, template_var 7),
                       template_var 6),
                     template_var 5),
                   template_var 4),
                 template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_Prog\<^sub>s\<^sub>b_simps",
     "is_Prog\<^sub>s\<^sub>b
       (Write\<^sub>s\<^sub>b ?volatile ?a ?sop ?v ?A ?L ?R ?W) =
      False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 1, template_var 7),
                       template_var 6),
                     template_var 5),
                   template_var 4),
                 template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_Read\<^sub>s\<^sub>b_simps",
     "is_Read\<^sub>s\<^sub>b
       (Write\<^sub>s\<^sub>b ?volatile ?a ?sop ?v ?A ?L ?R ?W) =
      False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 1, template_var 7),
                       template_var 6),
                     template_var 5),
                   template_var 4),
                 template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_Write\<^sub>s\<^sub>b_simps",
     "is_Write\<^sub>s\<^sub>b
       (Write\<^sub>s\<^sub>b ?volatile ?a ?sop ?v ?A ?L ?R ?W) =
      True",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 1, template_var 7),
                       template_var 6),
                     template_var 5),
                   template_var 4),
                 template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_non_volatile_Read\<^sub>s\<^sub>b_simps",
     "is_non_volatile_Read\<^sub>s\<^sub>b
       (Write\<^sub>s\<^sub>b ?volatile ?a ?sop ?v ?A ?L ?R ?W) =
      False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 1, template_var 7),
                       template_var 6),
                     template_var 5),
                   template_var 4),
                 template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_volatile_simps",
     "is_volatile (Write\<^sub>s\<^sub>b ?volatile ?a ?sop ?v ?A ?L ?R ?W) =
      ?volatile",
     template_equation
      (template_app
        (template_hole 1,
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 0, template_var 7),
                       template_var 6),
                     template_var 5),
                   template_var 4),
                 template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_var 7)),
    ("ReduceStoreBuffer.is_volatile_Read\<^sub>s\<^sub>b_simps",
     "is_volatile_Read\<^sub>s\<^sub>b
       (Write\<^sub>s\<^sub>b ?volatile ?a ?sop ?v ?A ?L ?R ?W) =
      False",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 1, template_var 7),
                       template_var 6),
                     template_var 5),
                   template_var 4),
                 template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_hole 0)),
    ("ReduceStoreBuffer.is_volatile_Write\<^sub>s\<^sub>b_simps",
     "is_volatile_Write\<^sub>s\<^sub>b
       (Write\<^sub>s\<^sub>b ?volatile ?a ?sop ?v ?A ?L ?R ?W) =
      ?volatile",
     template_equation
      (template_app
        (template_hole 1,
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 0, template_var 7),
                       template_var 6),
                     template_var 5),
                   template_var 4),
                 template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_var 7)),
    ("ReduceStoreBuffer.instrs_takeWhile_dropWhile_conv",
     "instrs ?xs = instrs (takeWhile ?P ?xs) @ instrs (dropWhile ?P ?xs)",
     template_equation
      (template_app (template_hole 3, template_var 1),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 1))),
         template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 0, template_var 0),
             template_var 1))))),
    ("ReduceStoreBuffer.last_prog_hd_prog_append",
     "last_prog (hd_prog ?p\<^sub>s\<^sub>b (?sb @ ?sb')) ?sb =
      last_prog (hd_prog ?p\<^sub>s\<^sub>b ?sb') ?sb",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))),
         template_var 1),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 0)),
         template_var 1))),
    ("ReduceStoreBuffer.flush_buffered_val_conv",
     "flush ?sb ?m ?a =
      (case buffered_val ?sb ?a of None => ?m ?a | Some v => v)",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 2, template_var 2), template_var 1),
         template_var 0),
       template_app
        (template_app
          (template_app
            (template_hole 1,
             template_app (template_var 1, template_var 0)),
           t_empty),
         template_app
          (template_app (template_hole 0, template_var 2),
           template_var 0)))),
    ("ReduceStoreBuffer.outstanding_refs_append",
     "outstanding_refs ?vol (?xs @ ?ys) =
      outstanding_refs ?vol ?xs Un outstanding_refs ?vol ?ys",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 2),
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1)),
         template_app
          (template_app (template_hole 2, template_var 2),
           template_var 0)))),
    ("ReduceStoreBuffer.outstanding_non_volatile_refs_conv",
     "outstanding_refs (Not o is_volatile) ?sb =
      outstanding_refs is_non_volatile_Write\<^sub>s\<^sub>b ?sb Un
      outstanding_refs is_non_volatile_Read\<^sub>s\<^sub>b ?sb",
     template_equation
      (template_app
        (template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, template_hole 4),
             template_hole 3)),
         template_var 0),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 6, template_hole 1),
             template_var 0)),
         template_app
          (template_app (template_hole 6, template_hole 0),
           template_var 0)))),
    ("ReduceStoreBuffer.outstanding_not_volatile_Read\<^sub>s\<^sub>b_refs_conv",
     "outstanding_refs (Not o is_volatile_Read\<^sub>s\<^sub>b) ?sb =
      outstanding_refs is_Write\<^sub>s\<^sub>b ?sb Un
      outstanding_refs is_non_volatile_Read\<^sub>s\<^sub>b ?sb",
     template_equation
      (template_app
        (template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, template_hole 4),
             template_hole 3)),
         template_var 0),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 6, template_hole 1),
             template_var 0)),
         template_app
          (template_app (template_hole 6, template_hole 0),
           template_var 0)))),
    ("ReduceStoreBuffer.is_non_volatile_Write\<^sub>s\<^sub>b_simps",
     "is_non_volatile_Write\<^sub>s\<^sub>b
       (Write\<^sub>s\<^sub>b ?volatile ?a ?sop ?v ?A ?L ?R ?W) =
      (~ ?volatile)",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 1, template_var 7),
                       template_var 6),
                     template_var 5),
                   template_var 4),
                 template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_app (template_hole 0, template_var 7))),
    ("ReduceStoreBuffer.prog_instrs_append_Ghost\<^sub>s\<^sub>b",
     "prog_instrs (?sb @ [Ghost\<^sub>s\<^sub>b ?A ?L ?R ?W]) =
      prog_instrs ?sb",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_var 4),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_app
                    (template_app (template_hole 1, template_var 3),
                     template_var 2),
                   template_var 1),
                 template_var 0)),
             template_hole 0))),
       template_app (template_hole 4, template_var 4))),
    ("ReduceStoreBuffer.prog_instrs_append_Read\<^sub>s\<^sub>b",
     "prog_instrs (?sb @ [Read\<^sub>s\<^sub>b ?volatile ?a ?t ?v]) =
      prog_instrs ?sb",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_var 4),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_app
                    (template_app (template_hole 1, template_var 3),
                     template_var 2),
                   template_var 1),
                 template_var 0)),
             template_hole 0))),
       template_app (template_hole 4, template_var 4))),
    ("ReduceStoreBuffer.hd_prog_append_Prog\<^sub>s\<^sub>b",
     "hd_prog ?x (?sb @ [Prog\<^sub>s\<^sub>b ?p ?p' ?mis]) =
      hd_prog ?p ?sb",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 4),
         template_app
          (template_app (template_hole 3, template_var 3),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_app (template_hole 1, template_var 2),
                   template_var 1),
                 template_var 0)),
             template_hole 0))),
       template_app
        (template_app (template_hole 4, template_var 2), template_var 3))),
    ("ReduceStoreBuffer.address_of_simps",
     "address_of (Write\<^sub>s\<^sub>b ?volatile ?a ?sop ?v ?A ?L ?R ?W) =
      {?a}",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 2, template_var 7),
                       template_var 6),
                     template_var 5),
                   template_var 4),
                 template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_app
        (template_app (template_hole 1, template_var 6), template_hole 0))),
    ("ReduceStoreBuffer.hd_prog_append_Ghost\<^sub>s\<^sub>b",
     "hd_prog ?p (?sb @ [Ghost\<^sub>s\<^sub>b ?A ?R ?L ?W]) =
      hd_prog ?p ?sb",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 5),
         template_app
          (template_app (template_hole 3, template_var 4),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_app
                    (template_app (template_hole 1, template_var 3),
                     template_var 2),
                   template_var 1),
                 template_var 0)),
             template_hole 0))),
       template_app
        (template_app (template_hole 4, template_var 5), template_var 4))),
    ("ReduceStoreBuffer.hd_prog_append_Read\<^sub>s\<^sub>b",
     "hd_prog ?p (?sb @ [Read\<^sub>s\<^sub>b ?volatile ?a ?t ?v]) =
      hd_prog ?p ?sb",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 5),
         template_app
          (template_app (template_hole 3, template_var 4),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_app
                    (template_app (template_hole 1, template_var 3),
                     template_var 2),
                   template_var 1),
                 template_var 0)),
             template_hole 0))),
       template_app
        (template_app (template_hole 4, template_var 5), template_var 4))),
    ("ReduceStoreBuffer.last_prog_append_Ghost\<^sub>s\<^sub>b",
     "last_prog ?p (?sb @ [Ghost\<^sub>s\<^sub>b ?A ?L ?R ?W]) =
      last_prog ?p ?sb",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 5),
         template_app
          (template_app (template_hole 3, template_var 4),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_app
                    (template_app (template_hole 1, template_var 3),
                     template_var 2),
                   template_var 1),
                 template_var 0)),
             template_hole 0))),
       template_app
        (template_app (template_hole 4, template_var 5), template_var 4))),
    ("ReduceStoreBuffer.last_prog_append_Read\<^sub>s\<^sub>b",
     "last_prog ?p (?sb @ [Read\<^sub>s\<^sub>b ?volatile ?a ?t ?v]) =
      last_prog ?p ?sb",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 5),
         template_app
          (template_app (template_hole 3, template_var 4),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_app
                    (template_app (template_hole 1, template_var 3),
                     template_var 2),
                   template_var 1),
                 template_var 0)),
             template_hole 0))),
       template_app
        (template_app (template_hole 4, template_var 5), template_var 4))),
    ("ReduceStoreBuffer.outstanding_refs_is_non_volatile_Write\<^sub>s\<^sub>b_takeWhile_conv",
     "outstanding_refs is_non_volatile_Write\<^sub>s\<^sub>b
       (takeWhile (Not o is_volatile_Write\<^sub>s\<^sub>b) ?sb) =
      outstanding_refs is_Write\<^sub>s\<^sub>b
       (takeWhile (Not o is_volatile_Write\<^sub>s\<^sub>b) ?sb)",
     template_equation
      (template_app
        (template_app (template_hole 6, template_hole 5),
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_hole 1)),
           template_var 0)),
       template_app
        (template_app (template_hole 6, template_hole 0),
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_hole 1)),
           template_var 0)))),
    ("ReduceStoreBuffer.no_write_to_read_only_memory_append",
     "no_write_to_read_only_memory ?\<S> (?xs @ ?ys) =
      (no_write_to_read_only_memory ?\<S> ?xs &
       no_write_to_read_only_memory (share ?xs ?\<S>) ?ys)",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 2),
         template_app
          (template_app (template_hole 2, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 3, template_var 2),
             template_var 1)),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 2)),
           template_var 0)))),
    ("ReduceStoreBuffer.non_volatile_writes_unshared_append",
     "non_volatile_writes_unshared ?\<S> (?xs @ ?ys) =
      (non_volatile_writes_unshared ?\<S> ?xs &
       non_volatile_writes_unshared (share ?xs ?\<S>) ?ys)",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 2),
         template_app
          (template_app (template_hole 2, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 3, template_var 2),
             template_var 1)),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 2)),
           template_var 0)))),
    ("ReduceStoreBuffer.owned_simp",
     "owned (?p, ?instrs, ?\<theta>, ?sb, ?\<D>, ?\<O>, ?\<R>) = ?\<O>",
     template_equation
      (template_app
        (template_hole 6,
         template_app
          (template_app (template_hole 5, template_var 6),
           template_app
            (template_app (template_hole 4, template_var 5),
             template_app
              (template_app (template_hole 3, template_var 4),
               template_app
                (template_app (template_hole 2, template_var 3),
                 template_app
                  (template_app (template_hole 1, template_var 2),
                   template_app
                    (template_app (template_hole 0, template_var 1),
                     template_var 0))))))),
       template_var 1)),
    ("ReduceStoreBuffer.released_simp",
     "released (?p, ?instrs, ?\<theta>, ?sb, ?\<D>, ?\<O>, ?\<R>) = ?\<R>",
     template_equation
      (template_app
        (template_hole 6,
         template_app
          (template_app (template_hole 5, template_var 6),
           template_app
            (template_app (template_hole 4, template_var 5),
             template_app
              (template_app (template_hole 3, template_var 4),
               template_app
                (template_app (template_hole 2, template_var 3),
                 template_app
                  (template_app (template_hole 1, template_var 2),
                   template_app
                    (template_app (template_hole 0, template_var 1),
                     template_var 0))))))),
       template_var 0)),
    ("ReduceStoreBuffer.restrict_shared_fuse",
     "?S \<ominus>\<^bsub>?A\<^esub> ?L \<ominus>\<^bsub>?B\<^esub> ?M =
      ?S \<ominus>\<^bsub>(?A Un ?B)\<^esub> ?L Un ?M",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app
                (template_app (template_hole 1, template_var 4),
                 template_var 3),
               template_var 2)),
           template_var 1),
         template_var 0),
       template_app
        (template_app
          (template_app (template_hole 1, template_var 4),
           template_app
            (template_app (template_hole 0, template_var 3),
             template_var 1)),
         template_app
          (template_app (template_hole 0, template_var 2),
           template_var 0)))),
    ("ReduceStoreBuffer.outstanding_refs_conv",
     "outstanding_refs ?P ?sb = \<Union> (address_of ` {r: set ?sb. ?P r})",
     template_equation
      (template_app
        (template_app (template_hole 7, template_var 1), template_var 0),
       template_app
        (template_hole 6,
         template_app
          (template_app (template_hole 5, template_hole 4),
           template_app (template_hole 3, t_empty))))),
    ("ReduceStoreBuffer.read_only_reads_append",
     "read_only_reads ?\<O> (?xs @ ?ys) =
      read_only_reads ?\<O> ?xs Un
      read_only_reads (acquired True ?xs ?\<O>) ?ys",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 2),
         template_app
          (template_app (template_hole 3, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 4, template_var 2),
             template_var 1)),
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app
                (template_app (template_hole 1, template_hole 0),
                 template_var 1),
               template_var 2)),
           template_var 0)))),
    ("ReduceStoreBuffer.weak_sharing_consistent_append",
     "weak_sharing_consistent ?\<O> (?xs @ ?ys) =
      (weak_sharing_consistent ?\<O> ?xs &
       weak_sharing_consistent (acquired True ?xs ?\<O>) ?ys)",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 2),
         template_app
          (template_app (template_hole 3, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 4, template_var 2),
             template_var 1)),
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app
                (template_app (template_hole 1, template_hole 0),
                 template_var 1),
               template_var 2)),
           template_var 0)))),
    ("ReduceStoreBuffer.unforwarded_non_volatile_reads_append",
     "unforwarded_non_volatile_reads (?xs @ ?ys) ?W =
      unforwarded_non_volatile_reads ?xs ?W Un
      unforwarded_non_volatile_reads ?ys
       (?W Un outstanding_refs is_Write\<^sub>s\<^sub>b ?xs)",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 4, template_var 2),
             template_var 0)),
         template_app
          (template_app (template_hole 4, template_var 1),
           template_app
            (template_app (template_hole 2, template_var 0),
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 2)))))),
    ("ReduceStoreBuffer.prog_instrs_append_Write\<^sub>s\<^sub>b",
     "prog_instrs
       (?sb @ [Write\<^sub>s\<^sub>b ?volatile ?a ?sop ?v ?A ?L ?R ?W]) =
      prog_instrs ?sb",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_var 8),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app (template_hole 1, template_var 7),
                             template_var 6),
                           template_var 5),
                         template_var 4),
                       template_var 3),
                     template_var 2),
                   template_var 1),
                 template_var 0)),
             template_hole 0))),
       template_app (template_hole 4, template_var 8))),
    ("ReduceStoreBuffer.distinct_load_tmps_append",
     "distinct_load_tmps (?xs @ ?ys) =
      (distinct_load_tmps ?xs &
       distinct_load_tmps ?ys & load_tmps ?xs Int load_tmps ?ys = {})",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 6,
              template_app
               (template_app (template_hole 5, template_var 1),
                template_var 0))
            )],
       template_dunno)),
    ("ReduceStoreBuffer.distinct_read_tmps_append",
     "distinct_read_tmps (?xs @ ?ys) =
      (distinct_read_tmps ?xs &
       distinct_read_tmps ?ys & read_tmps ?xs Int read_tmps ?ys = {})",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 6,
              template_app
               (template_app (template_hole 5, template_var 1),
                template_var 0))
            )],
       template_dunno)),
    ("ReduceStoreBuffer.\<O>_sb_simp",
     "\<O>_sb (?p, ?instrs, ?\<theta>, ?sb, ?\<D>, ?\<O>, ?\<R>) =
      (?\<O>, ?sb)",
     template_equation
      (template_app
        (template_hole 7,
         template_app
          (template_app (template_hole 6, template_var 6),
           template_app
            (template_app (template_hole 5, template_var 5),
             template_app
              (template_app (template_hole 4, template_var 4),
               template_app
                (template_app (template_hole 3, template_var 3),
                 template_app
                  (template_app (template_hole 2, template_var 2),
                   template_app
                    (template_app (template_hole 1, template_var 1),
                     template_var 0))))))),
       template_app
        (template_app (template_hole 0, template_var 1), template_var 3))),
    ("ReduceStoreBuffer.hd_prog_append_Write\<^sub>s\<^sub>b",
     "hd_prog ?p
       (?sb @ [Write\<^sub>s\<^sub>b ?volatile ?a ?sop ?v ?A ?L ?R ?W]) =
      hd_prog ?p ?sb",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 9),
         template_app
          (template_app (template_hole 3, template_var 8),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app (template_hole 1, template_var 7),
                             template_var 6),
                           template_var 5),
                         template_var 4),
                       template_var 3),
                     template_var 2),
                   template_var 1),
                 template_var 0)),
             template_hole 0))),
       template_app
        (template_app (template_hole 4, template_var 9), template_var 8))),
    ("ReduceStoreBuffer.last_prog_append_Write\<^sub>s\<^sub>b",
     "last_prog ?p
       (?sb @ [Write\<^sub>s\<^sub>b ?volatile ?a ?sop ?v ?A ?L ?R ?W]) =
      last_prog ?p ?sb",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 9),
         template_app
          (template_app (template_hole 3, template_var 8),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app (template_hole 1, template_var 7),
                             template_var 6),
                           template_var 5),
                         template_var 4),
                       template_var 3),
                     template_var 2),
                   template_var 1),
                 template_var 0)),
             template_hole 0))),
       template_app
        (template_app (template_hole 4, template_var 9), template_var 8))),
    ("ReduceStoreBuffer.release_append",
     "release (?sb @ ?xs) (dom ?\<S>) ?\<R> =
      release ?xs (dom (share ?sb ?\<S>)) (release ?sb (dom ?\<S>) ?\<R>)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_var 3),
               template_var 2)),
           template_app (template_hole 1, template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_app (template_hole 3, template_var 2),
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 3),
               template_var 1))),
         template_app
          (template_app
            (template_app (template_hole 3, template_var 3),
             template_app (template_hole 1, template_var 1)),
           template_var 0)))),
    ("ReduceStoreBuffer.dom_release_takeWhile",
     "dom (release (takeWhile (Not o is_volatile_Write\<^sub>s\<^sub>b) ?sb)
            ?S ?\<R>) =
      dom ?\<R> Un
      all_shared (takeWhile (Not o is_volatile_Write\<^sub>s\<^sub>b) ?sb)",
     template_equation
      (template_app
        (template_hole 7,
         template_app
          (template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_hole 3),
                     template_hole 2)),
                 template_var 2)),
             template_var 1),
           template_var 0)),
       template_app
        (template_app
          (template_hole 1, template_app (template_hole 7, template_var 0)),
         template_app
          (template_hole 0,
           template_app
            (template_app
              (template_hole 5,
               template_app
                (template_app (template_hole 4, template_hole 3),
                 template_hole 2)),
             template_var 2))))),
    ("ReduceStoreBuffer.in_read_tmps_conv",
     "(?t : read_tmps ?xs) =
      (EX volatile a v. Read\<^sub>s\<^sub>b volatile a ?t v : set ?xs)",
     template_equation
      (template_app
        (template_app (template_hole 6, template_var 1),
         template_app (template_hole 5, template_var 0)),
       template_app (template_hole 4, t_empty))),
    ("ReduceStoreBuffer.reads_consistent_dropWhile",
     "reads_consistent ?pending_write ?\<O> ?m
       (dropWhile (Not o is_volatile_Write\<^sub>s\<^sub>b) ?sb) =
      reads_consistent True ?\<O> ?m
       (dropWhile (Not o is_volatile_Write\<^sub>s\<^sub>b) ?sb)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app (template_hole 5, template_var 3),
             template_var 2),
           template_var 1),
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_hole 1)),
           template_var 0)),
       template_app
        (template_app
          (template_app
            (template_app (template_hole 5, template_hole 0),
             template_var 2),
           template_var 1),
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_hole 1)),
           template_var 0)))),
    ("ReduceStoreBuffer.in_read_only_augment_conv",
     "(?a : read_only (?\<S> \<oplus>\<^bsub>?W\<^esub> ?R)) =
      (if ?a : ?R then ?a ~: ?W else ?a : read_only ?\<S>)",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 3),
         template_app
          (template_hole 3,
           template_app
            (template_app
              (template_app (template_hole 2, template_var 2),
               template_var 1),
             template_var 0))),
       template_app
        (template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 4, template_var 3),
               template_var 0)),
           template_app
            (template_hole 0,
             template_app
              (template_app (template_hole 4, template_var 3),
               template_var 1))),
         template_app
          (template_app (template_hole 4, template_var 3),
           template_app (template_hole 3, template_var 2))))),
    ("ReduceStoreBuffer.instrs_append_Read\<^sub>s\<^sub>b",
     "instrs (?sb @ [Read\<^sub>s\<^sub>b ?volatile ?a ?t ?v]) =
      instrs ?sb @ [Read ?volatile ?a ?t]",
     template_equation
      (template_app
        (template_hole 8,
         template_app
          (template_app (template_hole 7, template_var 4),
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app
                  (template_app
                    (template_app (template_hole 5, template_var 3),
                     template_var 2),
                   template_var 1),
                 template_var 0)),
             template_hole 4))),
       template_app
        (template_app
          (template_hole 3, template_app (template_hole 8, template_var 4)),
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_app (template_hole 1, template_var 3),
                 template_var 2),
               template_var 1)),
           template_hole 0)))),
    ("ReduceStoreBuffer.acquired_append",
     "acquired ?pending_write (?xs @ ?ys) ?A =
      acquired
       (?pending_write |
        outstanding_refs is_volatile_Write\<^sub>s\<^sub>b ?xs ~= {})
       ?ys (acquired ?pending_write ?xs ?A)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 6, template_var 3),
                template_app
                 (template_app (template_hole 5, template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_dunno)),
    ("ReduceStoreBuffer.sharing_consistent_append",
     "sharing_consistent ?\<S> ?\<O> (?xs @ ?ys) =
      (sharing_consistent ?\<S> ?\<O> ?xs &
       sharing_consistent (share ?xs ?\<S>) (acquired True ?xs ?\<O>) ?ys)",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 5, template_var 3), template_var 2),
         template_app
          (template_app (template_hole 4, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app
              (template_app (template_hole 5, template_var 3),
               template_var 2),
             template_var 1)),
         template_app
          (template_app
            (template_app
              (template_hole 5,
               template_app
                (template_app (template_hole 2, template_var 1),
                 template_var 3)),
             template_app
              (template_app
                (template_app (template_hole 1, template_hole 0),
                 template_var 1),
               template_var 2)),
           template_var 0)))),
    ("ReduceStoreBuffer.in_Inter_image_nth_conv",
     "(?a : \<Inter> (?f ` set ?xs)) =
      (ALL i<length ?xs. ?a : ?f (?xs ! i))",
     template_equation
      (template_app
        (template_app (template_hole 8, template_var 2),
         template_app
          (template_hole 7,
           template_app
            (template_app (template_hole 6, template_var 1),
             template_app (template_hole 5, template_var 0)))),
       template_app (template_hole 4, t_empty))),
    ("ReduceStoreBuffer.split_less_Suc",
     "(ALL x<Suc ?k. ?P x) = (?P ?k & (ALL x<?k. ?P x))",
     template_equation
      (template_app (template_hole 4, t_empty),
       template_app
        (template_app
          (template_hole 0, template_app (template_var 0, template_var 1)),
         template_app (template_hole 4, t_empty)))),
    ("ReduceStoreBuffer.instrs_append_Ghost\<^sub>s\<^sub>b",
     "instrs (?sb @ [Ghost\<^sub>s\<^sub>b ?A ?L ?R ?W]) =
      instrs ?sb @ [Ghost ?A ?L ?R ?W]",
     template_equation
      (template_app
        (template_hole 8,
         template_app
          (template_app (template_hole 7, template_var 4),
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app
                  (template_app
                    (template_app (template_hole 5, template_var 3),
                     template_var 2),
                   template_var 1),
                 template_var 0)),
             template_hole 4))),
       template_app
        (template_app
          (template_hole 3, template_app (template_hole 8, template_var 4)),
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_app
                  (template_app (template_hole 1, template_var 3),
                   template_var 2),
                 template_var 1),
               template_var 0)),
           template_hole 0)))),
    ("ReduceStoreBuffer.flush_append_Prog\<^sub>s\<^sub>b",
     "flush
       (takeWhile (Not o is_volatile_Write\<^sub>s\<^sub>b)
         (?sb @ [Prog\<^sub>s\<^sub>b ?p\<^sub>1 ?p\<^sub>2 ?mis]))
       ?m =
      flush (takeWhile (Not o is_volatile_Write\<^sub>s\<^sub>b) ?sb) ?m",
     template_equation
      (template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_hole 5),
                 template_hole 4)),
             template_app
              (template_app (template_hole 3, template_var 4),
               template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app
                      (template_app (template_hole 1, template_var 3),
                       template_var 2),
                     template_var 1)),
                 template_hole 0)))),
         template_var 0),
       template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_hole 5),
                 template_hole 4)),
             template_var 4)),
         template_var 0))),
    ("ReduceStoreBuffer.flush_append_write",
     "flush (?sb @ [Write\<^sub>s\<^sub>b ?volatile ?a ?sop ?v ?A ?L ?R ?W])
       ?m =
      (flush ?sb ?m)(?a := ?v)",
     template_equation
      (template_app
        (template_app
          (template_hole 5,
           template_app
            (template_app (template_hole 4, template_var 9),
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_hole 2, template_var 8),
                               template_var 7),
                             template_var 6),
                           template_var 5),
                         template_var 4),
                       template_var 3),
                     template_var 2),
                   template_var 1)),
               template_hole 1))),
         template_var 0),
       template_app
        (template_app
          (template_app
            (template_hole 0,
             template_app
              (template_app (template_hole 5, template_var 9),
               template_var 0)),
           template_var 7),
         template_var 5))),
    ("ReduceStoreBuffer.share_append_Prog\<^sub>s\<^sub>b",
     "share
       (takeWhile (Not o is_volatile_Write\<^sub>s\<^sub>b)
         (?sb @ [Prog\<^sub>s\<^sub>b ?p\<^sub>1 ?p\<^sub>2 ?mis]))
       ?S =
      share (takeWhile (Not o is_volatile_Write\<^sub>s\<^sub>b) ?sb) ?S",
     template_equation
      (template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_hole 5),
                 template_hole 4)),
             template_app
              (template_app (template_hole 3, template_var 4),
               template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app
                      (template_app (template_hole 1, template_var 3),
                       template_var 2),
                     template_var 1)),
                 template_hole 0)))),
         template_var 0),
       template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_hole 5),
                 template_hole 4)),
             template_var 4)),
         template_var 0))),
    ("ReduceStoreBuffer.in_read_only_restrict_conv",
     "(?a : read_only (?\<S> \<ominus>\<^bsub>?A\<^esub> ?L)) =
      (?a : read_only ?\<S> & ?a ~: ?L & ?a ~: ?A)",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 3),
         template_app
          (template_hole 3,
           template_app
            (template_app
              (template_app (template_hole 2, template_var 2),
               template_var 1),
             template_var 0))),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 4, template_var 3),
             template_app (template_hole 3, template_var 2))),
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_hole 0,
               template_app
                (template_app (template_hole 4, template_var 3),
                 template_var 0))),
           template_app
            (template_hole 0,
             template_app
              (template_app (template_hole 4, template_var 3),
               template_var 1)))))),
    ("ReduceStoreBuffer.split_le_Suc",
     "(ALL x<=Suc ?k. ?P x) = (?P (Suc ?k) & (ALL x<=?k. ?P x))",
     template_equation
      (template_app (template_hole 4, t_empty),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_var 0,
             template_app (template_hole 1, template_var 1))),
         template_app (template_hole 4, t_empty)))),
    ("ReduceStoreBuffer.flush_append_Ghost\<^sub>s\<^sub>b",
     "flush
       (takeWhile (Not o is_volatile_Write\<^sub>s\<^sub>b)
         (?sb @ [Ghost\<^sub>s\<^sub>b ?A ?L ?R ?W]))
       ?m =
      flush (takeWhile (Not o is_volatile_Write\<^sub>s\<^sub>b) ?sb) ?m",
     template_equation
      (template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_hole 5),
                 template_hole 4)),
             template_app
              (template_app (template_hole 3, template_var 5),
               template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 1, template_var 4),
                         template_var 3),
                       template_var 2),
                     template_var 1)),
                 template_hole 0)))),
         template_var 0),
       template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_hole 5),
                 template_hole 4)),
             template_var 5)),
         template_var 0))),
    ("ReduceStoreBuffer.flush_append_Read\<^sub>s\<^sub>b",
     "flush
       (takeWhile (Not o is_volatile_Write\<^sub>s\<^sub>b)
         (?sb @ [Read\<^sub>s\<^sub>b ?volatile ?a ?t ?v]))
       ?m =
      flush (takeWhile (Not o is_volatile_Write\<^sub>s\<^sub>b) ?sb) ?m",
     template_equation
      (template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_hole 5),
                 template_hole 4)),
             template_app
              (template_app (template_hole 3, template_var 5),
               template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 1, template_var 4),
                         template_var 3),
                       template_var 2),
                     template_var 1)),
                 template_hole 0)))),
         template_var 0),
       template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_hole 5),
                 template_hole 4)),
             template_var 5)),
         template_var 0))),
    ("ReduceStoreBuffer.share_append_Read\<^sub>s\<^sub>b",
     "share
       (takeWhile (Not o is_volatile_Write\<^sub>s\<^sub>b)
         (?sb @ [Read\<^sub>s\<^sub>b ?volatile ?a ?t ?v]))
       ?S =
      share (takeWhile (Not o is_volatile_Write\<^sub>s\<^sub>b) ?sb) ?S",
     template_equation
      (template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_hole 5),
                 template_hole 4)),
             template_app
              (template_app (template_hole 3, template_var 5),
               template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 1, template_var 4),
                         template_var 3),
                       template_var 2),
                     template_var 1)),
                 template_hole 0)))),
         template_var 0),
       template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_hole 5),
                 template_hole 4)),
             template_var 5)),
         template_var 0))),
    ("ReduceStoreBuffer.acquired_append_Prog\<^sub>s\<^sub>b",
     "acquired ?pending_write
       (takeWhile (Not o is_volatile_Write\<^sub>s\<^sub>b)
         (?sb @ [Prog\<^sub>s\<^sub>b ?p\<^sub>1 ?p\<^sub>2 ?mis]))
       ?S =
      acquired ?pending_write
       (takeWhile (Not o is_volatile_Write\<^sub>s\<^sub>b) ?sb) ?S",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 8, template_var 5),
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_hole 5),
                 template_hole 4)),
             template_app
              (template_app (template_hole 3, template_var 4),
               template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app
                      (template_app (template_hole 1, template_var 3),
                       template_var 2),
                     template_var 1)),
                 template_hole 0)))),
         template_var 0),
       template_app
        (template_app
          (template_app (template_hole 8, template_var 5),
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_hole 5),
                 template_hole 4)),
             template_var 4)),
         template_var 0))),
    ("ReduceStoreBuffer.no_volatile_Read\<^sub>s\<^sub>bs_conv",
     "(outstanding_refs is_volatile_Read\<^sub>s\<^sub>b ?sb = {}) =
      (ALL r:set ?sb.
          ALL v' t' a'. r ~= Read\<^sub>s\<^sub>b True a' t' v')",
     template_equation
      (template_app
        (template_app
          (template_hole 10,
           template_app
            (template_app (template_hole 9, template_hole 8),
             template_var 0)),
         template_hole 7),
       template_app
        (template_app
          (template_hole 6, template_app (template_hole 5, template_var 0)),
         t_empty))),
    ("ReduceStoreBuffer.acquired_take_drop",
     "acquired
       (?pending_write |
        outstanding_refs is_volatile_Write\<^sub>s\<^sub>b
         (takeWhile ?P ?xs) ~=
        {})
       (dropWhile ?P ?xs) (acquired ?pending_write (takeWhile ?P ?xs) ?A) =
      acquired ?pending_write ?xs ?A",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 7,
             template_app
              (template_app (template_hole 6, template_var 3),
               template_app
                (template_hole 5,
                 template_app
                  (template_app
                    (template_hole 8,
                     template_app
                      (template_app (template_hole 4, template_hole 3),
                       template_app
                        (template_app (template_hole 2, template_var 2),
                         template_var 1))),
                   template_hole 1)))),
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1)),
         template_app
          (template_app
            (template_app (template_hole 7, template_var 3),
             template_app
              (template_app (template_hole 2, template_var 2),
               template_var 1)),
           template_var 0)),
       template_app
        (template_app
          (template_app (template_hole 7, template_var 3), template_var 1),
         template_var 0))),
    ("ReduceStoreBuffer.acquired_reads_append",
     "acquired_reads ?pending_write (?xs @ ?ys) ?A =
      acquired_reads ?pending_write ?xs ?A Un
      acquired_reads
       (?pending_write |
        outstanding_refs is_volatile_Write\<^sub>s\<^sub>b ?xs ~= {})
       ?ys (acquired ?pending_write ?xs ?A)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 8, template_var 3),
                template_app
                 (template_app (template_hole 7, template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_dunno)),
    ("ReduceStoreBuffer.share_append_Write\<^sub>s\<^sub>b",
     "share
       (takeWhile (Not o is_volatile_Write\<^sub>s\<^sub>b)
         (?sb @ [Write\<^sub>s\<^sub>b ?volatile ?a ?sop ?v ?A ?L ?R ?W]))
       ?S =
      share (takeWhile (Not o is_volatile_Write\<^sub>s\<^sub>b) ?sb) ?S",
     template_equation
      (template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_hole 5),
                 template_hole 4)),
             template_app
              (template_app (template_hole 3, template_var 9),
               template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_hole 1, template_var 8),
                                 template_var 7),
                               template_var 6),
                             template_var 5),
                           template_var 4),
                         template_var 3),
                       template_var 2),
                     template_var 1)),
                 template_hole 0)))),
         template_var 0),
       template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_hole 5),
                 template_hole 4)),
             template_var 9)),
         template_var 0))),
    ("ReduceStoreBuffer.data_dependency_consistent_instrs_append",
     "data_dependency_consistent_instrs ?T (?xs @ ?ys) =
      (data_dependency_consistent_instrs ?T ?xs &
       data_dependency_consistent_instrs (?T Un load_tmps ?xs) ?ys &
       load_tmps ?ys Int \<Union> (fst ` store_sops ?xs) = {})",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 11, template_var 2),
              template_app
               (template_app (template_hole 10, template_var 1),
                template_var 0))
            )],
       template_dunno)),
    ("ReduceStoreBuffer.instrs_append_Write\<^sub>s\<^sub>b",
     "instrs
       (?sb @ [Write\<^sub>s\<^sub>b ?volatile ?a ?sop ?v ?A ?L ?R ?W]) =
      instrs ?sb @ [Write ?volatile ?a ?sop ?A ?L ?R ?W]",
     template_equation
      (template_app
        (template_hole 8,
         template_app
          (template_app (template_hole 7, template_var 8),
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app (template_hole 5, template_var 7),
                             template_var 6),
                           template_var 5),
                         template_var 4),
                       template_var 3),
                     template_var 2),
                   template_var 1),
                 template_var 0)),
             template_hole 4))),
       template_app
        (template_app
          (template_hole 3, template_app (template_hole 8, template_var 8)),
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 1, template_var 7),
                         template_var 6),
                       template_var 5),
                     template_var 3),
                   template_var 2),
                 template_var 1),
               template_var 0)),
           template_hole 0)))),
    ("ReduceStoreBuffer.valid_reads_Cons",
     "valid_reads ?m (?t # ?ts) =
      (let (uu_, uu_, uu_, sb, uu_, \<O>, uu_) = ?t
       in reads_consistent False \<O> ?m sb & valid_reads ?m ?ts)",
     template_equation
      (template_app
        (template_app (template_hole 11, template_var 2),
         template_app
          (template_app (template_hole 10, template_var 1),
           template_var 0)),
       template_app
        (template_app (template_hole 9, template_var 1),
         template_app (template_hole 8, t_empty)))),
    ("ReduceStoreBuffer.in_write_sops_conv",
     "(?sop : write_sops ?xs) =
      (EX volatile a v A L R W.
          Write\<^sub>s\<^sub>b volatile a ?sop v A L R W : set ?xs)",
     template_equation
      (template_app
        (template_app (template_hole 7, template_var 1),
         template_app (template_hole 6, template_var 0)),
       template_app (template_hole 5, t_empty))),
    ("ReduceStoreBuffer.non_volatile_owned_or_read_only_append",
     "non_volatile_owned_or_read_only ?pending_write ?\<S> ?\<O>
       (?xs @ ?ys) =
      (non_volatile_owned_or_read_only ?pending_write ?\<S> ?\<O> ?xs &
       non_volatile_owned_or_read_only
        (?pending_write |
         outstanding_refs is_volatile_Write\<^sub>s\<^sub>b ?xs ~= {})
        (share ?xs ?\<S>) (acquired True ?xs ?\<O>) ?ys)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 11, template_var 4),
                  template_var 3),
                template_var 2),
              template_app
               (template_app (template_hole 10, template_var 1),
                template_var 0))
            )],
       template_dunno)),
    ("ReduceStoreBuffer.no_volatile_Write\<^sub>s\<^sub>bs_conv",
     "(outstanding_refs is_volatile_Write\<^sub>s\<^sub>b ?sb = {}) =
      (ALL r:set ?sb.
          ALL v' sop' a' A L R W.
             r ~= Write\<^sub>s\<^sub>b True a' sop' v' A L R W)",
     template_equation
      (template_app
        (template_app
          (template_hole 12,
           template_app
            (template_app (template_hole 11, template_hole 10),
             template_var 0)),
         template_hole 9),
       template_app
        (template_app
          (template_hole 8, template_app (template_hole 7, template_var 0)),
         t_empty))),
    ("ReduceStoreBuffer.reads_consistent_append",
     "reads_consistent ?pending_write ?\<O> ?m (?xs @ ?ys) =
      (reads_consistent ?pending_write ?\<O> ?m ?xs &
       reads_consistent
        (?pending_write |
         outstanding_refs is_volatile_Write\<^sub>s\<^sub>b ?xs ~= {})
        (acquired True ?xs ?\<O>) (flush ?xs ?m) ?ys &
       (outstanding_refs is_volatile_Write\<^sub>s\<^sub>b ?xs ~= {} -->
        outstanding_refs is_volatile_Read\<^sub>s\<^sub>b ?ys = {}))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 13, template_var 4),
                  template_var 3),
                template_var 2),
              template_app
               (template_app (template_hole 12, template_var 1),
                template_var 0))
            )],
       template_dunno)),
    ("ReduceStoreBuffer.in_load_tmps_conv",
     "(?t : load_tmps ?xs) =
      ((EX volatile a. Read volatile a ?t : set ?xs) |
       (EX a sop cond ret A L R W.
           RMW a ?t sop cond ret A L R W : set ?xs))",
     template_equation
      (template_app
        (template_app (template_hole 12, template_var 1),
         template_app (template_hole 11, template_var 0)),
       template_app
        (template_app
          (template_hole 10, template_app (template_hole 9, t_empty)),
         template_app (template_hole 8, t_empty)))),
    ("ReduceStoreBuffer.in_store_sops_conv",
     "(?sop : store_sops ?xs) =
      ((EX volatile a A L R W. Write volatile a ?sop A L R W : set ?xs) |
       (EX a t cond ret A L R W. RMW a t ?sop cond ret A L R W : set ?xs))",
     template_equation
      (template_app
        (template_app (template_hole 11, template_var 1),
         template_app (template_hole 10, template_var 0)),
       template_app
        (template_app
          (template_hole 9, template_app (template_hole 8, t_empty)),
         template_app (template_hole 7, t_empty)))),
    ("ReduceStoreBuffer.distinct_read_tmps_conv",
     "distinct_read_tmps ?xs =
      (ALL i<length ?xs.
          ALL j<length ?xs.
             i ~= j -->
             (case ?xs ! i of
              Read\<^sub>s\<^sub>b x xa t\<^sub>i xb =>
                case ?xs ! j of
                Read\<^sub>s\<^sub>b x xa t\<^sub>j xb =>
                  t\<^sub>i ~= t\<^sub>j
                | _ => True
              | _ => True))",
     template_equation
      (template_app (template_hole 9, template_var 0),
       template_app (template_hole 8, t_empty)))]
