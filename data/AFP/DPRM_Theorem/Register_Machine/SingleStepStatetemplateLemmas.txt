   [("SingleStepState.lm04_07_one_step_relation_state",
     "[| is_valid_initial ?c ?p ?a; ?d < length ?p |]
      ==> S ?c ?p ?d (Suc ?t) =
          \<Sum>S+ ?p ?d (%k. S ?c ?p k ?t)  +
          \<Sum>S- ?p ?d (%k. Z ?c ?p (modifies (?p ! k)) ?t *
                              S ?c ?p k ?t)  +
          \<Sum>S0 ?p ?d (%k. (1 - Z ?c ?p (modifies (?p ! k)) ?t) *
                              S ?c ?p k ?t)  +
          (if ishalt (?p ! fst (steps ?c ?p ?t)) & ?d = fst (steps ?c ?p ?t)
           then Suc 0 else 0)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 21, template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_inequation
         (less_than, template_var 1,
          template_app (template_hole 19, template_var 3))],
       template_implication
        ([template_predicate
           (
              template_app
               (template_app
                 (template_app
                   (template_app (template_hole 17, template_var 4),
                    template_var 3),
                  template_var 1),
                template_app (template_hole 16, template_var 0))
              )],
         template_predicate
          (
             template_app
              (template_app
                (template_hole 15,
                 template_app
                  (template_app
                    (template_hole 15,
                     template_app
                      (template_app
                        (template_hole 15,
                         template_app
                          (template_app
                            (template_app
                              (template_hole 14, template_var 3),
                             template_var 1),
                           t_empty)),
                       template_app
                        (template_app
                          (template_app (template_hole 13, template_var 3),
                           template_var 1),
                         t_empty))),
                   template_app
                    (template_app
                      (template_app (template_hole 8, template_var 3),
                       template_var 1),
                     t_empty))),
               template_app
                (template_app
                  (template_app
                    (template_hole 5,
                     template_app
                      (template_app
                        (template_hole 4,
                         template_app
                          (template_hole 3,
                           template_app
                            (template_app (template_hole 9, template_var 3),
                             template_app
                              (template_hole 2,
                               template_app
                                (template_app
                                  (template_app
                                    (template_hole 1, template_var 4),
                                   template_var 3),
                                 template_var 0))))),
                       template_app
                        (template_app (template_hole 18, template_var 1),
                         template_app
                          (template_hole 2,
                           template_app
                            (template_app
                              (template_app
                                (template_hole 1, template_var 4),
                               template_var 3),
                             template_var 0))))),
                   template_app (template_hole 16, template_hole 0)),
                 template_hole 0))
             ))))]
