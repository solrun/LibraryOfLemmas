   [("Refinement.observable_id", "observable id ?P",
     template_predicate
      (
         template_app
          (template_app (template_hole 1, template_hole 0), template_var 0)
         )),
    ("Refinement.hoare_false_left", "{{}} ?R {> ?Q}",
     template_predicate
      (
         template_app
          (template_app
            (template_app (template_hole 1, template_hole 0),
             template_var 1),
           template_var 0)
         )),
    ("Refinement.hoare_stop", "{?P} {} {> ?Q}",
     template_predicate
      (
         template_app
          (template_app
            (template_app (template_hole 1, template_var 1),
             template_hole 0),
           template_var 0)
         )),
    ("Refinement.hoare_true_right", "{?P} ?R {> UNIV}",
     template_predicate
      (
         template_app
          (template_app
            (template_app (template_hole 1, template_var 1),
             template_var 0),
           template_hole 0)
         )),
    ("Refinement.implements_refl", "implements id ?S ?S",
     template_predicate
      (
         template_app
          (template_app
            (template_app (template_hole 1, template_hole 0),
             template_var 0),
           template_var 0)
         )),
    ("Refinement.init_reach", "init ?T <= reach ?T",
     template_inequation
      (less_equals, template_app (template_hole 1, template_var 0),
       template_app (template_hole 0, template_var 0))),
    ("Refinement.relhoare_refl", "{Id} ?R, ?R {> Id}",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 0),
             template_var 0),
           template_hole 0)
         )),
    ("Refinement.relhoare_false_left", "{{}} ?Ra, ?Rc {> ?post}",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 2),
             template_var 1),
           template_var 0)
         )),
    ("Refinement.rel_hoare_skip", "{?R} Id, Id {> ?R}",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app (template_hole 2, template_var 0),
               template_hole 1),
             template_hole 0),
           template_var 0)
         )),
    ("Refinement.obs_consistent_refl", "obs_consistent Id id ?S ?S",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app (template_hole 2, template_hole 1),
               template_hole 0),
             template_var 0),
           template_var 0)
         )),
    ("Refinement.obs_consistent_empty", "obs_consistent {} ?pi ?Sa ?Sc",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 2),
             template_var 1),
           template_var 0)
         )),
    ("Refinement.refinement_reflexive", "refines Id id ?S ?S",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app (template_hole 2, template_hole 1),
               template_hole 0),
             template_var 0),
           template_var 0)
         )),
    ("Refinement.observable2_equiv_observable",
     "observable2 ?ob ?P = observable ?ob ?P",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 1), template_var 0),
       template_app
        (template_app (template_hole 0, template_var 1), template_var 0))),
    ("Refinement.observable3_equiv_observable2",
     "observable3 ?ob ?P = observable2 ?ob ?P",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 1), template_var 0),
       template_app
        (template_app (template_hole 0, template_var 1), template_var 0))),
    ("Refinement.trans_reach", "{reach ?T} TS.trans ?T {> reach ?T}",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_hole 2,
               template_app (template_hole 1, template_var 0)),
             template_app (template_hole 0, template_var 0)),
           template_app (template_hole 1, template_var 0))
         )),
    ("Refinement.reachp_reach_eq", "reachp ?T = (%x. x : reach ?T)",
     template_equation
      (template_app (template_hole 2, template_var 0), t_empty)),
    ("Refinement.behp_beh_eq", "behp ?T = (%x. x : beh ?T)",
     template_equation
      (template_app (template_hole 2, template_var 0), t_empty)),
    ("Refinement.oreach_equiv_obeh_states",
     "oreach ?S = \<Union> (set ` obeh ?S)",
     template_equation
      (template_app (template_hole 4, template_var 0),
       template_app
        (template_hole 3,
         template_app
          (template_app (template_hole 2, template_hole 1),
           template_app (template_hole 0, template_var 0))))),
    ("Refinement.reach_equiv_beh_states",
     "reach ?T = \<Union> (set ` beh ?T)",
     template_equation
      (template_app (template_hole 4, template_var 0),
       template_app
        (template_hole 3,
         template_app
          (template_app (template_hole 2, template_hole 1),
           template_app (template_hole 0, template_var 0))))),
    ("Refinement.reach_obs_upd", "reach (?S(| obs := ?x |)) = reach ?S",
     template_equation
      (template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, t_empty), template_var 0)),
       template_app (template_hole 1, template_var 0))),
    ("Refinement.beh_obs_upd", "beh (?S(| obs := ?x |)) = beh ?S",
     template_equation
      (template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, t_empty), template_var 0)),
       template_app (template_hole 1, template_var 0))),
    ("Refinement.hoare_skip", "?P <= ?Q ==> {?P} Id {> ?Q}",
     template_implication
      ([template_inequation (less_equals, template_var 1, template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 1, template_var 1),
               template_hole 0),
             template_var 0)
           ))),
    ("Refinement.reach_init", "reach ?T <= ?I ==> init ?T <= ?I",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 1, template_var 1),
          template_var 0)],
       template_inequation
        (less_equals, template_app (template_hole 0, template_var 1),
         template_var 0))),
    ("Refinement.image_vimage_adjoints",
     "(?ob ` ?P <= ?Q) = (?P <= ?ob -` ?Q)",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 1, template_var 1),
         template_app
          (template_app (template_hole 0, template_var 2),
           template_var 0)))),
    ("Refinement.PO_refines_implies_Range_init",
     "PO_refines ?R ?Ta ?Tc ==> init ?Tc <= Range ?R",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 3, template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_inequation
        (less_equals, template_app (template_hole 1, template_var 0),
         template_app (template_hole 0, template_var 2)))),
    ("Refinement.PO_refines_implies_Range_invariant",
     "PO_refines ?R ?Ta ?Tc ==> reach ?Tc <= Range ?R",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 3, template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_inequation
        (less_equals, template_app (template_hole 1, template_var 0),
         template_app (template_hole 0, template_var 2)))),
    ("Refinement.refinement_soundness",
     "refines ?R ?pi ?Sa ?Sc ==> implements ?pi ?Sa ?Sc",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 1, template_var 3),
                  template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 0, template_var 2),
               template_var 1),
             template_var 0)
           ))),
    ("Refinement.reach_trans",
     "reach ?T <= ?I ==> {reach ?T} TS.trans ?T {> ?I}",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 2, template_var 1),
          template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 1,
                 template_app (template_hole 2, template_var 1)),
               template_app (template_hole 0, template_var 1)),
             template_var 0)
           ))),
    ("Refinement.Domain_rel_comp",
     "Domain ?pre <= ?R ==> Domain (?pre O ?Rc) <= ?R",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 2, template_var 2),
          template_var 1)],
       template_inequation
        (less_equals,
         template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 0)),
         template_var 1))),
    ("Refinement.beh_prefix_closed", "?c @ ?b : beh ?T ==> ?b : beh ?T",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 2),
                  template_var 1)),
              template_app (template_hole 0, template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 2, template_var 1),
             template_app (template_hole 0, template_var 0))
           ))),
    ("Refinement.beh_immediate_prefix_closed",
     "?s # ?b : beh ?T ==> ?b : beh ?T",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 2),
                  template_var 1)),
              template_app (template_hole 0, template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 2, template_var 1),
             template_app (template_hole 0, template_var 0))
           ))),
    ("Refinement.oreach_pi_translation",
     "?pi ` oreach ?S = oreach (?S(| obs := ?pi o obs ?S |))",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 1),
         template_app (template_hole 3, template_var 0)),
       template_app
        (template_hole 3,
         template_app
          (template_app (template_hole 2, t_empty), template_var 0)))),
    ("Refinement.relhoare_true_right",
     "{?pre} ?Ra, ?Rc {> UNIV} = (Domain (?pre O ?Rc) <= Domain ?Ra)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app (template_hole 5, template_var 2),
             template_var 1),
           template_var 0),
         template_hole 4),
       template_app
        (template_app
          (template_hole 3,
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 2),
               template_var 0))),
         template_app (template_hole 0, template_var 1)))),
    ("Refinement.PO_refines_implies_Range_trans",
     "PO_refines ?R ?Ta ?Tc ==> {Range ?R} TS.trans ?Tc {> Range ?R}",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 3, template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 2,
                 template_app (template_hole 1, template_var 2)),
               template_app (template_hole 0, template_var 0)),
             template_app (template_hole 1, template_var 2))
           ))),
    ("Refinement.implements_oreach",
     "implements ?pi ?Sa ?Sc ==> ?pi ` oreach ?Sc <= oreach ?Sa",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 4, template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_inequation
        (less_equals,
         template_app
          (template_app (template_hole 2, template_var 2),
           template_app (template_hole 1, template_var 0)),
         template_app (template_hole 0, template_var 1)))),
    ("Refinement.obeh_pi_translation",
     "map ?pi ` obeh ?S = obeh (?S(| obs := ?pi o obs ?S |))",
     template_equation
      (template_app
        (template_app
          (template_hole 5, template_app (template_hole 4, template_var 1)),
         template_app (template_hole 3, template_var 0)),
       template_app
        (template_hole 3,
         template_app
          (template_app (template_hole 2, t_empty), template_var 0)))),
    ("Refinement.reach_in_beh", "?s : reach ?T ==> EX b:beh ?T. ?s : set b",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 4, template_var 1),
              template_app (template_hole 3, template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app (template_hole 1, template_var 0)),
             t_empty)
           ))),
    ("Refinement.relhoare_abstract_Un_left",
     "{?pre} ?Ra1.0, ?Rc {> ?post} ==>
      {?pre} ?Ra1.0 Un ?Ra2.0, ?Rc {> ?post}",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 1, template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 1, template_var 4),
                 template_app
                  (template_app (template_hole 0, template_var 3),
                   template_var 0)),
               template_var 2),
             template_var 1)
           ))),
    ("Refinement.relhoare_abstract_Un_right",
     "{?pre} ?Ra2.0, ?Rc {> ?post} ==>
      {?pre} ?Ra1.0 Un ?Ra2.0, ?Rc {> ?post}",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 1, template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 1, template_var 4),
                 template_app
                  (template_app (template_hole 0, template_var 0),
                   template_var 3)),
               template_var 2),
             template_var 1)
           ))),
    ("Refinement.obs_consistent_conj1",
     "obs_consistent ?R ?pi ?Sa ?Sc ==>
      obs_consistent (?R Int ?R') ?pi ?Sa ?Sc",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 1, template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 1,
                   template_app
                    (template_app (template_hole 0, template_var 4),
                     template_var 0)),
                 template_var 3),
               template_var 2),
             template_var 1)
           ))),
    ("Refinement.obs_consistent_conj2",
     "obs_consistent ?R ?pi ?Sa ?Sc ==>
      obs_consistent (?R' Int ?R) ?pi ?Sa ?Sc",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 1, template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 1,
                   template_app
                    (template_app (template_hole 0, template_var 0),
                     template_var 4)),
                 template_var 3),
               template_var 2),
             template_var 1)
           ))),
    ("Refinement.hoare_conseq_right",
     "[| {?P} ?R {> ?Q'}; ?Q' <= ?Q |] ==> {?P} ?R {> ?Q}",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 1, template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_inequation (less_equals, template_var 1, template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 0)
           ))),
    ("Refinement.hoare_conseq_left",
     "[| {?P'} ?R {> ?Q}; ?P <= ?P' |] ==> {?P} ?R {> ?Q}",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 1, template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_inequation (less_equals, template_var 0, template_var 3)],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 1, template_var 0),
               template_var 2),
             template_var 1)
           ))),
    ("Refinement.hoare_trans_Un",
     "{?P} ?R1.0 Un ?R2.0 {> ?Q} = ({?P} ?R1.0 {> ?Q} & {?P} ?R2.0 {> ?Q})",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 2, template_var 3),
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app
              (template_app (template_hole 2, template_var 3),
               template_var 2),
             template_var 0)),
         template_app
          (template_app
            (template_app (template_hole 2, template_var 3),
             template_var 1),
           template_var 0)))),
    ("Refinement.INV_init_from_refinement",
     "[| PO_refines ?R ?Ta ?Tc; Range ?R <= ?I |] ==> init ?Tc <= ?I",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 3, template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_inequation
         (less_equals, template_app (template_hole 1, template_var 3),
          template_var 0)],
       template_inequation
        (less_equals, template_app (template_hole 0, template_var 1),
         template_var 0))),
    ("Refinement.INV_from_refinement",
     "[| PO_refines ?R ?Ta ?Tc; Range ?R <= ?I |] ==> reach ?Tc <= ?I",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 3, template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_inequation
         (less_equals, template_app (template_hole 1, template_var 3),
          template_var 0)],
       template_inequation
        (less_equals, template_app (template_hole 0, template_var 1),
         template_var 0))),
    ("Refinement.beh_in_reach",
     "[| ?b : beh ?T; ?s : set ?b |] ==> ?s : reach ?T",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 4, template_var 2),
              template_app (template_hole 3, template_var 1))
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 2, template_var 0),
              template_app (template_hole 1, template_var 2))
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 2, template_var 0),
             template_app (template_hole 0, template_var 1))
           ))),
    ("Refinement.seq_liftp_seq_lift_eq",
     "seq_liftp (%x xa. (x, xa) : ?R) = (%x xa. (x, xa) : seq_lift ?R)",
     template_equation (template_app (template_hole 5, t_empty), t_empty)),
    ("Refinement.hoare_trans_UN",
     "{?P} \<Union> (range ?R) {> ?Q} = (ALL x. {?P} ?R x {> ?Q})",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 4, template_var 2),
           template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, t_empty), template_hole 1))),
         template_var 0),
       template_app (template_hole 0, t_empty))),
    ("Refinement.external_equiv_internal_invariant_vimage",
     "?P = obs ?S -` ?Q ==> (oreach ?S <= ?Q) = (reach ?S <= ?P)",
     template_implication
      ([template_equation
         (template_var 2,
          template_app
           (template_app
             (template_hole 6,
              template_app (template_hole 5, template_var 1)),
            template_var 0))],
       template_equation
        (template_app
          (template_app
            (template_hole 3,
             template_app (template_hole 2, template_var 1)),
           template_var 0),
         template_app
          (template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 1)),
           template_var 2)))),
    ("Refinement.inv_rule_basic",
     "[| init ?T <= ?P; {?P} TS.trans ?T {> ?P} |] ==> reach ?T <= ?P",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 3, template_var 1),
          template_var 0),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 2, template_var 0),
                template_app (template_hole 1, template_var 1)),
              template_var 0)
            )],
       template_inequation
        (less_equals, template_app (template_hole 0, template_var 1),
         template_var 0))),
    ("Refinement.image_r_vimage_l",
     "[| ?Q <= ?ob ` ?P; observable ?ob ?P |] ==> ?ob -` ?Q <= ?P",
     template_implication
      ([template_inequation
         (less_equals, template_var 2,
          template_app
           (template_app (template_hole 3, template_var 1),
            template_var 0)),
        template_predicate
         (
            template_app
             (template_app (template_hole 2, template_var 1),
              template_var 0)
            )],
       template_inequation
        (less_equals,
         template_app
          (template_app (template_hole 0, template_var 1), template_var 2),
         template_var 0))),
    ("Refinement.relhoare_conseq_right",
     "[| {?pre} ?Ra, ?Rc {> ?post'}; ?post' <= ?post |]
      ==> {?pre} ?Ra, ?Rc {> ?post}",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 1, template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_inequation (less_equals, template_var 1, template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 1, template_var 4),
                 template_var 3),
               template_var 2),
             template_var 0)
           ))),
    ("Refinement.relhoare_abstract_trans_weak",
     "[| {?pre} ?Ra', ?Rc {> ?post}; ?Ra' <= ?Ra |]
      ==> {?pre} ?Ra, ?Rc {> ?post}",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 1, template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_inequation (less_equals, template_var 3, template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 1, template_var 4),
                 template_var 0),
               template_var 2),
             template_var 1)
           ))),
    ("Refinement.relhoare_conseq_left",
     "[| {?pre'} ?Ra, ?Rc {> ?post}; ?pre <= ?pre' |]
      ==> {?pre} ?Ra, ?Rc {> ?post}",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 1, template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_inequation (less_equals, template_var 0, template_var 4)],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 1, template_var 0),
                 template_var 3),
               template_var 2),
             template_var 1)
           ))),
    ("Refinement.INV_init_from_Refinement",
     "[| refines ?R ?pi ?Sa ?Sc; Range ?R <= ?I |] ==> init ?Sc <= ?I",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 3, template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_inequation
         (less_equals, template_app (template_hole 1, template_var 4),
          template_var 0)],
       template_inequation
        (less_equals, template_app (template_hole 0, template_var 1),
         template_var 0))),
    ("Refinement.INV_from_Refinement_basic",
     "[| refines ?R ?pi ?Sa ?Sc; Range ?R <= ?I |] ==> reach ?Sc <= ?I",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 3, template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_inequation
         (less_equals, template_app (template_hole 1, template_var 4),
          template_var 0)],
       template_inequation
        (less_equals, template_app (template_hole 0, template_var 1),
         template_var 0))),
    ("Refinement.relhoare_abstract_UN",
     "{?pre} ?Ra ?x, ?Rc {> ?post} ==>
      {?pre} \<Union> (range ?Ra), ?Rc {> ?post}",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 3, template_var 4),
                  template_app (template_var 3, template_var 2)),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 3, template_var 4),
                 template_app
                  (template_hole 2,
                   template_app
                    (template_app (template_hole 1, t_empty),
                     template_hole 0))),
               template_var 1),
             template_var 0)
           ))),
    ("Refinement.external_to_internal_invariant_vimage",
     "[| oreach ?S <= ?Q; obs ?S -` ?Q <= ?P |] ==> reach ?S <= ?P",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 4, template_var 2),
          template_var 1),
        template_inequation
         (less_equals,
          template_app
           (template_app
             (template_hole 2,
              template_app (template_hole 1, template_var 2)),
            template_var 1),
          template_var 0)],
       template_inequation
        (less_equals, template_app (template_hole 0, template_var 2),
         template_var 0))),
    ("Refinement.external_invariant_preservation",
     "[| oreach ?Sa <= ?Q; implements ?pi ?Sa ?Sc |]
      ==> ?pi ` oreach ?Sc <= ?Q",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 3, template_var 3),
          template_var 2),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 2, template_var 1),
                template_var 3),
              template_var 0)
            )],
       template_inequation
        (less_equals,
         template_app
          (template_app (template_hole 1, template_var 1),
           template_app (template_hole 0, template_var 0)),
         template_var 2))),
    ("Refinement.external_from_internal_invariant_vimage",
     "[| reach ?S <= ?P; ?P <= obs ?S -` ?Q |] ==> oreach ?S <= ?Q",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 4, template_var 2),
          template_var 1),
        template_inequation
         (less_equals, template_var 1,
          template_app
           (template_app
             (template_hole 3,
              template_app (template_hole 2, template_var 2)),
            template_var 0))],
       template_inequation
        (less_equals, template_app (template_hole 0, template_var 2),
         template_var 0))),
    ("Refinement.external_from_internal_invariant",
     "[| reach ?S <= ?P; obs ?S ` ?P <= ?Q |] ==> oreach ?S <= ?Q",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 4, template_var 2),
          template_var 1),
        template_inequation
         (less_equals,
          template_app
           (template_app
             (template_hole 2,
              template_app (template_hole 1, template_var 2)),
            template_var 1),
          template_var 0)],
       template_inequation
        (less_equals, template_app (template_hole 0, template_var 2),
         template_var 0))),
    ("Refinement.hoare_conj_right",
     "[| {?P} ?R {> ?Q1.0}; {?P} ?R {> ?Q2.0} |]
      ==> {?P} ?R {> ?Q1.0 Int ?Q2.0}",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 1, template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 1, template_var 3),
                template_var 2),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))
           ))),
    ("Refinement.refinesI",
     "[| PO_refines ?R ?Sa ?Sc; obs_consistent ?R ?pi ?Sa ?Sc |]
      ==> refines ?R ?pi ?Sa ?Sc",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 2, template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 1, template_var 3),
                  template_var 0),
                template_var 2),
              template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 0, template_var 3),
                 template_var 0),
               template_var 2),
             template_var 1)
           ))),
    ("Refinement.implements_trans",
     "[| implements ?pi1.0 ?S1.0 ?S2.0; implements ?pi2.0 ?S2.0 ?S3.0 |]
      ==> implements (?pi1.0 o ?pi2.0) ?S1.0 ?S3.0",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 3, template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 2, template_var 1),
                template_var 2),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_var 4),
                   template_var 1)),
               template_var 3),
             template_var 0)
           ))),
    ("Refinement.relhoare_concrete_Un",
     "{?pre} ?Ra, ?Rc1.0 Un ?Rc2.0 {> ?post} =
      ({?pre} ?Ra, ?Rc1.0 {> ?post} & {?pre} ?Ra, ?Rc2.0 {> ?post})",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app (template_hole 2, template_var 4),
             template_var 3),
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app
              (template_app
                (template_app (template_hole 2, template_var 4),
                 template_var 3),
               template_var 2),
             template_var 0)),
         template_app
          (template_app
            (template_app
              (template_app (template_hole 2, template_var 4),
               template_var 3),
             template_var 1),
           template_var 0)))),
    ("Refinement.relhoare_concrete_UN",
     "{?pre} ?Ra, \<Union> (range ?Rc) {> ?post} =
      (ALL x. {?pre} ?Ra, ?Rc x {> ?post})",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app (template_hole 4, template_var 3),
             template_var 2),
           template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, t_empty), template_hole 1))),
         template_var 0),
       template_app (template_hole 0, t_empty))),
    ("Refinement.refines_reachable_strengthening",
     "refines ?R ?pi ?Sa ?Sc ==>
      refines (?R Int reach ?Sa \<times> reach ?Sc) ?pi ?Sa ?Sc",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 4, template_var 3),
                  template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 4,
                   template_app
                    (template_app (template_hole 3, template_var 3),
                     template_app
                      (template_app
                        (template_hole 2,
                         template_app (template_hole 1, template_var 1)),
                       t_empty))),
                 template_var 2),
               template_var 1),
             template_var 0)
           ))),
    ("Refinement.vimage_l_image_r",
     "[| ?ob -` ?Q <= ?P; ?Q <= range ?ob |] ==> ?Q <= ?ob ` ?P",
     template_implication
      ([template_inequation
         (less_equals,
          template_app
           (template_app (template_hole 3, template_var 2), template_var 1),
          template_var 0),
        template_inequation
         (less_equals, template_var 1,
          template_app
           (template_app (template_hole 1, template_var 2),
            template_hole 0))],
       template_inequation
        (less_equals, template_var 1,
         template_app
          (template_app (template_hole 1, template_var 2),
           template_var 0)))),
    ("Refinement.observable_behaviour_refinement",
     "[| refines ?R ?pi ?Sa ?Sc; ?bc : obeh ?Sc |]
      ==> map ?pi ?bc : obeh ?Sa",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 5, template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 4, template_var 0),
              template_app (template_hole 3, template_var 1))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 3),
                 template_var 0)),
             template_app (template_hole 0, template_var 2))
           ))),
    ("Refinement.INV_rule",
     "[| init ?T <= ?I; {?I Int reach ?T} TS.trans ?T {> ?I} |]
      ==> reach ?T <= ?I",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 4, template_var 1),
          template_var 0),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_hole 3,
                  template_app
                   (template_app (template_hole 2, template_var 0),
                    template_app (template_hole 1, template_var 1))),
                template_app (template_hole 0, template_var 1)),
              template_var 0)
            )],
       template_inequation
        (less_equals, template_app (template_hole 1, template_var 1),
         template_var 0))),
    ("Refinement.observableE",
     "[| observable ?ob ?P; ?ob ?s = ?ob ?s'; ?s' : ?P |] ==> ?s : ?P",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 2, template_var 3),
              template_var 2)
            ),
        template_equation
         (template_app (template_var 3, template_var 1),
          template_app (template_var 3, template_var 0)),
        template_predicate
         (
            template_app
             (template_app (template_hole 0, template_var 0),
              template_var 2)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 1), template_var 2)
           ))),
    ("Refinement.hoare_apply",
     "[| {?P} ?R {> ?Q}; ?x : ?P; (?x, ?y) : ?R |] ==> ?y : ?Q",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 3, template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 2, template_var 1),
              template_var 4)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 1,
                template_app
                 (template_app (template_hole 0, template_var 1),
                  template_var 0)),
              template_var 3)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 2, template_var 0), template_var 2)
           ))),
    ("Refinement.behaviour_refinement",
     "[| PO_refines ?R ?Ta ?Tc; ?bc : beh ?Tc |]
      ==> EX ba:beh ?Ta. (ba, ?bc) : seq_lift ?R",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 7, template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 6, template_var 0),
              template_app (template_hole 5, template_var 1))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 4,
               template_app (template_hole 3, template_var 2)),
             t_empty)
           ))),
    ("Refinement.PO_refinesI",
     "[| init ?Tc <= ?R `` init ?Ta;
         {?R} TS.trans ?Ta, TS.trans ?Tc {> ?R} |]
      ==> PO_refines ?R ?Ta ?Tc",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 6, template_var 2),
          template_app
           (template_app (template_hole 5, template_var 1),
            template_app (template_hole 4, template_var 0))),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 3, template_var 1),
                  template_app (template_hole 2, template_var 0)),
                template_app (template_hole 1, template_var 2)),
              template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0),
             template_var 2)
           ))),
    ("Refinement.inv_rule",
     "[| init ?T <= ?I; ?I <= ?P; {?I} TS.trans ?T {> ?I} |]
      ==> reach ?T <= ?P",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 3, template_var 2),
          template_var 1),
        template_inequation (less_equals, template_var 1, template_var 0),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 2, template_var 1),
                template_app (template_hole 1, template_var 2)),
              template_var 1)
            )],
       template_inequation
        (less_equals, template_app (template_hole 0, template_var 2),
         template_var 0))),
    ("Refinement.rhoare_trans",
     "[| {?R1.0} ?T1.0, ?T2.0 {> ?R1.0}; {?R2.0} ?T2.0, ?T3.0 {> ?R2.0} |]
      ==> {?R1.0 O ?R2.0} ?T1.0, ?T3.0 {> ?R1.0 O ?R2.0}",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 3, template_var 4),
                  template_var 3),
                template_var 2),
              template_var 4)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 2, template_var 1),
                  template_var 2),
                template_var 0),
              template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 1,
                   template_app
                    (template_app (template_hole 0, template_var 4),
                     template_var 1)),
                 template_var 3),
               template_var 0),
             template_app
              (template_app (template_hole 0, template_var 4),
               template_var 1))
           ))),
    ("Refinement.obs_consistent_trans",
     "[| obs_consistent ?R1.0 ?pi1.0 ?S1.0 ?S2.0;
         obs_consistent ?R2.0 ?pi2.0 ?S2.0 ?S3.0 |]
      ==> obs_consistent (?R1.0 O ?R2.0) (?pi1.0 o ?pi2.0) ?S1.0 ?S3.0",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 4, template_var 6),
                  template_var 5),
                template_var 4),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 3, template_var 2),
                  template_var 1),
                template_var 3),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app (template_hole 1, template_var 6),
                     template_var 2)),
                 template_app
                  (template_app (template_hole 0, template_var 5),
                   template_var 1)),
               template_var 4),
             template_var 0)
           ))),
    ("Refinement.refinement_transitive",
     "[| refines ?R1.0 ?pi1.0 ?S1.0 ?S2.0;
         refines ?R2.0 ?pi2.0 ?S2.0 ?S3.0 |]
      ==> refines (?R1.0 O ?R2.0) (?pi1.0 o ?pi2.0) ?S1.0 ?S3.0",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 4, template_var 6),
                  template_var 5),
                template_var 4),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 3, template_var 2),
                  template_var 1),
                template_var 3),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app (template_hole 1, template_var 6),
                     template_var 2)),
                 template_app
                  (template_app (template_hole 0, template_var 5),
                   template_var 1)),
               template_var 4),
             template_var 0)
           ))),
    ("Refinement.external_equiv_internal_invariant",
     "[| obs ?S ` ?P = ?Q; observable (obs ?S) ?P |]
      ==> (oreach ?S <= ?Q) = (reach ?S <= ?P)",
     template_implication
      ([template_equation
         (template_app
           (template_app
             (template_hole 7,
              template_app (template_hole 6, template_var 2)),
            template_var 1),
          template_var 0),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app (template_hole 6, template_var 2)),
              template_var 1)
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 3,
             template_app (template_hole 2, template_var 2)),
           template_var 0),
         template_app
          (template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 2)),
           template_var 1)))),
    ("Refinement.external_invariant_translation",
     "[| oreach ?Sa <= ?Q; ?pi -` ?Q <= ?P; implements ?pi ?Sa ?Sc |]
      ==> oreach ?Sc <= ?P",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 4, template_var 4),
          template_var 3),
        template_inequation
         (less_equals,
          template_app
           (template_app (template_hole 2, template_var 2), template_var 3),
          template_var 1),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 1, template_var 2),
                template_var 4),
              template_var 0)
            )],
       template_inequation
        (less_equals, template_app (template_hole 0, template_var 0),
         template_var 1))),
    ("Refinement.INV_trans_from_refinement",
     "[| PO_refines ?R ?Ta ?Tc; ?K <= Range ?R; Range ?R <= ?I |]
      ==> {?K} TS.trans ?Tc {> ?I}",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 4, template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_inequation
         (less_equals, template_var 1,
          template_app (template_hole 2, template_var 4)),
        template_inequation
         (less_equals, template_app (template_hole 2, template_var 4),
          template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 1, template_var 1),
               template_app (template_hole 0, template_var 2)),
             template_var 0)
           ))),
    ("Refinement.refinesE",
     "[| refines ?R ?pi ?Sa ?Sc;
         [| PO_refines ?R ?Sa ?Sc; obs_consistent ?R ?pi ?Sa ?Sc |]
         ==> ?P |]
      ==> ?P",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 2, template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_implication
         ([template_predicate
            (
               template_app
                (template_app
                  (template_app (template_hole 1, template_var 4),
                   template_var 2),
                 template_var 1)
               )],
          template_implication
           ([template_predicate
              (
                 template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 0, template_var 4),
                       template_var 3),
                     template_var 2),
                   template_var 1)
                 )],
            template_predicate (template_var 0)))],
       template_predicate (template_var 0))),
    ("Refinement.external_to_internal_invariant",
     "[| oreach ?S <= ?Q; ?Q <= obs ?S ` ?P; observable (obs ?S) ?P |]
      ==> reach ?S <= ?P",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 5, template_var 2),
          template_var 1),
        template_inequation
         (less_equals, template_var 1,
          template_app
           (template_app
             (template_hole 4,
              template_app (template_hole 3, template_var 2)),
            template_var 0)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app (template_hole 3, template_var 2)),
              template_var 0)
            )],
       template_inequation
        (less_equals, template_app (template_hole 0, template_var 2),
         template_var 0))),
    ("Refinement.INV_trans_from_Refinement",
     "[| refines ?R ?pi ?Sa ?Sc; ?K <= Range ?R; Range ?R <= ?I |]
      ==> {?K} TS.trans ?Sc {> ?I}",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 4, template_var 5),
                  template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_inequation
         (less_equals, template_var 1,
          template_app (template_hole 2, template_var 5)),
        template_inequation
         (less_equals, template_app (template_hole 2, template_var 5),
          template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 1, template_var 1),
               template_app (template_hole 0, template_var 2)),
             template_var 0)
           ))),
    ("Refinement.inv_rule_incr",
     "[| init ?T <= ?I; {?I Int ?J} TS.trans ?T {> ?I}; reach ?T <= ?J |]
      ==> reach ?T <= ?I",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 4, template_var 2),
          template_var 1),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_hole 3,
                  template_app
                   (template_app (template_hole 2, template_var 1),
                    template_var 0)),
                template_app (template_hole 1, template_var 2)),
              template_var 1)
            ),
        template_inequation
         (less_equals, template_app (template_hole 0, template_var 2),
          template_var 0)],
       template_inequation
        (less_equals, template_app (template_hole 0, template_var 2),
         template_var 1))),
    ("Refinement.relhoare_conj_right_det",
     "[| {?pre} ?Ra, ?Rc {> ?post1.0}; {?pre} ?Ra, ?Rc {> ?post2.0};
         single_valued ?Ra |]
      ==> {?pre} ?Ra, ?Rc {> ?post1.0 Int ?post2.0}",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 2, template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 2, template_var 4),
                  template_var 3),
                template_var 2),
              template_var 0)
            ),
        template_predicate
         (template_app (template_hole 1, template_var 3))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 2, template_var 4),
                 template_var 3),
               template_var 2),
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))
           ))),
    ("Refinement.PO_refinesE",
     "[| PO_refines ?R ?Ta ?Tc;
         [| init ?Tc <= ?R `` init ?Ta;
            {?R} TS.trans ?Ta, TS.trans ?Tc {> ?R} |]
         ==> ?P |]
      ==> ?P",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 7, template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_implication
         ([template_inequation
            (less_equals, template_app (template_hole 5, template_var 1),
             template_app
              (template_app (template_hole 4, template_var 3),
               template_app (template_hole 3, template_var 2)))],
          template_implication
           ([template_predicate
              (
                 template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 2, template_var 3),
                       template_app (template_hole 1, template_var 2)),
                     template_app (template_hole 0, template_var 1)),
                   template_var 3)
                 )],
            template_predicate (template_var 0)))],
       template_predicate (template_var 0))),
    ("Refinement.relhoare_cartesian",
     "[| {Domain ?pre} ?Ra {> ?I}; {Range ?pre} ?Rc {> ?J};
         {?pre} ?Ra, ?Rc {> ?post} |]
      ==> {?pre} ?Ra, ?Rc {> ?I \<times> ?J}",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_hole 5,
                  template_app (template_hole 4, template_var 5)),
                template_var 4),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_hole 3,
                  template_app (template_hole 2, template_var 5)),
                template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 1, template_var 5),
                  template_var 4),
                template_var 2),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 1, template_var 5),
                 template_var 4),
               template_var 2),
             template_app
              (template_app (template_hole 0, template_var 3), t_empty))
           ))),
    ("Refinement.Refinement_basic",
     "[| init ?Sc <= ?R `` init ?Sa; {?R} TS.trans ?Sa, TS.trans ?Sc {> ?R};
         obs_consistent ?R ?pi ?Sa ?Sc |]
      ==> refines ?R ?pi ?Sa ?Sc",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 7, template_var 3),
          template_app
           (template_app (template_hole 6, template_var 2),
            template_app (template_hole 5, template_var 1))),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 4, template_var 2),
                  template_app (template_hole 3, template_var 1)),
                template_app (template_hole 2, template_var 3)),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 1, template_var 2),
                  template_var 0),
                template_var 1),
              template_var 3)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 0),
               template_var 1),
             template_var 3)
           ))),
    ("Refinement.relhoare_conj_right_cartesian",
     "[| {Domain ?pre} ?Ra {> ?I}; {Range ?pre} ?Rc {> ?J};
         {?pre} ?Ra, ?Rc {> ?post} |]
      ==> {?pre} ?Ra, ?Rc {> ?post Int ?I \<times> ?J}",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_hole 6,
                  template_app (template_hole 5, template_var 5)),
                template_var 4),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_hole 4,
                  template_app (template_hole 3, template_var 5)),
                template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 2, template_var 5),
                  template_var 4),
                template_var 2),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 2, template_var 5),
                 template_var 4),
               template_var 2),
             template_app
              (template_app (template_hole 1, template_var 0),
               template_app
                (template_app (template_hole 0, template_var 3), t_empty)))
           ))),
    ("Refinement.refine_init_using_invariants",
     "[| init ?Tc <= ?R `` init ?Ta; init ?Ta <= ?I; init ?Tc <= ?J |]
      ==> init ?Tc <= (?R Int ?I \<times> ?J) `` init ?Ta",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 5, template_var 4),
          template_app
           (template_app (template_hole 4, template_var 3),
            template_app (template_hole 3, template_var 2))),
        template_inequation
         (less_equals, template_app (template_hole 3, template_var 2),
          template_var 1),
        template_inequation
         (less_equals, template_app (template_hole 5, template_var 4),
          template_var 0)],
       template_inequation
        (less_equals, template_app (template_hole 5, template_var 4),
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 1, template_var 3),
               template_app
                (template_app (template_hole 0, template_var 1), t_empty))),
           template_app (template_hole 3, template_var 2))))),
    ("Refinement.INV_from_Refinement_using_invariants",
     "[| refines ?R ?pi ?Sa ?Sc; Range (?R Int ?I \<times> ?J) <= ?K;
         reach ?Sa <= ?I; reach ?Sc <= ?J |]
      ==> reach ?Sc <= ?K",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 7, template_var 6),
                  template_var 5),
                template_var 4),
              template_var 3)
            ),
        template_inequation
         (less_equals,
          template_app
           (template_hole 5,
            template_app
             (template_app (template_hole 4, template_var 6),
              template_app
               (template_app (template_hole 3, template_var 2), t_empty))),
          template_var 0),
        template_inequation
         (less_equals, template_app (template_hole 1, template_var 4),
          template_var 2),
        template_inequation
         (less_equals, template_app (template_hole 0, template_var 3),
          template_var 1)],
       template_inequation
        (less_equals, template_app (template_hole 0, template_var 3),
         template_var 0))),
    ("Refinement.obs_consistent_behaviours",
     "[| obs_consistent ?R ?pi ?Sa ?Sc; ?bc : beh ?Sc; ?ba : beh ?Sa;
         (?ba, ?bc) : seq_lift ?R |]
      ==> map ?pi (map (obs ?Sc) ?bc) = map (obs ?Sa) ?ba",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app (template_hole 13, template_var 5),
                  template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 12, template_var 1),
              template_app (template_hole 11, template_var 2))
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 10, template_var 0),
              template_app (template_hole 9, template_var 3))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app
                 (template_app (template_hole 7, template_var 0),
                  template_var 1)),
              template_app (template_hole 6, template_var 5))
            )],
       template_equation
        (template_app
          (template_app (template_hole 4, template_var 4),
           template_app
            (template_app
              (template_hole 3,
               template_app (template_hole 2, template_var 2)),
             template_var 1)),
         template_app
          (template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 3)),
           template_var 0)))),
    ("Refinement.internal_invariant_translation",
     "[| reach ?Sa <= ?Pa; ?Pa <= obs ?Sa -` ?Qa; ?pi -` ?Qa <= ?Q;
         obs ?S -` ?Q <= ?P; implements ?pi ?Sa ?S |]
      ==> reach ?S <= ?P",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 9, template_var 6),
          template_var 5),
        template_inequation
         (less_equals, template_var 5,
          template_app
           (template_app
             (template_hole 8,
              template_app (template_hole 7, template_var 6)),
            template_var 4)),
        template_inequation
         (less_equals,
          template_app
           (template_app (template_hole 5, template_var 3), template_var 4),
          template_var 2),
        template_inequation
         (less_equals,
          template_app
           (template_app
             (template_hole 3,
              template_app (template_hole 2, template_var 1)),
            template_var 2),
          template_var 0),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 1, template_var 3),
                template_var 6),
              template_var 1)
            )],
       template_inequation
        (less_equals, template_app (template_hole 0, template_var 1),
         template_var 0))),
    ("Refinement.sl_cons_right_invert",
     "[| (?ba', ?t # ?bc) : seq_lift ?R;
         !!xs x.
            [| ?ba' = x # xs; (xs, ?bc) : seq_lift ?R; (x, ?t) : ?R |]
            ==> ?P |]
      ==> ?P",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 9,
                template_app
                 (template_app (template_hole 8, template_var 4),
                  template_app
                   (template_app (template_hole 7, template_var 3),
                    template_var 2))),
              template_app (template_hole 6, template_var 1))
            ),
        template_predicate (template_app (template_hole 5, t_empty))],
       template_predicate (template_var 0))),
    ("Refinement.beh_non_empty",
     "[| ?s # ?b : beh ?T; [| ?b = []; ?s : init ?T |] ==> ?P;
         !!s b.
            [| ?b = s # b; s # b : beh ?T; (s, ?s) : TS.trans ?T |]
            ==> ?P |]
      ==> ?P",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 11,
                template_app
                 (template_app (template_hole 10, template_var 3),
                  template_var 2)),
              template_app (template_hole 9, template_var 1))
            ),
        template_implication
         ([template_equation (template_var 2, template_hole 7)],
          template_implication
           ([template_predicate
              (
                 template_app
                  (template_app (template_hole 6, template_var 3),
                   template_app (template_hole 5, template_var 1))
                 )],
            template_predicate (template_var 0))),
        template_predicate (template_app (template_hole 4, t_empty))],
       template_predicate (template_var 0))),
    ("Refinement.refine_trans_using_invariants",
     "[| {?R Int ?I \<times> ?J} TS.trans ?Ta, TS.trans ?Tc {> ?R};
         {?I Int Domain (?R Int UNIV \<times> ?J)} TS.trans ?Ta {> ?I};
         {?J Int Range (?R Int ?I \<times> UNIV)} TS.trans ?Tc {> ?J} |]
      ==> {?R Int
           ?I \<times>
           ?J} TS.trans ?Ta, TS.trans ?Tc {> ?R Int ?I \<times> ?J}",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_hole 12,
                    template_app
                     (template_app (template_hole 11, template_var 4),
                      template_app
                       (template_app (template_hole 10, template_var 3),
                        t_empty))),
                  template_app (template_hole 9, template_var 1)),
                template_app (template_hole 8, template_var 0)),
              template_var 4)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_hole 7,
                  template_app
                   (template_app (template_hole 6, template_var 3),
                    template_app
                     (template_hole 5,
                      template_app
                       (template_app (template_hole 11, template_var 4),
                        template_app
                         (template_app (template_hole 10, template_hole 4),
                          t_empty))))),
                template_app (template_hole 9, template_var 1)),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_hole 3,
                  template_app
                   (template_app (template_hole 2, template_var 2),
                    template_app
                     (template_hole 1,
                      template_app
                       (template_app (template_hole 11, template_var 4),
                        template_app
                         (template_app (template_hole 10, template_var 3),
                          t_empty))))),
                template_app (template_hole 8, template_var 0)),
              template_var 2)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 12,
                   template_app
                    (template_app (template_hole 11, template_var 4),
                     template_app
                      (template_app (template_hole 10, template_var 3),
                       t_empty))),
                 template_app (template_hole 9, template_var 1)),
               template_app (template_hole 8, template_var 0)),
             template_app
              (template_app (template_hole 11, template_var 4),
               template_app
                (template_app (template_hole 10, template_var 3), t_empty)))
           ))),
    ("Refinement.refine_using_invariants",
     "[| {?R Int ?I \<times> ?J} TS.trans ?Ta, TS.trans ?Tc {> ?R};
         {?I Int Domain (?R Int UNIV \<times> ?J)} TS.trans ?Ta {> ?I};
         {?J Int Range (?R Int ?I \<times> UNIV)} TS.trans ?Tc {> ?J};
         init ?Tc <= ?R `` init ?Ta; init ?Ta <= ?I; init ?Tc <= ?J |]
      ==> PO_refines (?R Int ?I \<times> ?J) ?Ta ?Tc",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_hole 18,
                    template_app
                     (template_app (template_hole 17, template_var 4),
                      template_app
                       (template_app (template_hole 16, template_var 3),
                        t_empty))),
                  template_app (template_hole 15, template_var 1)),
                template_app (template_hole 14, template_var 0)),
              template_var 4)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_hole 13,
                  template_app
                   (template_app (template_hole 12, template_var 3),
                    template_app
                     (template_hole 11,
                      template_app
                       (template_app (template_hole 17, template_var 4),
                        template_app
                         (template_app (template_hole 16, template_hole 10),
                          t_empty))))),
                template_app (template_hole 15, template_var 1)),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_hole 9,
                  template_app
                   (template_app (template_hole 8, template_var 2),
                    template_app
                     (template_hole 7,
                      template_app
                       (template_app (template_hole 17, template_var 4),
                        template_app
                         (template_app (template_hole 16, template_var 3),
                          t_empty))))),
                template_app (template_hole 14, template_var 0)),
              template_var 2)
            ),
        template_inequation
         (less_equals, template_app (template_hole 4, template_var 0),
          template_app
           (template_app (template_hole 3, template_var 4),
            template_app (template_hole 2, template_var 1))),
        template_inequation
         (less_equals, template_app (template_hole 2, template_var 1),
          template_var 3),
        template_inequation
         (less_equals, template_app (template_hole 4, template_var 0),
          template_var 2)],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 0,
                 template_app
                  (template_app (template_hole 17, template_var 4),
                   template_app
                    (template_app (template_hole 16, template_var 3),
                     t_empty))),
               template_var 1),
             template_var 0)
           ))),
    ("Refinement.Refinement_using_invariants",
     "[| {?R Int ?I \<times> ?J} TS.trans ?Sa, TS.trans ?Sc {> ?R};
         {?I Int Domain (?R Int UNIV \<times> ?J)} TS.trans ?Sa {> ?I};
         {?J Int Range (?R Int ?I \<times> UNIV)} TS.trans ?Sc {> ?J};
         init ?Sc <= ?R `` init ?Sa; init ?Sa <= ?I; init ?Sc <= ?J;
         obs_consistent (?R Int ?I \<times> ?J) ?pi ?Sa ?Sc |]
      ==> refines (?R Int ?I \<times> ?J) ?pi ?Sa ?Sc",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_hole 19,
                    template_app
                     (template_app (template_hole 18, template_var 5),
                      template_app
                       (template_app (template_hole 17, template_var 4),
                        t_empty))),
                  template_app (template_hole 16, template_var 2)),
                template_app (template_hole 15, template_var 1)),
              template_var 5)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_hole 14,
                  template_app
                   (template_app (template_hole 13, template_var 4),
                    template_app
                     (template_hole 12,
                      template_app
                       (template_app (template_hole 18, template_var 5),
                        template_app
                         (template_app (template_hole 17, template_hole 11),
                          t_empty))))),
                template_app (template_hole 16, template_var 2)),
              template_var 4)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_hole 10,
                  template_app
                   (template_app (template_hole 9, template_var 3),
                    template_app
                     (template_hole 8,
                      template_app
                       (template_app (template_hole 18, template_var 5),
                        template_app
                         (template_app (template_hole 17, template_var 4),
                          t_empty))))),
                template_app (template_hole 15, template_var 1)),
              template_var 3)
            ),
        template_inequation
         (less_equals, template_app (template_hole 5, template_var 1),
          template_app
           (template_app (template_hole 4, template_var 5),
            template_app (template_hole 3, template_var 2))),
        template_inequation
         (less_equals, template_app (template_hole 3, template_var 2),
          template_var 4),
        template_inequation
         (less_equals, template_app (template_hole 5, template_var 1),
          template_var 3),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_hole 1,
                    template_app
                     (template_app (template_hole 18, template_var 5),
                      template_app
                       (template_app (template_hole 17, template_var 4),
                        t_empty))),
                  template_var 0),
                template_var 2),
              template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 0,
                   template_app
                    (template_app (template_hole 18, template_var 5),
                     template_app
                      (template_app (template_hole 17, template_var 4),
                       t_empty))),
                 template_var 0),
               template_var 2),
             template_var 1)
           )))]
