   [("LLL_Impl.basis_reduction_add_rows_loop_code_equations",
     "basis_reduction_add_rows_loop ?n ?state ?i ?j [] = ?state",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0),
         template_hole 0),
       template_var 2)),
    ("LLL_Impl.round_num_denom",
     "round_num_denom ?num ?denom =
      round (rat_of_int ?num / rat_of_int ?denom)",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 1), template_var 0),
       template_app
        (template_hole 2,
         template_app
          (template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 1)),
           template_app (template_hole 0, template_var 0))))),
    ("LLL_Impl.map_rev_Suc",
     "map ?f (rev [0..<Suc ?j]) = ?f ?j # map ?f (rev [0..<?j])",
     template_equation
      (template_app
        (template_app (template_hole 5, template_var 1),
         template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app (template_hole 1, template_var 0)))),
       template_app
        (template_app
          (template_hole 0, template_app (template_var 1, template_var 0)),
         template_app
          (template_app (template_hole 5, template_var 1),
           template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_var 0)))))),
    ("LLL_Impl.basis_reduction_swap_code",
     "basis_reduction_swap ?m ?i ((?f1.0, ?f2.0), ?dmus, ?ds) =
      (let di = ?ds !! ?i; dsi = ?ds !! Suc ?i; im1 = ?i - 1;
           dim1 = ?ds !! im1; fi = hd ?f2.0; fim1 = hd ?f1.0;
           dmu_i_im1 = ?dmus !! ?i !! im1; fi' = fim1; fim1' = fi
       in (False, im1, (tl ?f1.0, fim1' # fi' # tl ?f2.0),
           swap_mu ?m ?dmus ?i dmu_i_im1 dim1 di dsi,
           iarray_update ?ds ?i
            ((dsi * dim1 + dmu_i_im1 * dmu_i_im1) div di)))",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 22, template_var 5), template_var 4),
         template_app
          (template_app
            (template_hole 21,
             template_app
              (template_app (template_hole 20, template_var 3),
               template_var 2)),
           template_app
            (template_app (template_hole 19, template_var 1),
             template_var 0))),
       template_app
        (template_app
          (template_hole 18,
           template_app
            (template_app (template_hole 17, template_var 0),
             template_var 4)),
         t_empty))),
    ("LLL_Impl.basis_reduction_add_rows_loop_code",
     "basis_reduction_add_rows_loop ?n ?state ?i ?sj (?fj # ?fjs) =
      (case ?state of
       ((f1, f2), mus, ds) =>
         let fi = hd f2; j = ?sj - 1; dsj = ds !! ?sj; mui = mus !! ?i;
             c = round_num_denom (mui !! j) dsj
         in if c = 0 then basis_reduction_add_rows_loop ?n ?state ?i j ?fjs
            else let muj = mus !! j
                 in basis_reduction_add_rows_loop ?n
                     ((f1, vec ?n (%i. fi $ i - c * ?fj $ i) # tl f2),
                      iarray_update mus ?i
                       (IArray.of_fun
                         (%jj. let mu = mui !! jj
                               in if jj < j then mu - c * muj !! jj
                                  else if jj = j then mu - dsj * c else mu)
                         ?i),
                      ds)
                     ?i j ?fjs)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 31, template_var 5),
               template_var 4),
             template_var 3),
           template_var 2),
         template_app
          (template_app (template_hole 30, template_var 1),
           template_var 0)),
       template_app
        (template_app (template_hole 29, t_empty), template_var 4)))]
