   [("QR_Decomposition.divide_by_norm_code",
     "($) (divide_by_norm ?A) = divide_by_norm_row ?A",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app (template_hole 0, template_var 0))),
    ("QR_Decomposition.orthogonal_fst_QR_decomposition",
     "pairwise orthogonal (columns (fst (QR_decomposition ?A)))",
     template_predicate
      (
         template_app
          (template_app (template_hole 4, template_hole 3),
           template_app
            (template_hole 2,
             template_app
              (template_hole 1,
               template_app (template_hole 0, template_var 0))))
         )),
    ("QR_Decomposition.col_space_QR_decomposition",
     "col_space ?A = col_space (fst (QR_decomposition ?A))",
     template_equation
      (template_app (template_hole 2, template_var 0),
       template_app
        (template_hole 2,
         template_app
          (template_hole 1,
           template_app (template_hole 0, template_var 0))))),
    ("QR_Decomposition.span_columns_divide_by_norm",
     "span (columns ?A) = span (columns (divide_by_norm ?A))",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 2,
         template_app
          (template_hole 1,
           template_app (template_hole 0, template_var 0))))),
    ("QR_Decomposition.span_fst_QR_decomposition",
     "vec.span (columns ?A) =
      vec.span (columns (fst (QR_decomposition ?A)))",
     template_equation
      (template_app
        (template_app (template_hole 4, template_hole 3),
         template_app (template_hole 2, template_var 0)),
       template_app
        (template_app (template_hole 4, template_hole 3),
         template_app
          (template_hole 2,
           template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 0)))))),
    ("QR_Decomposition.upper_triangular_snd_QR_decomposition",
     "rank ?A = ncols ?A ==> upper_triangular (snd (QR_decomposition ?A))",
     template_implication
      ([template_equation
         (template_app (template_hole 4, template_var 0),
          template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_hole 1,
               template_app (template_hole 0, template_var 0)))
           ))),
    ("QR_Decomposition.invertible_snd_QR_decomposition",
     "rank ?A = ncols ?A ==> invertible (snd (QR_decomposition ?A))",
     template_implication
      ([template_equation
         (template_app (template_hole 4, template_var 0),
          template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_hole 1,
               template_app (template_hole 0, template_var 0)))
           ))),
    ("QR_Decomposition.orthogonal_matrix_fst_QR_decomposition'",
     "rank ?A = ncols ?A ==> orthogonal_matrix (fst (QR_decomposition ?A))",
     template_implication
      ([template_equation
         (template_app (template_hole 4, template_var 0),
          template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_hole 1,
               template_app (template_hole 0, template_var 0)))
           ))),
    ("QR_Decomposition.norm_columns_fst_QR_decomposition",
     "rank ?A = ncols ?A ==>
      norm (column ?i (fst (QR_decomposition ?A))) = 1",
     template_implication
      ([template_equation
         (template_app (template_hole 7, template_var 1),
          template_app (template_hole 6, template_var 1))],
       template_equation
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 0),
             template_app
              (template_hole 2,
               template_app (template_hole 1, template_var 1)))),
         template_hole 0))),
    ("QR_Decomposition.norm_column_divide_by_norm",
     "column ?a ?A ~= 0 ==> norm (column ?a (divide_by_norm ?A)) = 1",
     template_implication
      ([template_negation
         (
            template_equation
             (template_app
               (template_app (template_hole 5, template_var 1),
                template_var 0),
              template_hole 4)
            )],
       template_equation
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 5, template_var 1),
             template_app (template_hole 1, template_var 0))),
         template_hole 0))),
    ("QR_Decomposition.QR_decomposition_mult",
     "rank ?A = ncols ?A ==>
      ?A = fst (QR_decomposition ?A) ** snd (QR_decomposition ?A)",
     template_implication
      ([template_equation
         (template_app (template_hole 6, template_var 0),
          template_app (template_hole 5, template_var 0))],
       template_equation
        (template_var 0,
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_hole 2,
               template_app (template_hole 1, template_var 0))),
           template_app
            (template_hole 0,
             template_app (template_hole 1, template_var 0)))))),
    ("QR_Decomposition.R_Qi_Aj",
     "snd (QR_decomposition ?A) $ ?i $ ?j =
      column ?i (fst (QR_decomposition ?A)) \<bullet> column ?j ?A",
     template_equation
      (template_app
        (template_app
          (template_hole 6,
           template_app
            (template_app
              (template_hole 5,
               template_app
                (template_hole 4,
                 template_app (template_hole 3, template_var 2))),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 1),
             template_app
              (template_hole 0,
               template_app (template_hole 3, template_var 2)))),
         template_app
          (template_app (template_hole 1, template_var 0),
           template_var 2)))),
    ("QR_Decomposition.divide_by_norm_row_code",
     "($) (divide_by_norm_row ?A ?a) =
      (%b. ((1 / norm (column b ?A)) *\<^sub>R column b ?A) $ ?a)",
     template_equation
      (template_app
        (template_hole 7,
         template_app
          (template_app (template_hole 6, template_var 1), template_var 0)),
       t_empty)),
    ("QR_Decomposition.qk_uk_norm",
     "(1 / norm (column ?k (Gram_Schmidt_matrix ?A))) *\<^sub>R
      column ?k (Gram_Schmidt_matrix ?A) =
      column ?k (fst (QR_decomposition ?A))",
     template_equation
      (template_app
        (template_app
          (template_hole 7,
           template_app
            (template_app (template_hole 6, template_hole 5),
             template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_var 1),
                 template_app (template_hole 2, template_var 0))))),
         template_app
          (template_app (template_hole 3, template_var 1),
           template_app (template_hole 2, template_var 0))),
       template_app
        (template_app (template_hole 3, template_var 1),
         template_app
          (template_hole 1,
           template_app (template_hole 0, template_var 0))))),
    ("QR_Decomposition.orthogonal_matrix_fst_QR_decomposition",
     "rank ?A = ncols ?A ==>
      Finite_Cartesian_Product.transpose (fst (QR_decomposition ?A)) **
      fst (QR_decomposition ?A) =
      mat 1",
     template_implication
      ([template_equation
         (template_app (template_hole 8, template_var 0),
          template_app (template_hole 7, template_var 0))],
       template_equation
        (template_app
          (template_app
            (template_hole 5,
             template_app
              (template_hole 4,
               template_app
                (template_hole 3,
                 template_app (template_hole 2, template_var 0)))),
           template_app
            (template_hole 3,
             template_app (template_hole 2, template_var 0))),
         template_app (template_hole 1, template_hole 0)))),
    ("QR_Decomposition.upper_triangular_invertible",
     "[| upper_triangular ?A; ALL i. ?A $ i $ i ~= 0 |] ==> invertible ?A",
     template_implication
      ([template_predicate (template_app (template_hole 7, template_var 0)),
        template_predicate (template_app (template_hole 6, t_empty))],
       template_predicate
        (template_app (template_hole 0, template_var 0)))),
    ("QR_Decomposition.norm_uk_eq",
     "rank ?A = ncols ?A ==>
      norm (column ?k (Gram_Schmidt_matrix ?A)) =
      column ?k (fst (QR_decomposition ?A)) \<bullet> column ?k ?A",
     template_implication
      ([template_equation
         (template_app (template_hole 8, template_var 1),
          template_app (template_hole 7, template_var 1))],
       template_equation
        (template_app
          (template_hole 5,
           template_app
            (template_app (template_hole 4, template_var 0),
             template_app (template_hole 3, template_var 1))),
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 4, template_var 0),
               template_app
                (template_hole 1,
                 template_app (template_hole 0, template_var 1)))),
           template_app
            (template_app (template_hole 4, template_var 0),
             template_var 1))))),
    ("QR_Decomposition.det_QR_decomposition",
     "rank ?A = ncols ?A ==>
      \<bar>det ?A\<bar> =
      \<bar>PROD i:UNIV. snd (QR_decomposition ?A) $ i $ i\<bar>",
     template_implication
      ([template_equation
         (template_app (template_hole 10, template_var 0),
          template_app (template_hole 9, template_var 0))],
       template_equation
        (template_app
          (template_hole 7, template_app (template_hole 6, template_var 0)),
         template_app
          (template_hole 7,
           template_app
            (template_app (template_hole 5, t_empty), template_hole 0))))),
    ("QR_Decomposition.scaler_column_fst_QR_decomposition",
     "[| ?j < ?i; rank ?A = ncols ?A |]
      ==> column ?i (fst (QR_decomposition ?A)) \<bullet> column ?j ?A = 0",
     template_implication
      ([template_inequation (less_than, template_var 2, template_var 1),
        template_equation
         (template_app (template_hole 7, template_var 0),
          template_app (template_hole 6, template_var 0))],
       template_equation
        (template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_var 1),
               template_app
                (template_hole 2,
                 template_app (template_hole 1, template_var 0)))),
           template_app
            (template_app (template_hole 3, template_var 2),
             template_var 0)),
         template_hole 0))),
    ("QR_Decomposition.column_eq_fst_QR_decomposition",
     "[| rank ?A = ncols ?A;
         column ?i (fst (QR_decomposition ?A)) =
         column ?ia (fst (QR_decomposition ?A)) |]
      ==> ?i = ?ia",
     template_implication
      ([template_equation
         (template_app (template_hole 6, template_var 2),
          template_app (template_hole 5, template_var 2)),
        template_equation
         (template_app
           (template_app (template_hole 3, template_var 1),
            template_app
             (template_hole 2,
              template_app (template_hole 1, template_var 2))),
          template_app
           (template_app (template_hole 3, template_var 0),
            template_app
             (template_hole 2,
              template_app (template_hole 1, template_var 2))))],
       template_equation (template_var 1, template_var 0))),
    ("QR_Decomposition.orthogonal_columns_fst_QR_decomposition",
     "column ?i (fst (QR_decomposition ?A)) ~=
      column ?ia (fst (QR_decomposition ?A)) ==>
      column ?i (fst (QR_decomposition ?A)) \<bullet>
      column ?ia (fst (QR_decomposition ?A)) =
      0",
     template_implication
      ([template_negation
         (
            template_equation
             (template_app
               (template_app (template_hole 5, template_var 2),
                template_app
                 (template_hole 4,
                  template_app (template_hole 3, template_var 1))),
              template_app
               (template_app (template_hole 5, template_var 0),
                template_app
                 (template_hole 4,
                  template_app (template_hole 3, template_var 1))))
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 5, template_var 2),
               template_app
                (template_hole 4,
                 template_app (template_hole 3, template_var 1)))),
           template_app
            (template_app (template_hole 5, template_var 0),
             template_app
              (template_hole 4,
               template_app (template_hole 3, template_var 1)))),
         template_hole 0))),
    ("QR_Decomposition.is_basis_columns_fst_QR_decomposition",
     "[| is_basis (columns ?A); card (columns ?A) = ncols ?A |]
      ==> is_basis (columns (fst (QR_decomposition ?A))) &
          card (columns (fst (QR_decomposition ?A))) = ncols ?A",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 7,
              template_app (template_hole 6, template_var 0))
            ),
        template_equation
         (template_app
           (template_hole 4,
            template_app (template_hole 6, template_var 0)),
          template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_hole 7,
                 template_app
                  (template_hole 6,
                   template_app
                    (template_hole 1,
                     template_app (template_hole 0, template_var 0))))),
             template_app
              (template_app
                (template_hole 5,
                 template_app
                  (template_hole 4,
                   template_app
                    (template_hole 6,
                     template_app
                      (template_hole 1,
                       template_app (template_hole 0, template_var 0))))),
               template_app (template_hole 3, template_var 0)))
           ))),
    ("QR_Decomposition.independent_columns_fst_QR_decomposition",
     "[| vec.independent (columns ?A); card (columns ?A) = ncols ?A |]
      ==> vec.independent (columns (fst (QR_decomposition ?A))) &
          card (columns (fst (QR_decomposition ?A))) = ncols ?A",
     template_implication
      ([template_negation
         (
            template_predicate
             (
                template_app
                 (template_app (template_hole 8, template_hole 7),
                  template_app (template_hole 6, template_var 0))
                )
            ),
        template_equation
         (template_app
           (template_hole 4,
            template_app (template_hole 6, template_var 0)),
          template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_hole 9,
                 template_app
                  (template_app (template_hole 8, template_hole 7),
                   template_app
                    (template_hole 6,
                     template_app
                      (template_hole 1,
                       template_app (template_hole 0, template_var 0)))))),
             template_app
              (template_app
                (template_hole 5,
                 template_app
                  (template_hole 4,
                   template_app
                    (template_hole 6,
                     template_app
                      (template_hole 1,
                       template_app (template_hole 0, template_var 0))))),
               template_app (template_hole 3, template_var 0)))
           ))),
    ("QR_Decomposition.sums_columns_Q_0",
     "rank ?A = ncols ?A ==>
      (SUM x:{column i (fst (QR_decomposition ?A)) |i. ?b < i}.
          x \<bullet> column ?b ?A * x $ ?a) =
      0",
     template_implication
      ([template_equation
         (template_app (template_hole 15, template_var 2),
          template_app (template_hole 14, template_var 2))],
       template_equation
        (template_app
          (template_app (template_hole 12, t_empty),
           template_app (template_hole 7, t_empty)),
         template_hole 0))),
    ("QR_Decomposition.column_QR_decomposition2",
     "rank ?A = ncols ?A ==>
      column ?k ?A =
      (SUM x:{column i (fst (QR_decomposition ?A)) |i. i <= ?k}.
          (x \<bullet> column ?k ?A) *\<^sub>R x)",
     template_implication
      ([template_equation
         (template_app (template_hole 12, template_var 1),
          template_app (template_hole 11, template_var 1))],
       template_equation
        (template_app
          (template_app (template_hole 9, template_var 0), template_var 1),
         template_app
          (template_app (template_hole 8, t_empty),
           template_app (template_hole 5, t_empty))))),
    ("QR_Decomposition.column_QR_decomposition'",
     "rank ?A = ncols ?A ==>
      column ?k ?A =
      column ?k (Gram_Schmidt_matrix ?A) +
      (SUM x:{column i (fst (QR_decomposition ?A)) |i. i < ?k}.
          (x \<bullet> column ?k ?A / (x \<bullet> x)) *\<^sub>R x)",
     template_implication
      ([template_equation
         (template_app (template_hole 15, template_var 1),
          template_app (template_hole 14, template_var 1))],
       template_equation
        (template_app
          (template_app (template_hole 12, template_var 0), template_var 1),
         template_app
          (template_app
            (template_hole 11,
             template_app
              (template_app (template_hole 12, template_var 0),
               template_app (template_hole 10, template_var 1))),
           template_app
            (template_app (template_hole 9, t_empty),
             template_app (template_hole 5, t_empty)))))),
    ("QR_Decomposition.column_QR_decomposition",
     "rank ?A = ncols ?A ==>
      column ?k (Gram_Schmidt_matrix ?A) =
      column ?k ?A -
      (SUM x:{column i (fst (QR_decomposition ?A)) |i. i < ?k}.
          (x \<bullet> column ?k ?A / (x \<bullet> x)) *\<^sub>R x)",
     template_implication
      ([template_equation
         (template_app (template_hole 15, template_var 1),
          template_app (template_hole 14, template_var 1))],
       template_equation
        (template_app
          (template_app (template_hole 12, template_var 0),
           template_app (template_hole 11, template_var 1)),
         template_app
          (template_app
            (template_hole 10,
             template_app
              (template_app (template_hole 12, template_var 0),
               template_var 1)),
           template_app
            (template_app (template_hole 9, t_empty),
             template_app (template_hole 5, t_empty)))))),
    ("QR_Decomposition.QR_decomposition_square",
     "rank ?A = ncols ?A ==>
      ?A = fst (QR_decomposition ?A) ** snd (QR_decomposition ?A) &
      orthogonal_matrix (fst (QR_decomposition ?A)) &
      upper_triangular (snd (QR_decomposition ?A)) &
      invertible (snd (QR_decomposition ?A)) &
      pairwise orthogonal (columns (fst (QR_decomposition ?A))) &
      (ALL i. norm (column i (fst (QR_decomposition ?A))) = 1) &
      vec.independent (columns (fst (QR_decomposition ?A))) &
      col_space ?A = col_space (fst (QR_decomposition ?A)) &
      card (columns ?A) = card (columns (fst (QR_decomposition ?A)))",
     template_implication
      ([template_equation
         (template_app (template_hole 24, template_var 0),
          template_app (template_hole 23, template_var 0))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 22,
               template_app
                (template_app (template_hole 21, template_var 0),
                 template_app
                  (template_app
                    (template_hole 20,
                     template_app
                      (template_hole 19,
                       template_app (template_hole 18, template_var 0))),
                   template_app
                    (template_hole 17,
                     template_app (template_hole 18, template_var 0))))),
             template_app
              (template_app
                (template_hole 22,
                 template_app
                  (template_hole 16,
                   template_app
                    (template_hole 19,
                     template_app (template_hole 18, template_var 0)))),
               template_app
                (template_app
                  (template_hole 22,
                   template_app
                    (template_hole 15,
                     template_app
                      (template_hole 17,
                       template_app (template_hole 18, template_var 0)))),
                 template_app
                  (template_app
                    (template_hole 22,
                     template_app
                      (template_hole 14,
                       template_app
                        (template_hole 17,
                         template_app (template_hole 18, template_var 0)))),
                   template_app
                    (template_app
                      (template_hole 22,
                       template_app
                        (template_app (template_hole 13, template_hole 12),
                         template_app
                          (template_hole 11,
                           template_app
                            (template_hole 19,
                             template_app
                              (template_hole 18, template_var 0))))),
                     template_app
                      (template_app
                        (template_hole 22,
                         template_app (template_hole 10, t_empty)),
                       template_app
                        (template_app
                          (template_hole 22,
                           template_app
                            (template_hole 5,
                             template_app
                              (template_app
                                (template_hole 4, template_hole 3),
                               template_app
                                (template_hole 11,
                                 template_app
                                  (template_hole 19,
                                   template_app
                                    (template_hole 18, template_var 0)))))),
                         template_app
                          (template_app
                            (template_hole 22,
                             template_app
                              (template_app
                                (template_hole 2,
                                 template_app
                                  (template_hole 1, template_var 0)),
                               template_app
                                (template_hole 1,
                                 template_app
                                  (template_hole 19,
                                   template_app
                                    (template_hole 18, template_var 0))))),
                           template_app
                            (template_app
                              (template_hole 25,
                               template_app
                                (template_hole 0,
                                 template_app
                                  (template_hole 11, template_var 0))),
                             template_app
                              (template_hole 0,
                               template_app
                                (template_hole 11,
                                 template_app
                                  (template_hole 19,
                                   template_app
                                    (template_hole 18,
                                     template_var 0)))))))))))))
           ))),
    ("QR_Decomposition.QR_decomposition",
     "rank ?A = ncols ?A ==>
      ?A = fst (QR_decomposition ?A) ** snd (QR_decomposition ?A) &
      pairwise orthogonal (columns (fst (QR_decomposition ?A))) &
      (ALL i. norm (column i (fst (QR_decomposition ?A))) = 1) &
      Finite_Cartesian_Product.transpose (fst (QR_decomposition ?A)) **
      fst (QR_decomposition ?A) =
      mat 1 &
      vec.independent (columns (fst (QR_decomposition ?A))) &
      col_space ?A = col_space (fst (QR_decomposition ?A)) &
      card (columns ?A) = card (columns (fst (QR_decomposition ?A))) &
      invertible (snd (QR_decomposition ?A)) &
      upper_triangular (snd (QR_decomposition ?A))",
     template_implication
      ([template_equation
         (template_app (template_hole 27, template_var 0),
          template_app (template_hole 26, template_var 0))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 25,
               template_app
                (template_app (template_hole 24, template_var 0),
                 template_app
                  (template_app
                    (template_hole 23,
                     template_app
                      (template_hole 22,
                       template_app (template_hole 21, template_var 0))),
                   template_app
                    (template_hole 20,
                     template_app (template_hole 21, template_var 0))))),
             template_app
              (template_app
                (template_hole 25,
                 template_app
                  (template_app (template_hole 19, template_hole 18),
                   template_app
                    (template_hole 17,
                     template_app
                      (template_hole 22,
                       template_app (template_hole 21, template_var 0))))),
               template_app
                (template_app
                  (template_hole 25,
                   template_app (template_hole 16, t_empty)),
                 template_app
                  (template_app
                    (template_hole 25,
                     template_app
                      (template_app
                        (template_hole 11,
                         template_app
                          (template_app
                            (template_hole 10,
                             template_app
                              (template_hole 9,
                               template_app
                                (template_hole 22,
                                 template_app
                                  (template_hole 21, template_var 0)))),
                           template_app
                            (template_hole 22,
                             template_app
                              (template_hole 21, template_var 0)))),
                       template_app (template_hole 8, template_hole 12))),
                   template_app
                    (template_app
                      (template_hole 25,
                       template_app
                        (template_hole 7,
                         template_app
                          (template_app (template_hole 6, template_hole 5),
                           template_app
                            (template_hole 17,
                             template_app
                              (template_hole 22,
                               template_app
                                (template_hole 21, template_var 0)))))),
                     template_app
                      (template_app
                        (template_hole 25,
                         template_app
                          (template_app
                            (template_hole 4,
                             template_app
                              (template_hole 3, template_var 0)),
                           template_app
                            (template_hole 3,
                             template_app
                              (template_hole 22,
                               template_app
                                (template_hole 21, template_var 0))))),
                       template_app
                        (template_app
                          (template_hole 25,
                           template_app
                            (template_app
                              (template_hole 28,
                               template_app
                                (template_hole 2,
                                 template_app
                                  (template_hole 17, template_var 0))),
                             template_app
                              (template_hole 2,
                               template_app
                                (template_hole 17,
                                 template_app
                                  (template_hole 22,
                                   template_app
                                    (template_hole 21, template_var 0)))))),
                         template_app
                          (template_app
                            (template_hole 25,
                             template_app
                              (template_hole 1,
                               template_app
                                (template_hole 20,
                                 template_app
                                  (template_hole 21, template_var 0)))),
                           template_app
                            (template_hole 0,
                             template_app
                              (template_hole 20,
                               template_app
                                (template_hole 21, template_var 0)))))))))))
           )))]
