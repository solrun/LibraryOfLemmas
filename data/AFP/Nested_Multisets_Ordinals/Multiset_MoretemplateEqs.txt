   [("Multiset_More.mset_list_of_mset", "mset (list_of_mset ?m) = ?m",
     template_equation
      (template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)),
       template_var 0)),
    ("Multiset_More.Sigma_mset_empty1", "Sigma_mset {#} ?B = {#}",
     template_equation
      (template_app
        (template_app (template_hole 2, template_hole 1), template_var 0),
       template_hole 0)),
    ("Multiset_More.length_list_of_mset",
     "length (list_of_mset ?A) = size ?A",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app (template_hole 0, template_var 0))),
    ("Multiset_More.length_sorted_list_of_multiset",
     "length (sorted_list_of_multiset ?A) = size ?A",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app (template_hole 0, template_var 0))),
    ("Multiset_More.set_mset_remdups_mset",
     "set_mset (remdups_mset ?A) = set_mset ?A",
     template_equation
      (template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)),
       template_app (template_hole 1, template_var 0))),
    ("Multiset_More.mset_sorted_list_of_set",
     "mset (sorted_list_of_set ?A) = mset_set ?A",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app (template_hole 0, template_var 0))),
    ("Multiset_More.Sigma_mset_empty2", "?A \<times># {#} = {#}",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 0), t_empty),
       template_hole 0)),
    ("Multiset_More.mset_remdups_remdups_mset",
     "mset (remdups ?D) = remdups_mset (mset ?D)",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 0, template_app (template_hole 2, template_var 0)))),
    ("Multiset_More.list_of_mset_empty",
     "(list_of_mset ?m = []) = (?m = {#})",
     template_bimplication
      (template_equation
        (template_app (template_hole 3, template_var 0), template_hole 2),
       template_equation (template_var 0, template_hole 0))),
    ("Multiset_More.sorted_list_of_multiset_eq_Nil",
     "(sorted_list_of_multiset ?M = []) = (?M = {#})",
     template_bimplication
      (template_equation
        (template_app (template_hole 3, template_var 0), template_hole 2),
       template_equation (template_var 0, template_hole 0))),
    ("Multiset_More.remdups_mset_eq_empty",
     "(remdups_mset ?D = {#}) = (?D = {#})",
     template_bimplication
      (template_equation
        (template_app (template_hole 1, template_var 0), template_hole 0),
       template_equation (template_var 0, template_hole 0))),
    ("Multiset_More.mset_replicate_replicate_mset",
     "mset (replicate ?n ?L) = replicate_mset ?n ?L",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app (template_hole 0, template_var 1), template_var 0))),
    ("Multiset_More.remdups_mset_singleton", "remdups_mset {#?a#} = {#?a#}",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 0),
           template_hole 0)),
       template_app
        (template_app (template_hole 1, template_var 0), template_hole 0))),
    ("Multiset_More.iterate_op_plus", "((+) ?k ^^ ?m) 0 = ?k * ?m",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 3, template_var 1),
           template_app (template_hole 2, template_var 0)),
         template_hole 1),
       template_app
        (template_app (template_hole 0, template_var 0), template_var 1))),
    ("Multiset_More.mset_set_set_mset_empty_mempty",
     "(mset_set (set_mset ?D) = {#}) = (?D = {#})",
     template_bimplication
      (template_equation
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 0)),
         template_hole 0),
       template_equation (template_var 0, template_hole 0))),
    ("Multiset_More.repeat_mset_compower",
     "repeat_mset ?n ?A = ((+) ?A ^^ ?n) {#}",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 1), template_var 0),
       template_app
        (template_app
          (template_app (template_hole 2, template_var 1),
           template_app (template_hole 1, template_var 0)),
         template_hole 0))),
    ("Multiset_More.diff_intersect_sym_diff",
     "(?A - ?B) \<inter># (?B - ?A) = {#}",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 1),
             template_var 0)),
         template_app
          (template_app (template_hole 1, template_var 0), template_var 1)),
       template_hole 0)),
    ("Multiset_More.sum_image_mset_sum_map",
     "\<Sum>\<^sub># (image_mset ?f (mset ?xs)) = sum_list (map ?f ?xs)",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_var 1),
           template_app (template_hole 2, template_var 0))),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Multiset_More.filter_mset_eq",
     "filter_mset ((=) ?L) ?A = replicate_mset (count ?A ?L) ?L",
     template_equation
      (template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 0),
             template_var 1)),
         template_var 1))),
    ("Multiset_More.replicate_mset_subset_iff_lt",
     "(replicate_mset ?m ?x <# replicate_mset ?n ?x) = (?m < ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_app
          (template_app (template_hole 1, template_var 0), template_var 1)),
       template_app
        (template_app (template_hole 0, template_var 2), template_var 0))),
    ("Multiset_More.replicate_mset_subseteq_iff_le",
     "(replicate_mset ?m ?x <=# replicate_mset ?n ?x) = (?m <= ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_app
          (template_app (template_hole 1, template_var 0), template_var 1)),
       template_app
        (template_app (template_hole 0, template_var 2), template_var 0))),
    ("Multiset_More.replicate_mset_lt_iff_lt",
     "(replicate_mset ?m ?x < replicate_mset ?n ?x) = (?m < ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_app
          (template_app (template_hole 1, template_var 0), template_var 1)),
       template_app
        (template_app (template_hole 0, template_var 2), template_var 0))),
    ("Multiset_More.replicate_mset_le_iff_le",
     "(replicate_mset ?m ?x <= replicate_mset ?n ?x) = (?m <= ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_app
          (template_app (template_hole 1, template_var 0), template_var 1)),
       template_app
        (template_app (template_hole 0, template_var 2), template_var 0))),
    ("Multiset_More.product_swap_mset",
     "image_mset prod.swap (?A \<times># ?B) = ?B \<times># ?A",
     template_equation
      (template_app
        (template_app (template_hole 3, template_hole 2),
         template_app
          (template_app (template_hole 1, template_var 1), t_empty)),
       template_app
        (template_app (template_hole 0, template_var 0), t_empty))),
    ("Multiset_More.Times_mset_single_left",
     "{#?a#} \<times># ?B = image_mset (Pair ?a) ?B",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 1),
             template_hole 2)),
         t_empty),
       template_app
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 1)),
         template_var 0))),
    ("Multiset_More.count_sum_mset",
     "count (\<Sum>\<^sub># ?M) ?b = (SUM P:#?M. count P ?b)",
     template_equation
      (template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, template_var 1)),
         template_var 0),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, t_empty), template_var 1)))),
    ("Multiset_More.count_remdups_mset_If",
     "count (remdups_mset ?A) ?a = (if ?a :# ?A then 1 else 0)",
     template_equation
      (template_app
        (template_app
          (template_hole 6, template_app (template_hole 5, template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_var 0),
               template_app (template_hole 2, template_var 1))),
           template_hole 1),
         template_hole 0))),
    ("Multiset_More.Times_mset_Times",
     "set_mset (?A \<times># ?B) = set_mset ?A \<times> set_mset ?B",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_var 1), t_empty)),
       template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         t_empty))),
    ("Multiset_More.count_remdups_mset_eq_1",
     "(?a :# remdups_mset ?A) = (count (remdups_mset ?A) ?a = 1)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 5, template_var 1),
              template_app
               (template_hole 4,
                template_app (template_hole 3, template_var 0)))
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 1,
             template_app (template_hole 3, template_var 0)),
           template_var 1),
         template_hole 0))),
    ("Multiset_More.Sigma_mset_Union",
     "Sigma_mset (\<Sum>\<^sub># ?X) ?B = (SUM A:#?X. Sigma_mset A ?B)",
     template_equation
      (template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, template_var 1)),
         template_var 0),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, t_empty), template_var 1)))),
    ("Multiset_More.filter_mset_empty_conv",
     "(filter_mset ?P ?M = {#}) = (\<forall>L:#?M. ~ ?P L)",
     template_equation
      (template_app
        (template_app
          (template_hole 5,
           template_app
            (template_app (template_hole 4, template_var 1),
             template_var 0)),
         template_hole 3),
       template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 0)),
         t_empty))),
    ("Multiset_More.id_remove_1_mset_iff_notin",
     "(?M = remove1_mset ?a ?M) = (?a ~:# ?M)",
     template_equation
      (template_app
        (template_app (template_hole 6, template_var 1),
         template_app
          (template_app (template_hole 5, template_var 1),
           template_app
            (template_app (template_hole 4, template_var 0),
             template_hole 3))),
       template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 0),
           template_app (template_hole 0, template_var 1))))),
    ("Multiset_More.remove_1_mset_id_iff_notin",
     "(remove1_mset ?a ?M = ?M) = (?a ~:# ?M)",
     template_equation
      (template_app
        (template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, template_var 1),
             template_app
              (template_app (template_hole 4, template_var 0),
               template_hole 3))),
         template_var 1),
       template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 0),
           template_app (template_hole 0, template_var 1))))),
    ("Multiset_More.remove1_single_empty_iff",
     "(remove1_mset ?L {#?L'#} = {#}) = (?L = ?L')",
     template_bimplication
      (template_equation
        (template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_var 1),
               template_hole 1)),
           template_app
            (template_app (template_hole 2, template_var 0),
             template_hole 1)),
         template_hole 1),
       template_equation (template_var 0, template_var 1))),
    ("Multiset_More.repeat_mset_prod",
     "repeat_mset (?m * ?n) ?A = ((+) (repeat_mset ?n ?A) ^^ ?m) {#}",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_app (template_hole 2, template_var 2),
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 4, template_var 1),
               template_var 0))),
         template_hole 0))),
    ("Multiset_More.replicate_mset_plus",
     "replicate_mset (?a + ?b) ?C =
      replicate_mset ?a ?C + replicate_mset ?b ?C",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 0)),
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("Multiset_More.replicate_mset_minus_replicate_mset_same",
     "replicate_mset ?m ?x - replicate_mset ?n ?x =
      replicate_mset (?m - ?n) ?x",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_app
          (template_app (template_hole 1, template_var 0), template_var 1)),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 0)),
         template_var 1))),
    ("Multiset_More.Sigma_mset_Diff_distrib1",
     "Sigma_mset (?I - ?J) ?C = Sigma_mset ?I ?C - Sigma_mset ?J ?C",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 0)),
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("Multiset_More.Sigma_mset_plus_distrib1",
     "Sigma_mset (?A + ?B) ?C = Sigma_mset ?A ?C + Sigma_mset ?B ?C",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 0)),
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("Multiset_More.Sigma_mset_Int_distrib1",
     "Sigma_mset (?I \<inter># ?J) ?C =
      Sigma_mset ?I ?C \<inter># Sigma_mset ?J ?C",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 0)),
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("Multiset_More.Sigma_mset_Un_distrib1",
     "Sigma_mset (?I \<union># ?J) ?C =
      Sigma_mset ?I ?C \<union># Sigma_mset ?J ?C",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 0)),
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("Multiset_More.Times_mset_single_right",
     "?A \<times># {#?b#} = {#(a, ?b). a :# ?A#}",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 1), t_empty),
       template_app
        (template_app (template_hole 1, t_empty), template_var 1))),
    ("Multiset_More.count_sum_mset_if_1_0",
     "count ?M ?a = (SUM x:#?M. if x = ?a then 1 else 0)",
     template_equation
      (template_app
        (template_app (template_hole 6, template_var 1), template_var 0),
       template_app
        (template_hole 5,
         template_app
          (template_app (template_hole 4, t_empty), template_var 1)))),
    ("Multiset_More.count_mset_set_if",
     "count (mset_set ?A) ?a = (if ?a : ?A & finite ?A then 1 else 0)",
     template_equation
      (template_app
        (template_app
          (template_hole 7, template_app (template_hole 6, template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app
                (template_hole 4,
                 template_app
                  (template_app (template_hole 3, template_var 0),
                   template_var 1)),
               template_app (template_hole 2, template_var 1))),
           template_hole 1),
         template_hole 0))),
    ("Multiset_More.in_mset_sum_list_iff",
     "(?a :# sum_list ?\<A>) = (EX A:set ?\<A>. ?a :# A)",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 1),
         template_app
          (template_hole 3,
           template_app (template_hole 2, template_var 0))),
       template_app
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 0)),
         t_empty))),
    ("Multiset_More.Times_mset_empty",
     "(?A \<times># ?B = {#}) = (?A = {#} | ?B = {#})",
     template_bimplication
      (template_equation
        (template_app
          (template_app (template_hole 6, template_var 1), t_empty),
         template_hole 5),
       template_dunno)),
    ("Multiset_More.member_product_mset",
     "(?x :# Multiset_More.product_mset ?A ?B) = (?x :# ?A \<times># ?B)",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 2),
         template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 1),
             template_var 0))),
       template_app
        (template_app (template_hole 3, template_var 2),
         template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 0, template_var 1), t_empty))))),
    ("Multiset_More.size_mset_remove1_mset_le_iff",
     "(size (remove1_mset ?x ?M) < size ?M) = (?x :# ?M)",
     template_equation
      (template_app
        (template_app
          (template_hole 6,
           template_app
            (template_hole 5,
             template_app
              (template_app (template_hole 4, template_var 1),
               template_app
                (template_app (template_hole 3, template_var 0),
                 template_hole 2)))),
         template_app (template_hole 5, template_var 1)),
       template_app
        (template_app (template_hole 1, template_var 0),
         template_app (template_hole 0, template_var 1)))),
    ("Multiset_More.mset_removeAll",
     "removeAll_mset ?C (mset ?L) = mset (removeAll ?C ?L)",
     template_equation
      (template_app
        (template_app
          (template_hole 4, template_app (template_hole 3, template_var 1)),
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_hole 1,
                 template_app (template_hole 3, template_var 1)),
               template_var 0)),
           template_var 0)),
       template_app
        (template_hole 3,
         template_app
          (template_app (template_hole 0, template_var 0),
           template_var 1)))),
    ("Multiset_More.mset_filter_compl",
     "mset (filter ?p ?xs) + mset (filter (Not o ?p) ?xs) = mset ?xs",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_var 1),
               template_var 0))),
         template_app
          (template_hole 3,
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_hole 0),
                 template_var 1)),
             template_var 0))),
       template_app (template_hole 3, template_var 0))),
    ("Multiset_More.Times_mset_single_single",
     "{#?a#} \<times># {#?b#} = {#(?a, ?b)#}",
     template_equation
      (template_app
        (template_app
          (template_hole 7,
           template_app
            (template_app (template_hole 6, template_var 1),
             template_hole 5)),
         t_empty),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 1),
             template_var 0)),
         template_hole 0))),
    ("Multiset_More.mset_drop_upto",
     "mset (drop ?a ?N) = image_mset ((!) ?N) (mset_set {?a..<length ?N})",
     template_equation
      (template_app
        (template_hole 6,
         template_app
          (template_app (template_hole 5, template_var 1), template_var 0)),
       template_app
        (template_app (template_hole 4, t_empty),
         template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 1),
             template_app (template_hole 0, template_var 0)))))),
    ("Multiset_More.removeAll_mset_filter_mset",
     "removeAll_mset ?C ?M = filter_mset ((~=) ?C) ?M",
     template_equation
      (template_app
        (template_app (template_hole 5, template_var 1),
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_var 1),
               template_var 0)),
           template_var 0)),
       template_app
        (template_app (template_hole 2, t_empty), template_var 1))),
    ("Multiset_More.filter_mset_neq",
     "{#x :# ?M. x ~= ?y#} = removeAll_mset ?y ?M",
     template_equation
      (template_app
        (template_app (template_hole 5, t_empty), template_var 0),
       template_app
        (template_app (template_hole 2, template_var 0),
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 0),
               template_var 1)),
           template_var 1)))),
    ("Multiset_More.count_Sigma_mset",
     "count (Sigma_mset ?A ?B) (?a, ?b) = count ?A ?a * count (?B ?a) ?b",
     template_equation
      (template_app
        (template_app
          (template_hole 5,
           template_app
            (template_app (template_hole 4, template_var 3),
             template_var 2)),
         template_app
          (template_app (template_hole 3, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 3),
             template_var 1)),
         template_app
          (template_app
            (template_hole 0,
             template_app (template_var 2, template_var 1)),
           template_var 0)))),
    ("Multiset_More.Sigma_mset_empty_iff",
     "(Sigma_mset ?I ?X = {#}) = (\<forall>i:#?I. ?X i = {#})",
     template_equation
      (template_app
        (template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, template_var 1), t_empty)),
         template_hole 4),
       template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, template_var 1)),
         t_empty))),
    ("Multiset_More.size_mset_removeAll_mset_le_iff",
     "(size (removeAll_mset ?x ?M) < size ?M) = (?x :# ?M)",
     template_equation
      (template_app
        (template_app
          (template_hole 6,
           template_app
            (template_hole 5,
             template_app
              (template_app (template_hole 4, template_var 1),
               template_app
                (template_app
                  (template_hole 3,
                   template_app
                    (template_app (template_hole 2, template_var 1),
                     template_var 0)),
                 template_var 0)))),
         template_app (template_hole 5, template_var 1)),
       template_app
        (template_app (template_hole 1, template_var 0),
         template_app (template_hole 0, template_var 1)))),
    ("Multiset_More.remdups_mset_singleton_sum",
     "remdups_mset (add_mset ?a ?A) =
      (if ?a :# ?A then remdups_mset ?A
       else add_mset ?a (remdups_mset ?A))",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_app (template_hole 0, template_var 0))),
           template_app (template_hole 4, template_var 0)),
         template_app
          (template_app (template_hole 3, template_var 1),
           template_app (template_hole 4, template_var 0))))),
    ("Multiset_More.fst_image_mset_times_mset",
     "image_mset fst (?A \<times># ?B) =
      (if ?B = {#} then {#} else repeat_mset (size ?B) ?A)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 8, template_hole 7),
              template_app
               (template_app (template_hole 6, template_var 1), t_empty))
            )],
       template_dunno)),
    ("Multiset_More.snd_image_mset_times_mset",
     "image_mset snd (?A \<times># ?B) =
      (if ?A = {#} then {#} else repeat_mset (size ?A) ?B)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 8, template_hole 7),
              template_app
               (template_app (template_hole 6, template_var 1), t_empty))
            )],
       template_dunno)),
    ("Multiset_More.image_mset_filter_swap",
     "image_mset ?f {#x :# ?M. ?P (?f x)#} =
      filter_mset ?P (image_mset ?f ?M)",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 2),
         template_app
          (template_app (template_hole 1, t_empty), template_var 0)),
       template_app
        (template_app (template_hole 0, t_empty),
         template_app
          (template_app (template_hole 2, template_var 2),
           template_var 0)))),
    ("Multiset_More.Times_mset_Diff_distrib1",
     "(?A - ?B) \<times># ?C = ?A \<times># ?C - ?B \<times># ?C",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         t_empty),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2), t_empty)),
         template_app
          (template_app (template_hole 2, template_var 1), t_empty)))),
    ("Multiset_More.Times_insert_right",
     "add_mset ?a ?A \<times># ?B =
      ?A \<times># ?B + image_mset (Pair ?a) ?B",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 2),
             template_var 1)),
         t_empty),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 4, template_var 1), t_empty)),
         template_app
          (template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 2)),
           template_var 0)))),
    ("Multiset_More.Times_mset_Int_distrib1",
     "(?A \<inter># ?B) \<times># ?C =
      ?A \<times># ?C \<inter># ?B \<times># ?C",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         t_empty),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2), t_empty)),
         template_app
          (template_app (template_hole 2, template_var 1), t_empty)))),
    ("Multiset_More.Times_mset_Un_distrib1",
     "(?A \<union># ?B) \<times># ?C =
      ?A \<times># ?C \<union># ?B \<times># ?C",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         t_empty),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2), t_empty)),
         template_app
          (template_app (template_hole 2, template_var 1), t_empty)))),
    ("Multiset_More.Sigma_mset_plus_distrib2",
     "(SIGMAMSET i\<in>#?A. ?B i + ?C i) =
      Sigma_mset ?A ?B + Sigma_mset ?A ?C",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 2), t_empty),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1)),
         template_app
          (template_app (template_hole 2, template_var 2),
           template_var 0)))),
    ("Multiset_More.Sigma_mset_Diff_distrib2",
     "(SIGMAMSET i\<in>#?I. ?A i - ?B i) =
      Sigma_mset ?I ?A - Sigma_mset ?I ?B",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 2), t_empty),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1)),
         template_app
          (template_app (template_hole 2, template_var 2),
           template_var 0)))),
    ("Multiset_More.Sigma_mset_Int_distrib2",
     "(SIGMAMSET i\<in>#?I. ?A i \<inter># ?B i) =
      Sigma_mset ?I ?A \<inter># Sigma_mset ?I ?B",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 2), t_empty),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1)),
         template_app
          (template_app (template_hole 2, template_var 2),
           template_var 0)))),
    ("Multiset_More.Sigma_mset_Un_distrib2",
     "(SIGMAMSET i\<in>#?I. ?A i \<union># ?B i) =
      Sigma_mset ?I ?A \<union># Sigma_mset ?I ?B",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 2), t_empty),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1)),
         template_app
          (template_app (template_hole 2, template_var 2),
           template_var 0)))),
    ("Multiset_More.size_remove1_mset_If",
     "size (remove1_mset ?x ?M) = size ?M - (if ?x :# ?M then 1 else 0)",
     template_equation
      (template_app
        (template_hole 9,
         template_app
          (template_app (template_hole 8, template_var 1),
           template_app
            (template_app (template_hole 7, template_var 0),
             template_hole 6))),
       template_app
        (template_app
          (template_hole 5, template_app (template_hole 9, template_var 1)),
         template_app
          (template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_var 0),
                 template_app (template_hole 2, template_var 1))),
             template_hole 1),
           template_hole 0)))),
    ("Multiset_More.count_image_mset_Pair",
     "count (image_mset (Pair ?a) ?B) (?x, ?b) =
      (if ?x = ?a then count ?B ?b else 0)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_app
                   (template_hole 5,
                    template_app (template_hole 4, template_var 3)),
                  template_var 2)),
              template_app
               (template_app (template_hole 4, template_var 1),
                template_var 0))
            )],
       template_dunno)),
    ("Multiset_More.multiset_filter_mono2",
     "(filter_mset ?P ?A <=# filter_mset ?Q ?A) =
      (\<forall>a:#?A. ?P a --> ?Q a)",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 2),
             template_var 1)),
         template_app
          (template_app (template_hole 3, template_var 0), template_var 1)),
       template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         t_empty))),
    ("Multiset_More.in_mset_conv_nth",
     "(?x :# mset ?xs) = (EX i<length ?xs. ?xs ! i = ?x)",
     template_equation
      (template_app
        (template_app (template_hole 8, template_var 1),
         template_app
          (template_hole 7,
           template_app (template_hole 6, template_var 0))),
       template_app (template_hole 5, t_empty))),
    ("Multiset_More.set_mset_single_iff_replicate_mset",
     "(set_mset ?U = {?a}) = (EX n>0. ?U = replicate_mset n ?a)",
     template_equation
      (template_app
        (template_app
          (template_hole 9, template_app (template_hole 8, template_var 1)),
         template_app
          (template_app (template_hole 7, template_var 0),
           template_hole 6)),
       template_app (template_hole 5, t_empty))),
    ("Multiset_More.add_mset_remove_trivial_iff",
     "(?N = add_mset ?a (remove1_mset ?b ?N)) = (?a :# ?N & ?a = ?b)",
     template_bimplication
      (template_equation
        (template_var 2,
         template_app
          (template_app (template_hole 6, template_var 1),
           template_app
            (template_app (template_hole 5, template_var 2),
             template_app
              (template_app (template_hole 6, template_var 0),
               template_hole 4)))),
       template_dunno)),
    ("Multiset_More.trivial_add_mset_remove_iff",
     "(add_mset ?a (remove1_mset ?b ?N) = ?N) = (?a :# ?N & ?a = ?b)",
     template_bimplication
      (template_equation
        (template_app
          (template_app (template_hole 6, template_var 2),
           template_app
            (template_app (template_hole 5, template_var 1),
             template_app
              (template_app (template_hole 6, template_var 0),
               template_hole 4))),
         template_var 1),
       template_dunno)),
    ("Multiset_More.Times_insert_left",
     "?A \<times># add_mset ?x ?B = ?A \<times># ?B + {#(a, ?x). a :# ?A#}",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 2), t_empty),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 4, template_var 2), t_empty)),
         template_app
          (template_app (template_hole 1, t_empty), template_var 2)))),
    ("Multiset_More.mem_Times_mset_iff",
     "(?x :# ?A \<times># ?B) = (fst ?x :# ?A & snd ?x :# ?B)",
     template_equation
      (template_app
        (template_app (template_hole 9, template_var 2),
         template_app
          (template_hole 8,
           template_app
            (template_app (template_hole 7, template_var 1), t_empty))),
       template_app
        (template_app
          (template_hole 6,
           template_app
            (template_app
              (template_hole 5,
               template_app (template_hole 4, template_var 2)),
             template_app (template_hole 3, template_var 1))),
         template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 2)),
           template_app (template_hole 0, template_var 0))))),
    ("Multiset_More.mem_Sigma_mset_iff",
     "((?a, ?b) :# Sigma_mset ?A ?B) = (?a :# ?A & ?b :# ?B ?a)",
     template_equation
      (template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app (template_hole 7, template_var 3),
             template_var 2)),
         template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, template_var 1),
             template_var 0))),
       template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 3),
             template_app (template_hole 2, template_var 1))),
         template_app
          (template_app (template_hole 1, template_var 2),
           template_app
            (template_hole 0,
             template_app (template_var 0, template_var 3)))))),
    ("Multiset_More.Times_mset_image_mset2",
     "?A \<times># image_mset ?f ?B =
      {#(a, ?f b). (a, b) :# ?A \<times># ?B#}",
     template_equation
      (template_app
        (template_app (template_hole 5, template_var 2), t_empty),
       template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, t_empty)),
         template_app
          (template_app (template_hole 0, template_var 2), t_empty)))),
    ("Multiset_More.Times_mset_image_mset1",
     "image_mset ?f ?A \<times># ?B =
      {#(?f a, b). (a, b) :# ?A \<times># ?B#}",
     template_equation
      (template_app
        (template_app
          (template_hole 5,
           template_app
            (template_app (template_hole 4, template_var 2),
             template_var 1)),
         t_empty),
       template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, t_empty)),
         template_app
          (template_app (template_hole 0, template_var 1), t_empty)))),
    ("Multiset_More.sum_mset_if_eq_constant",
     "(SUM x:#?M. if ?a = x then ?f x else (0::?'a)) =
      ((+) (?f ?a) ^^ count ?M ?a) (0::?'a)",
     template_equation
      (template_app
        (template_hole 7,
         template_app
          (template_app (template_hole 6, t_empty), template_var 0)),
       template_app
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 2)),
           template_app
            (template_hole 0,
             template_app (template_var 1, template_var 2))),
         template_hole 3))),
    ("Multiset_More.replicate_mset_eq_iff",
     "(replicate_mset ?m ?x = replicate_mset ?n ?y) =
      (?m = ?n & (?m ~= 0 --> ?x = ?y))",
     template_bimplication
      (template_equation
        (template_app
          (template_app (template_hole 6, template_var 3), template_var 2),
         template_app
          (template_app (template_hole 6, template_var 1), template_var 0)),
       template_dunno)),
    ("Multiset_More.split_paired_Ball_mset_Sigma_mset",
     "(\<forall>z:#Sigma_mset ?A ?B. ?P z) =
      (\<forall>x:#?A. \<forall>y:#?B x. ?P (x, y))",
     template_equation
      (template_app
        (template_app
          (template_hole 7,
           template_app
            (template_hole 6,
             template_app
              (template_app (template_hole 5, template_var 2),
               template_var 1))),
         t_empty),
       template_app
        (template_app
          (template_hole 4, template_app (template_hole 3, template_var 2)),
         t_empty))),
    ("Multiset_More.split_paired_Bex_mset_Sigma_mset",
     "(\<exists>z:#Sigma_mset ?A ?B. ?P z) =
      (\<exists>x:#?A. \<exists>y:#?B x. ?P (x, y))",
     template_equation
      (template_app
        (template_app
          (template_hole 7,
           template_app
            (template_hole 6,
             template_app
              (template_app (template_hole 5, template_var 2),
               template_var 1))),
         t_empty),
       template_app
        (template_app
          (template_hole 4, template_app (template_hole 3, template_var 2)),
         t_empty))),
    ("Multiset_More.remove1_mset_add_mset_If",
     "remove1_mset ?L (add_mset ?L' ?C) =
      (if ?L = ?L' then ?C else remove1_mset ?L ?C + {#?L'#})",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, template_var 2),
                  template_var 1)),
              template_app
               (template_app (template_hole 4, template_var 0),
                template_hole 3))
            )],
       template_dunno)),
    ("Multiset_More.image_filter_ne_mset",
     "image_mset ?f {#x :# ?M. ?f x ~= ?y#} =
      removeAll_mset ?y (image_mset ?f ?M)",
     template_equation
      (template_app
        (template_app (template_hole 6, template_var 2),
         template_app
          (template_app (template_hole 5, t_empty), template_var 0)),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 6, template_var 2),
             template_var 0)),
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app
                (template_hole 0,
                 template_app
                  (template_app (template_hole 6, template_var 2),
                   template_var 0)),
               template_var 1)),
           template_var 1)))),
    ("Multiset_More.image_mset_filter_swap2",
     "filter_mset ?Q (image_mset ?P ?D) =
      image_mset ?P {#C. C :# {#C :# ?D. ?Q (?P C)#}#}",
     template_equation
      (template_app
        (template_app (template_hole 3, t_empty),
         template_app
          (template_app (template_hole 2, t_empty), template_var 0)),
       template_app
        (template_app (template_hole 2, t_empty),
         template_app
          (template_app (template_hole 1, t_empty),
           template_app
            (template_app (template_hole 0, t_empty), template_var 0))))),
    ("Multiset_More.image_mset_remove1_mset_if",
     "image_mset ?f (remove1_mset ?a ?M) =
      (if ?a :# ?M then remove1_mset (?f ?a) (image_mset ?f ?M)
       else image_mset ?f ?M)",
     template_equation
      (template_app
        (template_app (template_hole 9, template_var 2),
         template_app
          (template_app (template_hole 8, template_var 1),
           template_app
            (template_app (template_hole 7, template_var 0),
             template_hole 6))),
       template_app
        (template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app (template_hole 4, template_var 0),
               template_app (template_hole 3, template_var 1))),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 9, template_var 2),
                 template_var 1)),
             template_app
              (template_app
                (template_hole 1,
                 template_app (template_var 2, template_var 0)),
               template_hole 0))),
         template_app
          (template_app (template_hole 9, template_var 2),
           template_var 1)))),
    ("Multiset_More.filter_mset_neq_cond",
     "{#x :# ?M. ?P x & x ~= ?y#} = removeAll_mset ?y (filter_mset ?P ?M)",
     template_equation
      (template_app
        (template_app (template_hole 6, t_empty), template_var 0),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 6, t_empty), template_var 0)),
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app
                (template_hole 0,
                 template_app
                  (template_app (template_hole 6, t_empty),
                   template_var 0)),
               template_var 1)),
           template_var 1)))),
    ("Multiset_More.Times_mset_assoc",
     "(?A \<times># ?B) \<times># ?C =
      {#((a, b), c). (a, b, c) :# ?A \<times># ?B \<times># ?C#}",
     template_equation
      (template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app (template_hole 7, template_var 2), t_empty)),
         t_empty),
       template_app
        (template_app
          (template_hole 6, template_app (template_hole 5, t_empty)),
         template_app
          (template_app (template_hole 1, template_var 2), t_empty)))),
    ("Multiset_More.untion_image_mset_Pair_distribute",
     "(SUM x:#?J - ?I. image_mset (Pair x) (?C x)) =
      (SUM x:#?J. image_mset (Pair x) (?C x)) -
      (SUM x:#?I. image_mset (Pair x) (?C x))",
     template_equation
      (template_app
        (template_hole 5,
         template_app
          (template_app (template_hole 4, t_empty),
           template_app
            (template_app (template_hole 1, template_var 1),
             template_var 0))),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_hole 5,
             template_app
              (template_app (template_hole 4, t_empty), template_var 1))),
         template_app
          (template_hole 5,
           template_app
            (template_app (template_hole 4, t_empty), template_var 0))))),
    ("Multiset_More.add_mset_eq_add_mset",
     "(add_mset ?a ?M = add_mset ?b ?M') =
      (?a = ?b & ?M = ?M' |
       ?a ~= ?b & ?b :# ?M & add_mset ?a (remove1_mset ?b ?M) = ?M')",
     template_bimplication
      (template_equation
        (template_app
          (template_app (template_hole 8, template_var 3), template_var 2),
         template_app
          (template_app (template_hole 8, template_var 1), template_var 0)),
       template_dunno)),
    ("Multiset_More.minus_remove1_mset_if",
     "?A - remove1_mset ?b ?B =
      (if ?b :# ?B & ?b :# ?A & count ?B ?b <= count ?A ?b
       then {#?b#} + (?A - ?B) else ?A - ?B)",
     template_equation
      (template_app
        (template_app (template_hole 9, template_var 2),
         template_app
          (template_app (template_hole 9, template_var 1),
           template_app
            (template_app (template_hole 8, template_var 0),
             template_hole 7))),
       template_app
        (template_app
          (template_app
            (template_hole 6,
             template_app
              (template_app
                (template_hole 5,
                 template_app
                  (template_app (template_hole 4, template_var 0),
                   template_app (template_hole 3, template_var 1))),
               template_app
                (template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_app (template_hole 3, template_var 2))),
                 template_app
                  (template_app
                    (template_hole 2,
                     template_app
                      (template_app (template_hole 1, template_var 1),
                       template_var 0)),
                   template_app
                    (template_app (template_hole 1, template_var 2),
                     template_var 0))))),
           template_app
            (template_app
              (template_hole 0,
               template_app
                (template_app (template_hole 8, template_var 0),
                 template_hole 7)),
             template_app
              (template_app (template_hole 9, template_var 2),
               template_var 1))),
         template_app
          (template_app (template_hole 9, template_var 2),
           template_var 1))))]
