Loading theory "Draft.Bool_Func" (required by "Draft.BDTTemplates" via "Draft.BDT")
Loading theory "HOL-Library.Function_Algebras" (required by "Draft.BDTTemplates" via "Draft.ExtrEqs" via "HOL-Library.BigO")
Loading theory "HOL-Library.Stream" (required by "Draft.BDTTemplates" via "Draft.ExtrEqs")
Loading theory "HOL-Library.Set_Algebras" (required by "Draft.BDTTemplates" via "Draft.ExtrEqs" via "HOL-Library.BigO")
instantiation
  set :: (plus) plus
  plus_set == plus :: 'a set => 'a set => 'a set
instantiation
  fun :: (type, plus) plus
  plus_fun == plus :: ('a => 'b) => ('a => 'b) => 'a => 'b
instantiation
  set :: (times) times
  times_set == times :: 'a set => 'a set => 'a set
instantiation
  fun :: (type, zero) zero
  zero_fun == zero_class.zero :: 'a => 'b
instantiation
  set :: (zero) zero
  zero_set == zero_class.zero :: 'a set
instantiation
  fun :: (type, times) times
  times_fun == times :: ('a => 'b) => ('a => 'b) => 'a => 'b
instantiation
  set :: (one) one
  one_set == one_class.one :: 'a set
instantiation
  fun :: (type, one) one
  one_fun == one_class.one :: 'a => 'b
### theory "Draft.Bool_Func"
### 0.130s elapsed time, 0.521s cpu time, 0.048s GC time
Loading theory "Draft.BDT" (required by "Draft.BDTTemplates")
### theory "HOL-Library.Function_Algebras"
### 0.141s elapsed time, 0.560s cpu time, 0.048s GC time
Loading theory "HOL-Library.Tree" (required by "Draft.BDTTemplates" via "Draft.ExtrEqs" via "Draft.Templates")
### theory "HOL-Library.Set_Algebras"
### 0.215s elapsed time, 0.854s cpu time, 0.048s GC time
Loading theory "HOL-Library.BigO" (required by "Draft.BDTTemplates" via "Draft.ExtrEqs")
consts
  shift :: "'a list => 'a stream => 'a stream"
Proofs for coinductive predicate(s) "streamsp"
  Proving monotonicity ...
consts
  snth :: "'a stream => nat => 'a"
consts
  stake :: "nat => 'a stream => 'a list"
consts
  sdrop :: "nat => 'a stream => 'a stream"
consts
  sfilter :: "('a => bool) => 'a stream => 'a stream"
consts
  cycle :: "'a list => 'a stream"
consts
  left :: "'a tree => 'a tree"
consts
  right :: "'a tree => 'a tree"
consts
  siterate :: "('a => 'a) => 'a => 'a stream"
Found termination order: "size <*mlex*> {}"
consts
  flat :: "'a list stream => 'a stream"
Found termination order: "(%p. size (fst p)) <*mlex*> {}"
Found termination order: "size <*mlex*> {}"
consts
  sinterleave :: "'a stream => 'a stream => 'a stream"
consts
  szip :: "'a stream => 'b stream => ('a * 'b) stream"
consts
  smap2 :: "('a => 'b => 'c) => 'a stream => 'b stream => 'c stream"
Found termination order: "size <*mlex*> {}"
Found termination order: "size <*mlex*> {}"
### theory "HOL-Library.Stream"
### 0.903s elapsed time, 3.503s cpu time, 0.348s GC time
class height = type +
  fixes height :: "'a => nat"
instantiation
  tree :: (type) height
  height_tree == height :: 'a tree => nat
Found termination order: "size <*mlex*> {}"
Found termination order: "size <*mlex*> {}"
Found termination order: "size <*mlex*> {}"
Found termination order: "size <*mlex*> {}"
### theory "HOL-Library.BigO"
### 1.042s elapsed time, 3.754s cpu time, 0.928s GC time
Found termination order: "size <*mlex*> {}"
Found termination order: "size <*mlex*> {}"
Found termination order: "(%p. size (fst p)) <*mlex*> {}"
Found termination order: "size <*mlex*> {}"
Found termination order: "{}"
Found termination order: "size <*mlex*> {}"
Found termination order: "{}"
Found termination order: "size <*mlex*> {}"
Found termination order: "(%p. size (fst p)) <*mlex*> {}"
Found termination order: "size_list size <*mlex*> {}"
Found termination order: "size <*mlex*> {}"
Found termination order: "(%p. size (snd p)) <*mlex*> {}"
Found termination order: "size <*mlex*> {}"
Found termination order: "size <*mlex*> {}"
Found termination order: "size <*mlex*> {}"
### theory "HOL-Library.Tree"
### 2.074s elapsed time, 6.107s cpu time, 1.206s GC time
Loading theory "Draft.Templates" (required by "Draft.BDTTemplates" via "Draft.ExtrEqs")
Found termination order: "size <*mlex*> {}"
datatype template_term
=
     t_empty
   | template_app of template_term * template_term
   | template_hole of int
   | template_var of int
datatype sign
= equals | greater_equals | greater_than | less_equals | less_than
datatype template
=
     template_bimplication of template * template
   | template_dunno
   | template_equation of template_term * template_term
   | template_implication of template list * template
   | template_inequation of sign * template_term * template_term
   | template_negation of template
   | template_predicate of template_term
constructor t_empty: template_term
constructor template_app: template_term * template_term -> template_term
constructor template_hole: int -> template_term
constructor template_var: int -> template_term
constructor equals: sign
constructor greater_equals: sign
constructor greater_than: sign
constructor less_equals: sign
constructor less_than: sign
constructor template_bimplication: template * template -> template
constructor template_dunno: template
constructor template_equation: template_term * template_term -> template
constructor template_implication: template list * template -> template
constructor template_inequation:
   sign * template_term * template_term -> template
constructor template_negation: template -> template
constructor template_predicate: template_term -> template
val vfs = fn: term -> (indexname * typ) list * (string * typ) list
val indexOf = fn: ''a list -> ''a -> int -> int
val has_eq = fn: term -> bool
val term2template = fn:
   (indexname * typ) list -> (string * typ) list -> term -> template_term
val lemma2predicate = fn: term -> term -> template
val makeTemplatewithContext = fn: term -> term -> template
val lemma2template = fn: term -> template
val thm2template = fn: thm -> template
val tterm2string = fn: template_term -> string
val template2string = fn: template -> string
val t = "height ?t <= size ?t": thm
val th =
   Const ("HOL.Trueprop", "bool => prop") $
     (Const ("Orderings.ord_class.less_eq", "nat => nat => bool") $
       (Const ("Tree.height_class.height", "?'a tree => nat") $
         Var (("t", 0), "?'a tree")) $
       (Const ("Nat.size_class.size", "?'a tree => nat") $
         Var (("t", 0), "?'a tree"))):
   term
### theory "Draft.Templates"
### 0.054s elapsed time, 0.107s cpu time, 0.000s GC time
Loading theory "Draft.ExtrEqs" (required by "Draft.BDTTemplates")
Found termination order: "(%p. size_list size (fst p)) <*mlex*> {}"
Found termination order: "size_list size <*mlex*> {}"
### theory "Draft.BDT"
### 2.549s elapsed time, 7.408s cpu time, 2.032s GC time
val eqpattern =
   Pattern
    (
       Const ("HOL.Trueprop", "bool => prop") $
         (Const ("HOL.eq", "?'a => ?'a => bool") $
           Var (("_dummy_", 1), "?'a") $ Var (("_dummy_", 2), "?'a"))
       ):
   term Find_Theorems.criterion
val badeqpattern = Pattern (Const ("Pure.eq", "?'a => ?'a => prop")):
   term Find_Theorems.criterion
val undefpattern =
   Pattern
    (
       Const ("HOL.Trueprop", "bool => prop") $
         (Const ("HOL.eq", "?'a => ?'a => bool") $
           Var (("_dummy_", 1), "?'a") $ Const ("HOL.undefined", "?'a"))
       ):
   term Find_Theorems.criterion
val thmpattern =
   Pattern
    (Const ("HOL.Trueprop", "bool => prop") $ Var (("_dummy_", 1), "bool")):
   term Find_Theorems.criterion
val badnames =
   ["*nitpick*", "*Nitpick*", "*full_exhaustive*", "*_def*", "Enum.finite*",
    "*Quickcheck*", "ATP*", "*Nunchaku*", "*Code*", "*BNF*", "*SMT*",
    "*.*.*"]:
   string list
val unwanted_names =
   [(false, Name "*nitpick*"), (false, Name "*Nitpick*"),
    (false, Name "*full_exhaustive*"), (false, Name "*_def*"),
    (false, Name "Enum.finite*"), (false, Name "*Quickcheck*"),
    (false, Name "ATP*"), (false, Name "*Nunchaku*"),
    (false, Name "*Code*"), (false, Name "*BNF*"), (false, Name "*SMT*"),
    (false, Name "*.*.*")]:
   (bool * term Find_Theorems.criterion) list
val has_vars = fn: term -> bool
val get_all_eqs = fn: string -> Proof.context -> (string * thm) list
val get_all_thms = fn: string -> Proof.context -> (string * thm) list
val get_noneq_thms = fn: string -> Proof.context -> (string * thm) list
val template_eqs = fn:
   string -> Proof.context -> (string * thm * template) list
val template_thms = fn:
   string -> Proof.context -> (string * thm * template) list
### theory "Draft.ExtrEqs"
### 0.780s elapsed time, 1.615s cpu time, 0.878s GC time
Loading theory "Draft.BDTTemplates"
val templateLemmas =
   [("BDT.ordered_ifex_no_twiceI", "ifex_ordered ?i ==> ifex_no_twice ?i",
     template_implication
      ([template_predicate
         (template_app (template_hole 1, template_var 0))],
       template_predicate
        (template_app (template_hole 0, template_var 0)))),
    ("BDT.update_assignment_alt",
     "update_assignment ?u ?as = update_assignment_alt ?u ?as",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 1), template_var 0),
       template_app
        (template_app (template_hole 0, template_var 1), template_var 0))),
    ("BDT.nonempty_if_var_set", "ifex_vars (IF ?v ?t ?e) ~= []",
     template_negation
      (
         template_equation
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 1),
               template_var 0)),
           template_hole 0)
         )),
    ("BDT.restrict_size_le", "size (restrict_top ?k ?var ?val) <= size ?k",
     template_inequation
      (less_equals,
       template_app
        (template_hole 1,
         template_app
          (template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1),
           template_var 0)),
       template_app (template_hole 1, template_var 2))),
    ("BDT.not_element_restrict",
     "?var ~: ifex_var_set (restrict ?b ?var ?val)",
     template_negation
      (
         template_predicate
          (
             template_app
              (template_app (template_hole 3, template_var 2),
               template_app
                (template_hole 2,
                 template_app
                  (template_hole 1,
                   template_app
                    (template_app
                      (template_app (template_hole 0, template_var 1),
                       template_var 2),
                     template_var 0))))
             )
         )),
    ("BDT.bf_ifex_rel_lit",
     "(bf_lit ?v, IFC ?v Trueif Falseif) : bf_ifex_rel",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 6,
             template_app
              (template_app
                (template_hole 5,
                 template_app (template_hole 4, template_var 0)),
               template_app
                (template_app
                  (template_app (template_hole 3, template_var 0),
                   template_hole 2),
                 template_hole 1))),
           template_hole 0)
         )),
    ("BDT.restrict_top_ifex_minimal_invar",
     "ifex_minimal ?i ==> ifex_minimal (restrict_top ?i ?a ?val)",
     template_implication
      ([template_predicate
         (template_app (template_hole 1, template_var 2))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 1),
               template_var 0))
           ))),
    ("BDT.restrict_ifex_ordered_invar",
     "ifex_ordered ?b ==> ifex_ordered (restrict ?b ?var ?val)",
     template_implication
      ([template_predicate
         (template_app (template_hole 1, template_var 2))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 1),
               template_var 0))
           ))),
    ("BDT.restrict_top_ifex_ordered_invar",
     "ifex_ordered ?b ==> ifex_ordered (restrict_top ?b ?var ?val)",
     template_implication
      ([template_predicate
         (template_app (template_hole 1, template_var 2))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 1),
               template_var 0))
           ))),
    ("BDT.ifex_minimal_implied",
     "(?a, ?b) : bf_ifex_rel ==> ifex_minimal ?b",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app (template_hole 2, template_var 1),
                  template_var 0)),
              template_hole 1)
            )],
       template_predicate
        (template_app (template_hole 0, template_var 0)))),
    ("BDT.ifex_ordered_implied",
     "(?a, ?b) : bf_ifex_rel ==> ifex_ordered ?b",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app (template_hole 2, template_var 1),
                  template_var 0)),
              template_hole 1)
            )],
       template_predicate
        (template_app (template_hole 0, template_var 0)))),
    ("BDT.ass_upd_same", "update_assignment ((?v, ?u) # ?a) ?ass ?v = ?u",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_var 3),
                   template_var 2)),
               template_var 1)),
           template_var 0),
         template_var 3),
       template_var 2)),
    ("BDT.bf_ifex_rel_consts_ensured_rev",
     "((?x, Falseif) : bf_ifex_rel) = (?x = bf_False)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, template_var 0),
                  template_hole 3)),
              template_hole 2)
            )],
       template_equation (template_var 0, t_empty))),
    ("BDT.bf_ifex_rel_consts_ensured_rev",
     "((?x, Trueif) : bf_ifex_rel) = (?x = bf_True)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, template_var 0),
                  template_hole 3)),
              template_hole 2)
            )],
       template_equation (template_var 0, t_empty))),
    ("BDT.bf_ifex_rel_consts_ensured",
     "((bf_False, ?x) : bf_ifex_rel) = (?x = Falseif)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, t_empty), template_var 0)),
              template_hole 2)
            )],
       template_equation (template_var 0, template_hole 0))),
    ("BDT.bf_ifex_rel_consts_ensured",
     "((bf_True, ?x) : bf_ifex_rel) = (?x = Trueif)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, t_empty), template_var 0)),
              template_hole 2)
            )],
       template_equation (template_var 0, template_hole 0))),
    ("BDT.restrict_variables_subset",
     "ifex_var_set (restrict ?b ?var ?val) <= ifex_var_set ?b",
     template_inequation
      (less_equals,
       template_app
        (template_hole 2,
         template_app
          (template_hole 1,
           template_app
            (template_app
              (template_app (template_hole 0, template_var 2),
               template_var 1),
             template_var 0))),
       template_app
        (template_hole 2, template_app (template_hole 1, template_var 2)))),
    ("BDT.three_ins", "?e : set [?i, ?t, ?e]",
     template_predicate
      (
         template_app
          (template_app (template_hole 3, template_var 2),
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_app
                (template_app (template_hole 1, template_var 0),
                 template_app
                  (template_app (template_hole 1, template_var 2),
                   template_hole 0)))))
         )),
    ("BDT.three_ins", "?i : set [?i, ?t, ?e]",
     template_predicate
      (
         template_app
          (template_app (template_hole 3, template_var 2),
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 2),
               template_app
                (template_app (template_hole 1, template_var 1),
                 template_app
                  (template_app (template_hole 1, template_var 0),
                   template_hole 0)))))
         )),
    ("BDT.three_ins", "?t : set [?i, ?t, ?e]",
     template_predicate
      (
         template_app
          (template_app (template_hole 3, template_var 2),
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_app
                  (template_app (template_hole 1, template_var 0),
                   template_hole 0)))))
         )),
    ("BDT.ifex_sat_NoneD",
     "ifex_sat ?i = None ==> val_ifex ?i ?ass = False",
     template_implication
      ([template_equation
         (template_app (template_hole 4, template_var 1), template_hole 3)],
       template_equation
        (template_app
          (template_app (template_hole 1, template_var 1), template_var 0),
         template_hole 0))),
    ("BDT.ifex_sat_list_NoneD",
     "ifex_sat_list ?i = None ==> val_ifex ?i ?ass = False",
     template_implication
      ([template_equation
         (template_app (template_hole 4, template_var 1), template_hole 3)],
       template_equation
        (template_app
          (template_app (template_hole 1, template_var 1), template_var 0),
         template_hole 0))),
    ("BDT.rel_true_false",
     "(?a, Falseif) : bf_ifex_rel ==> ?a = const False",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_app (template_hole 5, template_var 0),
                  template_hole 4)),
              template_hole 3)
            )],
       template_equation
        (template_var 0, template_app (template_hole 1, template_hole 0)))),
    ("BDT.rel_true_false", "(?a, Trueif) : bf_ifex_rel ==> ?a = const True",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_app (template_hole 5, template_var 0),
                  template_hole 4)),
              template_hole 3)
            )],
       template_equation
        (template_var 0, template_app (template_hole 1, template_hole 0)))),
    ("BDT.ro_ifexI", "(?a, ?b) : bf_ifex_rel ==> ro_ifex ?b",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, template_var 1),
                  template_var 0)),
              template_hole 3)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app (template_hole 1, template_var 0)),
             template_app (template_hole 0, template_var 0))
           ))),
    ("BDT.restrict_assignment",
     "val_ifex ?b (?ass(?var := ?val)) =
      val_ifex (restrict ?b ?var ?val) ?ass",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 3),
         template_app
          (template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1),
           template_var 0)),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app
              (template_app (template_hole 0, template_var 3),
               template_var 1),
             template_var 0)),
         template_var 2))),
    ("BDT.lowest_tops_in",
     "lowest_tops ?k = Some ?l ==> ?l : set (concat (map ifex_vars ?k))",
     template_implication
      ([template_equation
         (template_app (template_hole 6, template_var 1),
          template_app (template_hole 5, template_var 0))],
       template_predicate
        (
           template_app
            (template_app (template_hole 4, template_var 0),
             template_app
              (template_hole 3,
               template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1))))
           ))),
    ("BDT.restrict_untouched_id",
     "?x ~: ifex_var_set ?t ==> restrict ?t ?x ?val = ?t",
     template_implication
      ([template_negation
         (
            template_predicate
             (
                template_app
                 (template_app (template_hole 4, template_var 2),
                  template_app
                   (template_hole 3,
                    template_app (template_hole 2, template_var 1)))
                )
            )],
       template_equation
        (template_app
          (template_app
            (template_app (template_hole 0, template_var 1),
             template_var 2),
           template_var 0),
         template_var 1))),
    ("BDT.restrict_size_less",
     "ifex_top_var ?k = Some ?var ==>
      size (restrict_top ?k ?var ?val) < size ?k",
     template_implication
      ([template_equation
         (template_app (template_hole 4, template_var 2),
          template_app (template_hole 3, template_var 1))],
       template_inequation
        (less_than,
         template_app
          (template_hole 1,
           template_app
            (template_app
              (template_app (template_hole 0, template_var 2),
               template_var 1),
             template_var 0)),
         template_app (template_hole 1, template_var 2)))),
    ("BDT.ifex_sat_list_subset",
     "ifex_sat_list ?t = Some ?u ==> fst ` set ?u <= ifex_var_set ?t",
     template_implication
      ([template_equation
         (template_app (template_hole 7, template_var 1),
          template_app (template_hole 6, template_var 0))],
       template_inequation
        (less_equals,
         template_app
          (template_app (template_hole 4, template_hole 3),
           template_app (template_hole 2, template_var 0)),
         template_app
          (template_hole 1,
           template_app (template_hole 0, template_var 1))))),
    ("BDT.restrict_top_subset",
     "?x : ifex_var_set (restrict_top ?i ?vr ?vl) ==> ?x : ifex_var_set ?i",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 3, template_var 3),
              template_app
               (template_hole 2,
                template_app
                 (template_hole 1,
                  template_app
                   (template_app
                     (template_app (template_hole 0, template_var 2),
                      template_var 1),
                    template_var 0))))
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 3, template_var 3),
             template_app
              (template_hole 2,
               template_app (template_hole 1, template_var 2)))
           ))),
    ("BDT.sat_list_distinct",
     "[| ifex_no_twice ?t; ifex_sat_list ?t = Some ?u |]
      ==> distinct (map fst ?u)",
     template_implication
      ([template_predicate (template_app (template_hole 6, template_var 1)),
        template_equation
         (template_app (template_hole 4, template_var 1),
          template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 0))
           ))),
    ("BDT.update_assignment_notin",
     "?a ~: fst ` set ?us ==> update_assignment ?us ?as ?a = ?as ?a",
     template_implication
      ([template_negation
         (
            template_predicate
             (
                template_app
                 (template_app (template_hole 5, template_var 2),
                  template_app
                   (template_app (template_hole 4, template_hole 3),
                    template_app (template_hole 2, template_var 1)))
                )
            )],
       template_equation
        (template_app
          (template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0),
           template_var 2),
         template_app (template_var 0, template_var 2)))),
    ("BDT.ifex_sat_SomeD",
     "[| ifex_no_twice ?i; ifex_sat ?i = Some ?ass |]
      ==> val_ifex ?i ?ass = True",
     template_implication
      ([template_predicate (template_app (template_hole 6, template_var 1)),
        template_equation
         (template_app (template_hole 4, template_var 1),
          template_app (template_hole 3, template_var 0))],
       template_equation
        (template_app
          (template_app (template_hole 1, template_var 1), template_var 0),
         template_hole 0))),
    ("BDT.restrict_top_bf_ifex_rel",
     "(?f, ?i) : bf_ifex_rel ==>
      EX f'. (f', restrict_top ?i ?var ?val) : bf_ifex_rel",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app
                 (template_app (template_hole 3, template_var 3),
                  template_var 2)),
              template_hole 2)
            )],
       template_predicate (template_app (template_hole 1, t_empty)))),
    ("BDT.ifex_sat_NoneI",
     "[| ifex_no_twice ?i; !!ass. val_ifex ?i ass = False |]
      ==> ifex_sat ?i = None",
     template_implication
      ([template_predicate (template_app (template_hole 7, template_var 0)),
        template_predicate (template_app (template_hole 6, t_empty))],
       template_equation
        (template_app (template_hole 1, template_var 0), template_hole 0))),
    ("BDT.roifex_Trueif_unique",
     "[| ro_ifex ?b; ALL ass. val_ifex ?b ass |] ==> ?b = Trueif",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app (template_hole 5, template_var 0)),
              template_app (template_hole 4, template_var 0))
            ),
        template_predicate (template_app (template_hole 3, t_empty))],
       template_equation (template_var 0, template_hole 0))),
    ("BDT.minimal_ifex_ite_invar",
     "[| ifex_minimal ?i; ifex_minimal ?t; ifex_minimal ?e |]
      ==> ifex_minimal (ifex_ite ?i ?t ?e)",
     template_implication
      ([template_predicate (template_app (template_hole 1, template_var 2)),
        template_predicate (template_app (template_hole 1, template_var 1)),
        template_predicate
         (template_app (template_hole 1, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 1),
               template_var 0))
           ))),
    ("BDT.order_ifex_ite_invar",
     "[| ifex_ordered ?i; ifex_ordered ?t; ifex_ordered ?e |]
      ==> ifex_ordered (ifex_ite ?i ?t ?e)",
     template_implication
      ([template_predicate (template_app (template_hole 1, template_var 2)),
        template_predicate (template_app (template_hole 1, template_var 1)),
        template_predicate
         (template_app (template_hole 1, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 1),
               template_var 0))
           ))),
    ("BDT.ifex_upd_other",
     "?v ~: ifex_var_set ?i ==>
      val_ifex ?i (?a(?v := ?any)) = val_ifex ?i ?a",
     template_implication
      ([template_negation
         (
            template_predicate
             (
                template_app
                 (template_app (template_hole 5, template_var 3),
                  template_app
                   (template_hole 4,
                    template_app (template_hole 3, template_var 2)))
                )
            )],
       template_equation
        (template_app
          (template_app (template_hole 1, template_var 2),
           template_app
            (template_app
              (template_app (template_hole 0, template_var 1),
               template_var 3),
             template_var 0)),
         template_app
          (template_app (template_hole 1, template_var 2),
           template_var 1)))),
    ("BDT.ifex_var_noinfluence",
     "?x ~: ifex_var_set ?b ==>
      val_ifex ?b (?ass(?x := ?val)) = val_ifex ?b ?ass",
     template_implication
      ([template_negation
         (
            template_predicate
             (
                template_app
                 (template_app (template_hole 5, template_var 3),
                  template_app
                   (template_hole 4,
                    template_app (template_hole 3, template_var 2)))
                )
            )],
       template_equation
        (template_app
          (template_app (template_hole 1, template_var 2),
           template_app
            (template_app
              (template_app (template_hole 0, template_var 1),
               template_var 3),
             template_var 0)),
         template_app
          (template_app (template_hole 1, template_var 2),
           template_var 1)))),
    ("BDT.roifex_Falseif_unique",
     "[| ro_ifex ?b; ALL ass. ~ val_ifex ?b ass |] ==> ?b = Falseif",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app (template_hole 6, template_var 0)),
              template_app (template_hole 5, template_var 0))
            ),
        template_predicate (template_app (template_hole 4, t_empty))],
       template_equation (template_var 0, template_hole 0))),
    ("BDT.ifex_sat_untouched_False",
     "[| ?v ~: ifex_var_set ?i; ifex_sat ?i = Some ?a |] ==> ?a ?v = False",
     template_implication
      ([template_negation
         (
            template_predicate
             (
                template_app
                 (template_app (template_hole 7, template_var 2),
                  template_app
                   (template_hole 6,
                    template_app (template_hole 5, template_var 1)))
                )
            ),
        template_equation
         (template_app (template_hole 3, template_var 1),
          template_app (template_hole 2, template_var 0))],
       template_equation
        (template_app (template_var 0, template_var 2), template_hole 0))),
    ("BDT.hlp2",
     "[| IF ?vi ?vt ?ve : set ?is; lowest_tops ?is = Some ?a |]
      ==> ?a <= ?vi",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_app
                   (template_app (template_hole 5, template_var 4),
                    template_var 3),
                  template_var 2)),
              template_app (template_hole 4, template_var 1))
            ),
        template_equation
         (template_app (template_hole 2, template_var 1),
          template_app (template_hole 1, template_var 0))],
       template_inequation (less_equals, template_var 0, template_var 4))),
    ("BDT.lowest_tops_NoneD",
     "lowest_tops ?k = None ==> \<nexists>v t e. IF v t e : set ?k",
     template_implication
      ([template_equation
         (template_app (template_hole 7, template_var 0), template_hole 6)],
       template_negation
        (template_predicate (template_app (template_hole 4, t_empty))))),
    ("BDT.param_opt_lowest_tops_lem",
     "param_opt ?i ?t ?e = None ==>
      EX y. lowest_tops [?i, ?t, ?e] = Some y",
     template_implication
      ([template_equation
         (template_app
           (template_app
             (template_app (template_hole 7, template_var 2),
              template_var 1),
            template_var 0),
          template_hole 6)],
       template_predicate (template_app (template_hole 5, t_empty)))),
    ("BDT.roifex_var_not_in_subtree",
     "[| ro_ifex ?b; ?b = IF ?v ?t ?e |] ==> ?v ~: ifex_var_set ?e",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app (template_hole 7, template_var 3)),
              template_app (template_hole 6, template_var 3))
            ),
        template_equation
         (template_var 3,
          template_app
           (template_app
             (template_app (template_hole 4, template_var 2),
              template_var 1),
            template_var 0))],
       template_negation
        (
           template_predicate
            (
               template_app
                (template_app (template_hole 2, template_var 2),
                 template_app
                  (template_hole 1,
                   template_app (template_hole 0, template_var 0)))
               )
           ))),
    ("BDT.roifex_var_not_in_subtree",
     "[| ro_ifex ?b; ?b = IF ?v ?t ?e |] ==> ?v ~: ifex_var_set ?t",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app (template_hole 7, template_var 3)),
              template_app (template_hole 6, template_var 3))
            ),
        template_equation
         (template_var 3,
          template_app
           (template_app
             (template_app (template_hole 4, template_var 2),
              template_var 1),
            template_var 0))],
       template_negation
        (
           template_predicate
            (
               template_app
                (template_app (template_hole 2, template_var 2),
                 template_app
                  (template_hole 1,
                   template_app (template_hole 0, template_var 1)))
               )
           ))),
    ("BDT.bf_ifex_eq",
     "[| (?af, ?at) : bf_ifex_rel; (?bf, ?bt) : bf_ifex_rel |]
      ==> (?af = ?bf) = (?at = ?bt)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, template_var 3),
                  template_var 2)),
              template_hole 3)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, template_var 1),
                  template_var 0)),
              template_hole 3)
            )],
       template_bimplication
        (template_equation (template_var 3, template_var 1),
         template_equation (template_var 2, template_var 0)))),
    ("BDT.restrict_top_eq",
     "ifex_ordered (IF ?v ?t ?e) ==>
      restrict (IF ?v ?t ?e) ?v ?val = restrict_top (IF ?v ?t ?e) ?v ?val",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 4,
              template_app
               (template_app
                 (template_app (template_hole 3, template_var 3),
                  template_var 2),
                template_var 1))
            )],
       template_equation
        (template_app
          (template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app
                  (template_app (template_hole 3, template_var 3),
                   template_var 2),
                 template_var 1)),
             template_var 3),
           template_var 0),
         template_app
          (template_app
            (template_app
              (template_hole 0,
               template_app
                (template_app
                  (template_app (template_hole 3, template_var 3),
                   template_var 2),
                 template_var 1)),
             template_var 3),
           template_var 0)))),
    ("BDT.restrict_val_invar",
     "ALL ass. ?a ass = val_ifex ?b ass ==>
      bf_restrict ?var ?val ?a ?ass =
      val_ifex (restrict ?b ?var ?val) ?ass",
     template_implication
      ([template_predicate (template_app (template_hole 4, t_empty))],
       template_equation
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 2),
               template_var 1),
             template_var 4),
           template_var 0),
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_app (template_hole 0, template_var 3),
                 template_var 2),
               template_var 1)),
           template_var 0)))),
    ("BDT.restrict_id",
     "[| ifex_ordered ?e; ifex_top_var ?e = Some ?v; ?v' < ?v |]
      ==> restrict ?e ?v' ?val = ?e",
     template_implication
      ([template_predicate (template_app (template_hole 6, template_var 3)),
        template_equation
         (template_app (template_hole 4, template_var 3),
          template_app (template_hole 3, template_var 2)),
        template_inequation (less_than, template_var 1, template_var 2)],
       template_equation
        (template_app
          (template_app
            (template_app (template_hole 0, template_var 3),
             template_var 1),
           template_var 0),
         template_var 3))),
    ("BDT.restrict_top_id",
     "[| ifex_ordered ?e; ifex_top_var ?e = Some ?v; ?v' < ?v |]
      ==> restrict_top ?e ?v' ?val = ?e",
     template_implication
      ([template_predicate (template_app (template_hole 6, template_var 3)),
        template_equation
         (template_app (template_hole 4, template_var 3),
          template_app (template_hole 3, template_var 2)),
        template_inequation (less_than, template_var 1, template_var 2)],
       template_equation
        (template_app
          (template_app
            (template_app (template_hole 0, template_var 3),
             template_var 1),
           template_var 0),
         template_var 3))),
    ("BDT.ifc_split",
     "?P (IFC ?v ?t ?e) =
      ((?t = ?e --> ?P ?t) & (?t ~= ?e --> ?P (IF ?v ?t ?e)))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_var 3,
              template_app
               (template_app
                 (template_app (template_hole 5, template_var 2),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app
                  (template_hole 3,
                   template_app
                    (template_app (template_hole 2, template_var 1),
                     template_var 0)),
                 template_app (template_var 3, template_var 1))),
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_hole 1,
                   template_app
                    (template_app (template_hole 2, template_var 1),
                     template_var 0))),
               template_app
                (template_var 3,
                 template_app
                  (template_app
                    (template_app (template_hole 0, template_var 2),
                     template_var 1),
                   template_var 0))))
           ))),
    ("BDT.hlp3",
     "lowest_tops (IF ?v ?uu ?uv # ?r) ~= lowest_tops ?r ==>
      lowest_tops (IF ?v ?uu ?uv # ?r) = Some ?v",
     template_implication
      ([template_negation
         (
            template_equation
             (template_app
               (template_hole 3,
                template_app
                 (template_app
                   (template_hole 2,
                    template_app
                     (template_app
                       (template_app (template_hole 1, template_var 3),
                        template_var 2),
                      template_var 1)),
                  template_var 0)),
              template_app (template_hole 3, template_var 0))
            )],
       template_equation
        (template_app
          (template_hole 3,
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_app (template_hole 1, template_var 3),
                   template_var 2),
                 template_var 1)),
             template_var 0)),
         template_app (template_hole 0, template_var 3)))),
    ("BDT.ifex_sat_list_SomeD",
     "[| ifex_no_twice ?i; ifex_sat_list ?i = Some ?u;
         ?ass = update_assignment ?u ?ass' |]
      ==> val_ifex ?i ?ass = True",
     template_implication
      ([template_predicate (template_app (template_hole 8, template_var 3)),
        template_equation
         (template_app (template_hole 6, template_var 3),
          template_app (template_hole 5, template_var 2)),
        template_equation
         (template_var 1,
          template_app
           (template_app (template_hole 3, template_var 2),
            template_var 0))],
       template_equation
        (template_app
          (template_app (template_hole 1, template_var 3), template_var 1),
         template_hole 0))),
    ("BDT.ifex_ordered_not_part",
     "[| ifex_ordered ?b; ?b = IF ?v ?b1.0 ?b2.0; ?w < ?v |]
      ==> ?w ~: ifex_var_set ?b",
     template_implication
      ([template_predicate (template_app (template_hole 7, template_var 4)),
        template_equation
         (template_var 4,
          template_app
           (template_app
             (template_app (template_hole 5, template_var 3),
              template_var 2),
            template_var 1)),
        template_inequation (less_than, template_var 0, template_var 3)],
       template_negation
        (
           template_predicate
            (
               template_app
                (template_app (template_hole 2, template_var 0),
                 template_app
                  (template_hole 1,
                   template_app (template_hole 0, template_var 4)))
               )
           ))),
    ("BDT.update_assignment",
     "distinct (map fst ((?v, ?u) # ?us)) ==>
      update_assignment ((?v, ?u) # ?us) ?as =
      update_assignment ?us (?as(?v := ?u))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 7,
              template_app
               (template_app (template_hole 6, template_hole 5),
                template_app
                 (template_app
                   (template_hole 4,
                    template_app
                     (template_app (template_hole 3, template_var 3),
                      template_var 2)),
                  template_var 1)))
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app
                (template_hole 4,
                 template_app
                  (template_app (template_hole 3, template_var 3),
                   template_var 2)),
               template_var 1)),
           template_var 0),
         template_app
          (template_app (template_hole 1, template_var 1),
           template_app
            (template_app
              (template_app (template_hole 0, template_var 0),
               template_var 3),
             template_var 2))))),
    ("BDT.restrict_IF_id",
     "[| ifex_ordered (IF ?v ?t ?e); ?v' < ?v |]
      ==> restrict (IF ?v ?t ?e) ?v' ?val = IF ?v ?t ?e",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 4,
              template_app
               (template_app
                 (template_app (template_hole 3, template_var 4),
                  template_var 3),
                template_var 2))
            ),
        template_inequation (less_than, template_var 1, template_var 4)],
       template_equation
        (template_app
          (template_app
            (template_app
              (template_hole 0,
               template_app
                (template_app
                  (template_app (template_hole 3, template_var 4),
                   template_var 3),
                 template_var 2)),
             template_var 1),
           template_var 0),
         template_app
          (template_app
            (template_app (template_hole 3, template_var 4),
             template_var 3),
           template_var 2)))),
    ("BDT.restrict_top_IF_id",
     "[| ifex_ordered (IF ?v ?t ?e); ?v' < ?v |]
      ==> restrict_top (IF ?v ?t ?e) ?v' ?val = IF ?v ?t ?e",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 4,
              template_app
               (template_app
                 (template_app (template_hole 3, template_var 4),
                  template_var 3),
                template_var 2))
            ),
        template_inequation (less_than, template_var 1, template_var 4)],
       template_equation
        (template_app
          (template_app
            (template_app
              (template_hole 0,
               template_app
                (template_app
                  (template_app (template_hole 3, template_var 4),
                   template_var 3),
                 template_var 2)),
             template_var 1),
           template_var 0),
         template_app
          (template_app
            (template_app (template_hole 3, template_var 4),
             template_var 3),
           template_var 2)))),
    ("BDT.roifex_set_var_subtree",
     "[| ro_ifex ?b; ?b = IF ?v ?t ?e |]
      ==> val_ifex ?b (?ass(?v := False)) = val_ifex ?e ?ass",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app (template_hole 7, template_var 4)),
              template_app (template_hole 6, template_var 4))
            ),
        template_equation
         (template_var 4,
          template_app
           (template_app
             (template_app (template_hole 4, template_var 3),
              template_var 2),
            template_var 1))],
       template_equation
        (template_app
          (template_app (template_hole 2, template_var 4),
           template_app
            (template_app
              (template_app (template_hole 1, template_var 0),
               template_var 3),
             template_hole 0)),
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("BDT.roifex_set_var_subtree",
     "[| ro_ifex ?b; ?b = IF ?v ?t ?e |]
      ==> val_ifex ?b (?ass(?v := True)) = val_ifex ?t ?ass",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app (template_hole 7, template_var 4)),
              template_app (template_hole 6, template_var 4))
            ),
        template_equation
         (template_var 4,
          template_app
           (template_app
             (template_app (template_hole 4, template_var 3),
              template_var 2),
            template_var 1))],
       template_equation
        (template_app
          (template_app (template_hole 2, template_var 4),
           template_app
            (template_app
              (template_app (template_hole 1, template_var 0),
               template_var 3),
             template_hole 0)),
         template_app
          (template_app (template_hole 2, template_var 2),
           template_var 0)))),
    ("BDT.hlp1",
     "[| ?i : set ?is; lowest_tops ?is = Some ?a; ifex_ordered ?i |]
      ==> ?a ~: ifex_var_set (restrict_top ?i ?a ?val)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 10, template_var 3),
              template_app (template_hole 9, template_var 2))
            ),
        template_equation
         (template_app (template_hole 7, template_var 2),
          template_app (template_hole 6, template_var 1)),
        template_predicate
         (template_app (template_hole 5, template_var 3))],
       template_negation
        (
           template_predicate
            (
               template_app
                (template_app (template_hole 3, template_var 1),
                 template_app
                  (template_hole 2,
                   template_app
                    (template_hole 1,
                     template_app
                      (template_app
                        (template_app (template_hole 0, template_var 3),
                         template_var 1),
                       template_var 0))))
               )
           ))),
    ("BDT.ifex_vars_subset",
     "?x : ifex_var_set (ifex_ite ?i ?t ?e) ==>
      ?x : ifex_var_set ?i | ?x : ifex_var_set ?t | ?x : ifex_var_set ?e",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 4, template_var 3),
              template_app
               (template_hole 3,
                template_app
                 (template_hole 2,
                  template_app
                   (template_app
                     (template_app (template_hole 1, template_var 2),
                      template_var 1),
                    template_var 0))))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 0,
               template_app
                (template_app (template_hole 4, template_var 3),
                 template_app
                  (template_hole 3,
                   template_app (template_hole 2, template_var 2)))),
             template_app
              (template_app
                (template_hole 0,
                 template_app
                  (template_app (template_hole 4, template_var 3),
                   template_app
                    (template_hole 3,
                     template_app (template_hole 2, template_var 1)))),
               template_app
                (template_app (template_hole 4, template_var 3),
                 template_app
                  (template_hole 3,
                   template_app (template_hole 2, template_var 0)))))
           ))),
    ("BDT.lowest_tops_lowest",
     "[| lowest_tops ?es = Some ?a; ?e : set ?es; ifex_ordered ?e;
         ?v : ifex_var_set ?e |]
      ==> ?a <= ?v",
     template_implication
      ([template_equation
         (template_app (template_hole 8, template_var 3),
          template_app (template_hole 7, template_var 2)),
        template_predicate
         (
            template_app
             (template_app (template_hole 6, template_var 1),
              template_app (template_hole 5, template_var 3))
            ),
        template_predicate (template_app (template_hole 4, template_var 1)),
        template_predicate
         (
            template_app
             (template_app (template_hole 3, template_var 0),
              template_app
               (template_hole 2,
                template_app (template_hole 1, template_var 1)))
            )],
       template_inequation (less_equals, template_var 2, template_var 0))),
    ("BDT.ro_ifex_unique",
     "[| ro_ifex ?x; ro_ifex ?y; !!ass. val_ifex ?x ass = val_ifex ?y ass |]
      ==> ?x = ?y",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app (template_hole 5, template_var 1)),
              template_app (template_hole 4, template_var 1))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app (template_hole 5, template_var 0)),
              template_app (template_hole 4, template_var 0))
            ),
        template_predicate (template_app (template_hole 3, t_empty))],
       template_equation (template_var 1, template_var 0))),
    ("BDT.lowest_tops_cases",
     "lowest_tops [?i, ?t, ?e] = Some ?var ==>
      ifex_top_var ?i = Some ?var |
      ifex_top_var ?t = Some ?var | ifex_top_var ?e = Some ?var",
     template_implication
      ([template_equation
         (template_app
           (template_hole 5,
            template_app
             (template_app (template_hole 4, template_var 3),
              template_app
               (template_app (template_hole 4, template_var 2),
                template_app
                 (template_app (template_hole 4, template_var 1),
                  template_hole 3)))),
          template_app (template_hole 2, template_var 0))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app
                  (template_hole 6,
                   template_app (template_hole 0, template_var 3)),
                 template_app (template_hole 2, template_var 0))),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app
                    (template_hole 6,
                     template_app (template_hole 0, template_var 2)),
                   template_app (template_hole 2, template_var 0))),
               template_app
                (template_app
                  (template_hole 6,
                   template_app (template_hole 0, template_var 1)),
                 template_app (template_hole 2, template_var 0))))
           ))),
    ("BDT.ifex_ite_opt_eq",
     "[| ro_ifex ?i; ro_ifex ?t; ro_ifex ?e |]
      ==> ifex_ite_opt ?i ?t ?e = ifex_ite ?i ?t ?e",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app (template_hole 4, template_var 2)),
              template_app (template_hole 3, template_var 2))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app (template_hole 4, template_var 1)),
              template_app (template_hole 3, template_var 1))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app (template_hole 4, template_var 0)),
              template_app (template_hole 3, template_var 0))
            )],
       template_equation
        (template_app
          (template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1),
           template_var 0),
         template_app
          (template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1),
           template_var 0)))),
    ("BDT.ifex_ite_rel_bf",
     "[| (?fi, ?i) : bf_ifex_rel; (?ft, ?t) : bf_ifex_rel;
         (?fe, ?e) : bf_ifex_rel |]
      ==> (bf_ite ?fi ?ft ?fe, ifex_ite ?i ?t ?e) : bf_ifex_rel",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app
                 (template_app (template_hole 3, template_var 5),
                  template_var 4)),
              template_hole 2)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app
                 (template_app (template_hole 3, template_var 3),
                  template_var 2)),
              template_hole 2)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app
                 (template_app (template_hole 3, template_var 1),
                  template_var 0)),
              template_hole 2)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app
                  (template_hole 3,
                   template_app
                    (template_app
                      (template_app (template_hole 1, template_var 5),
                       template_var 3),
                     template_var 1)),
                 template_app
                  (template_app
                    (template_app (template_hole 0, template_var 4),
                     template_var 2),
                   template_var 0))),
             template_hole 2)
           ))),
    ("BDT.ifex_ite_opt_rel_bf",
     "[| (?fi, ?i) : bf_ifex_rel; (?ft, ?t) : bf_ifex_rel;
         (?fe, ?e) : bf_ifex_rel |]
      ==> (bf_ite ?fi ?ft ?fe, ifex_ite_opt ?i ?t ?e) : bf_ifex_rel",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app
                 (template_app (template_hole 3, template_var 5),
                  template_var 4)),
              template_hole 2)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app
                 (template_app (template_hole 3, template_var 3),
                  template_var 2)),
              template_hole 2)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app
                 (template_app (template_hole 3, template_var 1),
                  template_var 0)),
              template_hole 2)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app
                  (template_hole 3,
                   template_app
                    (template_app
                      (template_app (template_hole 1, template_var 5),
                       template_var 3),
                     template_var 1)),
                 template_app
                  (template_app
                    (template_app (template_hole 0, template_var 4),
                     template_var 2),
                   template_var 0))),
             template_hole 2)
           ))),
    ("BDT.rel_if",
     "[| (?a, IF ?v ?t ?e) : bf_ifex_rel; (?ta, ?t) : bf_ifex_rel;
         (?ea, ?e) : bf_ifex_rel |]
      ==> ?a = (%as. if as ?v then ?ta as else ?ea as)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, template_var 5),
                  template_app
                   (template_app
                     (template_app (template_hole 3, template_var 4),
                      template_var 3),
                    template_var 2))),
              template_hole 2)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, template_var 1),
                  template_var 3)),
              template_hole 2)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, template_var 0),
                  template_var 2)),
              template_hole 2)
            )],
       template_equation (template_var 5, t_empty))),
    ("BDT.param_opt_ifex_ite_eq",
     "[| ro_ifex ?i; ro_ifex ?t; ro_ifex ?e; param_opt ?i ?t ?e = Some ?r |]
      ==> ?r = ifex_ite ?i ?t ?e",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app (template_hole 6, template_var 3)),
              template_app (template_hole 5, template_var 3))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app (template_hole 6, template_var 2)),
              template_app (template_hole 5, template_var 2))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app (template_hole 6, template_var 1)),
              template_app (template_hole 5, template_var 1))
            ),
        template_equation
         (template_app
           (template_app
             (template_app (template_hole 3, template_var 3),
              template_var 2),
            template_var 1),
          template_app (template_hole 2, template_var 0))],
       template_equation
        (template_var 0,
         template_app
          (template_app
            (template_app (template_hole 0, template_var 3),
             template_var 2),
           template_var 1)))),
    ("BDT.termlemma2",
     "lowest_tops [?i, ?t, ?e] = Some ?xa ==>
      size (restrict_top ?i ?xa ?val) + size (restrict_top ?t ?xa ?val) +
      size (restrict_top ?e ?xa ?val)
      < size ?i + size ?t + size ?e",
     template_implication
      ([template_equation
         (template_app
           (template_hole 7,
            template_app
             (template_app (template_hole 6, template_var 4),
              template_app
               (template_app (template_hole 6, template_var 3),
                template_app
                 (template_app (template_hole 6, template_var 2),
                  template_hole 5)))),
          template_app (template_hole 4, template_var 1))],
       template_inequation
        (less_than,
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_hole 1,
                   template_app
                    (template_app
                      (template_app (template_hole 0, template_var 4),
                       template_var 1),
                     template_var 0))),
               template_app
                (template_hole 1,
                 template_app
                  (template_app
                    (template_app (template_hole 0, template_var 3),
                     template_var 1),
                   template_var 0)))),
           template_app
            (template_hole 1,
             template_app
              (template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 1),
               template_var 0))),
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_hole 2,
                 template_app (template_hole 1, template_var 4)),
               template_app (template_hole 1, template_var 3))),
           template_app (template_hole 1, template_var 2))))),
    ("BDT.restrict_top_bf",
     "[| ?i : set ?is; lowest_tops ?is = Some ?vr; ifex_ordered ?i;
         !!ass. ?fi ass = val_ifex ?i ass |]
      ==> val_ifex (restrict_top ?i ?vr ?vl) ?ass =
          bf_restrict ?vr ?vl ?fi ?ass",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 10, template_var 5),
              template_app (template_hole 9, template_var 4))
            ),
        template_equation
         (template_app (template_hole 7, template_var 4),
          template_app (template_hole 6, template_var 3)),
        template_predicate (template_app (template_hole 5, template_var 5)),
        template_predicate (template_app (template_hole 4, t_empty))],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_app (template_hole 1, template_var 5),
                 template_var 3),
               template_var 1)),
           template_var 0),
         template_app
          (template_app
            (template_app
              (template_app (template_hole 0, template_var 3),
               template_var 1),
             template_var 2),
           template_var 0)))),
    ("BDT.val_ifex_ite",
     "[| !!ass. ?fi ass = val_ifex ?i ass; !!ass. ?ft ass = val_ifex ?t ass;
         !!ass. ?fe ass = val_ifex ?e ass; ifex_ordered ?i; ifex_ordered ?t;
         ifex_ordered ?e |]
      ==> bf_ite ?fi ?ft ?fe ?ass = val_ifex (ifex_ite ?i ?t ?e) ?ass",
     template_implication
      ([template_predicate (template_app (template_hole 6, t_empty)),
        template_predicate (template_app (template_hole 6, t_empty)),
        template_predicate (template_app (template_hole 6, t_empty)),
        template_predicate (template_app (template_hole 2, template_var 5)),
        template_predicate (template_app (template_hole 2, template_var 3)),
        template_predicate
         (template_app (template_hole 2, template_var 1))],
       template_equation
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 6),
               template_var 4),
             template_var 2),
           template_var 0),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app
                (template_app (template_hole 0, template_var 5),
                 template_var 3),
               template_var 1)),
           template_var 0)))),
    ("BDT.termlemma",
     "lowest_tops [?i, ?t, ?e] = Some ?xa ==>
      (case (restrict_top ?i ?xa ?val, restrict_top ?t ?xa ?val,
             restrict_top ?e ?xa ?val) of
       (i, t, e) => size i + size t + size e)
      < (case (?i, ?t, ?e) of (i, t, e) => size i + size t + size e)",
     template_implication
      ([template_equation
         (template_app
           (template_hole 11,
            template_app
             (template_app (template_hole 10, template_var 4),
              template_app
               (template_app (template_hole 10, template_var 3),
                template_app
                 (template_app (template_hole 10, template_var 2),
                  template_hole 9)))),
          template_app (template_hole 8, template_var 1))],
       template_inequation
        (less_than,
         template_app
          (template_app (template_hole 6, t_empty),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_app (template_hole 1, template_var 4),
                   template_var 1),
                 template_var 0)),
             template_app
              (template_app
                (template_hole 0,
                 template_app
                  (template_app
                    (template_app (template_hole 1, template_var 3),
                     template_var 1),
                   template_var 0)),
               template_app
                (template_app
                  (template_app (template_hole 1, template_var 2),
                   template_var 1),
                 template_var 0)))),
         template_app
          (template_app (template_hole 6, t_empty),
           template_app
            (template_app (template_hole 2, template_var 4),
             template_app
              (template_app (template_hole 0, template_var 3),
               template_var 2)))))),
    ("BDT.ifex_ite_induct",
     "[| !!i t e.
            [| lowest_tops [i, t, e] = None; i = Trueif |] ==> ?P i t e;
         !!i t e.
            [| lowest_tops [i, t, e] = None; i = Falseif |] ==> ?P i t e;
         !!i t e a.
            [| !!val.
                  ?P (restrict_top i a val) (restrict_top t a val)
                   (restrict_top e a val);
               lowest_tops [i, t, e] = Some a |]
            ==> ?P i t e |]
      ==> ?P ?i ?t ?e",
     template_implication
      ([template_predicate (template_app (template_hole 13, t_empty)),
        template_predicate (template_app (template_hole 13, t_empty)),
        template_predicate (template_app (template_hole 13, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_var 3, template_var 2),
               template_var 1),
             template_var 0)
           ))),
    ("BDT.ifex_ite_induct2",
     "[| !!i t e.
            [| lowest_tops [i, t, e] = None; i = Trueif |]
            ==> ?sentence i t e;
         !!i t e.
            [| lowest_tops [i, t, e] = None; i = Falseif |]
            ==> ?sentence i t e;
         !!i t e a.
            [| ?sentence (restrict_top i a True) (restrict_top t a True)
                (restrict_top e a True);
               ?sentence (restrict_top i a False) (restrict_top t a False)
                (restrict_top e a False);
               lowest_tops [i, t, e] = Some a |]
            ==> ?sentence i t e |]
      ==> ?sentence ?i ?t ?e",
     template_implication
      ([template_predicate (template_app (template_hole 14, t_empty)),
        template_predicate (template_app (template_hole 14, t_empty)),
        template_predicate (template_app (template_hole 14, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_var 3, template_var 2),
               template_var 1),
             template_var 0)
           )))]:
   (string * thm * template) list
### theory "Draft.BDTTemplates"
### 0.331s elapsed time, 0.468s cpu time, 0.000s GC time
val it = (): unit
