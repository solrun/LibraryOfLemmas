   [("Table.mem_restr_UNIV", "mem_restr UNIV ?x",
     template_predicate
      (
         template_app
          (template_app (template_hole 1, template_hole 0), template_var 0)
         )),
    ("Table.in_empty_table", "?x ~: empty_table",
     template_negation
      (
         template_predicate
          (
             template_app
              (template_app (template_hole 1, template_var 0),
               template_hole 0)
             )
         )),
    ("Table.empty_table", "table ?n ?V empty_table",
     template_predicate
      (
         template_app
          (template_app
            (template_app (template_hole 1, template_var 1),
             template_var 0),
           template_hole 0)
         )),
    ("Table.restrict_Nil", "restrict ?A [] = []",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), template_hole 0),
       template_hole 0)),
    ("Table.length_restrict", "length (restrict ?A ?v) = length ?v",
     template_equation
      (template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1), template_var 0)),
       template_app (template_hole 1, template_var 0))),
    ("Table.length_tabulate", "length (tabulate ?f ?x ?n) = ?n",
     template_equation
      (template_app
        (template_hole 1,
         template_app
          (template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1),
           template_var 0)),
       template_var 0)),
    ("Table.wf_tuple_Nil", "wf_tuple ?n ?A [] = (?n = 0)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 3, template_var 1),
                template_var 0),
              template_hole 2)
            )],
       template_equation (template_var 1, template_hole 0))),
    ("Table.in_unit_table", "(?v : unit_table ?n) = wf_tuple ?n {} ?v",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 1),
         template_app (template_hole 2, template_var 0)),
       template_app
        (template_app
          (template_app (template_hole 1, template_var 0), template_hole 0),
         template_var 1))),
    ("Table.restrict_eq_Nil", "(restrict ?A ?v = []) = (?v = [])",
     template_bimplication
      (template_equation
        (template_app
          (template_app (template_hole 1, template_var 1), template_var 0),
         template_hole 0),
       template_equation (template_var 0, template_hole 0))),
    ("Table.unit_table", "?V = {} ==> table ?n ?V (unit_table ?n)",
     template_implication
      ([template_equation (template_var 1, template_hole 2)],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 1, template_var 0),
               template_var 1),
             template_app (template_hole 0, template_var 0))
           ))),
    ("Table.restrict_mem_restr",
     "mem_restr ?A ?x ==> mem_restr ?A (restrict ?V ?x)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 2),
              template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 1, template_var 2),
             template_app
              (template_app (template_hole 0, template_var 0),
               template_var 1))
           ))),
    ("Table.wf_tuple_length", "wf_tuple ?n ?V ?x ==> length ?x = ?n",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 2, template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_equation
        (template_app (template_hole 0, template_var 0), template_var 2))),
    ("Table.join_False_alt", "join ?X False ?Y = ?X - join ?X True ?Y",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 3, template_var 1), template_hole 2),
         template_var 0),
       template_app
        (template_app (template_hole 1, template_var 1),
         template_app
          (template_app
            (template_app (template_hole 3, template_var 1),
             template_hole 0),
           template_var 0)))),
    ("Table.lift_envs_mem_restr",
     "mem_restr ?A ?x ==> mem_restr (lift_envs ?A) (?a # ?x)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 2, template_var 2),
              template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app (template_hole 1, template_var 2)),
             template_app
              (template_app (template_hole 0, template_var 0),
               template_var 1))
           ))),
    ("Table.restrict_idle", "wf_tuple ?n ?A ?v ==> restrict ?A ?v = ?v",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 2, template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_equation
        (template_app
          (template_app (template_hole 0, template_var 1), template_var 0),
         template_var 0))),
    ("Table.Suc_pred'",
     "Suc (?x - Suc 0) = (case ?x of 0 => Suc 0 | Suc nat => ?x)",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_app (template_hole 2, template_var 0),
           template_app (template_hole 3, template_hole 1))),
       template_app
        (template_app
          (template_app
            (template_hole 0,
             template_app (template_hole 3, template_hole 1)),
           t_empty),
         template_var 0))),
    ("Table.tabulate_alt", "tabulate ?f ?x ?n = map ?f [?x..<?x + ?n]",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 3, template_var 2), template_var 1),
         template_var 0),
       template_app
        (template_app (template_hole 2, template_var 2),
         template_app
          (template_app (template_hole 1, template_var 1),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0))))),
    ("Table.mem_restr_Un_iff",
     "mem_restr (?A Un ?B) ?x = (mem_restr ?A ?x | mem_restr ?B ?x)",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 0)),
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("Table.map_tabulate",
     "map ?f (tabulate ?g ?x ?n) = tabulate (%x. ?f (?g x)) ?x ?n",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 3),
         template_app
          (template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1),
           template_var 0)),
       template_app
        (template_app
          (template_app (template_hole 0, t_empty), template_var 1),
         template_var 0))),
    ("Table.singleton_table",
     "?V = {?i} ==> table ?n ?V (singleton_table ?n ?i ?z)",
     template_implication
      ([template_equation
         (template_var 3,
          template_app
           (template_app (template_hole 3, template_var 2),
            template_hole 2))],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 1, template_var 1),
               template_var 3),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 1),
                 template_var 2),
               template_var 0))
           ))),
    ("Table.mem_restr_IntD",
     "mem_restr (?A Int ?B) ?v ==> mem_restr ?A ?v & mem_restr ?B ?v",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 0,
               template_app
                (template_app (template_hole 2, template_var 2),
                 template_var 0)),
             template_app
              (template_app (template_hole 2, template_var 1),
               template_var 0))
           ))),
    ("Table.table_wf_table",
     "table ?n ?A ?X = wf_table ?n ?A (%v. v : ?X) ?X",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 3, template_var 2), template_var 1),
         template_var 0),
       template_app
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 2, template_var 2),
               template_var 1),
             t_empty),
           t_empty),
         template_var 0))),
    ("Table.unit_table_wf_tuple",
     "[| ?V = {}; ?x : unit_table ?n |] ==> wf_tuple ?n ?V ?x",
     template_implication
      ([template_equation (template_var 2, template_hole 3),
        template_predicate
         (
            template_app
             (template_app (template_hole 2, template_var 1),
              template_app (template_hole 1, template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 0, template_var 0),
               template_var 2),
             template_var 1)
           ))),
    ("Table.nth_tabulate",
     "?k < ?n ==> tabulate ?f ?x ?n ! ?k = ?f (?x + ?k)",
     template_implication
      ([template_inequation (less_than, template_var 3, template_var 2)],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_app (template_hole 1, template_var 1),
                 template_var 0),
               template_var 2)),
           template_var 3),
         template_app
          (template_var 1,
           template_app
            (template_app (template_hole 0, template_var 0),
             template_var 3))))),
    ("Table.wf_tuple_restrict_simple",
     "[| wf_tuple ?n ?B ?v; ?A <= ?B |]
      ==> wf_tuple ?n ?A (restrict ?A ?v)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 2, template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_inequation (less_equals, template_var 0, template_var 2)],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 2, template_var 3),
               template_var 0),
             template_app
              (template_app (template_hole 0, template_var 0),
               template_var 1))
           ))),
    ("Table.join_True_code",
     "join ?A True ?B = (UN a:?A. UN b:?B. set_option (join1 (a, b)))",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 6, template_var 1), template_hole 5),
         template_var 0),
       template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, t_empty), template_var 1)))),
    ("Table.map_the_restrict",
     "?i : ?A ==> map the (restrict ?A ?v) ! ?i = map the ?v ! ?i",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 5, template_var 2),
              template_var 1)
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_hole 1),
               template_app
                (template_app (template_hole 0, template_var 1),
                 template_var 0))),
           template_var 2),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_hole 1),
               template_var 0)),
           template_var 2)))),
    ("Table.self_join1",
     "join1 (?xs, ?ys) ~= Some ?xs ==> join1 (?zs, ?ys) ~= Some ?xs",
     template_implication
      ([template_negation
         (
            template_equation
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 2),
                  template_var 1)),
              template_app (template_hole 0, template_var 2))
            )],
       template_negation
        (
           template_equation
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 0),
                 template_var 1)),
             template_app (template_hole 0, template_var 2))
           ))),
    ("Table.table_Un",
     "[| table ?n ?V ?X; table ?n ?V ?Y |] ==> table ?n ?V (?X Un ?Y)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 1, template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 1, template_var 3),
                template_var 2),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))
           ))),
    ("Table.wf_tuple_restrict",
     "[| wf_tuple ?n ?B ?v; ?A Int ?B = ?C |]
      ==> wf_tuple ?n ?C (restrict ?A ?v)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 3, template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_equation
         (template_app
           (template_app (template_hole 1, template_var 1), template_var 3),
          template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 3, template_var 4),
               template_var 0),
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 2))
           ))),
    ("Table.singleton_table_wf_tuple",
     "[| ?V = {?i}; ?x : singleton_table ?n ?i ?z |] ==> wf_tuple ?n ?V ?x",
     template_implication
      ([template_equation
         (template_var 4,
          template_app
           (template_app (template_hole 4, template_var 3),
            template_hole 3)),
        template_predicate
         (
            template_app
             (template_app (template_hole 2, template_var 2),
              template_app
               (template_app
                 (template_app (template_hole 1, template_var 1),
                  template_var 3),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 0, template_var 1),
               template_var 4),
             template_var 2)
           ))),
    ("Table.nth_restrict",
     "[| ?i : ?A; ?i < length ?v |] ==> restrict ?A ?v ! ?i = ?v ! ?i",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 5, template_var 2),
              template_var 1)
            ),
        template_inequation
         (less_than, template_var 2,
          template_app (template_hole 3, template_var 0))],
       template_equation
        (template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0)),
           template_var 2),
         template_app
          (template_app (template_hole 1, template_var 0),
           template_var 2)))),
    ("Table.qtable_empty_iff",
     "qtable ?n ?A ?P ?Q empty_table =
      (ALL x. wf_tuple ?n ?A x --> ?P x --> ?Q x --> False)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 5, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0),
         template_hole 4),
       template_app (template_hole 3, t_empty))),
    ("Table.wf_table_iff",
     "wf_table ?n ?A ?Q ?X = (ALL x. (x : ?X) = (?Q x & wf_tuple ?n ?A x))",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 5, template_var 3),
               template_var 2),
             t_empty),
           template_var 1),
         template_var 0),
       template_app (template_hole 3, t_empty))),
    ("Table.join_False_code",
     "join ?A False ?B = {a: ?A. ALL b:?B. join1 (a, b) ~= Some a}",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 10, template_var 1),
           template_hole 9),
         template_var 0),
       template_app (template_hole 8, t_empty))),
    ("Table.table_project",
     "table (Suc ?n) ?A ?X ==>
      table ?n ((%x. x - Suc 0) ` (?A - {0})) (tl ` ?X)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_hole 9,
                  template_app (template_hole 8, template_var 2)),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 9, template_var 2),
               template_app
                (template_app (template_hole 7, t_empty),
                 template_app
                  (template_app (template_hole 4, template_var 1),
                   template_app
                    (template_app (template_hole 3, template_hole 5),
                     template_hole 2)))),
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 0))
           ))),
    ("Table.qtable_unit_table",
     "(!!x. [| wf_tuple ?n {} x; ?P x |] ==> ?Q x) ==>
      qtable ?n {} ?P ?Q (unit_table ?n)",
     template_implication
      ([template_predicate (template_app (template_hole 5, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 1, template_var 2),
                   template_hole 2),
                 template_var 1),
               template_var 0),
             template_app (template_hole 0, template_var 2))
           ))),
    ("Table.qtable_empty",
     "(!!x. [| wf_tuple ?n ?A x; ?P x; ?Q x |] ==> False) ==>
      qtable ?n ?A ?P ?Q empty_table",
     template_implication
      ([template_predicate (template_app (template_hole 5, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 1, template_var 3),
                   template_var 2),
                 template_var 1),
               template_var 0),
             template_hole 0)
           ))),
    ("Table.in_qtableI",
     "[| qtable ?n ?A ?P ?Q ?X; wf_tuple ?n ?A ?x; ?P ?x; ?Q ?x |]
      ==> ?x : ?X",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 2, template_var 5),
                    template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 1, template_var 5),
                template_var 4),
              template_var 0)
            ),
        template_predicate (template_app (template_var 3, template_var 0)),
        template_predicate (template_app (template_var 2, template_var 0))],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 0), template_var 1)
           ))),
    ("Table.join1_wf_tuple",
     "[| join1 (?v1.0, ?v2.0) = Some ?v; wf_tuple ?n ?A ?v1.0;
         wf_tuple ?n ?B ?v2.0 |]
      ==> wf_tuple ?n (?A Un ?B) ?v",
     template_implication
      ([template_equation
         (template_app
           (template_hole 4,
            template_app
             (template_app (template_hole 3, template_var 5),
              template_var 4)),
          template_app (template_hole 2, template_var 3)),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 1, template_var 2),
                template_var 1),
              template_var 5)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 1, template_var 2),
                template_var 0),
              template_var 4)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 1, template_var 2),
               template_app
                (template_app (template_hole 0, template_var 1),
                 template_var 0)),
             template_var 3)
           ))),
    ("Table.wf_tuple_cong",
     "[| wf_tuple ?n ?A ?v; wf_tuple ?n ?A ?w;
         ALL x:?A. map the ?v ! x = map the ?w ! x |]
      ==> ?v = ?w",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 6, template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 6, template_var 3),
                template_var 2),
              template_var 0)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 5, template_var 2), t_empty)
            )],
       template_equation (template_var 1, template_var 0))),
    ("Table.in_qtableE",
     "[| qtable ?n ?A ?P ?Q ?X; ?x : ?X; ?P ?x;
         [| wf_tuple ?n ?A ?x; ?Q ?x |] ==> ?R |]
      ==> ?R",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 2, template_var 6),
                    template_var 5),
                  template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 1),
              template_var 2)
            ),
        template_predicate (template_app (template_var 4, template_var 1)),
        template_implication
         ([template_predicate
            (
               template_app
                (template_app
                  (template_app (template_hole 0, template_var 6),
                   template_var 5),
                 template_var 1)
               )],
          template_implication
           ([template_predicate
              (template_app (template_var 3, template_var 1))],
            template_predicate (template_var 0)))],
       template_predicate (template_var 0))),
    ("Table.qtable_cong",
     "[| qtable ?n ?A ?P ?Q ?X; ?A = ?B; !!v. ?P v ==> ?Q v = ?Q' v |]
      ==> qtable ?n ?B ?P ?Q' ?X",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 3, template_var 6),
                    template_var 5),
                  template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_equation (template_var 5, template_var 1),
        template_predicate (template_app (template_hole 1, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 3, template_var 6),
                   template_var 1),
                 template_var 4),
               template_var 0),
             template_var 2)
           ))),
    ("Table.mem_restrI",
     "[| ?y : ?A; length ?y = ?n; wf_tuple ?n ?V ?x;
         ALL i:?V. ?x ! i = Some (?y ! i) |]
      ==> mem_restr ?A ?x",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 9, template_var 4),
              template_var 3)
            ),
        template_equation
         (template_app (template_hole 7, template_var 4), template_var 2),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 6, template_var 2),
                template_var 1),
              template_var 0)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 5, template_var 1), t_empty)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 3), template_var 0)
           ))),
    ("Table.restrict_Cons",
     "restrict ?A (?x # ?xs) =
      (if 0 : ?A then ?x # restrict ((%x. x - 1) ` (?A - {0})) ?xs
       else None # restrict ((%x. x - 1) ` ?A) ?xs)",
     template_equation
      (template_app
        (template_app (template_hole 11, template_var 2),
         template_app
          (template_app (template_hole 10, template_var 1),
           template_var 0)),
       template_app
        (template_app
          (template_app
            (template_hole 9,
             template_app
              (template_app (template_hole 8, template_hole 7),
               template_var 2)),
           template_app
            (template_app (template_hole 10, template_var 1),
             template_app
              (template_app
                (template_hole 11,
                 template_app
                  (template_app (template_hole 6, t_empty),
                   template_app
                    (template_app (template_hole 3, template_var 2),
                     template_app
                      (template_app (template_hole 2, template_hole 7),
                       template_hole 1)))),
               template_var 0))),
         template_app
          (template_app (template_hole 10, template_hole 0),
           template_app
            (template_app
              (template_hole 11,
               template_app
                (template_app (template_hole 6, t_empty), template_var 2)),
             template_var 0))))),
    ("Table.wf_tuple_Suc",
     "wf_tuple (Suc ?m) ?A ?a =
      (?a ~= [] &
       wf_tuple ?m ((%x. x - 1) ` (?A - {0})) (tl ?a) &
       (0 : ?A) = (hd ?a ~= None))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_hole 17,
                  template_app (template_hole 16, template_var 2)),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 15,
               template_app
                (template_hole 14,
                 template_app
                  (template_app (template_hole 13, template_var 0),
                   template_hole 12))),
             template_app
              (template_app
                (template_hole 15,
                 template_app
                  (template_app
                    (template_app (template_hole 17, template_var 2),
                     template_app
                      (template_app (template_hole 11, t_empty),
                       template_app
                        (template_app (template_hole 8, template_var 1),
                         template_app
                          (template_app (template_hole 7, template_hole 6),
                           template_hole 5)))),
                   template_app (template_hole 4, template_var 0))),
               template_app
                (template_app
                  (template_hole 18,
                   template_app
                    (template_app (template_hole 3, template_hole 6),
                     template_var 1)),
                 template_app
                  (template_hole 14,
                   template_app
                    (template_app
                      (template_hole 2,
                       template_app (template_hole 1, template_var 0)),
                     template_hole 0)))))
           ))),
    ("Table.join_table",
     "[| table ?n ?A ?X; table ?n ?B ?Y; ~ ?b ==> ?B <= ?A; ?A Un ?B = ?C |]
      ==> table ?n ?C (join ?X ?b ?Y)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 5, template_var 6),
                template_var 5),
              template_var 4)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 5, template_var 6),
                template_var 3),
              template_var 2)
            ),
        template_implication
         ([template_negation (template_predicate (template_var 1))],
          template_inequation
           (less_equals, template_var 3, template_var 5)),
        template_equation
         (template_app
           (template_app (template_hole 1, template_var 5), template_var 3),
          template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 5, template_var 6),
               template_var 0),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 1),
               template_var 2))
           ))),
    ("Table.join1_Some_restrict",
     "[| wf_tuple ?n ?A ?x; wf_tuple ?n ?B ?y |]
      ==> (join1 (?x, ?y) = Some ?z) =
          (wf_tuple ?n (?A Un ?B) ?z &
           restrict ?A ?z = ?x & restrict ?B ?z = ?y)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 9, template_var 5),
                template_var 4),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 9, template_var 5),
                template_var 2),
              template_var 1)
            )],
       template_bimplication
        (template_equation
          (template_app
            (template_hole 6,
             template_app
              (template_app (template_hole 5, template_var 3),
               template_var 1)),
           template_app (template_hole 4, template_var 0)),
         template_predicate
          (
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app
                    (template_app (template_hole 9, template_var 5),
                     template_app
                      (template_app (template_hole 2, template_var 4),
                       template_var 2)),
                   template_var 0)),
               template_app
                (template_app
                  (template_hole 3,
                   template_app
                    (template_app
                      (template_hole 1,
                       template_app
                        (template_app (template_hole 0, template_var 4),
                         template_var 0)),
                     template_var 3)),
                 template_app
                  (template_app
                    (template_hole 1,
                     template_app
                      (template_app (template_hole 0, template_var 2),
                       template_var 0)),
                   template_var 1)))
             )))),
    ("Table.wf_tuple_Cons",
     "wf_tuple ?n ?A (?x # ?xs) =
      ((if ?x = None then 0 ~: ?A else 0 : ?A) &
       (EX m. ?n = Suc m & wf_tuple m ((%x. x - 1) ` (?A - {0})) ?xs))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 17, template_var 3),
                template_var 2),
              template_app
               (template_app (template_hole 16, template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 15,
               template_app
                (template_app
                  (template_app
                    (template_hole 14,
                     template_app
                      (template_app (template_hole 13, template_var 1),
                       template_hole 12)),
                   template_app
                    (template_hole 11,
                     template_app
                      (template_app (template_hole 10, template_hole 9),
                       template_var 2))),
                 template_app
                  (template_app (template_hole 10, template_hole 9),
                   template_var 2))),
             template_app (template_hole 8, t_empty))
           ))),
    ("Table.qtable_project",
     "qtable (Suc ?n) ?A (mem_restr (lift_envs ?R)) ?P ?X ==>
      qtable ?n ((%x. x - Suc 0) ` (?A - {0})) (mem_restr ?R)
       (%v. EX x. ?P ((if 0 : ?A then Some x else None) # v)) (tl ` ?X)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app
                     (template_hole 17,
                      template_app (template_hole 16, template_var 4)),
                    template_var 3),
                  template_app
                   (template_hole 15,
                    template_app (template_hole 14, template_var 2))),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 17, template_var 4),
                   template_app
                    (template_app (template_hole 13, t_empty),
                     template_app
                      (template_app (template_hole 10, template_var 3),
                       template_app
                        (template_app (template_hole 9, template_hole 11),
                         template_hole 8)))),
                 template_app (template_hole 15, template_var 2)),
               t_empty),
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 0))
           ))),
    ("Table.mem_restrE",
     "[| mem_restr ?A ?x; wf_tuple ?n ?V ?x; ALL i:?V. i < ?n;
         !!y. [| y : ?A; ALL i:?V. ?x ! i = Some (y ! i) |] ==> ?P |]
      ==> ?P",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 9, template_var 4),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 8, template_var 2),
                template_var 1),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 7, template_var 1), t_empty)
            ),
        template_predicate (template_app (template_hole 5, t_empty))],
       template_predicate (template_var 0))),
    ("Table.qtable_union",
     "[| qtable ?n ?A ?P ?Q1.0 ?X; qtable ?n ?A ?P ?Q2.0 ?Y;
         !!x. [| wf_tuple ?n ?A x; ?P x |] ==> ?Q x = (?Q1.0 x | ?Q2.0 x) |]
      ==> qtable ?n ?A ?P ?Q (?X Un ?Y)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 5, template_var 7),
                    template_var 6),
                  template_var 5),
                template_var 4),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 5, template_var 7),
                    template_var 6),
                  template_var 5),
                template_var 2),
              template_var 1)
            ),
        template_predicate (template_app (template_hole 4, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 5, template_var 7),
                   template_var 6),
                 template_var 5),
               template_var 0),
             template_app
              (template_app (template_hole 0, template_var 3),
               template_var 1))
           ))),
    ("Table.join_wf_tuple",
     "[| ?x : join ?X ?b ?Y; ALL v:?X. wf_tuple ?n ?A v;
         ALL v:?Y. wf_tuple ?n ?B v; ~ ?b ==> ?B <= ?A; ?A Un ?B = ?C |]
      ==> wf_tuple ?n ?C ?x",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 7, template_var 7),
              template_app
               (template_app
                 (template_app (template_hole 6, template_var 6),
                  template_var 5),
                template_var 4))
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 5, template_var 6), t_empty)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 5, template_var 4), t_empty)
            ),
        template_implication
         ([template_negation (template_predicate (template_var 5))],
          template_inequation
           (less_equals, template_var 1, template_var 2)),
        template_equation
         (template_app
           (template_app (template_hole 0, template_var 2), template_var 1),
          template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 4, template_var 3),
               template_var 0),
             template_var 7)
           ))),
    ("Table.join_restrict_table",
     "[| table ?n ?A ?X; table ?n ?B ?Y; ~ ?b ==> ?B <= ?A |]
      ==> (?v : join ?X ?b ?Y) =
          (wf_tuple ?n (?A Un ?B) ?v &
           restrict ?A ?v : ?X &
           (if ?b then restrict ?B ?v : ?Y else restrict ?B ?v ~: ?Y))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 10, template_var 6),
                template_var 5),
              template_var 4)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 10, template_var 6),
                template_var 3),
              template_var 2)
            ),
        template_implication
         ([template_negation (template_predicate (template_var 1))],
          template_inequation
           (less_equals, template_var 3, template_var 5))],
       template_equation
        (template_app
          (template_app (template_hole 6, template_var 0),
           template_app
            (template_app
              (template_app (template_hole 5, template_var 4),
               template_var 1),
             template_var 2)),
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app
                (template_app (template_hole 3, template_var 6),
                 template_app
                  (template_app (template_hole 2, template_var 5),
                   template_var 3)),
               template_var 0)),
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app
                  (template_hole 6,
                   template_app
                    (template_app (template_hole 1, template_var 5),
                     template_var 0)),
                 template_var 4)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 1),
                 template_app
                  (template_app
                    (template_hole 6,
                     template_app
                      (template_app (template_hole 1, template_var 3),
                       template_var 0)),
                   template_var 2)),
               template_app
                (template_hole 9,
                 template_app
                  (template_app
                    (template_hole 6,
                     template_app
                      (template_app (template_hole 1, template_var 3),
                       template_var 0)),
                   template_var 2)))))))),
    ("Table.qtableI",
     "[| table ?n ?A ?X; !!x. [| x : ?X; wf_tuple ?n ?A x; ?P x |] ==> ?Q x;
         !!x. [| wf_tuple ?n ?A x; ?P x; ?Q x |] ==> x : ?X |]
      ==> qtable ?n ?A ?P ?Q ?X",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 4, template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_predicate (template_app (template_hole 3, t_empty)),
        template_predicate (template_app (template_hole 3, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 4),
                   template_var 3),
                 template_var 1),
               template_var 0),
             template_var 2)
           ))),
    ("Table.join_restrict_annotated",
     "(~ ?b =simp=> ?B <= ?A) ==>
      join {v. wf_tuple ?n ?A v & ?P v} ?b {v. wf_tuple ?n ?B v & ?Q v} =
      {v. wf_tuple ?n (?A Un ?B) v &
          ?P (restrict ?A v) &
          (if ?b then ?Q (restrict ?B v) else ~ ?Q (restrict ?B v))}",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 11,
                template_app
                 (template_hole 10,
                  template_app (template_hole 9, template_var 5))),
              template_app
               (template_hole 10,
                template_app
                 (template_app (template_hole 8, template_var 4),
                  template_var 3)))
            )],
       template_equation
        (template_app
          (template_app
            (template_app
              (template_hole 6, template_app (template_hole 5, t_empty)),
             template_var 5),
           template_app (template_hole 5, t_empty)),
         template_app (template_hole 5, t_empty)))),
    ("Table.qtable_Union",
     "[| finite ?I; !!i. i : ?I ==> qtable ?n ?A ?P (?Qi i) (?Xi i);
         !!x. [| wf_tuple ?n ?A x; ?P x |] ==> ?Q x = (EX i:?I. ?Qi i x) |]
      ==> qtable ?n ?A ?P ?Q (\<Union> (?Xi ` ?I))",
     template_implication
      ([template_predicate (template_app (template_hole 9, template_var 6)),
        template_predicate (template_app (template_hole 8, t_empty)),
        template_predicate (template_app (template_hole 5, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 6, template_var 5),
                   template_var 4),
                 template_var 3),
               template_var 0),
             template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, t_empty), template_var 6)))
           ))),
    ("Table.in_joinE",
     "[| ?v : join ?X ?b ?Y; table ?n ?A ?X; table ?n ?B ?Y;
         ~ ?b ==> ?B <= ?A;
         [| wf_tuple ?n (?A Un ?B) ?v; restrict ?A ?v : ?X;
            if ?b then restrict ?B ?v : ?Y else restrict ?B ?v ~: ?Y |]
         ==> ?P |]
      ==> ?P",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 8, template_var 7),
              template_app
               (template_app
                 (template_app (template_hole 7, template_var 6),
                  template_var 5),
                template_var 4))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 6, template_var 3),
                template_var 2),
              template_var 6)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 6, template_var 3),
                template_var 1),
              template_var 4)
            ),
        template_implication
         ([template_negation (template_predicate (template_var 5))],
          template_inequation
           (less_equals, template_var 1, template_var 2)),
        template_implication
         ([template_predicate
            (
               template_app
                (template_app
                  (template_app (template_hole 3, template_var 3),
                   template_app
                    (template_app (template_hole 2, template_var 2),
                     template_var 1)),
                 template_var 7)
               )],
          template_implication
           ([template_predicate
              (
                 template_app
                  (template_app
                    (template_hole 8,
                     template_app
                      (template_app (template_hole 1, template_var 2),
                       template_var 7)),
                   template_var 6)
                 )],
            template_implication
             ([template_predicate
                (
                   template_app
                    (template_app
                      (template_app (template_hole 0, template_var 5),
                       template_app
                        (template_app
                          (template_hole 8,
                           template_app
                            (template_app (template_hole 1, template_var 1),
                             template_var 7)),
                         template_var 4)),
                     template_app
                      (template_hole 5,
                       template_app
                        (template_app
                          (template_hole 8,
                           template_app
                            (template_app (template_hole 1, template_var 1),
                             template_var 7)),
                         template_var 4)))
                   )],
              template_predicate (template_var 0))))],
       template_predicate (template_var 0))),
    ("Table.in_joinI",
     "[| table ?n ?A ?X; table ?n ?B ?Y; ~ ?b ==> ?B <= ?A;
         wf_tuple ?n (?A Un ?B) ?v; restrict ?A ?v : ?X;
         ?b ==> restrict ?B ?v : ?Y; ~ ?b ==> restrict ?B ?v ~: ?Y |]
      ==> ?v : join ?X ?b ?Y",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 7, template_var 6),
                template_var 5),
              template_var 4)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 7, template_var 6),
                template_var 3),
              template_var 2)
            ),
        template_implication
         ([template_negation (template_predicate (template_var 1))],
          template_inequation
           (less_equals, template_var 3, template_var 5)),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 4, template_var 6),
                template_app
                 (template_app (template_hole 3, template_var 5),
                  template_var 3)),
              template_var 0)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 5),
                  template_var 0)),
              template_var 4)
            ),
        template_implication
         ([template_predicate (template_var 1)],
          template_predicate
           (
              template_app
               (template_app
                 (template_hole 2,
                  template_app
                   (template_app (template_hole 1, template_var 3),
                    template_var 0)),
                template_var 2)
              )),
        template_implication
         ([template_negation (template_predicate (template_var 1))],
          template_negation
           (
              template_predicate
               (
                  template_app
                   (template_app
                     (template_hole 2,
                      template_app
                       (template_app (template_hole 1, template_var 3),
                        template_var 0)),
                    template_var 2)
                  )
              ))],
       template_predicate
        (
           template_app
            (template_app (template_hole 2, template_var 0),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 1),
               template_var 2))
           ))),
    ("Table.join_restrict",
     "[| !!v. v : ?X ==> wf_tuple ?n ?A v; !!v. v : ?Y ==> wf_tuple ?n ?B v;
         ~ ?b ==> ?B <= ?A |]
      ==> (?v : join ?X ?b ?Y) =
          (wf_tuple ?n (?A Un ?B) ?v &
           restrict ?A ?v : ?X &
           (if ?b then restrict ?B ?v : ?Y else restrict ?B ?v ~: ?Y))",
     template_implication
      ([template_predicate (template_app (template_hole 11, t_empty)),
        template_predicate (template_app (template_hole 11, t_empty)),
        template_implication
         ([template_negation (template_predicate (template_var 1))],
          template_inequation
           (less_equals, template_var 2, template_var 4))],
       template_equation
        (template_app
          (template_app (template_hole 9, template_var 0),
           template_app
            (template_app
              (template_app (template_hole 4, template_var 6),
               template_var 1),
             template_var 3)),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app
                (template_app (template_hole 8, template_var 5),
                 template_app
                  (template_app (template_hole 2, template_var 4),
                   template_var 2)),
               template_var 0)),
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app (template_hole 1, template_var 4),
                     template_var 0)),
                 template_var 6)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 1),
                 template_app
                  (template_app
                    (template_hole 9,
                     template_app
                      (template_app (template_hole 1, template_var 2),
                       template_var 0)),
                   template_var 3)),
               template_app
                (template_hole 7,
                 template_app
                  (template_app
                    (template_hole 9,
                     template_app
                      (template_app (template_hole 1, template_var 2),
                       template_var 0)),
                   template_var 3)))))))),
    ("Table.qtable_join_fixed",
     "[| qtable ?n ?A ?P ?Q1.0 ?X; qtable ?n ?B ?P ?Q2.0 ?Y;
         ~ ?b ==> ?B <= ?A; ?C = ?A Un ?B;
         !!x. [| wf_tuple ?n ?C x; ?P x |]
              ==> ?P (restrict ?A x) & ?P (restrict ?B x) |]
      ==> qtable ?n ?C ?P
           (%x. ?Q1.0 (restrict ?A x) &
                (if ?b then ?Q2.0 (restrict ?B x)
                 else ~ ?Q2.0 (restrict ?B x)))
           (join ?X ?b ?Y)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 10, template_var 9),
                    template_var 8),
                  template_var 7),
                template_var 6),
              template_var 5)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 10, template_var 9),
                    template_var 4),
                  template_var 7),
                template_var 3),
              template_var 2)
            ),
        template_implication
         ([template_negation (template_predicate (template_var 1))],
          template_inequation
           (less_equals, template_var 4, template_var 8)),
        template_equation
         (template_var 0,
          template_app
           (template_app (template_hole 6, template_var 8),
            template_var 4)),
        template_predicate (template_app (template_hole 5, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 10, template_var 9),
                   template_var 0),
                 template_var 7),
               t_empty),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 5),
                 template_var 1),
               template_var 2))
           ))),
    ("Table.qtable_join",
     "[| qtable ?n ?A ?P ?Q1.0 ?X; qtable ?n ?B ?P ?Q2.0 ?Y;
         ~ ?b ==> ?B <= ?A; ?C = ?A Un ?B;
         !!x. [| wf_tuple ?n ?C x; ?P x |]
              ==> ?P (restrict ?A x) & ?P (restrict ?B x);
         !!x. [| ?b; wf_tuple ?n ?C x; ?P x |]
              ==> ?Q x = (?Q1.0 (restrict ?A x) & ?Q2.0 (restrict ?B x));
         !!x. [| ~ ?b; wf_tuple ?n ?C x; ?P x |]
              ==> ?Q x =
                  (?Q1.0 (restrict ?A x) & ~ ?Q2.0 (restrict ?B x)) |]
      ==> qtable ?n ?C ?P ?Q (join ?X ?b ?Y)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 10, template_var 10),
                    template_var 9),
                  template_var 8),
                template_var 7),
              template_var 6)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 10, template_var 10),
                    template_var 5),
                  template_var 8),
                template_var 4),
              template_var 3)
            ),
        template_implication
         ([template_negation (template_predicate (template_var 2))],
          template_inequation
           (less_equals, template_var 5, template_var 9)),
        template_equation
         (template_var 1,
          template_app
           (template_app (template_hole 6, template_var 9),
            template_var 5)),
        template_predicate (template_app (template_hole 5, t_empty)),
        template_predicate (template_app (template_hole 5, t_empty)),
        template_predicate (template_app (template_hole 5, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 10, template_var 10),
                   template_var 1),
                 template_var 8),
               template_var 0),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 6),
                 template_var 2),
               template_var 3))
           )))]
