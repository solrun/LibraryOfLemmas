   [("Linux_Router.rtr_nomac_e2",
     "simple_linux_router ?rt ?fw ?mlf ?ifl ?pi = Some ?po ==>
      EX po'. simple_linux_router_nol12 ?rt ?fw ?pi = Some po'",
     template_implication
      ([template_equation
         (template_app
           (template_app
             (template_app
               (template_app
                 (template_app (template_hole 3, template_var 5),
                  template_var 4),
                template_var 3),
              template_var 2),
            template_var 1),
          template_app (template_hole 2, template_var 0))],
       template_predicate (template_app (template_hole 1, t_empty)))),
    ("Linux_Router.rtr_nomac_e1",
     "[| simple_linux_router ?rt ?fw ?mlf ?ifl ?pi = Some ?po;
         simple_linux_router_nol12 ?rt ?fw ?pi = Some ?po' |]
      ==> EX x. ?po = ?po'(| p_l2dst := x |)",
     template_implication
      ([template_equation
         (template_app
           (template_app
             (template_app
               (template_app
                 (template_app (template_hole 5, template_var 6),
                  template_var 5),
                template_var 4),
              template_var 3),
            template_var 2),
          template_app (template_hole 4, template_var 1)),
        template_equation
         (template_app
           (template_app
             (template_app (template_hole 3, template_var 6),
              template_var 5),
            template_var 2),
          template_app (template_hole 4, template_var 0))],
       template_predicate (template_app (template_hole 2, t_empty)))),
    ("Linux_Router.rtr_nomac_eq",
     "[| iface_packet_check ?ifl ?pi ~= None;
         ?mlf
          (fromMaybe (p_dst ?pi)
            (next_hop (routing_table_semantics ?rt (p_dst ?pi)))) ~=
         None |]
      ==> EX x. map_option (p_l2dst_update (%_. x))
                 (simple_linux_router_nol12 ?rt ?fw ?pi) =
                simple_linux_router ?rt ?fw ?mlf ?ifl ?pi",
     template_implication
      ([template_negation
         (
            template_equation
             (template_app
               (template_app (template_hole 13, template_var 4),
                template_var 3),
              template_hole 12)
            ),
        template_negation
         (
            template_equation
             (template_app
               (template_var 2,
                template_app
                 (template_app
                   (template_hole 10,
                    template_app (template_hole 9, template_var 3)),
                  template_app
                   (template_hole 8,
                    template_app
                     (template_app (template_hole 7, template_var 1),
                      template_app (template_hole 9, template_var 3))))),
              template_hole 6)
            )],
       template_predicate (template_app (template_hole 5, t_empty)))),
    ("Linux_Router.rtr_nomac_e3",
     "[| simple_linux_router_nol12 ?rt ?fw ?pi = Some ?po;
         iface_packet_check ?ifl ?pi = Some ?i;
         ?mlf
          (fromMaybe (p_dst ?pi)
            (next_hop (routing_table_semantics ?rt (p_dst ?pi)))) =
         Some ?i2.0 |]
      ==> EX po'. simple_linux_router ?rt ?fw ?mlf ?ifl ?pi = Some po'",
     template_implication
      ([template_equation
         (template_app
           (template_app
             (template_app (template_hole 12, template_var 7),
              template_var 6),
            template_var 5),
          template_app (template_hole 11, template_var 4)),
        template_equation
         (template_app
           (template_app (template_hole 9, template_var 3), template_var 5),
          template_app (template_hole 8, template_var 2)),
        template_equation
         (template_app
           (template_var 1,
            template_app
             (template_app
               (template_hole 6,
                template_app (template_hole 5, template_var 5)),
              template_app
               (template_hole 4,
                template_app
                 (template_app (template_hole 3, template_var 7),
                  template_app (template_hole 5, template_var 5))))),
          template_app (template_hole 2, template_var 0))],
       template_predicate (template_app (template_hole 1, t_empty))))]
