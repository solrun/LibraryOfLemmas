   [("IL_AF_Stream.i_join_UNIV", "?f \<Join>\<^sub> UNIV = ?f",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), template_hole 0),
       template_var 0)),
    ("IL_AF_Stream.f_join_Nil", "[] \<Join>\<^sub> ?I = []",
     template_equation
      (template_app
        (template_app (template_hole 1, template_hole 0), template_var 0),
       template_hole 0)),
    ("IL_AF_Stream.f_join_empty", "?xs \<Join>\<^sub> {} = []",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 0), template_hole 1),
       template_hole 0)),
    ("IL_AF_Stream.f_join_UNIV", "?xs \<Join>\<^sub> UNIV = ?xs",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), template_hole 0),
       template_var 0)),
    ("IL_AF_Stream.i_f_join_empty", "?f \<Join>\<^sub> {} = []",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 0), template_hole 1),
       template_hole 0)),
    ("IL_AF_Stream.i_join_iFROM",
     "?f \<Join>\<^sub> [?n\<dots>] = ?f \<Up> ?n",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 1),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_app (template_hole 0, template_var 0), template_var 1))),
    ("IL_AF_Stream.f_join_iFROM",
     "?xs \<Join>\<^sub> [?n\<dots>] = ?xs \<up> ?n",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 1),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_app (template_hole 0, template_var 0), template_var 1))),
    ("IL_AF_Stream.i_join_nth",
     "(?f \<Join>\<^sub> ?I) ?n = ?f (?I \<rightarrow> ?n)",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 1, template_var 2), template_var 1),
         template_var 0),
       template_app
        (template_var 2,
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("IL_AF_Stream.i_join_singleton",
     "?f \<Join>\<^sub> {?a} = (%n. ?f ?a)",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 1),
         template_app
          (template_app (template_hole 1, template_var 0),
           template_hole 0)),
       t_empty)),
    ("IL_AF_Stream.f_join_iTILL",
     "?xs \<Join>\<^sub> [\<dots>?n] = ?xs \<down> Suc ?n",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 1),
         template_app (template_hole 2, template_var 0)),
       template_app
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 0)),
         template_var 1))),
    ("IL_AF_Stream.i_f_join_iTILL",
     "?f \<Join>\<^sub> [\<dots>?n] = ?f \<Down> Suc ?n",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 1),
         template_app (template_hole 2, template_var 0)),
       template_app
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 0)),
         template_var 1))),
    ("IL_AF_Stream.f_join_length",
     "length (?xs \<Join>\<^sub> ?I) = card (?I \<down>< length ?xs)",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_app (template_hole 2, template_var 1), template_var 0)),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 0),
           template_app (template_hole 3, template_var 1))))),
    ("IL_AF_Stream.i_f_join_singleton", "?f \<Join>\<^sub> {?n} = [?f ?n]",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 1),
         template_app
          (template_app (template_hole 3, template_var 0),
           template_hole 2)),
       template_app
        (template_app
          (template_hole 1, template_app (template_var 1, template_var 0)),
         template_hole 0))),
    ("IL_AF_Stream.f_join_all_conv",
     "(?xs \<Join>\<^sub> ?I = ?xs) = ({..<length ?xs} <= ?I)",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 1),
             template_var 0)),
         template_var 1),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 1))),
         template_var 0))),
    ("IL_AF_Stream.f_join_drop",
     "?xs \<up> ?n \<Join>\<^sub> ?I = ?xs \<Join>\<^sub> (?I \<oplus> ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 2, template_var 1),
         template_app
          (template_app (template_hole 0, template_var 0),
           template_var 2)))),
    ("IL_AF_Stream.f_join_take",
     "?xs \<down> ?n \<Join>\<^sub> ?I =
      ?xs \<Join>\<^sub> (?I \<down>< ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 2, template_var 1),
         template_app
          (template_app (template_hole 0, template_var 0),
           template_var 2)))),
    ("IL_AF_Stream.i_f_join_length",
     "finite ?I ==> length (?f \<Join>\<^sub> ?I) = card ?I",
     template_implication
      ([template_predicate
         (template_app (template_hole 4, template_var 1))],
       template_equation
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 0),
             template_var 1)),
         template_app (template_hole 0, template_var 1)))),
    ("IL_AF_Stream.f_join_Nil_conv",
     "(?xs \<Join>\<^sub> ?I = []) = (?I \<down>< length ?xs = {})",
     template_bimplication
      (template_equation
        (template_app
          (template_app (template_hole 5, template_var 1), template_var 0),
         template_hole 4),
       template_equation
        (template_app
          (template_app (template_hole 2, template_var 0),
           template_app (template_hole 1, template_var 1)),
         template_hole 0))),
    ("IL_AF_Stream.f_join_iIN",
     "?xs \<Join>\<^sub> [?n\<dots>,?d] = ?xs \<up> ?n \<down> Suc ?d",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 2),
         template_app
          (template_app (template_hole 3, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 0)),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 2)))),
    ("IL_AF_Stream.i_f_join_iIN",
     "?f \<Join>\<^sub> [?n\<dots>,?d] = ?f \<Up> ?n \<Down> Suc ?d",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 2),
         template_app
          (template_app (template_hole 3, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 0)),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 2)))),
    ("IL_AF_Stream.f_join_all",
     "{..<length ?xs} <= ?I ==> ?xs \<Join>\<^sub> ?I = ?xs",
     template_implication
      ([template_inequation
         (less_equals,
          template_app
           (template_hole 3,
            template_app (template_hole 2, template_var 1)),
          template_var 0)],
       template_equation
        (template_app
          (template_app (template_hole 0, template_var 1), template_var 0),
         template_var 1))),
    ("IL_AF_Stream.i_join_i_take",
     "?f \<Down> ?n \<Join>\<^sub> ?I =
      ?f \<Join>\<^sub> ?I \<Down> card (?I \<down>< ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 3,
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 2))),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("IL_AF_Stream.i_f_join_eq_i_join_i_take",
     "finite ?I ==>
      ?f \<Join>\<^sub> ?I = ?f \<Join>\<^sub> ?I \<Down> card ?I",
     template_implication
      ([template_predicate
         (template_app (template_hole 5, template_var 1))],
       template_equation
        (template_app
          (template_app (template_hole 3, template_var 0), template_var 1),
         template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 1)),
           template_app
            (template_app (template_hole 0, template_var 0),
             template_var 1))))),
    ("IL_AF_Stream.i_join_i_expand_iMOD_0",
     "0 < ?k ==> ?f \<odot> ?k \<Join>\<^sub> [ 0, mod ?k ] = ?f",
     template_implication
      ([template_inequation (less_than, template_hole 4, template_var 1)],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 1)),
           template_app
            (template_app (template_hole 0, template_hole 4),
             template_var 1)),
         template_var 0))),
    ("IL_AF_Stream.f_join_f_expand_iMOD_0",
     "0 < ?k ==> ?xs \<odot> ?k \<Join>\<^sub> [ 0, mod ?k ] = ?xs",
     template_implication
      ([template_inequation (less_than, template_hole 4, template_var 1)],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 1)),
           template_app
            (template_app (template_hole 0, template_hole 4),
             template_var 1)),
         template_var 0))),
    ("IL_AF_Stream.f_join_aux_length",
     "length (f_join_aux ?xs ?n ?I) = card (?I Int {?n..<?n + length ?xs})",
     template_equation
      (template_app
        (template_hole 5,
         template_app
          (template_app
            (template_app (template_hole 4, template_var 2),
             template_var 1),
           template_var 0)),
       template_app
        (template_hole 3,
         template_app
          (template_app (template_hole 2, template_var 0),
           template_app
            (template_app (template_hole 1, template_var 1),
             template_app
              (template_app (template_hole 0, template_var 1),
               template_app (template_hole 5, template_var 2))))))),
    ("IL_AF_Stream.i_f_join_i_drop",
     "finite ?I ==>
      ?f \<Up> ?n \<Join>\<^sub> ?I = ?f \<Join>\<^sub> (?I \<oplus> ?n)",
     template_implication
      ([template_predicate
         (template_app (template_hole 4, template_var 2))],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 0)),
           template_var 2),
         template_app
          (template_app (template_hole 2, template_var 0),
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1))))),
    ("IL_AF_Stream.f_join_take_Suc_Max_eq",
     "finite ?I ==>
      ?xs \<down> Suc (Max ?I) \<Join>\<^sub> ?I = ?xs \<Join>\<^sub> ?I",
     template_implication
      ([template_predicate
         (template_app (template_hole 5, template_var 1))],
       template_equation
        (template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_hole 1,
                   template_app (template_hole 0, template_var 1))),
               template_var 0)),
           template_var 1),
         template_app
          (template_app (template_hole 3, template_var 0),
           template_var 1)))),
    ("IL_AF_Stream.f_join_cut_less_eq",
     "length ?xs <= ?t ==>
      ?xs \<Join>\<^sub> (?I \<down>< ?t) = ?xs \<Join>\<^sub> ?I",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 3, template_var 2),
          template_var 1)],
       template_equation
        (template_app
          (template_app (template_hole 1, template_var 2),
           template_app
            (template_app (template_hole 0, template_var 0),
             template_var 1)),
         template_app
          (template_app (template_hole 1, template_var 2),
           template_var 0)))),
    ("IL_AF_Stream.f_join_append",
     "(?xs @ ?ys) \<Join>\<^sub> ?I =
      ?xs \<Join>\<^sub> ?I @ ?ys \<Join>\<^sub> (?I \<oplus>- length ?xs)",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 3, template_var 2),
             template_var 0)),
         template_app
          (template_app (template_hole 3, template_var 1),
           template_app
            (template_app (template_hole 1, template_var 0),
             template_app (template_hole 0, template_var 2)))))),
    ("IL_AF_Stream.f_join_f_expand_iT_Mult",
     "0 < ?k ==>
      ?xs \<odot> ?k \<Join>\<^sub> (?I \<otimes> ?k) =
      ?xs \<Join>\<^sub> ?I",
     template_implication
      ([template_inequation (less_than, template_hole 4, template_var 2)],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 2)),
           template_app
            (template_app (template_hole 0, template_var 0),
             template_var 2)),
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("IL_AF_Stream.i_f_join_nth",
     "?n < card ?I ==>
      ?f \<Join>\<^sub> ?I ! ?n = ?f (?I \<rightarrow> ?n)",
     template_implication
      ([template_inequation
         (less_than, template_var 2,
          template_app (template_hole 4, template_var 1))],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 1)),
           template_var 2),
         template_app
          (template_var 0,
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 2))))),
    ("IL_AF_Stream.drop_f_join_eq2",
     "card (?I \<down>< length ?xs) <= ?n ==>
      ?xs \<Join>\<^sub> ?I \<up> ?n = []",
     template_implication
      ([template_inequation
         (less_equals,
          template_app
           (template_hole 6,
            template_app
             (template_app (template_hole 5, template_var 2),
              template_app (template_hole 4, template_var 1))),
          template_var 0)],
       template_equation
        (template_app
          (template_app (template_hole 2, template_var 0),
           template_app
            (template_app (template_hole 1, template_var 1),
             template_var 2)),
         template_hole 0))),
    ("IL_AF_Stream.f_join_Nil_conv'",
     "(?xs \<Join>\<^sub> ?I = []) = (ALL i<length ?xs. i ~: ?I)",
     template_equation
      (template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app (template_hole 7, template_var 1),
             template_var 0)),
         template_hole 6),
       template_app (template_hole 5, t_empty))),
    ("IL_AF_Stream.f_join_singleton_if",
     "?xs \<Join>\<^sub> {?n} =
      (if ?n < length ?xs then [?xs ! ?n] else [])",
     template_equation
      (template_app
        (template_app (template_hole 8, template_var 1),
         template_app
          (template_app (template_hole 7, template_var 0),
           template_hole 6)),
       template_app
        (template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app (template_hole 4, template_var 0),
               template_app (template_hole 3, template_var 1))),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 1),
                 template_var 0)),
             template_hole 0)),
         template_hole 0))),
    ("IL_AF_Stream.i_join_i_drop",
     "?I ~= {} ==>
      ?f \<Up> ?n \<Join>\<^sub> ?I = ?f \<Join>\<^sub> (?I \<oplus> ?n)",
     template_implication
      ([template_negation
         (template_equation (template_var 2, template_hole 4))],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 0)),
           template_var 2),
         template_app
          (template_app (template_hole 2, template_var 0),
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1))))),
    ("IL_AF_Stream.drop_i_f_join_eq2",
     "[| finite ?I; card ?I <= ?n |]
      ==> ?f \<Join>\<^sub> ?I \<up> ?n = []",
     template_implication
      ([template_predicate (template_app (template_hole 6, template_var 2)),
        template_inequation
         (less_equals, template_app (template_hole 4, template_var 2),
          template_var 1)],
       template_equation
        (template_app
          (template_app (template_hole 2, template_var 1),
           template_app
            (template_app (template_hole 1, template_var 0),
             template_var 2)),
         template_hole 0))),
    ("IL_AF_Stream.i_take_i_join",
     "infinite ?I ==>
      ?f \<Join>\<^sub> ?I \<Down> ?n =
      ?f \<Down> (?I \<rightarrow> ?n) \<Join>\<^sub> ?I",
     template_implication
      ([template_negation
         (
            template_predicate
             (template_app (template_hole 5, template_var 2))
            )],
       template_equation
        (template_app
          (template_app (template_hole 3, template_var 1),
           template_app
            (template_app (template_hole 2, template_var 0),
             template_var 2)),
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app (template_hole 0, template_var 2),
                   template_var 1)),
               template_var 0)),
           template_var 2)))),
    ("IL_AF_Stream.i_take_i_join_eq_i_f_join",
     "infinite ?I ==>
      ?f \<Join>\<^sub> ?I \<Down> ?n =
      ?f \<Join>\<^sub> (?I \<down>< (?I \<rightarrow> ?n))",
     template_implication
      ([template_negation
         (
            template_predicate
             (template_app (template_hole 6, template_var 2))
            )],
       template_equation
        (template_app
          (template_app (template_hole 4, template_var 1),
           template_app
            (template_app (template_hole 3, template_var 0),
             template_var 2)),
         template_app
          (template_app (template_hole 2, template_var 0),
           template_app
            (template_app (template_hole 1, template_var 2),
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 1)))))),
    ("IL_AF_Stream.i_join_i_expand_iMODb_0",
     "0 < ?k ==>
      ?f \<odot> ?k \<Join>\<^sub> [ 0, mod ?k, ?n ] =
      ?f \<Join>\<^sub> [\<dots>?n]",
     template_implication
      ([template_inequation (less_than, template_hole 5, template_var 2)],
       template_equation
        (template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_var 1),
               template_var 2)),
           template_app
            (template_app
              (template_app (template_hole 1, template_hole 5),
               template_var 2),
             template_var 0)),
         template_app
          (template_app (template_hole 3, template_var 1),
           template_app (template_hole 0, template_var 0))))),
    ("IL_AF_Stream.i_join_i_shrink_iMOD_0",
     "0 < ?k ==>
      ?f \<longmapsto> ?k \<Join>\<^sub> [ ?k - 1, mod ?k ] = ?f \<div> ?k",
     template_implication
      ([template_inequation (less_than, template_hole 7, template_var 1)],
       template_equation
        (template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app (template_hole 4, template_var 0),
               template_var 1)),
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app (template_hole 2, template_var 1),
                 template_hole 1)),
             template_var 1)),
         template_app
          (template_app (template_hole 0, template_var 0),
           template_var 1)))),
    ("IL_AF_Stream.f_join_f_expand_iMODb_0",
     "0 < ?k ==>
      ?xs \<odot> ?k \<Join>\<^sub> [ 0, mod ?k, ?n ] =
      ?xs \<Join>\<^sub> [\<dots>?n]",
     template_implication
      ([template_inequation (less_than, template_hole 5, template_var 2)],
       template_equation
        (template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_var 1),
               template_var 2)),
           template_app
            (template_app
              (template_app (template_hole 1, template_hole 5),
               template_var 2),
             template_var 0)),
         template_app
          (template_app (template_hole 3, template_var 1),
           template_app (template_hole 0, template_var 0))))),
    ("IL_AF_Stream.i_f_join_i_expand_iMODb_0",
     "0 < ?k ==>
      ?f \<odot> ?k \<Join>\<^sub> [ 0, mod ?k, ?n ] =
      ?f \<Join>\<^sub> [\<dots>?n]",
     template_implication
      ([template_inequation (less_than, template_hole 5, template_var 2)],
       template_equation
        (template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_var 1),
               template_var 2)),
           template_app
            (template_app
              (template_app (template_hole 1, template_hole 5),
               template_var 2),
             template_var 0)),
         template_app
          (template_app (template_hole 3, template_var 1),
           template_app (template_hole 0, template_var 0))))),
    ("IL_AF_Stream.f_join_f_shrink_iMOD_0",
     "0 < ?k ==>
      ?xs \<longmapsto> ?k \<Join>\<^sub> [ ?k - 1, mod ?k ] =
      ?xs \<div> ?k",
     template_implication
      ([template_inequation (less_than, template_hole 7, template_var 1)],
       template_equation
        (template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app (template_hole 4, template_var 0),
               template_var 1)),
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app (template_hole 2, template_var 1),
                 template_hole 1)),
             template_var 1)),
         template_app
          (template_app (template_hole 0, template_var 0),
           template_var 1)))),
    ("IL_AF_Stream.take_f_join_eq2",
     "card (?I \<down>< length ?xs) <= ?n ==>
      ?xs \<Join>\<^sub> ?I \<down> ?n = ?xs \<Join>\<^sub> ?I",
     template_implication
      ([template_inequation
         (less_equals,
          template_app
           (template_hole 5,
            template_app
             (template_app (template_hole 4, template_var 2),
              template_app (template_hole 3, template_var 1))),
          template_var 0)],
       template_equation
        (template_app
          (template_app (template_hole 1, template_var 0),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 2)),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 2)))),
    ("IL_AF_Stream.cut_less_eq_imp_f_join_eq",
     "?A \<down>< length ?xs = ?B \<down>< length ?xs ==>
      ?xs \<Join>\<^sub> ?A = ?xs \<Join>\<^sub> ?B",
     template_implication
      ([template_equation
         (template_app
           (template_app (template_hole 3, template_var 2),
            template_app (template_hole 2, template_var 1)),
          template_app
           (template_app (template_hole 3, template_var 0),
            template_app (template_hole 2, template_var 1)))],
       template_equation
        (template_app
          (template_app (template_hole 0, template_var 1), template_var 2),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("IL_AF_Stream.i_join_i_expand_iMOD",
     "0 < ?k ==>
      ?f \<odot> ?k \<Join>\<^sub> [ ?n * ?k, mod ?k ] =
      ?f \<Join>\<^sub> [?n\<dots>]",
     template_implication
      ([template_inequation (less_than, template_hole 6, template_var 2)],
       template_equation
        (template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_var 1),
               template_var 2)),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 0),
                 template_var 2)),
             template_var 2)),
         template_app
          (template_app (template_hole 4, template_var 1),
           template_app (template_hole 0, template_var 0))))),
    ("IL_AF_Stream.f_join_f_expand_iMOD",
     "0 < ?k ==>
      ?xs \<odot> ?k \<Join>\<^sub> [ ?n * ?k, mod ?k ] =
      ?xs \<Join>\<^sub> [?n\<dots>]",
     template_implication
      ([template_inequation (less_than, template_hole 6, template_var 2)],
       template_equation
        (template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_var 1),
               template_var 2)),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 0),
                 template_var 2)),
             template_var 2)),
         template_app
          (template_app (template_hole 4, template_var 1),
           template_app (template_hole 0, template_var 0))))),
    ("IL_AF_Stream.i_drop_i_join",
     "?I ~= {} ==>
      ?f \<Join>\<^sub> ?I \<Up> ?n =
      ?f \<Join>\<^sub> (?I \<down>\<ge> (?I \<rightarrow> ?n))",
     template_implication
      ([template_negation
         (template_equation (template_var 2, template_hole 5))],
       template_equation
        (template_app
          (template_app (template_hole 3, template_var 1),
           template_app
            (template_app (template_hole 2, template_var 0),
             template_var 2)),
         template_app
          (template_app (template_hole 2, template_var 0),
           template_app
            (template_app (template_hole 1, template_var 2),
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 1)))))),
    ("IL_AF_Stream.drop_i_f_join_eq1",
     "?n < card ?I ==>
      ?f \<Join>\<^sub> ?I \<up> ?n =
      ?f \<Join>\<^sub> (?I \<down>\<ge> (?I \<rightarrow> ?n))",
     template_implication
      ([template_inequation
         (less_than, template_var 2,
          template_app (template_hole 5, template_var 1))],
       template_equation
        (template_app
          (template_app (template_hole 3, template_var 2),
           template_app
            (template_app (template_hole 2, template_var 0),
             template_var 1)),
         template_app
          (template_app (template_hole 2, template_var 0),
           template_app
            (template_app (template_hole 1, template_var 1),
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 2)))))),
    ("IL_AF_Stream.take_i_f_join_eq1",
     "?n < card ?I ==>
      ?f \<Join>\<^sub> ?I \<down> ?n =
      ?f \<Join>\<^sub> (?I \<down>< (?I \<rightarrow> ?n))",
     template_implication
      ([template_inequation
         (less_than, template_var 2,
          template_app (template_hole 5, template_var 1))],
       template_equation
        (template_app
          (template_app (template_hole 3, template_var 2),
           template_app
            (template_app (template_hole 2, template_var 0),
             template_var 1)),
         template_app
          (template_app (template_hole 2, template_var 0),
           template_app
            (template_app (template_hole 1, template_var 1),
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 2)))))),
    ("IL_AF_Stream.f_join_nth",
     "?n < length (?xs \<Join>\<^sub> ?I) ==>
      ?xs \<Join>\<^sub> ?I ! ?n = ?xs ! (?I \<rightarrow> ?n)",
     template_implication
      ([template_inequation
         (less_than, template_var 2,
          template_app
           (template_hole 4,
            template_app
             (template_app (template_hole 3, template_var 1),
              template_var 0)))],
       template_equation
        (template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 3, template_var 1),
               template_var 0)),
           template_var 2),
         template_app
          (template_app (template_hole 1, template_var 1),
           template_app
            (template_app (template_hole 0, template_var 0),
             template_var 2))))),
    ("IL_AF_Stream.take_i_f_join_eq2",
     "[| finite ?I; card ?I <= ?n |]
      ==> ?f \<Join>\<^sub> ?I \<down> ?n = ?f \<Join>\<^sub> ?I",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 2)),
        template_inequation
         (less_equals, template_app (template_hole 3, template_var 2),
          template_var 1)],
       template_equation
        (template_app
          (template_app (template_hole 1, template_var 1),
           template_app
            (template_app (template_hole 0, template_var 0),
             template_var 2)),
         template_app
          (template_app (template_hole 0, template_var 0),
           template_var 2)))),
    ("IL_AF_Stream.f_join_nth2",
     "?n < card (?I \<down>< length ?xs) ==>
      ?xs \<Join>\<^sub> ?I ! ?n = ?xs ! (?I \<rightarrow> ?n)",
     template_implication
      ([template_inequation
         (less_than, template_var 2,
          template_app
           (template_hole 6,
            template_app
             (template_app (template_hole 5, template_var 1),
              template_app (template_hole 4, template_var 0))))],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 1)),
           template_var 2),
         template_app
          (template_app (template_hole 2, template_var 0),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 2))))),
    ("IL_AF_Stream.i_take_Suc_Max_eq_imp_i_f_join_eq",
     "?f \<Down> Suc (Max ?I) = ?g \<Down> Suc (Max ?I) ==>
      ?f \<Join>\<^sub> ?I = ?g \<Join>\<^sub> ?I",
     template_implication
      ([template_equation
         (template_app
           (template_app
             (template_hole 3,
              template_app
               (template_hole 2,
                template_app (template_hole 1, template_var 2))),
            template_var 1),
          template_app
           (template_app
             (template_hole 3,
              template_app
               (template_hole 2,
                template_app (template_hole 1, template_var 2))),
            template_var 0))],
       template_equation
        (template_app
          (template_app (template_hole 0, template_var 1), template_var 2),
         template_app
          (template_app (template_hole 0, template_var 0),
           template_var 2)))),
    ("IL_AF_Stream.i_f_join_i_expand_iT_Mult",
     "[| 0 < ?k; finite ?I |]
      ==> ?f \<odot> ?k \<Join>\<^sub> (?I \<otimes> ?k) =
          ?f \<Join>\<^sub> ?I",
     template_implication
      ([template_inequation (less_than, template_hole 5, template_var 2),
        template_predicate
         (template_app (template_hole 4, template_var 1))],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 2)),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 2)),
         template_app
          (template_app (template_hole 2, template_var 0),
           template_var 1)))),
    ("IL_AF_Stream.f_join_snoc",
     "(?xs @ [?x]) \<Join>\<^sub> ?I =
      ?xs \<Join>\<^sub> ?I @ (if length ?xs : ?I then [?x] else [])",
     template_equation
      (template_app
        (template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, template_var 2),
             template_app
              (template_app (template_hole 4, template_var 1),
               template_hole 3))),
         template_var 0),
       template_app
        (template_app
          (template_hole 5,
           template_app
            (template_app (template_hole 6, template_var 2),
             template_var 0)),
         template_app
          (template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_hole 1,
                   template_app (template_hole 0, template_var 2)),
                 template_var 0)),
             template_app
              (template_app (template_hole 4, template_var 1),
               template_hole 3)),
           template_hole 3)))),
    ("IL_AF_Stream.i_join_i_append",
     "infinite ?I ==>
      (?xs \<frown> ?f) \<Join>\<^sub> ?I =
      ?xs \<Join>\<^sub> ?I \<frown>
      ?f \<Join>\<^sub> (?I \<oplus>- length ?xs)",
     template_implication
      ([template_negation
         (
            template_predicate
             (template_app (template_hole 6, template_var 2))
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_var 1),
               template_var 0)),
           template_var 2),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_var 1),
               template_var 2)),
           template_app
            (template_app (template_hole 4, template_var 0),
             template_app
              (template_app (template_hole 1, template_var 2),
               template_app (template_hole 0, template_var 1))))))),
    ("IL_AF_Stream.i_join_i_expand_iMODb",
     "0 < ?k ==>
      ?f \<odot> ?k \<Join>\<^sub> [ ?n * ?k, mod ?k, ?d ] =
      ?f \<Join>\<^sub> [?n\<dots>,?d]",
     template_implication
      ([template_inequation (less_than, template_hole 6, template_var 3)],
       template_equation
        (template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_var 2),
               template_var 3)),
           template_app
            (template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_var 1),
                   template_var 3)),
               template_var 3),
             template_var 0)),
         template_app
          (template_app (template_hole 4, template_var 2),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0))))),
    ("IL_AF_Stream.f_join_f_expand_iMODb",
     "0 < ?k ==>
      ?xs \<odot> ?k \<Join>\<^sub> [ ?n * ?k, mod ?k, ?d ] =
      ?xs \<Join>\<^sub> [?n\<dots>,?d]",
     template_implication
      ([template_inequation (less_than, template_hole 6, template_var 3)],
       template_equation
        (template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_var 2),
               template_var 3)),
           template_app
            (template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_var 1),
                   template_var 3)),
               template_var 3),
             template_var 0)),
         template_app
          (template_app (template_hole 4, template_var 2),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0))))),
    ("IL_AF_Stream.i_f_join_i_expand_iMODb",
     "0 < ?k ==>
      ?f \<odot> ?k \<Join>\<^sub> [ ?n * ?k, mod ?k, ?d ] =
      ?f \<Join>\<^sub> [?n\<dots>,?d]",
     template_implication
      ([template_inequation (less_than, template_hole 6, template_var 3)],
       template_equation
        (template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_var 2),
               template_var 3)),
           template_app
            (template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_var 1),
                   template_var 3)),
               template_var 3),
             template_var 0)),
         template_app
          (template_app (template_hole 4, template_var 2),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0))))),
    ("IL_AF_Stream.i_join_finite_i_drop_card_eq_const_nth_Max",
     "[| finite ?I; ?I ~= {} |]
      ==> ?f \<Join>\<^sub> ?I \<Up> card ?I = (%n. ?f (Max ?I))",
     template_implication
      ([template_predicate (template_app (template_hole 8, template_var 1)),
        template_negation
         (template_equation (template_var 1, template_hole 5))],
       template_equation
        (template_app
          (template_app
            (template_hole 3,
             template_app (template_hole 2, template_var 1)),
           template_app
            (template_app (template_hole 1, template_var 0),
             template_var 1)),
         t_empty))),
    ("IL_AF_Stream.drop_f_join_if",
     "?xs \<Join>\<^sub> ?I \<up> ?n =
      (if ?n < card (?I \<down>< length ?xs)
       then ?xs \<Join>\<^sub> (?I \<down>\<ge> (?I \<rightarrow> ?n))
       else [])",
     template_equation
      (template_app
        (template_app (template_hole 9, template_var 2),
         template_app
          (template_app (template_hole 8, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_app
            (template_hole 7,
             template_app
              (template_app (template_hole 6, template_var 2),
               template_app
                (template_hole 5,
                 template_app
                  (template_app (template_hole 4, template_var 0),
                   template_app (template_hole 3, template_var 1))))),
           template_app
            (template_app (template_hole 8, template_var 1),
             template_app
              (template_app (template_hole 2, template_var 0),
               template_app
                (template_app (template_hole 1, template_var 0),
                 template_var 2)))),
         template_hole 0))),
    ("IL_AF_Stream.iT_Mult_iAll_i_expand_nth_iff",
     "0 < ?k ==>
      (\<box> t ?I \<otimes> ?k. ?P ((?f \<odot> ?k) t)) =
      (\<box> t ?I. ?P (?f t))",
     template_implication
      ([template_inequation (less_than, template_hole 4, template_var 3)],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 2),
               template_var 3)),
           t_empty),
         template_app
          (template_app (template_hole 2, template_var 2), t_empty)))),
    ("IL_AF_Stream.f_join_f_shrink_iMODb_0",
     "0 < ?k ==>
      ?xs \<longmapsto> ?k \<Join>\<^sub> [ ?k - 1, mod ?k, ?n ] =
      ?xs \<div> ?k \<Join>\<^sub> [\<dots>?n]",
     template_implication
      ([template_inequation (less_than, template_hole 8, template_var 2)],
       template_equation
        (template_app
          (template_app
            (template_hole 6,
             template_app
              (template_app (template_hole 5, template_var 1),
               template_var 2)),
           template_app
            (template_app
              (template_app
                (template_hole 4,
                 template_app
                  (template_app (template_hole 3, template_var 2),
                   template_hole 2)),
               template_var 2),
             template_var 0)),
         template_app
          (template_app
            (template_hole 6,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 2)),
           template_app (template_hole 0, template_var 0))))),
    ("IL_AF_Stream.i_f_join_i_shrink_iMODb_0",
     "0 < ?k ==>
      ?f \<longmapsto> ?k \<Join>\<^sub> [ ?k - 1, mod ?k, ?n ] =
      ?f \<div> ?k \<Join>\<^sub> [\<dots>?n]",
     template_implication
      ([template_inequation (less_than, template_hole 8, template_var 2)],
       template_equation
        (template_app
          (template_app
            (template_hole 6,
             template_app
              (template_app (template_hole 5, template_var 1),
               template_var 2)),
           template_app
            (template_app
              (template_app
                (template_hole 4,
                 template_app
                  (template_app (template_hole 3, template_var 2),
                   template_hole 2)),
               template_var 2),
             template_var 0)),
         template_app
          (template_app
            (template_hole 6,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 2)),
           template_app (template_hole 0, template_var 0))))),
    ("IL_AF_Stream.drop_f_join_eq1",
     "?n < card (?I \<down>< length ?xs) ==>
      ?xs \<Join>\<^sub> ?I \<up> ?n =
      ?xs \<Join>\<^sub> (?I \<down>\<ge> (?I \<rightarrow> ?n))",
     template_implication
      ([template_inequation
         (less_than, template_var 2,
          template_app
           (template_hole 7,
            template_app
             (template_app (template_hole 6, template_var 1),
              template_app (template_hole 5, template_var 0))))],
       template_equation
        (template_app
          (template_app (template_hole 3, template_var 2),
           template_app
            (template_app (template_hole 2, template_var 0),
             template_var 1)),
         template_app
          (template_app (template_hole 2, template_var 0),
           template_app
            (template_app (template_hole 1, template_var 1),
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 2)))))),
    ("IL_AF_Stream.take_f_join_eq1",
     "?n < card (?I \<down>< length ?xs) ==>
      ?xs \<Join>\<^sub> ?I \<down> ?n =
      ?xs \<Join>\<^sub> (?I \<down>< (?I \<rightarrow> ?n))",
     template_implication
      ([template_inequation
         (less_than, template_var 2,
          template_app
           (template_hole 6,
            template_app
             (template_app (template_hole 5, template_var 1),
              template_app (template_hole 4, template_var 0))))],
       template_equation
        (template_app
          (template_app (template_hole 2, template_var 2),
           template_app
            (template_app (template_hole 1, template_var 0),
             template_var 1)),
         template_app
          (template_app (template_hole 1, template_var 0),
           template_app
            (template_app (template_hole 5, template_var 1),
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 2)))))),
    ("IL_AF_Stream.i_join_i_expand_iT_Mult",
     "[| 0 < ?k; ?I ~= {} |]
      ==> ?f \<odot> ?k \<Join>\<^sub> (?I \<otimes> ?k) =
          ?f \<Join>\<^sub> ?I",
     template_implication
      ([template_inequation (less_than, template_hole 7, template_var 2),
        template_negation
         (template_equation (template_var 1, template_hole 4))],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 2)),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 2)),
         template_app
          (template_app (template_hole 2, template_var 0),
           template_var 1)))),
    ("IL_AF_Stream.drop_i_f_join_if",
     "finite ?I ==>
      ?f \<Join>\<^sub> ?I \<up> ?n =
      (if ?n < card ?I
       then ?f \<Join>\<^sub> (?I \<down>\<ge> (?I \<rightarrow> ?n))
       else [])",
     template_implication
      ([template_predicate
         (template_app (template_hole 9, template_var 2))],
       template_equation
        (template_app
          (template_app (template_hole 7, template_var 1),
           template_app
            (template_app (template_hole 6, template_var 0),
             template_var 2)),
         template_app
          (template_app
            (template_app
              (template_hole 5,
               template_app
                (template_app (template_hole 4, template_var 1),
                 template_app (template_hole 3, template_var 2))),
             template_app
              (template_app (template_hole 6, template_var 0),
               template_app
                (template_app (template_hole 2, template_var 2),
                 template_app
                  (template_app (template_hole 1, template_var 2),
                   template_var 1)))),
           template_hole 0)))),
    ("IL_AF_Stream.take_f_join_if",
     "?xs \<Join>\<^sub> ?I \<down> ?n =
      (if ?n < card (?I \<down>< length ?xs)
       then ?xs \<Join>\<^sub> (?I \<down>< (?I \<rightarrow> ?n))
       else ?xs \<Join>\<^sub> ?I)",
     template_equation
      (template_app
        (template_app (template_hole 7, template_var 2),
         template_app
          (template_app (template_hole 6, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app (template_hole 4, template_var 2),
               template_app
                (template_hole 3,
                 template_app
                  (template_app (template_hole 2, template_var 0),
                   template_app (template_hole 1, template_var 1))))),
           template_app
            (template_app (template_hole 6, template_var 1),
             template_app
              (template_app (template_hole 2, template_var 0),
               template_app
                (template_app (template_hole 0, template_var 0),
                 template_var 2)))),
         template_app
          (template_app (template_hole 6, template_var 1),
           template_var 0)))),
    ("IL_AF_Stream.i_f_join_insert",
     "finite ?I ==>
      ?f \<Join>\<^sub> insert ?n ?I =
      ?f \<Join>\<^sub> (?I \<down>< ?n) @
      ?f ?n # ?f \<Join>\<^sub> (?I \<down>> ?n)",
     template_implication
      ([template_predicate
         (template_app (template_hole 7, template_var 2))],
       template_equation
        (template_app
          (template_app (template_hole 5, template_var 1),
           template_app
            (template_app (template_hole 4, template_var 0),
             template_var 2)),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 5, template_var 1),
               template_app
                (template_app (template_hole 2, template_var 2),
                 template_var 0))),
           template_app
            (template_app
              (template_hole 1,
               template_app (template_var 1, template_var 0)),
             template_app
              (template_app (template_hole 5, template_var 1),
               template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 0))))))),
    ("IL_AF_Stream.f_join_union",
     "[| finite ?A; Max ?A < iMin ?B |]
      ==> ?xs \<Join>\<^sub> (?A Un ?B) =
          ?xs \<Join>\<^sub> ?A @ ?xs \<Join>\<^sub> ?B",
     template_implication
      ([template_predicate (template_app (template_hole 7, template_var 2)),
        template_inequation
         (less_than, template_app (template_hole 5, template_var 2),
          template_app (template_hole 4, template_var 1))],
       template_equation
        (template_app
          (template_app (template_hole 2, template_var 0),
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_app
          (template_app
            (template_hole 0,
             template_app
              (template_app (template_hole 2, template_var 0),
               template_var 2)),
           template_app
            (template_app (template_hole 2, template_var 0),
             template_var 1))))),
    ("IL_AF_Stream.take_Suc_Max_eq_imp_f_join_eq",
     "[| finite ?I; ?xs \<down> Suc (Max ?I) = ?ys \<down> Suc (Max ?I) |]
      ==> ?xs \<Join>\<^sub> ?I = ?ys \<Join>\<^sub> ?I",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 2)),
        template_equation
         (template_app
           (template_app
             (template_hole 3,
              template_app
               (template_hole 2,
                template_app (template_hole 1, template_var 2))),
            template_var 1),
          template_app
           (template_app
             (template_hole 3,
              template_app
               (template_hole 2,
                template_app (template_hole 1, template_var 2))),
            template_var 0))],
       template_equation
        (template_app
          (template_app (template_hole 0, template_var 1), template_var 2),
         template_app
          (template_app (template_hole 0, template_var 0),
           template_var 2)))),
    ("IL_AF_Stream.take_i_f_join_if",
     "finite ?I ==>
      ?f \<Join>\<^sub> ?I \<down> ?n =
      (if ?n < card ?I
       then ?f \<Join>\<^sub> (?I \<down>< (?I \<rightarrow> ?n))
       else ?f \<Join>\<^sub> ?I)",
     template_implication
      ([template_predicate
         (template_app (template_hole 8, template_var 2))],
       template_equation
        (template_app
          (template_app (template_hole 6, template_var 1),
           template_app
            (template_app (template_hole 5, template_var 0),
             template_var 2)),
         template_app
          (template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_var 1),
                 template_app (template_hole 2, template_var 2))),
             template_app
              (template_app (template_hole 5, template_var 0),
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_app
                  (template_app (template_hole 0, template_var 2),
                   template_var 1)))),
           template_app
            (template_app (template_hole 5, template_var 0),
             template_var 2))))),
    ("IL_AF_Stream.i_join_i_shrink_iMOD",
     "0 < ?k ==>
      ?f \<longmapsto> ?k \<Join>\<^sub> [ ?n * ?k + (?k - 1), mod ?k ] =
      ?f \<div> ?k \<Join>\<^sub> [?n\<dots>]",
     template_implication
      ([template_inequation (less_than, template_hole 10, template_var 2)],
       template_equation
        (template_app
          (template_app
            (template_hole 8,
             template_app
              (template_app (template_hole 7, template_var 1),
               template_var 2)),
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_var 2)),
                 template_app
                  (template_app (template_hole 3, template_var 2),
                   template_hole 2))),
             template_var 2)),
         template_app
          (template_app
            (template_hole 8,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 2)),
           template_app (template_hole 0, template_var 0))))),
    ("IL_AF_Stream.f_join_f_shrink_iMOD",
     "0 < ?k ==>
      ?xs \<longmapsto> ?k \<Join>\<^sub> [ ?n * ?k + (?k - 1), mod ?k ] =
      ?xs \<div> ?k \<Join>\<^sub> [?n\<dots>]",
     template_implication
      ([template_inequation (less_than, template_hole 10, template_var 2)],
       template_equation
        (template_app
          (template_app
            (template_hole 8,
             template_app
              (template_app (template_hole 7, template_var 1),
               template_var 2)),
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_var 2)),
                 template_app
                  (template_app (template_hole 3, template_var 2),
                   template_hole 2))),
             template_var 2)),
         template_app
          (template_app
            (template_hole 8,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 2)),
           template_app (template_hole 0, template_var 0))))),
    ("IL_AF_Stream.i_join_finite_nth_ge_card_eq_nth_Max",
     "[| finite ?I; ?I ~= {}; card ?I <= Suc ?n |]
      ==> (?f \<Join>\<^sub> ?I) ?n = ?f (Max ?I)",
     template_implication
      ([template_predicate (template_app (template_hole 9, template_var 2)),
        template_negation
         (template_equation (template_var 2, template_hole 6)),
        template_inequation
         (less_equals, template_app (template_hole 4, template_var 2),
          template_app (template_hole 3, template_var 1))],
       template_equation
        (template_app
          (template_app
            (template_app (template_hole 1, template_var 0),
             template_var 2),
           template_var 1),
         template_app
          (template_var 0,
           template_app (template_hole 0, template_var 2))))),
    ("IL_AF_Stream.i_shrink_eq_NoMsg_iAll_conv",
     "0 < ?k ==>
      ((?s \<div> ?k) ?t = NoMsg) =
      (\<box> t1 [?t * ?k\<dots>,?k - Suc 0]. ?s t1 = NoMsg)",
     template_implication
      ([template_inequation (less_than, template_hole 9, template_var 2)],
       template_equation
        (template_app
          (template_app
            (template_hole 7,
             template_app
              (template_app
                (template_app (template_hole 6, template_var 1),
                 template_var 2),
               template_var 0)),
           template_hole 5),
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app (template_hole 2, template_var 0),
                   template_var 2)),
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_app (template_hole 0, template_hole 9)))),
           t_empty)))),
    ("IL_AF_Stream.i_shrink_eq_NoMsg_iAll_conv2",
     "0 < ?k ==>
      ((?s \<div> ?k) ?t = NoMsg) =
      (\<box> t1 [\<dots>?k - 1] \<oplus> ?t * ?k. ?s t1 = NoMsg)",
     template_implication
      ([template_inequation (less_than, template_hole 10, template_var 2)],
       template_equation
        (template_app
          (template_app
            (template_hole 8,
             template_app
              (template_app
                (template_app (template_hole 7, template_var 1),
                 template_var 2),
               template_var 0)),
           template_hole 6),
         template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app
                (template_hole 4,
                 template_app
                  (template_hole 3,
                   template_app
                    (template_app (template_hole 2, template_var 2),
                     template_hole 1))),
               template_app
                (template_app (template_hole 0, template_var 0),
                 template_var 2))),
           t_empty)))),
    ("IL_AF_Stream.i_join_finite_i_append_nth_Max_conv",
     "[| finite ?I; ?I ~= {} |]
      ==> ?f \<Join>\<^sub> ?I =
          ?f \<Down> Suc (Max ?I) \<Join>\<^sub> ?I \<frown>
          (%n. ?f (Max ?I))",
     template_implication
      ([template_predicate
         (template_app (template_hole 10, template_var 1)),
        template_negation
         (template_equation (template_var 1, template_hole 7))],
       template_equation
        (template_app
          (template_app (template_hole 5, template_var 0), template_var 1),
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app
                    (template_hole 2,
                     template_app
                      (template_hole 1,
                       template_app (template_hole 0, template_var 1))),
                   template_var 0)),
               template_var 1)),
           t_empty)))),
    ("IL_AF_Stream.f_join_f_shrink_iMODb",
     "0 < ?k ==>
      ?xs \<longmapsto> ?k \<Join>\<^sub>
      [ ?n * ?k + (?k - 1), mod ?k, ?d ] =
      ?xs \<div> ?k \<Join>\<^sub> [?n\<dots>,?d]",
     template_implication
      ([template_inequation (less_than, template_hole 10, template_var 3)],
       template_equation
        (template_app
          (template_app
            (template_hole 8,
             template_app
              (template_app (template_hole 7, template_var 2),
               template_var 3)),
           template_app
            (template_app
              (template_app
                (template_hole 6,
                 template_app
                  (template_app
                    (template_hole 5,
                     template_app
                      (template_app (template_hole 4, template_var 1),
                       template_var 3)),
                   template_app
                    (template_app (template_hole 3, template_var 3),
                     template_hole 2))),
               template_var 3),
             template_var 0)),
         template_app
          (template_app
            (template_hole 8,
             template_app
              (template_app (template_hole 1, template_var 2),
               template_var 3)),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0))))),
    ("IL_AF_Stream.i_f_join_i_shrink_iMODb",
     "0 < ?k ==>
      ?f \<longmapsto> ?k \<Join>\<^sub>
      [ ?n * ?k + (?k - 1), mod ?k, ?d ] =
      ?f \<div> ?k \<Join>\<^sub> [?n\<dots>,?d]",
     template_implication
      ([template_inequation (less_than, template_hole 10, template_var 3)],
       template_equation
        (template_app
          (template_app
            (template_hole 8,
             template_app
              (template_app (template_hole 7, template_var 2),
               template_var 3)),
           template_app
            (template_app
              (template_app
                (template_hole 6,
                 template_app
                  (template_app
                    (template_hole 5,
                     template_app
                      (template_app (template_hole 4, template_var 1),
                       template_var 3)),
                   template_app
                    (template_app (template_hole 3, template_var 3),
                     template_hole 2))),
               template_var 3),
             template_var 0)),
         template_app
          (template_app
            (template_hole 8,
             template_app
              (template_app (template_hole 1, template_var 2),
               template_var 3)),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0))))),
    ("IL_AF_Stream.f_join_insert",
     "?n < length ?xs ==>
      ?xs \<Join>\<^sub> insert ?n ?I =
      ?xs \<Join>\<^sub> (?I \<down>< ?n) @
      ?xs ! ?n # ?xs \<Join>\<^sub> (?I \<down>> ?n)",
     template_implication
      ([template_inequation
         (less_than, template_var 2,
          template_app (template_hole 8, template_var 1))],
       template_equation
        (template_app
          (template_app (template_hole 6, template_var 1),
           template_app
            (template_app (template_hole 5, template_var 2),
             template_var 0)),
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 6, template_var 1),
               template_app
                (template_app (template_hole 3, template_var 0),
                 template_var 2))),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 1),
                 template_var 2)),
             template_app
              (template_app (template_hole 6, template_var 1),
               template_app
                (template_app (template_hole 0, template_var 0),
                 template_var 2))))))),
    ("IL_AF_Stream.i_f_join_union",
     "[| finite ?A; finite ?B; Max ?A < iMin ?B |]
      ==> ?f \<Join>\<^sub> (?A Un ?B) =
          ?f \<Join>\<^sub> ?A @ ?f \<Join>\<^sub> ?B",
     template_implication
      ([template_predicate (template_app (template_hole 7, template_var 2)),
        template_predicate (template_app (template_hole 7, template_var 1)),
        template_inequation
         (less_than, template_app (template_hole 5, template_var 2),
          template_app (template_hole 4, template_var 1))],
       template_equation
        (template_app
          (template_app (template_hole 2, template_var 0),
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_app
          (template_app
            (template_hole 0,
             template_app
              (template_app (template_hole 2, template_var 0),
               template_var 2)),
           template_app
            (template_app (template_hole 2, template_var 0),
             template_var 1))))),
    ("IL_AF_Stream.f_join_f_shrink_iT_Div_mod",
     "[| 0 < ?k; ALL x:?I. x mod ?k = ?k - 1 |]
      ==> ?xs \<longmapsto> ?k \<Join>\<^sub> ?I =
          ?xs \<div> ?k \<Join>\<^sub> (?I \<oslash> ?k)",
     template_implication
      ([template_inequation (less_than, template_hole 10, template_var 2),
        template_predicate
         (
            template_app
             (template_app (template_hole 9, template_var 1), t_empty)
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_var 0),
               template_var 2)),
           template_var 1),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 2)),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 2))))),
    ("IL_AF_Stream.f_join_f_shrink_iT_Plus_iT_Div_mod",
     "[| 0 < ?k; ALL x:?I. x mod ?k = 0 |]
      ==> ?xs \<longmapsto> ?k \<Join>\<^sub> (?I \<oplus> ?k - 1) =
          ?xs \<div> ?k \<Join>\<^sub> (?I \<oslash> ?k)",
     template_implication
      ([template_inequation (less_than, template_hole 11, template_var 2),
        template_predicate
         (
            template_app
             (template_app (template_hole 10, template_var 1), t_empty)
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 6,
             template_app
              (template_app (template_hole 5, template_var 0),
               template_var 2)),
           template_app
            (template_app (template_hole 4, template_var 1),
             template_app
              (template_app (template_hole 3, template_var 2),
               template_hole 2))),
         template_app
          (template_app
            (template_hole 6,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 2)),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 2))))),
    ("IL_AF_Stream.i_join_insert",
     "?f \<Join>\<^sub> insert ?n ?I =
      ?f \<Down> ?n \<Join>\<^sub> (?I \<down>< ?n) \<frown>
      [?f ?n] \<frown>
      (if ?I \<down>> ?n = {} then %x. ?f ?n
       else ?f \<Join>\<^sub> (?I \<down>> ?n))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 11, template_var 2),
              template_app
               (template_app (template_hole 10, template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 9,
               template_app
                (template_app
                  (template_hole 8,
                   template_app
                    (template_app (template_hole 7, template_var 1),
                     template_var 2)),
                 template_app
                  (template_app (template_hole 6, template_var 0),
                   template_var 1))),
             template_app
              (template_app
                (template_hole 9,
                 template_app
                  (template_app
                    (template_hole 5,
                     template_app (template_var 2, template_var 1)),
                   template_hole 4)),
               template_app
                (template_app
                  (template_app
                    (template_hole 3,
                     template_app
                      (template_app
                        (template_hole 2,
                         template_app
                          (template_app (template_hole 1, template_var 0),
                           template_var 1)),
                       template_hole 0)),
                   t_empty),
                 template_app
                  (template_app (template_hole 11, template_var 2),
                   template_app
                    (template_app (template_hole 1, template_var 0),
                     template_var 1)))))
           ))),
    ("IL_AF_Stream.f_join_aux_nth",
     "?i < card (?I Int {?n..<?n + length ?xs}) ==>
      f_join_aux ?xs ?n ?I ! ?i =
      ?xs ! (((?I Int {?n..<?n + length ?xs}) \<rightarrow> ?i) - ?n)",
     template_implication
      ([template_inequation
         (less_than, template_var 3,
          template_app
           (template_hole 9,
            template_app
             (template_app (template_hole 8, template_var 2),
              template_app
               (template_app (template_hole 7, template_var 1),
                template_app
                 (template_app (template_hole 6, template_var 1),
                  template_app (template_hole 5, template_var 0))))))],
       template_equation
        (template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app
                (template_app (template_hole 2, template_var 0),
                 template_var 1),
               template_var 2)),
           template_var 3),
         template_app
          (template_app (template_hole 3, template_var 0),
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app
                  (template_hole 0,
                   template_app
                    (template_app (template_hole 8, template_var 2),
                     template_app
                      (template_app (template_hole 7, template_var 1),
                       template_app
                        (template_app (template_hole 6, template_var 1),
                         template_app (template_hole 5, template_var 0))))),
                 template_var 3)),
             template_var 1))))),
    ("IL_AF_Stream.i_join_union",
     "[| finite ?A; Max ?A < iMin ?B; ?B ~= {} |]
      ==> ?f \<Join>\<^sub> (?A Un ?B) =
          ?f \<Down> Suc (Max ?A) \<Join>\<^sub> ?A \<frown>
          ?f \<Join>\<^sub> ?B",
     template_implication
      ([template_predicate
         (template_app (template_hole 13, template_var 2)),
        template_inequation
         (less_than, template_app (template_hole 11, template_var 2),
          template_app (template_hole 10, template_var 1)),
        template_negation
         (template_equation (template_var 1, template_hole 7))],
       template_equation
        (template_app
          (template_app (template_hole 5, template_var 0),
           template_app
            (template_app (template_hole 4, template_var 2),
             template_var 1)),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app
                    (template_hole 1,
                     template_app
                      (template_hole 0,
                       template_app (template_hole 11, template_var 2))),
                   template_var 0)),
               template_var 2)),
           template_app
            (template_app (template_hole 5, template_var 0),
             template_var 1))))),
    ("IL_AF_Stream.i_f_join_i_shrink_iT_Div_mod",
     "[| 0 < ?k; finite ?I; ALL x:?I. x mod ?k = ?k - 1 |]
      ==> ?f \<longmapsto> ?k \<Join>\<^sub> ?I =
          ?f \<div> ?k \<Join>\<^sub> (?I \<oslash> ?k)",
     template_implication
      ([template_inequation (less_than, template_hole 11, template_var 2),
        template_predicate
         (template_app (template_hole 10, template_var 1)),
        template_predicate
         (
            template_app
             (template_app (template_hole 9, template_var 1), t_empty)
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_var 0),
               template_var 2)),
           template_var 1),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 2)),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 2))))),
    ("IL_AF_Stream.i_f_join_i_shrink_iT_Plus_iT_Div_mod",
     "[| 0 < ?k; finite ?I; ALL x:?I. x mod ?k = 0 |]
      ==> ?f \<longmapsto> ?k \<Join>\<^sub> (?I \<oplus> ?k - 1) =
          ?f \<div> ?k \<Join>\<^sub> (?I \<oslash> ?k)",
     template_implication
      ([template_inequation (less_than, template_hole 12, template_var 2),
        template_predicate
         (template_app (template_hole 11, template_var 1)),
        template_predicate
         (
            template_app
             (template_app (template_hole 10, template_var 1), t_empty)
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 6,
             template_app
              (template_app (template_hole 5, template_var 0),
               template_var 2)),
           template_app
            (template_app (template_hole 4, template_var 1),
             template_app
              (template_app (template_hole 3, template_var 2),
               template_hole 2))),
         template_app
          (template_app
            (template_hole 6,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 2)),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 2))))),
    ("IL_AF_Stream.i_join_i_shrink_iT_Div_mod",
     "[| 0 < ?k; ?I ~= {}; ALL x:?I. x mod ?k = ?k - 1 |]
      ==> ?f \<longmapsto> ?k \<Join>\<^sub> ?I =
          ?f \<div> ?k \<Join>\<^sub> (?I \<oslash> ?k)",
     template_implication
      ([template_inequation (less_than, template_hole 13, template_var 2),
        template_negation
         (template_equation (template_var 1, template_hole 10)),
        template_predicate
         (
            template_app
             (template_app (template_hole 9, template_var 1), t_empty)
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_var 0),
               template_var 2)),
           template_var 1),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 2)),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 2))))),
    ("IL_AF_Stream.i_shrink_eq_Msg_iSince_conv",
     "[| 0 < ?k; ?m ~= NoMsg |]
      ==> ((?s \<div> ?k) ?t = ?m) =
          (?s t2 = NoMsg. t2 \<S> t1 [?t * ?k\<dots>,?k - Suc 0].
           ?s t1 = ?m)",
     template_implication
      ([template_inequation (less_than, template_hole 10, template_var 3),
        template_negation
         (template_equation (template_var 2, template_hole 7))],
       template_equation
        (template_app
          (template_app
            (template_hole 8,
             template_app
              (template_app
                (template_app (template_hole 5, template_var 1),
                 template_var 3),
               template_var 0)),
           template_var 2),
         template_app
          (template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app
                  (template_hole 3,
                   template_app
                    (template_app (template_hole 2, template_var 0),
                     template_var 3)),
                 template_app
                  (template_app (template_hole 1, template_var 3),
                   template_app (template_hole 0, template_hole 10)))),
             t_empty),
           t_empty)))),
    ("IL_AF_Stream.i_shrink_eq_Msg_iSince_conv2",
     "[| 0 < ?k; ?m ~= NoMsg |]
      ==> ((?s \<div> ?k) ?t = ?m) =
          (?s t2 = NoMsg. t2 \<S> t1 [\<dots>?k - 1] \<oplus> ?t * ?k.
           ?s t1 = ?m)",
     template_implication
      ([template_inequation (less_than, template_hole 11, template_var 3),
        template_negation
         (template_equation (template_var 2, template_hole 8))],
       template_equation
        (template_app
          (template_app
            (template_hole 9,
             template_app
              (template_app
                (template_app (template_hole 6, template_var 1),
                 template_var 3),
               template_var 0)),
           template_var 2),
         template_app
          (template_app
            (template_app
              (template_hole 5,
               template_app
                (template_app
                  (template_hole 4,
                   template_app
                    (template_hole 3,
                     template_app
                      (template_app (template_hole 2, template_var 3),
                       template_hole 1))),
                 template_app
                  (template_app (template_hole 0, template_var 0),
                   template_var 3))),
             t_empty),
           t_empty)))),
    ("IL_AF_Stream.i_join_i_shrink_iT_Plus_iT_Div_mod",
     "[| 0 < ?k; ?I ~= {}; ALL x:?I. x mod ?k = 0 |]
      ==> ?f \<longmapsto> ?k \<Join>\<^sub> (?I \<oplus> ?k - 1) =
          ?f \<div> ?k \<Join>\<^sub> (?I \<oslash> ?k)",
     template_implication
      ([template_inequation (less_than, template_hole 14, template_var 2),
        template_negation
         (template_equation (template_var 1, template_hole 11)),
        template_predicate
         (
            template_app
             (template_app (template_hole 10, template_var 1), t_empty)
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 6,
             template_app
              (template_app (template_hole 5, template_var 0),
               template_var 2)),
           template_app
            (template_app (template_hole 4, template_var 1),
             template_app
              (template_app (template_hole 3, template_var 2),
               template_hole 2))),
         template_app
          (template_app
            (template_hole 6,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 2)),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 2))))),
    ("IL_AF_Stream.f_join_f_shrink_iT_Plus_iT_Div_mod_subst",
     "[| 0 < ?k; ALL x:?I. x mod ?k = 0; ?A = ?I \<oplus> ?k - 1;
         ?B = ?I \<oslash> ?k |]
      ==> ?xs \<longmapsto> ?k \<Join>\<^sub> ?A =
          ?xs \<div> ?k \<Join>\<^sub> ?B",
     template_implication
      ([template_inequation (less_than, template_hole 12, template_var 4),
        template_predicate
         (
            template_app
             (template_app (template_hole 11, template_var 3), t_empty)
            ),
        template_equation
         (template_var 2,
          template_app
           (template_app (template_hole 7, template_var 3),
            template_app
             (template_app (template_hole 6, template_var 4),
              template_hole 5))),
        template_equation
         (template_var 1,
          template_app
           (template_app (template_hole 4, template_var 3),
            template_var 4))],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 4)),
           template_var 2),
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 0, template_var 0),
               template_var 4)),
           template_var 1)))),
    ("IL_AF_Stream.i_f_join_i_shrink_iT_Plus_iT_Div_mod_subst",
     "[| 0 < ?k; finite ?I; ALL x:?I. x mod ?k = 0; ?A = ?I \<oplus> ?k - 1;
         ?B = ?I \<oslash> ?k |]
      ==> ?f \<longmapsto> ?k \<Join>\<^sub> ?A =
          ?f \<div> ?k \<Join>\<^sub> ?B",
     template_implication
      ([template_inequation (less_than, template_hole 13, template_var 4),
        template_predicate
         (template_app (template_hole 12, template_var 3)),
        template_predicate
         (
            template_app
             (template_app (template_hole 11, template_var 3), t_empty)
            ),
        template_equation
         (template_var 2,
          template_app
           (template_app (template_hole 7, template_var 3),
            template_app
             (template_app (template_hole 6, template_var 4),
              template_hole 5))),
        template_equation
         (template_var 1,
          template_app
           (template_app (template_hole 4, template_var 3),
            template_var 4))],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 4)),
           template_var 2),
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 0, template_var 0),
               template_var 4)),
           template_var 1)))),
    ("IL_AF_Stream.i_join_i_shrink_iT_Plus_iT_Div_mod_subst",
     "[| 0 < ?k; ?I ~= {}; ALL x:?I. x mod ?k = 0; ?A = ?I \<oplus> ?k - 1;
         ?B = ?I \<oslash> ?k |]
      ==> ?f \<longmapsto> ?k \<Join>\<^sub> ?A =
          ?f \<div> ?k \<Join>\<^sub> ?B",
     template_implication
      ([template_inequation (less_than, template_hole 14, template_var 4),
        template_negation
         (template_equation (template_var 3, template_hole 11)),
        template_predicate
         (
            template_app
             (template_app (template_hole 10, template_var 3), t_empty)
            ),
        template_equation
         (template_var 2,
          template_app
           (template_app (template_hole 7, template_var 3),
            template_app
             (template_app (template_hole 6, template_var 4),
              template_hole 5))),
        template_equation
         (template_var 1,
          template_app
           (template_app (template_hole 4, template_var 3),
            template_var 4))],
       template_equation
        (template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_var 4)),
           template_var 2),
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 0, template_var 0),
               template_var 4)),
           template_var 1)))),
    ("IL_AF_Stream.i_shrink_eq_Msg_iEx_iAll_cut_greater_conv",
     "[| 0 < ?k; ?m ~= NoMsg |]
      ==> ((?s \<div> ?k) ?t = ?m) =
          (\<diamond> t1 [?t * ?k\<dots>,?k - Suc 0].
              ?s t1 = ?m &
              (\<box> t2 [?t * ?k\<dots>,?k - Suc 0] \<down>> t1.
                  ?s t2 = NoMsg))",
     template_implication
      ([template_inequation (less_than, template_hole 13, template_var 3),
        template_negation
         (template_equation (template_var 2, template_hole 10))],
       template_equation
        (template_app
          (template_app
            (template_hole 11,
             template_app
              (template_app
                (template_app (template_hole 8, template_var 1),
                 template_var 3),
               template_var 0)),
           template_var 2),
         template_app
          (template_app
            (template_hole 7,
             template_app
              (template_app
                (template_hole 6,
                 template_app
                  (template_app (template_hole 5, template_var 0),
                   template_var 3)),
               template_app
                (template_app (template_hole 4, template_var 3),
                 template_app (template_hole 3, template_hole 13)))),
           t_empty)))),
    ("IL_AF_Stream.i_shrink_eq_Msg_iEx_iAll_cut_greater_conv2",
     "[| 0 < ?k; ?m ~= NoMsg |]
      ==> ((?s \<div> ?k) ?t = ?m) =
          (\<diamond> t1 [\<dots>?k - 1] \<oplus> ?t * ?k.
              ?s t1 = ?m &
              (\<box> t2 ([\<dots>?k - 1] \<oplus> ?t * ?k) \<down>> t1.
                  ?s t2 = NoMsg))",
     template_implication
      ([template_inequation (less_than, template_hole 14, template_var 3),
        template_negation
         (template_equation (template_var 2, template_hole 11))],
       template_equation
        (template_app
          (template_app
            (template_hole 12,
             template_app
              (template_app
                (template_app (template_hole 9, template_var 1),
                 template_var 3),
               template_var 0)),
           template_var 2),
         template_app
          (template_app
            (template_hole 8,
             template_app
              (template_app
                (template_hole 7,
                 template_app
                  (template_hole 6,
                   template_app
                    (template_app (template_hole 5, template_var 3),
                     template_hole 4))),
               template_app
                (template_app (template_hole 3, template_var 0),
                 template_var 3))),
           t_empty)))),
    ("IL_AF_Stream.i_shrink_eq_Msg_iEx_iAll_conv",
     "[| 0 < ?k; ?m ~= NoMsg |]
      ==> ((?s \<div> ?k) ?t = ?m) =
          (\<diamond> t1 [?t * ?k\<dots>,?k - Suc 0].
              ?s t1 = ?m &
              (\<box> t2 [Suc t1\<dots>].
                  t2 <= ?t * ?k + ?k - Suc 0 --> ?s t2 = NoMsg))",
     template_implication
      ([template_inequation (less_than, template_hole 16, template_var 3),
        template_negation
         (template_equation (template_var 2, template_hole 13))],
       template_equation
        (template_app
          (template_app
            (template_hole 14,
             template_app
              (template_app
                (template_app (template_hole 11, template_var 1),
                 template_var 3),
               template_var 0)),
           template_var 2),
         template_app
          (template_app
            (template_hole 10,
             template_app
              (template_app
                (template_hole 9,
                 template_app
                  (template_app (template_hole 8, template_var 0),
                   template_var 3)),
               template_app
                (template_app (template_hole 7, template_var 3),
                 template_app (template_hole 6, template_hole 16)))),
           t_empty)))),
    ("IL_AF_Stream.i_shrink_eq_Msg_iEx_iAll_conv2",
     "[| 0 < ?k; ?m ~= NoMsg |]
      ==> ((?s \<div> ?k) ?t = ?m) =
          (\<diamond> t1 [\<dots>?k - 1] \<oplus> ?t * ?k.
              ?s t1 = ?m &
              (\<box> t2 [1\<dots>] \<oplus> t1.
                  t2 <= ?t * ?k + ?k - 1 --> ?s t2 = NoMsg))",
     template_implication
      ([template_inequation (less_than, template_hole 17, template_var 3),
        template_negation
         (template_equation (template_var 2, template_hole 14))],
       template_equation
        (template_app
          (template_app
            (template_hole 15,
             template_app
              (template_app
                (template_app (template_hole 12, template_var 1),
                 template_var 3),
               template_var 0)),
           template_var 2),
         template_app
          (template_app
            (template_hole 11,
             template_app
              (template_app
                (template_hole 10,
                 template_app
                  (template_hole 9,
                   template_app
                    (template_app (template_hole 8, template_var 3),
                     template_hole 7))),
               template_app
                (template_app (template_hole 6, template_var 0),
                 template_var 3))),
           t_empty)))),
    ("IL_AF_Stream.i_shrink_eq_NoMsg_iAll_start_event_conv",
     "[| 0 < ?k; !!t. ?event t = (t mod ?k = 0); ?t0.0 = ?t * ?k |]
      ==> ((?s \<div> ?k) ?t = NoMsg) =
          (?s ?t0.0 = NoMsg &
           (\<circle> t' ?t0.0 [0\<dots>].
               ?s t1 = NoMsg. t1 \<U> t2 [0\<dots>] \<oplus> t'.
               ?event t2))",
     template_implication
      ([template_inequation (less_than, template_hole 13, template_var 4),
        template_predicate (template_app (template_hole 12, t_empty)),
        template_equation
         (template_var 2,
          template_app
           (template_app (template_hole 8, template_var 1),
            template_var 4))],
       template_bimplication
        (template_equation
          (template_app
            (template_app
              (template_app (template_hole 6, template_var 0),
               template_var 4),
             template_var 1),
           template_hole 5),
         template_predicate
          (
             template_app
              (template_app
                (template_hole 4,
                 template_app
                  (template_app
                    (template_hole 7,
                     template_app (template_var 0, template_var 2)),
                   template_hole 5)),
               template_app
                (template_app
                  (template_app (template_hole 3, template_var 2),
                   template_app (template_hole 2, template_hole 13)),
                 t_empty))
             )))),
    ("IL_AF_Stream.i_shrink_eq_NoMsg_iAll_finish_event_conv",
     "[| 1 < ?k; !!t. ?event t = (t mod ?k = ?k - 1); ?t0.0 = ?t * ?k |]
      ==> ((?s \<div> ?k) ?t = NoMsg) =
          (?s ?t0.0 = NoMsg &
           (\<circle> t' ?t0.0 [0\<dots>].
               ?s t1 = NoMsg. t1 \<U> t2 [0\<dots>] \<oplus> t'.
               ?event t2 & ?s t2 = NoMsg))",
     template_implication
      ([template_inequation (less_than, template_hole 15, template_var 4),
        template_predicate (template_app (template_hole 14, t_empty)),
        template_equation
         (template_var 2,
          template_app
           (template_app (template_hole 9, template_var 1),
            template_var 4))],
       template_bimplication
        (template_equation
          (template_app
            (template_app
              (template_app (template_hole 7, template_var 0),
               template_var 4),
             template_var 1),
           template_hole 6),
         template_predicate
          (
             template_app
              (template_app
                (template_hole 5,
                 template_app
                  (template_app
                    (template_hole 8,
                     template_app (template_var 0, template_var 2)),
                   template_hole 6)),
               template_app
                (template_app
                  (template_app (template_hole 4, template_var 2),
                   template_app (template_hole 3, template_hole 2)),
                 t_empty))
             )))),
    ("IL_AF_Stream.i_shrink_eq_Msg_iUntil_finish_event_conv",
     "[| 1 < ?k; ?m ~= NoMsg; !!t. ?event t = (t mod ?k = ?k - 1);
         ?t0.0 = ?t * ?k |]
      ==> ((?s \<div> ?k) ?t = ?m) =
          ((~ ?event t1. t1 \<U> t2 [0\<dots>] \<oplus> ?t0.0.
            ?event t2 & ?s t2 = ?m) |
           (~ ?event t1. t1 \<U> t2 [0\<dots>] \<oplus> ?t0.0.
            ~ ?event t2 &
            ?s t2 = ?m &
            (\<circle> t' t2 [0\<dots>].
                ?s t3 = NoMsg. t3 \<U> t4 [0\<dots>] \<oplus> t'.
                ?event t4 & ?s t4 = NoMsg)))",
     template_implication
      ([template_inequation (less_than, template_hole 17, template_var 5),
        template_negation
         (template_equation (template_var 4, template_hole 14)),
        template_predicate (template_app (template_hole 13, t_empty)),
        template_equation
         (template_var 2,
          template_app
           (template_app (template_hole 8, template_var 1),
            template_var 5))],
       template_equation
        (template_app
          (template_app
            (template_hole 15,
             template_app
              (template_app
                (template_app (template_hole 7, template_var 0),
                 template_var 5),
               template_var 1)),
           template_var 4),
         template_app
          (template_app
            (template_hole 6,
             template_app
              (template_app
                (template_app
                  (template_hole 5,
                   template_app
                    (template_app
                      (template_hole 4,
                       template_app (template_hole 3, template_hole 2)),
                     template_var 2)),
                 t_empty),
               t_empty)),
           template_app
            (template_app
              (template_app
                (template_hole 5,
                 template_app
                  (template_app
                    (template_hole 4,
                     template_app (template_hole 3, template_hole 2)),
                   template_var 2)),
               t_empty),
             t_empty))))),
    ("IL_AF_Stream.i_shrink_eq_Msg_iUntil_start_event_conv",
     "[| 0 < ?k; ?m ~= NoMsg; !!t. ?event t = (t mod ?k = 0);
         ?t0.0 = ?t * ?k |]
      ==> ((?s \<div> ?k) ?t = ?m) =
          (?s ?t0.0 = ?m &
           (\<circle> t' ?t0.0 [0\<dots>].
               ?s t1 = NoMsg. t1 \<U> t2 [0\<dots>] \<oplus> t'.
               ?event t2) |
           (\<circle> t' ?t0.0 [0\<dots>].
               ~ ?event t1. t1 \<U> t2 [0\<dots>] \<oplus> t'.
               ?s t2 = ?m &
               ~ ?event t2 &
               (\<circle> t'' t2 [0\<dots>].
                   ?s t3 = NoMsg. t3 \<U> t4 [0\<dots>] \<oplus> t''.
                   ?event t4)))",
     template_implication
      ([template_inequation (less_than, template_hole 15, template_var 5),
        template_negation
         (template_equation (template_var 4, template_hole 12)),
        template_predicate (template_app (template_hole 11, t_empty)),
        template_equation
         (template_var 2,
          template_app
           (template_app (template_hole 7, template_var 1),
            template_var 5))],
       template_bimplication
        (template_equation
          (template_app
            (template_app
              (template_app (template_hole 6, template_var 0),
               template_var 5),
             template_var 1),
           template_var 4),
         template_predicate
          (
             template_app
              (template_app
                (template_hole 5,
                 template_app
                  (template_app
                    (template_hole 4,
                     template_app
                      (template_app
                        (template_hole 13,
                         template_app (template_var 0, template_var 2)),
                       template_var 4)),
                   template_app
                    (template_app
                      (template_app (template_hole 3, template_var 2),
                       template_app (template_hole 2, template_hole 15)),
                     t_empty))),
               template_app
                (template_app
                  (template_app (template_hole 3, template_var 2),
                   template_app (template_hole 2, template_hole 15)),
                 t_empty))
             ))))]
