   [("RatFPS.unit_factor_field", "unit_factor ?x = ?x",
     template_equation
      (template_app (template_hole 0, template_var 0), template_var 0)),
    ("RatFPS.fps_of_poly_code_post", "(0::?'a) * ?a = (0::?'a)",
     template_equation
      (template_app
        (template_app (template_hole 1, template_hole 0), template_var 0),
       template_hole 0)),
    ("RatFPS.fps_of_poly_code_post", "?a * (0::?'a) = (0::?'a)",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), template_hole 0),
       template_hole 0)),
    ("RatFPS.fps_of_poly_code_post", "?a - (0::?'a) = ?a",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), template_hole 0),
       template_var 0)),
    ("RatFPS.fps_of_poly_code_post", "(0::?'a) + ?a = ?a",
     template_equation
      (template_app
        (template_app (template_hole 1, template_hole 0), template_var 0),
       template_var 0)),
    ("RatFPS.fps_of_poly_code_post", "?a + (0::?'a) = ?a",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), template_hole 0),
       template_var 0)),
    ("RatFPS.ratfps_nth_0", "ratfps_nth 0 ?n = (0::?'a)",
     template_equation
      (template_app
        (template_app (template_hole 2, template_hole 1), template_var 0),
       template_hole 0)),
    ("RatFPS.fps_of_poly_code_post", "num.One * ?n = ?n",
     template_equation
      (template_app
        (template_app (template_hole 1, template_hole 0), template_var 0),
       template_var 0)),
    ("RatFPS.fps_of_poly_code_post", "?m * num.One = ?m",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), template_hole 0),
       template_var 0)),
    ("RatFPS.quot_to_ratfps_quot_of_ratfps",
     "quot_to_ratfps (quot_of_ratfps ?x) = ?x",
     template_equation
      (template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)),
       template_var 0)),
    ("RatFPS.fps_divide_1", "?a / 1 = ?a",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), template_hole 0),
       template_var 0)),
    ("RatFPS.fps_dehorner", "1 * ?a = ?a",
     template_equation
      (template_app
        (template_app (template_hole 1, template_hole 0), template_var 0),
       template_var 0)),
    ("RatFPS.fps_dehorner", "?a * 1 = ?a",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), template_hole 0),
       template_var 0)),
    ("RatFPS.fps_of_poly_code_post", "(0::?'a) - ?a = - ?a",
     template_equation
      (template_app
        (template_app (template_hole 2, template_hole 1), template_var 0),
       template_app (template_hole 0, template_var 0))),
    ("RatFPS.fps_of_poly_code_post", "\<bar>numeral ?n\<bar> = numeral ?n",
     template_equation
      (template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)),
       template_app (template_hole 0, template_var 0))),
    ("RatFPS.fps_of_ratfps_euclidean_size",
     "euclidean_size ?x = euclidean_size (fps_of_ratfps ?x)",
     template_equation
      (template_app (template_hole 2, template_var 0),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("RatFPS.ratfps_subdegree_altdef",
     "ratfps_subdegree ?x = subdegree (fps_of_ratfps ?x)",
     template_equation
      (template_app (template_hole 2, template_var 0),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("RatFPS.subdegree_code",
     "subdegree (fps_of_ratfps ?x) = ratfps_subdegree ?x",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app (template_hole 0, template_var 0))),
    ("RatFPS.unit_factor_snd_quot_of_ratfps",
     "unit_factor (snd (quot_of_ratfps ?x)) = 1",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_hole 2,
           template_app (template_hole 1, template_var 0))),
       template_hole 0)),
    ("RatFPS.normalize_quot_quot_of_fract",
     "normalize_quot (quot_of_fract ?x) = quot_of_fract ?x",
     template_equation
      (template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)),
       template_app (template_hole 0, template_var 0))),
    ("RatFPS.fps_of_poly_code_post", "fps_const (numeral ?k) = numeral ?k",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app (template_hole 0, template_var 0))),
    ("RatFPS.fps_of_poly_code_post",
     "fps_of_poly (numeral ?n) = numeral ?n",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app (template_hole 0, template_var 0))),
    ("RatFPS.fps_of_poly_code",
     "fps_of_poly ?p = fps_of_ratfps (ratfps_of_poly ?p)",
     template_equation
      (template_app (template_hole 2, template_var 0),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("RatFPS.fps_of_ratfps_ratfps_of_poly",
     "fps_of_ratfps (ratfps_of_poly ?p) = fps_of_poly ?p",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app (template_hole 0, template_var 0))),
    ("RatFPS.fps_of_poly_code_post",
     "neg_numeral_class.dbl (numeral ?k) = numeral (num.Bit0 ?k)",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "neg_numeral_class.dbl_dec (numeral ?k) = numeral (Num.BitM ?k)",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "neg_numeral_class.dbl_inc (numeral ?k) = numeral (num.Bit1 ?k)",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "\<bar>- numeral ?n\<bar> = numeral ?n",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_hole 1,
           template_app (template_hole 0, template_var 0))),
       template_app (template_hole 0, template_var 0))),
    ("RatFPS.ratfps_subdegree_code",
     "ratfps_subdegree ?x = poly_subdegree (fst (quot_of_ratfps ?x))",
     template_equation
      (template_app (template_hole 3, template_var 0),
       template_app
        (template_hole 2,
         template_app
          (template_hole 1,
           template_app (template_hole 0, template_var 0))))),
    ("RatFPS.fps_of_poly_code_post",
     "Num.BitM (num.Bit0 ?n) = num.Bit1 (Num.BitM ?n)",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 0, template_app (template_hole 2, template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "Num.BitM (num.Bit1 ?n) = num.Bit1 (num.Bit0 ?n)",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("RatFPS.fps_of_poly_code_post", "num.One + num.Bit0 ?n = num.Bit1 ?n",
     template_equation
      (template_app
        (template_app (template_hole 3, template_hole 2),
         template_app (template_hole 1, template_var 0)),
       template_app (template_hole 0, template_var 0))),
    ("RatFPS.fps_of_poly_code_post", "num.Bit0 ?m + num.One = num.Bit1 ?m",
     template_equation
      (template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, template_var 0)),
         template_hole 1),
       template_app (template_hole 0, template_var 0))),
    ("RatFPS.ratfps_of_poly_code",
     "quot_of_ratfps (ratfps_of_poly ?p) = (?p, 1)",
     template_equation
      (template_app
        (template_hole 3, template_app (template_hole 2, template_var 0)),
       template_app
        (template_app (template_hole 1, template_var 0), template_hole 0))),
    ("RatFPS.fps_const_code", "fps_const ?c = fps_of_poly [:?c:]",
     template_equation
      (template_app (template_hole 3, template_var 0),
       template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 0),
           template_hole 0)))),
    ("RatFPS.fps_of_poly_code_post", "fps_of_poly [:?c:] = fps_const ?c",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_app (template_hole 2, template_var 0),
           template_hole 1)),
       template_app (template_hole 0, template_var 0))),
    ("RatFPS.fps_of_poly_code_post", "fps_const (- ?c) = - fps_const ?c",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 0, template_app (template_hole 2, template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "fps_of_poly (- ?p) = - fps_of_poly ?p",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 0, template_app (template_hole 2, template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "fps_of_poly (pderiv ?p) = fps_deriv (fps_of_poly ?p)",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 0, template_app (template_hole 2, template_var 0)))),
    ("RatFPS.fps_inverse_code",
     "inverse (fps_of_ratfps ?x) = fps_of_ratfps (inverse ?x)",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("RatFPS.fps_uminus_code", "- fps_of_ratfps ?x = fps_of_ratfps (- ?x)",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("RatFPS.fps_of_ratfps_inverse",
     "fps_of_ratfps (inverse ?x) = inverse (fps_of_ratfps ?x)",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 0, template_app (template_hole 2, template_var 0)))),
    ("RatFPS.fps_of_ratfps_uminus",
     "fps_of_ratfps (- ?x) = - fps_of_ratfps ?x",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 0, template_app (template_hole 2, template_var 0)))),
    ("RatFPS.fps_of_ratfps_normalize",
     "fps_of_ratfps (normalize ?x) = normalize (fps_of_ratfps ?x)",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 0, template_app (template_hole 2, template_var 0)))),
    ("RatFPS.fps_of_ratfps_unit_factor",
     "fps_of_ratfps (unit_factor ?x) = unit_factor (fps_of_ratfps ?x)",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 0, template_app (template_hole 2, template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "neg_numeral_class.sub (num.Bit0 ?k) num.One = numeral (Num.BitM ?k)",
     template_equation
      (template_app
        (template_app
          (template_hole 4, template_app (template_hole 3, template_var 0)),
         template_hole 2),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "neg_numeral_class.sub (num.Bit1 ?k) num.One = numeral (num.Bit0 ?k)",
     template_equation
      (template_app
        (template_app
          (template_hole 4, template_app (template_hole 3, template_var 0)),
         template_hole 2),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("RatFPS.ratfps_nth_altdef", "ratfps_nth ?x ?n = fps_of_ratfps ?x $ ?n",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 1), template_var 0),
       template_app
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 1)),
         template_var 0))),
    ("RatFPS.fps_nth_code", "fps_of_ratfps ?x $ ?n = ratfps_nth ?x ?n",
     template_equation
      (template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 0, template_var 1), template_var 0))),
    ("RatFPS.fps_of_poly_code_post",
     "Suc (numeral ?n) = numeral (?n + num.One)",
     template_equation
      (template_app
        (template_hole 3, template_app (template_hole 2, template_var 0)),
       template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 0),
           template_hole 0)))),
    ("RatFPS.ratfps_eq_0_iff", "(?x = 0) = (fps_of_ratfps ?x = 0)",
     template_bimplication
      (template_equation (template_var 0, template_hole 3),
       template_equation
        (template_app (template_hole 1, template_var 0), template_hole 0))),
    ("RatFPS.ratfps_of_poly_eq_0_iff", "(ratfps_of_poly ?x = 0) = (?x = 0)",
     template_bimplication
      (template_equation
        (template_app (template_hole 3, template_var 0), template_hole 2),
       template_equation (template_var 0, template_hole 0))),
    ("RatFPS.fps_of_ratfps_eq_zero_iff",
     "(fps_of_ratfps ?p = 0) = (?p = 0)",
     template_bimplication
      (template_equation
        (template_app (template_hole 3, template_var 0), template_hole 2),
       template_equation (template_var 0, template_hole 0))),
    ("RatFPS.fps_of_poly_code_post",
     "fps_of_poly (prod_list ?xs) = prod_list (map fps_of_poly ?xs)",
     template_equation
      (template_app
        (template_hole 3, template_app (template_hole 2, template_var 0)),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_hole 3),
           template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "fps_of_poly (sum_list ?xs) = sum_list (map fps_of_poly ?xs)",
     template_equation
      (template_app
        (template_hole 3, template_app (template_hole 2, template_var 0)),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_hole 3),
           template_var 0)))),
    ("RatFPS.fps_dehorner", "?d + - ?e = ?d - ?e",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 1),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_app (template_hole 0, template_var 1), template_var 0))),
    ("RatFPS.normalize_field",
     "normalize ?x = (if ?x = (0::?'a) then 0::?'a else (1::?'a))",
     template_implication
      ([template_predicate
         (template_app (template_hole 3, template_var 0))],
       template_dunno)),
    ("RatFPS.fps_of_poly_code_post",
     "neg_numeral_class.dbl (- numeral ?k) =
      - neg_numeral_class.dbl (numeral ?k)",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_hole 1,
           template_app (template_hole 0, template_var 0))),
       template_app
        (template_hole 1,
         template_app
          (template_hole 2,
           template_app (template_hole 0, template_var 0))))),
    ("RatFPS.fps_of_poly_code_post",
     "neg_numeral_class.dbl_dec (- numeral ?k) =
      - neg_numeral_class.dbl_inc (numeral ?k)",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_hole 2,
           template_app (template_hole 1, template_var 0))),
       template_app
        (template_hole 2,
         template_app
          (template_hole 0,
           template_app (template_hole 1, template_var 0))))),
    ("RatFPS.fps_of_poly_code_post",
     "neg_numeral_class.dbl_inc (- numeral ?k) =
      - neg_numeral_class.dbl_dec (numeral ?k)",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_hole 2,
           template_app (template_hole 1, template_var 0))),
       template_app
        (template_hole 2,
         template_app
          (template_hole 0,
           template_app (template_hole 1, template_var 0))))),
    ("RatFPS.fps_of_poly_code_post",
     "neg_numeral_class.sub num.One (num.Bit0 ?l) =
      - numeral (Num.BitM ?l)",
     template_equation
      (template_app
        (template_app (template_hole 5, template_hole 4),
         template_app (template_hole 3, template_var 0)),
       template_app
        (template_hole 2,
         template_app
          (template_hole 1,
           template_app (template_hole 0, template_var 0))))),
    ("RatFPS.fps_of_poly_code_post",
     "neg_numeral_class.sub num.One (num.Bit1 ?l) =
      - numeral (num.Bit0 ?l)",
     template_equation
      (template_app
        (template_app (template_hole 5, template_hole 4),
         template_app (template_hole 3, template_var 0)),
       template_app
        (template_hole 2,
         template_app
          (template_hole 1,
           template_app (template_hole 0, template_var 0))))),
    ("RatFPS.fps_of_poly_code_post",
     "numeral ?m - numeral ?n = neg_numeral_class.sub ?m ?n",
     template_equation
      (template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_app (template_hole 0, template_var 1), template_var 0))),
    ("RatFPS.fps_of_poly_code_post",
     "num.One + num.Bit1 ?n = num.Bit0 (?n + num.One)",
     template_equation
      (template_app
        (template_app (template_hole 3, template_hole 2),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 0,
         template_app
          (template_app (template_hole 3, template_var 0),
           template_hole 2)))),
    ("RatFPS.fps_of_poly_code_post",
     "num.Bit1 ?m + num.One = num.Bit0 (?m + num.One)",
     template_equation
      (template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, template_var 0)),
         template_hole 1),
       template_app
        (template_hole 0,
         template_app
          (template_app (template_hole 3, template_var 0),
           template_hole 1)))),
    ("RatFPS.ratfps_eq_0_code", "(?x = 0) = (fst (quot_of_ratfps ?x) = 0)",
     template_bimplication
      (template_equation (template_var 0, template_hole 4),
       template_equation
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 0)),
         template_hole 0))),
    ("RatFPS.equal_ratfps_code",
     "equal_class.equal ?x ?y = (quot_of_ratfps ?x = quot_of_ratfps ?y)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 2, template_var 1),
              template_var 0)
            )],
       template_equation
        (template_app (template_hole 0, template_var 1),
         template_app (template_hole 0, template_var 0)))),
    ("RatFPS.quot_of_fract_eq_iff",
     "(quot_of_fract ?x = quot_of_fract ?y) = (?x = ?y)",
     template_bimplication
      (template_equation
        (template_app (template_hole 1, template_var 1),
         template_app (template_hole 1, template_var 0)),
       template_equation (template_var 1, template_var 0))),
    ("RatFPS.quot_of_ratfps_eq_iff",
     "(quot_of_ratfps ?x = quot_of_ratfps ?y) = (?x = ?y)",
     template_bimplication
      (template_equation
        (template_app (template_hole 1, template_var 1),
         template_app (template_hole 1, template_var 0)),
       template_equation (template_var 1, template_var 0))),
    ("RatFPS.fps_of_ratfps_eq_iff",
     "(fps_of_ratfps ?p = fps_of_ratfps ?q) = (?p = ?q)",
     template_bimplication
      (template_equation
        (template_app (template_hole 1, template_var 1),
         template_app (template_hole 1, template_var 0)),
       template_equation (template_var 1, template_var 0))),
    ("RatFPS.equal_fps_code",
     "equal_class.equal (fps_of_ratfps ?f) (fps_of_ratfps ?g) = (?f = ?g)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app (template_hole 1, template_var 1)),
              template_app (template_hole 1, template_var 0))
            )],
       template_equation (template_var 1, template_var 0))),
    ("RatFPS.fps_of_ratfps_dvd",
     "(fps_of_ratfps ?x dvd fps_of_ratfps ?y) = (?x dvd ?y)",
     template_equation
      (template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_app (template_hole 0, template_var 1), template_var 0))),
    ("RatFPS.fps_shift_times_X_power''",
     "fps_shift ?n (fps_X ^ ?n * ?f) = ?f",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 1),
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 1)),
           template_var 0)),
       template_var 0)),
    ("RatFPS.fps_of_poly_code_post",
     "fps_of_poly (?p ^ ?n) = fps_of_poly ?p ^ ?n",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_var 0))),
    ("RatFPS.fps_cutoff_code",
     "fps_cutoff ?n (fps_of_ratfps ?x) = fps_of_poly (ratfps_cutoff ?n ?x)",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 1),
         template_app (template_hole 2, template_var 0)),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("RatFPS.fps_shift_code",
     "fps_shift ?n (fps_of_ratfps ?x) = fps_of_ratfps (ratfps_shift ?n ?x)",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 1),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("RatFPS.fps_of_ratfps_cutoff",
     "fps_of_poly (ratfps_cutoff ?n ?x) = fps_cutoff ?n (fps_of_ratfps ?x)",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_app (template_hole 2, template_var 1), template_var 0)),
       template_app
        (template_app (template_hole 1, template_var 1),
         template_app (template_hole 0, template_var 0)))),
    ("RatFPS.fps_of_ratfps_shift",
     "fps_of_ratfps (ratfps_shift ?n ?x) = fps_shift ?n (fps_of_ratfps ?x)",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app (template_hole 0, template_var 1),
         template_app (template_hole 2, template_var 0)))),
    ("RatFPS.fps_dehorner", "- ?d * ?e = - (?d * ?e)",
     template_equation
      (template_app
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 1)),
         template_var 0),
       template_app
        (template_hole 0,
         template_app
          (template_app (template_hole 1, template_var 1),
           template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "numeral ?m + numeral ?n = numeral (?m + ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "neg_numeral_class.sub (num.Bit0 ?k) (num.Bit0 ?l) =
      neg_numeral_class.dbl (neg_numeral_class.sub ?k ?l)",
     template_equation
      (template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 0,
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "neg_numeral_class.sub (num.Bit0 ?k) (num.Bit1 ?l) =
      neg_numeral_class.dbl_dec (neg_numeral_class.sub ?k ?l)",
     template_equation
      (template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 0,
         template_app
          (template_app (template_hole 3, template_var 1),
           template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "neg_numeral_class.sub (num.Bit1 ?k) (num.Bit0 ?l) =
      neg_numeral_class.dbl_inc (neg_numeral_class.sub ?k ?l)",
     template_equation
      (template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 0,
         template_app
          (template_app (template_hole 3, template_var 1),
           template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "neg_numeral_class.sub (num.Bit1 ?k) (num.Bit1 ?l) =
      neg_numeral_class.dbl (neg_numeral_class.sub ?k ?l)",
     template_equation
      (template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 0,
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "numeral ?m + - numeral ?n = neg_numeral_class.sub ?m ?n",
     template_equation
      (template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, template_var 1)),
         template_app
          (template_hole 1,
           template_app (template_hole 2, template_var 0))),
       template_app
        (template_app (template_hole 0, template_var 1), template_var 0))),
    ("RatFPS.fps_of_poly_code_post",
     "- numeral ?m + numeral ?n = neg_numeral_class.sub ?n ?m",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 1))),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_app (template_hole 0, template_var 0), template_var 1))),
    ("RatFPS.fps_of_poly_code_post",
     "numeral ?m * numeral ?n = numeral (?m * ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "num.Bit0 ?m + num.Bit0 ?n = num.Bit0 (?m + ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 1)),
         template_app (template_hole 0, template_var 0)),
       template_app
        (template_hole 0,
         template_app
          (template_app (template_hole 1, template_var 1),
           template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "num.Bit0 ?m + num.Bit1 ?n = num.Bit1 (?m + ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 0, template_var 0)),
       template_app
        (template_hole 0,
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "num.Bit1 ?m + num.Bit0 ?n = num.Bit1 (?m + ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 0, template_var 0)),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("RatFPS.is_unit_ratfps_iff",
     "is_unit ?x = (ratfps_nth ?x 0 ~= (0::?'a))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 6, template_var 0),
              template_hole 5)
            )],
       template_negation
        (
           template_equation
            (template_app
              (template_app (template_hole 2, template_var 0),
               template_hole 1),
             template_hole 0)
           ))),
    ("RatFPS.div_const_poly", "?p div [:?c:] = smult (inverse ?c) ?p",
     template_equation
      (template_app
        (template_app (template_hole 4, template_var 1),
         template_app
          (template_app (template_hole 3, template_var 0),
           template_hole 2)),
       template_app
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 0)),
         template_var 1))),
    ("RatFPS.unit_factor_poly_altdef",
     "unit_factor ?p = monom (unit_factor (lead_coeff ?p)) 0",
     template_equation
      (template_app (template_hole 5, template_var 0),
       template_app
        (template_app
          (template_hole 4,
           template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_var 0),
               template_app (template_hole 1, template_var 0)))),
         template_hole 0))),
    ("RatFPS.fps_of_poly_code_post",
     "fps_const (?x / ?y) = fps_const ?x / fps_const ?y",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "fps_of_poly (?p * ?q) = fps_of_poly ?p * fps_of_poly ?q",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "fps_of_poly (smult ?c ?p) = fps_const ?c * fps_of_poly ?p",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_app (template_hole 2, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 1)),
         template_app (template_hole 3, template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "fps_of_poly (?p + ?q) = fps_of_poly ?p + fps_of_poly ?q",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("RatFPS.fps_of_ratfps_diff",
     "fps_of_ratfps (?x - ?y) = fps_of_ratfps ?x - fps_of_ratfps ?y",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("RatFPS.fps_of_ratfps_add",
     "fps_of_ratfps (?x + ?y) = fps_of_ratfps ?x + fps_of_ratfps ?y",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("RatFPS.fps_of_ratfps_mult",
     "fps_of_ratfps (?x * ?y) = fps_of_ratfps ?x * fps_of_ratfps ?y",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("RatFPS.fps_of_ratfps_divide",
     "fps_of_ratfps (?f / ?g) = fps_of_ratfps ?f / fps_of_ratfps ?g",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("RatFPS.fps_of_ratfps_mod",
     "fps_of_ratfps (?f mod ?g) = fps_of_ratfps ?f mod fps_of_ratfps ?g",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("RatFPS.fps_diff_code",
     "fps_of_ratfps ?x - fps_of_ratfps ?y = fps_of_ratfps (?x - ?y)",
     template_equation
      (template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("RatFPS.fps_add_code",
     "fps_of_ratfps ?x + fps_of_ratfps ?y = fps_of_ratfps (?x + ?y)",
     template_equation
      (template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("RatFPS.fps_mult_code",
     "fps_of_ratfps ?x * fps_of_ratfps ?y = fps_of_ratfps (?x * ?y)",
     template_equation
      (template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "fps_of_poly (?p - ?q) = fps_of_poly ?p - fps_of_poly ?q",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("RatFPS.fps_dehorner", "fps_X * fps_X ^ ?m = fps_X ^ Suc ?m",
     template_equation
      (template_app
        (template_app (template_hole 3, template_hole 2),
         template_app
          (template_app (template_hole 1, template_hole 2),
           template_var 0)),
       template_app
        (template_app (template_hole 1, template_hole 2),
         template_app (template_hole 0, template_var 0)))),
    ("RatFPS.fps_dehorner", "fps_X ^ ?m * fps_X = fps_X ^ Suc ?m",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_var 0)),
         template_hole 1),
       template_app
        (template_app (template_hole 2, template_hole 1),
         template_app (template_hole 0, template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "numeral ?m - - numeral ?n = numeral (?m + ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, template_var 1)),
         template_app
          (template_hole 1,
           template_app (template_hole 2, template_var 0))),
       template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "- numeral ?m - - numeral ?n = neg_numeral_class.sub ?n ?m",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 1))),
         template_app
          (template_hole 2,
           template_app (template_hole 1, template_var 0))),
       template_app
        (template_app (template_hole 0, template_var 0), template_var 1))),
    ("RatFPS.fps_of_poly_code_post",
     "num.Bit0 ?m * num.Bit0 ?n = num.Bit0 (num.Bit0 (?m * ?n))",
     template_equation
      (template_app
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 1)),
         template_app (template_hole 0, template_var 0)),
       template_app
        (template_hole 0,
         template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 1, template_var 1),
             template_var 0))))),
    ("RatFPS.fps_of_poly_code_post",
     "num.Bit0 ?m * num.Bit1 ?n = num.Bit0 (?m * num.Bit1 ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 0, template_var 0)),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 2, template_var 1),
           template_app (template_hole 0, template_var 0))))),
    ("RatFPS.fps_of_poly_code_post",
     "num.Bit1 ?m * num.Bit0 ?n = num.Bit0 (num.Bit1 ?m * ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 0, template_var 0)),
       template_app
        (template_hole 0,
         template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 1)),
           template_var 0)))),
    ("RatFPS.poly_shift_times_monom",
     "poly_shift ?n (monom ?c ?n * ?p) = smult ?c ?p",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 2),
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 2)),
           template_var 0)),
       template_app
        (template_app (template_hole 0, template_var 1), template_var 0))),
    ("RatFPS.fps_dehorner", "?a + (?b + ?c) = ?a + ?b + ?c",
     template_equation
      (template_app
        (template_app (template_hole 0, template_var 2),
         template_app
          (template_app (template_hole 0, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1)),
         template_var 0))),
    ("RatFPS.fps_of_poly_code_post",
     "fps_of_poly (monom ?c ?n) = fps_const ?c * fps_X ^ ?n",
     template_equation
      (template_app
        (template_hole 5,
         template_app
          (template_app (template_hole 4, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, template_var 1)),
         template_app
          (template_app (template_hole 1, template_hole 0),
           template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "fps_of_poly (prod ?f ?A) = (PROD x:?A. fps_of_poly (?f x))",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app (template_hole 0, t_empty), template_var 0))),
    ("RatFPS.fps_of_poly_code_post",
     "fps_of_poly (sum ?f ?A) = (SUM x:?A. fps_of_poly (?f x))",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app (template_hole 0, t_empty), template_var 0))),
    ("RatFPS.fps_dehorner", "?d + (?e - ?f) = ?d + ?e - ?f",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 2),
         template_app
          (template_app (template_hole 0, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_var 0))),
    ("RatFPS.fps_of_poly_code_post",
     "numeral ?m * - numeral ?n = - numeral (?m * ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, template_var 1)),
         template_app
          (template_hole 1,
           template_app (template_hole 2, template_var 0))),
       template_app
        (template_hole 1,
         template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0))))),
    ("RatFPS.fps_of_poly_code_post",
     "- numeral ?m * numeral ?n = - numeral (?m * ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 1))),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 2,
         template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0))))),
    ("RatFPS.fps_of_poly_code_post",
     "- numeral ?m * - numeral ?n = numeral (?m * ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 1))),
         template_app
          (template_hole 2,
           template_app (template_hole 1, template_var 0))),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "- numeral ?m - numeral ?n = - numeral (?m + ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 1))),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 2,
         template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0))))),
    ("RatFPS.fps_of_poly_code_post",
     "num.Bit1 ?m + num.Bit1 ?n = num.Bit0 (?m + ?n + num.One)",
     template_equation
      (template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)),
       template_app
        (template_hole 1,
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 3, template_var 1),
               template_var 0)),
           template_hole 0)))),
    ("RatFPS.uminus_ratfps_code",
     "quot_of_ratfps (- ?x) = (let (a, y) = quot_of_ratfps ?x in (- a, y))",
     template_equation
      (template_app
        (template_hole 5, template_app (template_hole 4, template_var 0)),
       template_app
        (template_app
          (template_hole 3, template_app (template_hole 5, template_var 0)),
         template_app (template_hole 2, t_empty)))),
    ("RatFPS.fps_of_poly_code_post",
     "fps_of_poly (smult (inverse (numeral ?c)) ?p) =
      fps_of_poly ?p / numeral ?c",
     template_equation
      (template_app
        (template_hole 5,
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_hole 3,
               template_app (template_hole 2, template_var 1))),
           template_var 0)),
       template_app
        (template_app
          (template_hole 1, template_app (template_hole 5, template_var 0)),
         template_app (template_hole 0, template_var 1)))),
    ("RatFPS.fps_of_poly_code_post",
     "fps_of_poly (pCons ?c ?p) = fps_const ?c + fps_of_poly ?p * fps_X",
     template_equation
      (template_app
        (template_hole 5,
         template_app
          (template_app (template_hole 4, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, template_var 1)),
         template_app
          (template_app
            (template_hole 1,
             template_app (template_hole 5, template_var 0)),
           template_hole 0)))),
    ("RatFPS.ratfps_nth_aux_correct",
     "ratfps_nth_aux ?p ?n = natfun_inverse (fps_of_poly ?p) ?n",
     template_equation
      (template_app
        (template_app (template_hole 5, template_var 1), template_var 0),
       template_app
        (template_app
          (template_app
            (template_hole 4,
             template_app (template_hole 3, template_var 1)),
           template_app
            (template_hole 2,
             template_app
              (template_app
                (template_hole 1,
                 template_app (template_hole 3, template_var 1)),
               template_hole 0))),
         template_var 0))),
    ("RatFPS.coeff_0_mult",
     "constant_term (?p * ?q) = constant_term ?p * constant_term ?q",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 1),
             template_var 0)),
         template_hole 1),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 3, template_var 1),
             template_hole 1)),
         template_app
          (template_app (template_hole 3, template_var 0),
           template_hole 1)))),
    ("RatFPS.fps_of_poly_normalize_field",
     "fps_of_poly (normalize ?p) =
      fps_of_poly ?p * fps_const (inverse (lead_coeff ?p))",
     template_equation
      (template_app
        (template_hole 6, template_app (template_hole 5, template_var 0)),
       template_app
        (template_app
          (template_hole 4, template_app (template_hole 6, template_var 0)),
         template_app
          (template_hole 3,
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_app (template_hole 0, template_var 0))))))),
    ("RatFPS.fps_dehorner", "(?b + ?c) * fps_X = ?b * fps_X + ?c * fps_X",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 1),
             template_var 0)),
         template_hole 0),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 2, template_var 1),
             template_hole 0)),
         template_app
          (template_app (template_hole 2, template_var 0),
           template_hole 0)))),
    ("RatFPS.fps_dehorner", "?a * fps_X * fps_X = ?a * fps_X\<^sup>2",
     template_equation
      (template_app
        (template_app
          (template_hole 5,
           template_app
            (template_app (template_hole 5, template_var 0),
             template_hole 4)),
         template_hole 4),
       template_app
        (template_app (template_hole 5, template_var 0),
         template_app
          (template_app (template_hole 3, template_hole 4),
           template_app
            (template_hole 2,
             template_app (template_hole 1, template_hole 0)))))),
    ("RatFPS.fps_of_ratfps_altdef",
     "fps_of_ratfps ?x =
      (case quot_of_ratfps ?x of (a, b) => fps_of_poly a / fps_of_poly b)",
     template_equation
      (template_app (template_hole 4, template_var 0),
       template_app
        (template_app (template_hole 3, t_empty),
         template_app (template_hole 0, template_var 0)))),
    ("RatFPS.fps_dehorner", "(?d - ?e) * fps_X = ?d * fps_X - ?e * fps_X",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 1),
             template_var 0)),
         template_hole 0),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 2, template_var 1),
             template_hole 0)),
         template_app
          (template_app (template_hole 2, template_var 0),
           template_hole 0)))),
    ("RatFPS.fps_dehorner", "fps_X ^ ?m * fps_X ^ ?n = fps_X ^ (?m + ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_var 1)),
         template_app
          (template_app (template_hole 2, template_hole 1),
           template_var 0)),
       template_app
        (template_app (template_hole 2, template_hole 1),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("RatFPS.fps_of_poly_code_post",
     "- numeral ?m + - numeral ?n = - (numeral ?m + numeral ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 1))),
         template_app
          (template_hole 1,
           template_app (template_hole 0, template_var 0))),
       template_app
        (template_hole 1,
         template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 0, template_var 1)),
           template_app (template_hole 0, template_var 0))))),
    ("RatFPS.fps_of_ratfps_is_unit",
     "(fps_of_ratfps ?a $ 0 ~= (0::?'a)) = (ratfps_nth ?a 0 ~= (0::?'a))",
     template_bimplication
      (template_negation
        (
           template_equation
            (template_app
              (template_app
                (template_hole 4,
                 template_app (template_hole 3, template_var 0)),
               template_hole 2),
             template_hole 1)
           ),
       template_negation
        (
           template_equation
            (template_app
              (template_app (template_hole 0, template_var 0),
               template_hole 2),
             template_hole 1)
           ))),
    ("RatFPS.fps_dehorner", "?a * fps_X * fps_X ^ ?m = ?a * fps_X ^ Suc ?m",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 3, template_var 1),
             template_hole 2)),
         template_app
          (template_app (template_hole 1, template_hole 2),
           template_var 0)),
       template_app
        (template_app (template_hole 3, template_var 1),
         template_app
          (template_app (template_hole 1, template_hole 2),
           template_app (template_hole 0, template_var 0))))),
    ("RatFPS.fps_dehorner", "?a * fps_X ^ ?m * fps_X = ?a * fps_X ^ Suc ?m",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 3, template_var 1),
             template_app
              (template_app (template_hole 2, template_hole 1),
               template_var 0))),
         template_hole 1),
       template_app
        (template_app (template_hole 3, template_var 1),
         template_app
          (template_app (template_hole 2, template_hole 1),
           template_app (template_hole 0, template_var 0))))),
    ("RatFPS.fps_of_poly_code_post",
     "num.Bit1 ?m * num.Bit1 ?n = num.Bit1 (?m + ?n + num.Bit0 (?m * ?n))",
     template_equation
      (template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)),
       template_app
        (template_hole 2,
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 1, template_var 1),
               template_var 0)),
           template_app
            (template_hole 0,
             template_app
              (template_app (template_hole 3, template_var 1),
               template_var 0)))))),
    ("RatFPS.fps_of_ratfps_quot_to_ratfps_code_post",
     "fps_of_ratfps (quot_to_ratfps (?x, pCons (1::?'a) ?y)) =
      fps_of_poly ?x / fps_of_poly (pCons (1::?'a) ?y)",
     template_equation
      (template_app
        (template_hole 6,
         template_app
          (template_hole 5,
           template_app
            (template_app (template_hole 4, template_var 1),
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_var 0)))),
       template_app
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 1)),
         template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_var 0))))),
    ("RatFPS.fps_dehorner",
     "?a * fps_X ^ ?m * fps_X ^ ?n = ?a * fps_X ^ (?m + ?n)",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 3, template_var 2),
             template_app
              (template_app (template_hole 2, template_hole 1),
               template_var 1))),
         template_app
          (template_app (template_hole 2, template_hole 1),
           template_var 0)),
       template_app
        (template_app (template_hole 3, template_var 2),
         template_app
          (template_app (template_hole 2, template_hole 1),
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0))))),
    ("RatFPS.fps_of_ratfps_quot_to_ratfps_code_post",
     "fps_of_ratfps (quot_to_ratfps (?x, pCons (- (1::?'a)) ?y)) =
      fps_of_poly ?x / fps_of_poly (pCons (- (1::?'a)) ?y)",
     template_equation
      (template_app
        (template_hole 7,
         template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, template_var 1),
             template_app
              (template_app
                (template_hole 4,
                 template_app (template_hole 3, template_hole 2)),
               template_var 0)))),
       template_app
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 1)),
         template_app
          (template_hole 0,
           template_app
            (template_app
              (template_hole 4,
               template_app (template_hole 3, template_hole 2)),
             template_var 0))))),
    ("RatFPS.fps_of_ratfps_quot_to_ratfps_code_post",
     "fps_of_ratfps (quot_to_ratfps (?x', pCons (numeral ?n) ?y')) =
      fps_of_poly ?x' / fps_of_poly (pCons (numeral ?n) ?y')",
     template_equation
      (template_app
        (template_hole 6,
         template_app
          (template_hole 5,
           template_app
            (template_app (template_hole 4, template_var 2),
             template_app
              (template_app
                (template_hole 3,
                 template_app (template_hole 2, template_var 1)),
               template_var 0)))),
       template_app
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 2)),
         template_app
          (template_hole 0,
           template_app
            (template_app
              (template_hole 3,
               template_app (template_hole 2, template_var 1)),
             template_var 0))))),
    ("RatFPS.ratfps_dvd_code",
     "(?x dvd ?y) =
      (?y = 0 | ?x ~= 0 & ratfps_subdegree ?x <= ratfps_subdegree ?y)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 7, template_var 1),
              template_var 0)
            )],
       template_dunno)),
    ("RatFPS.fps_dvd_code",
     "(?x dvd ?y) = (?y = 0 | ?x ~= 0 & subdegree ?x <= subdegree ?y)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 7, template_var 1),
              template_var 0)
            )],
       template_dunno)),
    ("RatFPS.fps_of_ratfps_quot_to_ratfps_code_post",
     "fps_of_ratfps (quot_to_ratfps (?x', pCons (- numeral ?n) ?y')) =
      fps_of_poly ?x' / fps_of_poly (pCons (- numeral ?n) ?y')",
     template_equation
      (template_app
        (template_hole 7,
         template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, template_var 2),
             template_app
              (template_app
                (template_hole 4,
                 template_app
                  (template_hole 3,
                   template_app (template_hole 2, template_var 1))),
               template_var 0)))),
       template_app
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 2)),
         template_app
          (template_hole 0,
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_hole 3,
                 template_app (template_hole 2, template_var 1))),
             template_var 0))))),
    ("RatFPS.ratfps_lcm_altdef",
     "lcm ?f ?g =
      (if ?f = 0 | ?g = 0 then 0
       else ratfps_of_poly
             (monom (1::?'a)
               (max (ratfps_subdegree ?f) (ratfps_subdegree ?g))))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 8, template_var 1),
              template_var 0)
            )],
       template_dunno)),
    ("RatFPS.ratfps_shift_code",
     "quot_of_ratfps (ratfps_shift ?n ?x) =
      (let (a, b) =
             quot_of_ratfps (?x - ratfps_of_poly (ratfps_cutoff ?n ?x))
       in (poly_shift ?n a, b))",
     template_equation
      (template_app
        (template_hole 8,
         template_app
          (template_app (template_hole 7, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 6,
           template_app
            (template_hole 8,
             template_app
              (template_app (template_hole 5, template_var 0),
               template_app
                (template_hole 4,
                 template_app
                  (template_app (template_hole 3, template_var 1),
                   template_var 0))))),
         template_app (template_hole 2, t_empty)))),
    ("RatFPS.ratfps_Gcd_altdef",
     "Gcd ?A =
      (if ?A <= {0} then 0
       else ratfps_of_poly
             (monom (1::?'a) (Inf (ratfps_subdegree ` (?A - {0})))))",
     template_equation
      (template_app (template_hole 12, template_var 0),
       template_app
        (template_app
          (template_app
            (template_hole 11,
             template_app
              (template_app (template_hole 10, template_var 0),
               template_app
                (template_app (template_hole 9, template_hole 8),
                 template_hole 7))),
           template_hole 8),
         template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, template_hole 4),
             template_app
              (template_hole 3,
               template_app
                (template_app (template_hole 2, t_empty),
                 template_app
                  (template_app (template_hole 0, template_var 0),
                   template_app
                    (template_app (template_hole 9, template_hole 8),
                     template_hole 7))))))))),
    ("RatFPS.ratfps_nth_code",
     "ratfps_nth ?x ?n =
      (let (a, b) = quot_of_ratfps ?x
       in SUM i = 0..?n. coeff a i * ratfps_nth_aux b (?n - i))",
     template_equation
      (template_app
        (template_app (template_hole 10, template_var 1), template_var 0),
       template_app
        (template_app
          (template_hole 9, template_app (template_hole 8, template_var 1)),
         template_app (template_hole 7, t_empty)))),
    ("RatFPS.ratfps_Lcm_altdef",
     "Lcm ?A =
      (if 0 : ?A | ~ bdd_above (ratfps_subdegree ` ?A) then 0
       else if ?A = {} then 1
            else ratfps_of_poly
                  (monom (1::?'a) (Sup (ratfps_subdegree ` ?A))))",
     template_implication
      ([template_predicate
         (template_app (template_hole 15, template_var 0))],
       template_dunno)),
    ("RatFPS.minus_ratfps_code",
     "quot_of_ratfps (?x - ?y) =
      (let (a, b) = quot_of_ratfps ?x; (c, d) = quot_of_ratfps ?y
       in normalize_quot (a * d - b * c, b * d))",
     template_equation
      (template_app
        (template_hole 7,
         template_app
          (template_app (template_hole 6, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 5, template_app (template_hole 7, template_var 1)),
         template_app (template_hole 4, t_empty)))),
    ("RatFPS.plus_ratfps_code",
     "quot_of_ratfps (?x + ?y) =
      (let (a, b) = quot_of_ratfps ?x; (c, d) = quot_of_ratfps ?y
       in normalize_quot (a * d + b * c, b * d))",
     template_equation
      (template_app
        (template_hole 7,
         template_app
          (template_app (template_hole 6, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 5, template_app (template_hole 7, template_var 1)),
         template_app (template_hole 4, t_empty)))),
    ("RatFPS.ratfps_inverse_code",
     "quot_of_ratfps (inverse ?x) =
      (let (a, b) = quot_of_ratfps ?x
       in if constant_term a = (0::?'a) then (0, 1)
          else let u = unit_factor a in (b div u, a div u))",
     template_equation
      (template_app
        (template_hole 14, template_app (template_hole 13, template_var 0)),
       template_app
        (template_app
          (template_hole 12,
           template_app (template_hole 14, template_var 0)),
         template_app (template_hole 11, t_empty)))),
    ("RatFPS.ratfps_gcd_altdef",
     "gcd ?f ?g =
      (if ?f = 0 & ?g = 0 then 0
       else if ?f = 0
            then ratfps_of_poly (monom (1::?'a) (ratfps_subdegree ?g))
            else if ?g = 0
                 then ratfps_of_poly (monom (1::?'a) (ratfps_subdegree ?f))
                 else ratfps_of_poly
                       (monom (1::?'a)
                         (min (ratfps_subdegree ?f)
                           (ratfps_subdegree ?g))))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 8, template_var 1),
              template_var 0)
            )],
       template_dunno)),
    ("RatFPS.times_ratfps_code",
     "quot_of_ratfps (?x * ?y) =
      (let (a, b) = quot_of_ratfps ?x; (c, d) = quot_of_ratfps ?y;
           (e, f) = normalize_quot (a, d); (g, h) = normalize_quot (c, b)
       in (e * g, f * h))",
     template_equation
      (template_app
        (template_hole 6,
         template_app
          (template_app (template_hole 5, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 4, template_app (template_hole 6, template_var 1)),
         template_app (template_hole 3, t_empty))))]
