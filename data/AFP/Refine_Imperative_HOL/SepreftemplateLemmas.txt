   [("Sepref_Frame.frame_rem4", "?P \<Longrightarrow>\<^sub>t emp",
     template_predicate
      (
         template_app
          (template_app (template_hole 1, template_var 0), template_hole 0)
         )),
    ("Sepref_Frame.frame_rem1", "?P \<Longrightarrow>\<^sub>t ?P",
     template_predicate
      (
         template_app
          (template_app (template_hole 0, template_var 0), template_var 0)
         )),
    ("Sepref_Rules.fcomp_norm_refl", "?t = ?t",
     template_equation (template_var 0, template_var 0)),
    ("Sepref_Basic.pure_pure", "is_pure (pure ?P)",
     template_predicate
      (
         template_app
          (template_hole 1, template_app (template_hole 0, template_var 0))
         )),
    ("Sepref_Combinator_Setup.map_type_eqI",
     "?L \<rightarrow>\<^sub>n\<^sub>t ?R",
     template_predicate
      (
         template_app
          (template_app (template_hole 0, template_var 1), template_var 0)
         )),
    ("Sepref_Frame.recover_pure_triv", "RECOVER_PURE ?P ?P",
     template_predicate
      (
         template_app
          (template_app (template_hole 0, template_var 0), template_var 0)
         )),
    ("Sepref_Id_Op.itypeI'", "?c ::\<^sub>i TYPE(?'T)",
     template_predicate
      (
         template_app
          (template_app (template_hole 1, template_var 0), template_hole 0)
         )),
    ("Sepref_Id_Op.itype_self", "?c ::\<^sub>i TYPE(?'a)",
     template_predicate
      (
         template_app
          (template_app (template_hole 1, template_var 0), template_hole 0)
         )),
    ("Sepref_Id_Op.itypeI", "?c ::\<^sub>i ?I",
     template_predicate
      (
         template_app
          (template_app (template_hole 0, template_var 1), template_var 0)
         )),
    ("Sepref_Intf_Util.IMP_PRE_refl", "IMP_PRE ?P ?P",
     template_predicate
      (
         template_app
          (template_app (template_hole 0, template_var 0), template_var 0)
         )),
    ("Sepref_Intf_Util.intf_of_relI", "INTF_OF_REL ?R TYPE(?'a)",
     template_predicate
      (
         template_app
          (template_app (template_hole 1, template_var 0), template_hole 0)
         )),
    ("Sepref_Rules.hrp_imp_refl", "hrp_imp ?RR ?RR",
     template_predicate
      (
         template_app
          (template_app (template_hole 0, template_var 0), template_var 0)
         )),
    ("Sepref_Rules.intf_of_assn_fallback", "intf_of_assn ?R TYPE(?'a)",
     template_predicate
      (
         template_app
          (template_app (template_hole 1, template_var 0), template_hole 0)
         )),
    ("Sepref_Rules.intf_of_assnI", "intf_of_assn ?R TYPE(?'a)",
     template_predicate
      (
         template_app
          (template_app (template_hole 1, template_var 0), template_hole 0)
         )),
    ("Sepref_Translate.CPR_tag_fallbackI", "CPR_TAG ?P ?Q",
     template_predicate
      (
         template_app
          (template_app (template_hole 0, template_var 1), template_var 0)
         )),
    ("Sepref_Tool.fold_COPY", "?x = COPY ?x",
     template_equation
      (template_var 0, template_app (template_hole 0, template_var 0))),
    ("Sepref_Constraints.safe_constraint_rules",
     "single_valued (br ?\<alpha> ?I)",
     template_predicate
      (
         template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0))
         )),
    ("Sepref_Frame.weaken_hnr_post_triv", "WEAKEN_HNR_POST ?\<Gamma> ?P ?P",
     template_predicate
      (
         template_app
          (template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0),
           template_var 0)
         )),
    ("Sepref_Id_Op.fallback_rule", "ID ?c ?c TYPE(?'c)",
     template_predicate
      (
         template_app
          (template_app
            (template_app (template_hole 1, template_var 0),
             template_var 0),
           template_hole 0)
         )),
    ("Sepref_Id_Op.id_int_const", "PR_CONST ?a ::\<^sub>i TYPE(int)",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 0)),
           template_hole 0)
         )),
    ("Sepref_Id_Op.id_nat_const", "PR_CONST ?a ::\<^sub>i TYPE(nat)",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 0)),
           template_hole 0)
         )),
    ("Sepref_Frame.hn_merge1",
     "?F \<or>\<^sub>A ?F \<Longrightarrow>\<^sub>t ?F",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 0),
               template_var 0)),
           template_var 0)
         )),
    ("Sepref_Intf_Util.mop_alt_unfolds", "curry0 ?f = ?f ()",
     template_equation
      (template_app (template_hole 1, template_var 0),
       template_app (template_var 0, template_hole 0))),
    ("Sepref_Misc.curry_uncurry0_id", "curry0 (uncurry0 ?f) = ?f",
     template_equation
      (template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)),
       template_var 0)),
    ("Sepref_Misc.uncurry0_apply", "uncurry0 ?c ?x = ?c",
     template_equation
      (template_app
        (template_app (template_hole 0, template_var 1), template_var 0),
       template_var 1)),
    ("Sepref_Rules.hr_comp_Id2", "hr_comp ?R Id = ?R",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), template_hole 0),
       template_var 0)),
    ("Sepref_Misc.uncurry_curry0_id", "uncurry0 (curry0 ?g) = ?g",
     template_equation
      (template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)),
       template_var 0)),
    ("Sepref_Rules.fcomp_norm_unfold", "Id O ?R = ?R",
     template_equation
      (template_app
        (template_app (template_hole 1, template_hole 0), template_var 0),
       template_var 0)),
    ("Sepref_Rules.fcomp_norm_unfold", "?R O Id = ?R",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), template_hole 0),
       template_var 0)),
    ("Sepref_Basic.the_pure_pure", "the_pure (pure ?R) = ?R",
     template_equation
      (template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)),
       template_var 0)),
    ("Sepref_Rules.to_hnr_post", "emp * ?x = ?x",
     template_equation
      (template_app
        (template_app (template_hole 1, template_hole 0), template_var 0),
       template_var 0)),
    ("Sepref_Rules.to_hnr_post", "?x * emp = ?x",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), template_hole 0),
       template_var 0)),
    ("Sepref_Tool.sepref_opt_simps", "?f >>= return = ?f",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), template_hole 0),
       template_var 0)),
    ("Sepref_Intf_Util.triv_and1", "?Q --> True & ?Q",
     template_predicate
      (
         template_app
          (template_app (template_hole 2, template_var 0),
           template_app
            (template_app (template_hole 1, template_hole 0),
             template_var 0))
         )),
    ("Sepref_Id_Op.id_rules",
     "PR_CONST (ASSN_ANNOT ?A) ::\<^sub>i TYPE(?'a => ?'a)",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_hole 2,
               template_app (template_hole 1, template_var 0))),
           template_hole 0)
         )),
    ("Sepref_Translate.id_WHILEIT",
     "PR_CONST WHILE\<^sub>T\<^bsup>?I\<^esup> ::\<^sub>i
      TYPE((?'a => bool) => (?'a => ?'a nres) => ?'a => ?'a nres)",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_hole 2,
               template_app (template_hole 1, template_var 0))),
           template_hole 0)
         )),
    ("Sepref_Translate.id_monadic_WHILEIT",
     "PR_CONST (monadic_WHILEIT ?I) ::\<^sub>i
      TYPE((?'a => bool nres) => (?'a => ?'a nres) => ?'a => ?'a nres)",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_hole 2,
               template_app (template_hole 1, template_var 0))),
           template_hole 0)
         )),
    ("Sepref_Translate.id_op_ASSERT_bind",
     "PR_CONST (op_ASSERT_bind ?I) ::\<^sub>i TYPE(?'a nres => ?'a nres)",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_hole 2,
               template_app (template_hole 1, template_var 0))),
           template_hole 0)
         )),
    ("Sepref_Translate.id_op_ASSUME_bind",
     "PR_CONST (op_ASSUME_bind ?I) ::\<^sub>i TYPE(?'a nres => ?'a nres)",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_hole 2,
               template_app (template_hole 1, template_var 0))),
           template_hole 0)
         )),
    ("Sepref_Translate.RPREMI", "?P ==> RPREM ?P",
     template_implication
      ([template_predicate (template_var 0)],
       template_predicate
        (template_app (template_hole 0, template_var 0)))),
    ("Sepref_Intf_Util.sepref_relpropI", "?P ?R = CONSTRAINT ?P ?R",
     template_equation
      (template_app (template_var 1, template_var 0),
       template_app
        (template_app (template_hole 0, template_var 1), template_var 0))),
    ("Sepref_Improper.fold_pho_apply", "?f ?x = pho_apply ?f ?x",
     template_equation
      (template_app (template_var 1, template_var 0),
       template_app
        (template_app (template_hole 0, template_var 1), template_var 0))),
    ("Sepref_Rules.uncurry0_APP", "uncurry0 ?c $ ?x = ?c",
     template_equation
      (template_app
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 1)),
         template_var 0),
       template_var 1)),
    ("Sepref_Tool.sepref_opt_simps", "(if False then ?x else ?y) = ?y",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 1, template_hole 0), template_var 1),
         template_var 0),
       template_var 0)),
    ("Sepref_Tool.sepref_opt_simps", "(if True then ?x else ?y) = ?x",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 1, template_hole 0), template_var 1),
         template_var 0),
       template_var 1)),
    ("Sepref_Rules.hn_ctxt_ctxt_fix_conv",
     "hn_ctxt (hn_ctxt ?R) = hn_ctxt ?R",
     template_equation
      (template_app
        (template_hole 0, template_app (template_hole 0, template_var 0)),
       template_app (template_hole 0, template_var 0))),
    ("Sepref_Rules.keep_drop_sels", "fst (?R\<^sup>d) = ?R",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 0),
           template_hole 0)),
       template_var 0)),
    ("Sepref_Rules.keep_drop_sels", "fst (?R\<^sup>k) = ?R",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 0),
           template_hole 0)),
       template_var 0)),
    ("Sepref_Rules.hf_pres_fst", "fst (hf_pres ?R ?k) = ?R",
     template_equation
      (template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1), template_var 0)),
       template_var 1)),
    ("Sepref_Rules.keep_drop_sels", "snd (?R\<^sup>k) = ?R",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 0),
           template_hole 0)),
       template_var 0)),
    ("Sepref_HOL_Bindings.b_assn_triv", "b_assn ?A (%_. True) = ?A",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), t_empty),
       template_var 0)),
    ("Sepref_Basic.rdomp_ctxt", "rdomp (hn_ctxt ?R) = rdomp ?R",
     template_equation
      (template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)),
       template_app (template_hole 1, template_var 0))),
    ("Sepref_HOL_Bindings.b_rel_triv", "b_rel ?R (%_. True) = ?R",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), t_empty),
       template_var 0)),
    ("Sepref_Intf_Util.sepref_relprops",
     "single_valued ?R = CONSTRAINT single_valued ?R",
     template_equation
      (template_app (template_hole 1, template_var 0),
       template_app
        (template_app (template_hole 0, template_hole 1), template_var 0))),
    ("Sepref_HOL_Bindings.prop2p",
     "single_valued ?R = right_unique (rel2p ?R)",
     template_equation
      (template_app (template_hole 2, template_var 0),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("Sepref_Intf_Util.sepref_relprops",
     "is_pure ?R = CONSTRAINT is_pure ?R",
     template_equation
      (template_app (template_hole 1, template_var 0),
       template_app
        (template_app (template_hole 0, template_hole 1), template_var 0))),
    ("Sepref_Intf_Util.sepref_relprops",
     "IS_BELOW_ID ?R = CONSTRAINT IS_BELOW_ID ?R",
     template_equation
      (template_app (template_hole 1, template_var 0),
       template_app
        (template_app (template_hole 0, template_hole 1), template_var 0))),
    ("Sepref_Intf_Util.sepref_relprops", "IS_ID ?R = CONSTRAINT IS_ID ?R",
     template_equation
      (template_app (template_hole 1, template_var 0),
       template_app
        (template_app (template_hole 0, template_hole 1), template_var 0))),
    ("Sepref_Intf_Util.sepref_relprops",
     "IS_LEFT_TOTAL ?R = CONSTRAINT IS_LEFT_TOTAL ?R",
     template_equation
      (template_app (template_hole 1, template_var 0),
       template_app
        (template_app (template_hole 0, template_hole 1), template_var 0))),
    ("Sepref_HOL_Bindings.prop2p",
     "IS_LEFT_TOTAL ?R = left_total (rel2p ?R)",
     template_equation
      (template_app (template_hole 2, template_var 0),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("Sepref_Intf_Util.sepref_relprops",
     "IS_LEFT_UNIQUE ?R = CONSTRAINT IS_LEFT_UNIQUE ?R",
     template_equation
      (template_app (template_hole 1, template_var 0),
       template_app
        (template_app (template_hole 0, template_hole 1), template_var 0))),
    ("Sepref_HOL_Bindings.prop2p",
     "IS_LEFT_UNIQUE ?R = left_unique (rel2p ?R)",
     template_equation
      (template_app (template_hole 2, template_var 0),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("Sepref_Intf_Util.sepref_relprops",
     "IS_RIGHT_TOTAL ?R = CONSTRAINT IS_RIGHT_TOTAL ?R",
     template_equation
      (template_app (template_hole 1, template_var 0),
       template_app
        (template_app (template_hole 0, template_hole 1), template_var 0))),
    ("Sepref_HOL_Bindings.prop2p",
     "IS_RIGHT_TOTAL ?R = right_total (rel2p ?R)",
     template_equation
      (template_app (template_hole 2, template_var 0),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("Sepref_HOL_Bindings.p2prop",
     "left_total ?P = IS_LEFT_TOTAL (p2rel ?P)",
     template_equation
      (template_app (template_hole 2, template_var 0),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("Sepref_HOL_Bindings.p2prop",
     "left_unique ?P = IS_LEFT_UNIQUE (p2rel ?P)",
     template_equation
      (template_app (template_hole 2, template_var 0),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("Sepref_HOL_Bindings.p2prop",
     "right_total ?P = IS_RIGHT_TOTAL (p2rel ?P)",
     template_equation
      (template_app (template_hole 2, template_var 0),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("Sepref_HOL_Bindings.p2prop",
     "right_unique ?P = single_valued (p2rel ?P)",
     template_equation
      (template_app (template_hole 2, template_var 0),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("Sepref_Translate.precise_pure_iff_sv",
     "precise (pure ?R) = single_valued ?R",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app (template_hole 0, template_var 0))),
    ("Sepref_Intf_Util.sepref_relprops_transform",
     "single_valued (?R^-1) = IS_LEFT_UNIQUE ?R",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app (template_hole 0, template_var 0))),
    ("Sepref_Constraints.constraint_simps",
     "IS_LEFT_TOTAL (?R^-1) = IS_RIGHT_TOTAL ?R",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app (template_hole 0, template_var 0))),
    ("Sepref_Constraints.constraint_simps",
     "IS_LEFT_UNIQUE (?R^-1) = single_valued ?R",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app (template_hole 0, template_var 0))),
    ("Sepref_Constraints.constraint_simps",
     "IS_RIGHT_TOTAL (?R^-1) = IS_LEFT_TOTAL ?R",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app (template_hole 0, template_var 0))),
    ("Sepref_Rules.pure_unit_rel_eq_empty", "unit_assn ?x ?y = emp",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 2, template_hole 1), template_var 1),
         template_var 0),
       template_hole 0)),
    ("Sepref_Basic.hn_refine_false", "hn_refine false ?c ?\<Gamma>' ?R ?m",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app (template_hole 1, template_hole 0),
                 template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)
         )),
    ("Sepref_Basic.hnr_FAIL", "hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R FAIL",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app (template_hole 1, template_var 3),
                 template_var 2),
               template_var 1),
             template_var 0),
           template_hole 0)
         )),
    ("Sepref_Foreach.id_FOREACHoci",
     "PR_CONST FOREACH\<^sub>O\<^sub>C\<^bsup>?R,?I\<^esup> ::\<^sub>i
      TYPE(?'c set
           => (?'d => bool)
              => (?'c => ?'d => ?'d nres) => ?'d => ?'d nres)",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 1),
                 template_var 0))),
           template_hole 0)
         )),
    ("Sepref_Intf_Util.imp_and_triv_pre",
     "IMP_PRE ?P (and_pre (%_. True) ?P)",
     template_predicate
      (
         template_app
          (template_app (template_hole 2, template_var 0),
           template_app
            (template_app (template_hole 1, t_empty), template_var 0))
         )),
    ("Sepref_Rules.auto_weaken_pre_add_dummy_imp", "?P ==> True --> ?P",
     template_implication
      ([template_predicate (template_var 0)],
       template_predicate
        (
           template_app
            (template_app (template_hole 1, template_hole 0),
             template_var 0)
           ))),
    ("Sepref_Intf_Util.CNV_prove", "?P ==> CNV ?P True",
     template_implication
      ([template_predicate (template_var 0)],
       template_predicate
        (
           template_app
            (template_app (template_hole 1, template_var 0),
             template_hole 0)
           ))),
    ("Sepref_Intf_Util.to_IMP_LISTI", "?P ==> IMP_LIST [] ?P",
     template_implication
      ([template_predicate (template_var 0)],
       template_predicate
        (
           template_app
            (template_app (template_hole 1, template_hole 0),
             template_var 0)
           ))),
    ("Sepref_Constraints.constraint_rules",
     "IS_BELOW_ID ?R ==> single_valued ?R",
     template_implication
      ([template_predicate
         (template_app (template_hole 1, template_var 0))],
       template_predicate
        (template_app (template_hole 0, template_var 0)))),
    ("Sepref_Constraints.constraint_rules",
     "IS_BELOW_ID ?R ==> IS_LEFT_UNIQUE ?R",
     template_implication
      ([template_predicate
         (template_app (template_hole 1, template_var 0))],
       template_predicate
        (template_app (template_hole 0, template_var 0)))),
    ("Sepref_HOL_Bindings.IS_ID_imp_BELOW_ID",
     "IS_ID ?R ==> IS_BELOW_ID ?R",
     template_implication
      ([template_predicate
         (template_app (template_hole 1, template_var 0))],
       template_predicate
        (template_app (template_hole 0, template_var 0)))),
    ("Sepref_Constraints.constraint_rules", "IS_ID ?R ==> IS_LEFT_TOTAL ?R",
     template_implication
      ([template_predicate
         (template_app (template_hole 1, template_var 0))],
       template_predicate
        (template_app (template_hole 0, template_var 0)))),
    ("Sepref_Constraints.constraint_rules",
     "IS_ID ?R ==> IS_RIGHT_TOTAL ?R",
     template_implication
      ([template_predicate
         (template_app (template_hole 1, template_var 0))],
       template_predicate
        (template_app (template_hole 0, template_var 0)))),
    ("Sepref_Rules.keep_drop_sels", "snd (?R\<^sup>d) = invalid_assn ?R",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_app (template_hole 2, template_var 0),
           template_hole 1)),
       template_app (template_hole 0, template_var 0))),
    ("Sepref_Rules.hr_comp_Id1", "hr_comp id_assn ?R = pure ?R",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app (template_hole 2, template_hole 1)),
         template_var 0),
       template_app (template_hole 0, template_var 0))),
    ("Sepref_Rules.prod_casesK", "(%(uu_, uu_). ?k) = (%_. ?k)",
     template_equation (template_app (template_hole 0, t_empty), t_empty)),
    ("Sepref_Basic.rdom_pure", "rdom (pure ?R) = Range ?R",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_hole 2,
           template_app (template_hole 1, template_var 0))),
       template_app (template_hole 0, template_var 0))),
    ("Sepref_HOL_Bindings.list_assn_simps",
     "hn_ctxt (list_assn ?P) [] [] = emp",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 4,
             template_app (template_hole 3, template_var 0)),
           template_hole 2),
         template_hole 1),
       template_hole 0)),
    ("Sepref_Rules.hn_val_unit_conv_emp", "hn_val unit_rel ?x ?y = emp",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 3,
             template_app (template_hole 2, template_hole 1)),
           template_var 1),
         template_var 0),
       template_hole 0)),
    ("Sepref_Intf_Util.assert_true_bind_conv",
     "ASSERT True >>= (%_. ?m) = ?m",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app (template_hole 1, template_hole 0)),
         t_empty),
       template_var 0)),
    ("Sepref_HOL_Bindings.list_assn_precise",
     "precise ?P ==> precise (list_assn ?P)",
     template_implication
      ([template_predicate
         (template_app (template_hole 2, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 0))
           ))),
    ("Sepref_HOL_Bindings.option_assn_precise",
     "precise ?P ==> precise (option_assn ?P)",
     template_implication
      ([template_predicate
         (template_app (template_hole 2, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 0))
           ))),
    ("Sepref_Constraints.CONSTRAINT_I", "?P ?x ==> CONSTRAINT ?P ?x",
     template_implication
      ([template_predicate (template_app (template_var 1, template_var 0))],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 1), template_var 0)
           ))),
    ("Sepref_Translate.precise_pure",
     "single_valued ?R ==> precise (pure ?R)",
     template_implication
      ([template_predicate
         (template_app (template_hole 2, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 0))
           ))),
    ("Sepref_Basic.pure_hn_ctxt", "is_pure ?P ==> is_pure (hn_ctxt ?P)",
     template_implication
      ([template_predicate
         (template_app (template_hole 1, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 0))
           ))),
    ("Sepref_HOL_Bindings.list_assn_pure",
     "is_pure ?P ==> is_pure (list_assn ?P)",
     template_implication
      ([template_predicate
         (template_app (template_hole 2, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 0))
           ))),
    ("Sepref_HOL_Bindings.pure_option",
     "is_pure ?P ==> is_pure (option_assn ?P)",
     template_implication
      ([template_predicate
         (template_app (template_hole 2, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 0))
           ))),
    ("Sepref_Translate.vassn_tagI",
     "?h \<Turnstile> ?\<Gamma> ==> vassn_tag ?\<Gamma>",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 1),
              template_var 0)
            )],
       template_predicate
        (template_app (template_hole 0, template_var 1)))),
    ("Sepref_Constraints.CN_FALSEI", "CN_FALSE ?P ?x ==> ?P ?x",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 0, template_var 1),
              template_var 0)
            )],
       template_predicate (template_app (template_var 1, template_var 0)))),
    ("Sepref_Constraints.CONSTRAINT_D", "CONSTRAINT ?P ?x ==> ?P ?x",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 0, template_var 1),
              template_var 0)
            )],
       template_predicate (template_app (template_var 1, template_var 0)))),
    ("Sepref_Intf_Util.add_is_pure_constraint",
     "[| PROP ?P; CONSTRAINT is_pure ?A |] ==> PROP ?P",
     template_implication
      ([template_predicate (template_var 1),
        template_predicate
         (
            template_app
             (template_app (template_hole 1, template_hole 0),
              template_var 0)
            )],
       template_predicate (template_var 1))),
    ("Sepref_Basic.invalidate",
     "?R ?x ?y \<Longrightarrow>\<^sub>A invalid_assn ?R ?x ?y",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_var 2, template_var 1),
               template_var 0)),
           template_app
            (template_app
              (template_app (template_hole 0, template_var 2),
               template_var 1),
             template_var 0))
         )),
    ("Sepref_Intf_Util.mop_alt_unfolds", "(?f o ?g) ?x = ?f (?g ?x)",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 0, template_var 2), template_var 1),
         template_var 0),
       template_app
        (template_var 2, template_app (template_var 1, template_var 0)))),
    ("Sepref_HOL_Bindings.list_assn_pure_conv",
     "list_assn (pure ?R) = pure (\<langle>?R\<rangle>list_rel)",
     template_equation
      (template_app
        (template_hole 4, template_app (template_hole 3, template_var 0)),
       template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_hole 0),
           template_var 0)))),
    ("Sepref_Rules.fcomp_norm_unfold",
     "pure (\<langle>?R\<rangle>list_rel) = list_assn (pure ?R)",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_hole 2),
           template_var 0)),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("Sepref_HOL_Bindings.option_assn_pure_conv",
     "option_assn (pure ?R) = pure (\<langle>?R\<rangle>option_rel)",
     template_equation
      (template_app
        (template_hole 4, template_app (template_hole 3, template_var 0)),
       template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_hole 0),
           template_var 0)))),
    ("Sepref_Rules.fcomp_norm_unfold",
     "pure (\<langle>?R\<rangle>option_rel) = option_assn (pure ?R)",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_hole 2),
           template_var 0)),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("Sepref_Rules.uncurry0_add_app_tag",
     "uncurry0 (RETURN ?c) = uncurry0 (RETURN $ ?c)",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 0, template_hole 1),
           template_var 0)))),
    ("Sepref_Rules.ensure_fref_nres_unfold",
     "(RETURN \<circ>\<circ> uncurry0) ?f = uncurry0 (RETURN ?f)",
     template_equation
      (template_app
        (template_app (template_hole 3, template_hole 2),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 0, template_app (template_hole 2, template_var 0)))),
    ("Sepref_HOL_Bindings.p2prop",
     "bi_unique ?P = (left_unique ?P & right_unique ?P)",
     template_equation
      (template_app (template_hole 3, template_var 0),
       template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 0)),
         template_app (template_hole 0, template_var 0)))),
    ("Sepref_Tool.short_circuit_conv",
     "(?a & ?b) = (if ?a then ?b else False)",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 1), template_var 0),
       template_app
        (template_app
          (template_app (template_hole 1, template_var 1), template_var 0),
         template_hole 0))),
    ("Sepref_Tool.short_circuit_conv",
     "(?a | ?b) = (if ?a then True else ?b)",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 1), template_var 0),
       template_app
        (template_app
          (template_app (template_hole 1, template_var 1), template_hole 0),
         template_var 0))),
    ("Sepref_Tool.short_circuit_conv",
     "(?a --> ?b) = (if ?a then ?b else True)",
     template_equation
      (template_app
        (template_app (template_hole 2, template_var 1), template_var 0),
       template_app
        (template_app
          (template_app (template_hole 1, template_var 1), template_var 0),
         template_hole 0))),
    ("Sepref_Intf_Util.sepref_relprops",
     "IS_PURE ?\<Phi> ?R = CONSTRAINT (IS_PURE ?\<Phi>) ?R",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 1), template_var 0),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 1, template_var 1)),
         template_var 0))),
    ("Sepref_HOL_Bindings.prop2p",
     "right_unique (rel2p (?R^-1)) = left_unique (rel2p ?R)",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_hole 3,
           template_app (template_hole 2, template_var 0))),
       template_app
        (template_hole 1, template_app (template_hole 0, template_var 0)))),
    ("Sepref_Foreach.imp_nfoldli_simps",
     "imp_nfoldli [] ?c ?f ?s = return ?s",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app (template_hole 2, template_hole 1),
             template_var 2),
           template_var 1),
         template_var 0),
       template_app (template_hole 0, template_var 0))),
    ("Sepref_Foreach.monadic_nfoldli_simp",
     "monadic_nfoldli [] ?c ?f ?s = RETURN ?s",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app (template_hole 2, template_hole 1),
             template_var 2),
           template_var 1),
         template_var 0),
       template_app (template_hole 0, template_var 0))),
    ("Sepref_Foreach.nfoldli_alt_simp",
     "nfoldli_alt [] ?c ?f ?s = RETURN ?s",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app (template_hole 2, template_hole 1),
             template_var 2),
           template_var 1),
         template_var 0),
       template_app (template_hole 0, template_var 0))),
    ("Sepref_Intf_Util.IS_PURE_pureI", "?P ?R ==> IS_PURE ?P (pure ?R)",
     template_implication
      ([template_predicate (template_app (template_var 1, template_var 0))],
       template_predicate
        (
           template_app
            (template_app (template_hole 1, template_var 1),
             template_app (template_hole 0, template_var 0))
           ))),
    ("Sepref_HOL_Bindings.b_rel_right_unique",
     "single_valued ?R ==> single_valued (b_rel ?R ?P)",
     template_implication
      ([template_predicate
         (template_app (template_hole 1, template_var 1))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "single_valued ?R ==> single_valued (\<langle>?R\<rangle>list_rel)",
     template_implication
      ([template_predicate
         (template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "single_valued ?R ==> single_valued (\<langle>?R\<rangle>option_rel)",
     template_implication
      ([template_predicate
         (template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 0))
           ))),
    ("Sepref_HOL_Bindings.b_assn_is_pure",
     "is_pure ?A ==> is_pure (b_assn ?A ?P)",
     template_implication
      ([template_predicate
         (template_app (template_hole 1, template_var 1))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.hr_comp_is_pure",
     "is_pure ?A ==> is_pure (hr_comp ?A ?B)",
     template_implication
      ([template_predicate
         (template_app (template_hole 2, template_var 1))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))
           ))),
    ("Sepref_HOL_Bindings.b_rel_below_id",
     "IS_BELOW_ID ?R ==> IS_BELOW_ID (b_rel ?R ?P)",
     template_implication
      ([template_predicate
         (template_app (template_hole 1, template_var 1))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))
           ))),
    ("Sepref_HOL_Bindings.IS_BELOW_ID_list_rel",
     "IS_BELOW_ID ?R ==> IS_BELOW_ID (\<langle>?R\<rangle>list_rel)",
     template_implication
      ([template_predicate
         (template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "IS_BELOW_ID ?R ==> IS_BELOW_ID (\<langle>?R\<rangle>option_rel)",
     template_implication
      ([template_predicate
         (template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "IS_ID ?R ==> IS_ID (\<langle>?R\<rangle>list_rel)",
     template_implication
      ([template_predicate
         (template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "IS_ID ?R ==> IS_ID (\<langle>?R\<rangle>option_rel)",
     template_implication
      ([template_predicate
         (template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "IS_LEFT_TOTAL ?R ==> IS_LEFT_TOTAL (\<langle>?R\<rangle>list_rel)",
     template_implication
      ([template_predicate
         (template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "IS_LEFT_TOTAL ?R ==> IS_LEFT_TOTAL (\<langle>?R\<rangle>option_rel)",
     template_implication
      ([template_predicate
         (template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 0))
           ))),
    ("Sepref_HOL_Bindings.b_rel_left_unique",
     "IS_LEFT_UNIQUE ?R ==> IS_LEFT_UNIQUE (b_rel ?R ?P)",
     template_implication
      ([template_predicate
         (template_app (template_hole 1, template_var 1))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "IS_LEFT_UNIQUE ?R ==> IS_LEFT_UNIQUE (\<langle>?R\<rangle>list_rel)",
     template_implication
      ([template_predicate
         (template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "IS_LEFT_UNIQUE ?R ==>
      IS_LEFT_UNIQUE (\<langle>?R\<rangle>option_rel)",
     template_implication
      ([template_predicate
         (template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "IS_RIGHT_TOTAL ?R ==> IS_RIGHT_TOTAL (\<langle>?R\<rangle>list_rel)",
     template_implication
      ([template_predicate
         (template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "IS_RIGHT_TOTAL ?R ==>
      IS_RIGHT_TOTAL (\<langle>?R\<rangle>option_rel)",
     template_implication
      ([template_predicate
         (template_app (template_hole 3, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 0))
           ))),
    ("Sepref_Rules.hrp_imp_reflI", "?RR = ?RR' ==> hrp_imp ?RR ?RR'",
     template_implication
      ([template_equation (template_var 1, template_var 0)],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 1), template_var 0)
           ))),
    ("Sepref_Intf_Util.simp_pre_final_simp", "CNV ?P ?P' ==> ?P' --> ?P",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 0), template_var 1)
           ))),
    ("Sepref_Intf_Util.IMP_LIST_trivial",
     "IMP_LIST ?A ?B ==> IMP_LIST ?A ?B",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 0, template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 1), template_var 0)
           ))),
    ("Sepref_Intf_Util.IMP_PRE_CUSTOMD",
     "IMP_PRE_CUSTOM ?P1.0 ?P2.0 ==> IMP_PRE ?P1.0 ?P2.0",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 1), template_var 0)
           ))),
    ("Sepref_Intf_Util.synth_intf_of_relI",
     "INTF_OF_REL ?R ?I ==> SYNTH_TERM ?R ?I",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 1), template_var 0)
           ))),
    ("Sepref_Translate.is_GEN_ALGO",
     "GEN_ALGO ?f ?\<Phi> ==> GEN_ALGO ?f ?\<Phi>",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 0, template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 1), template_var 0)
           ))),
    ("Sepref_Tool.prec_split1_aux",
     "?A * ?B * true \<Longrightarrow>\<^sub>A ?A * true",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 1, template_var 1),
                   template_var 0)),
               template_hole 0)),
           template_app
            (template_app (template_hole 1, template_var 1),
             template_hole 0))
         )),
    ("Sepref_Tool.prec_split2_aux",
     "?A * ?B * true \<Longrightarrow>\<^sub>A ?B * true",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 1, template_var 1),
                   template_var 0)),
               template_hole 0)),
           template_app
            (template_app (template_hole 1, template_var 0),
             template_hole 0))
         )),
    ("Sepref_Intf_Util.mop_alt_unfolds", "uncurry ?f (?a, ?b) = ?f ?a ?b",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 2),
         template_app
          (template_app (template_hole 0, template_var 1), template_var 0)),
       template_app
        (template_app (template_var 2, template_var 1), template_var 0))),
    ("Sepref_Rules.fcomp_norm_unfold",
     "pure (b_rel ?R ?P) = b_assn (pure ?R) ?P",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_var 0))),
    ("Sepref_HOL_Bindings.b_assn_pure_conv",
     "b_assn (pure ?R) ?P = pure (b_rel ?R ?P)",
     template_equation
      (template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_var 0),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_Rules.hr_comp_invalid",
     "hr_comp (invalid_assn ?R1.0) ?R2.0 =
      invalid_assn (hr_comp ?R1.0 ?R2.0)",
     template_equation
      (template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_var 0),
       template_app
        (template_hole 0,
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("Sepref_Rules.hr_comp_pure", "hr_comp (pure ?R) ?S = pure (?R O ?S)",
     template_equation
      (template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, template_var 1)),
         template_var 0),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_Translate.import_rel1_pure_conv",
     "import_rel1 ?R (pure ?A) = pure (\<langle>?A\<rangle>?R)",
     template_equation
      (template_app
        (template_app (template_hole 3, template_var 1),
         template_app (template_hole 2, template_var 0)),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_HOL_Bindings.inv_list_rel_eq",
     "(\<langle>?R\<rangle>list_rel)^-1 = \<langle>?R^-1\<rangle>list_rel",
     template_equation
      (template_app
        (template_hole 5,
         template_app
          (template_app (template_hole 4, template_hole 3),
           template_var 0)),
       template_app
        (template_app (template_hole 2, template_hole 1),
         template_app (template_hole 0, template_var 0)))),
    ("Sepref_HOL_Bindings.inv_option_rel_eq",
     "(\<langle>?K\<rangle>option_rel)^-1 =
      \<langle>?K^-1\<rangle>option_rel",
     template_equation
      (template_app
        (template_hole 5,
         template_app
          (template_app (template_hole 4, template_hole 3),
           template_var 0)),
       template_app
        (template_app (template_hole 2, template_hole 1),
         template_app (template_hole 0, template_var 0)))),
    ("Sepref_Basic.is_pure_conv", "is_pure ?R = (EX R'. ?R = pure R')",
     template_equation
      (template_app (template_hole 3, template_var 0),
       template_app (template_hole 2, t_empty))),
    ("Sepref_Basic.rdomp_pure", "rdomp (pure ?R) ?a = (?a : Range ?R)",
     template_equation
      (template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 1, template_var 0),
         template_app (template_hole 0, template_var 1)))),
    ("Sepref_Basic.pure_eq_conv", "(pure ?R = pure ?R') = (?R = ?R')",
     template_bimplication
      (template_equation
        (template_app (template_hole 1, template_var 1),
         template_app (template_hole 1, template_var 0)),
       template_equation (template_var 1, template_var 0))),
    ("Sepref_HOL_Bindings.list_assn_aux_simps",
     "list_assn ?P [] ?l' = \<up> (?l' = [])",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 4, template_var 1),
                template_hole 3),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_hole 0))
           ))),
    ("Sepref_HOL_Bindings.list_assn_aux_simps",
     "list_assn ?P ?l [] = \<up> (?l = [])",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 4, template_var 1),
                template_var 0),
              template_hole 3)
            )],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_hole 0))
           ))),
    ("Sepref_HOL_Bindings.option_assn_simps",
     "option_assn ?P None ?v' = \<up> (?v' = None)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 4, template_var 1),
                template_hole 3),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_hole 0))
           ))),
    ("Sepref_HOL_Bindings.option_assn_simps",
     "option_assn ?P ?v None = \<up> (?v = None)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 4, template_var 1),
                template_var 0),
              template_hole 3)
            )],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_hole 0))
           ))),
    ("Sepref_HOL_Bindings.list_assn_simps",
     "hn_ctxt (list_assn ?P) [] (?c # ?cs) = false",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 4,
             template_app (template_hole 3, template_var 2)),
           template_hole 2),
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_hole 0)),
    ("Sepref_HOL_Bindings.list_assn_simps",
     "hn_ctxt (list_assn ?P) (?a # ?as) [] = false",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 4,
             template_app (template_hole 3, template_var 2)),
           template_app
            (template_app (template_hole 2, template_var 1),
             template_var 0)),
         template_hole 1),
       template_hole 0)),
    ("Sepref_Monadify.RET_COPY_PASS_eq", "RETURN $ (COPY $ ?p) = PASS $ ?p",
     template_equation
      (template_app
        (template_app (template_hole 4, template_hole 3),
         template_app
          (template_app (template_hole 2, template_hole 1),
           template_var 0)),
       template_app
        (template_app (template_hole 4, template_hole 0), template_var 0))),
    ("Sepref_Frame.recover_pure",
     "RECOVER_PURE (hn_ctxt ?R ?x ?y) (hn_ctxt ?R ?x ?y)",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 1),
               template_var 0)),
           template_app
            (template_app
              (template_app (template_hole 0, template_var 2),
               template_var 1),
             template_var 0))
         )),
    ("Sepref_Translate.CPR_tag_ctxtI",
     "CPR_TAG (hn_ctxt ?R ?x ?xi) (hn_ctxt ?R' ?x ?xi)",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app
                (template_app (template_hole 0, template_var 3),
                 template_var 2),
               template_var 1)),
           template_app
            (template_app
              (template_app (template_hole 0, template_var 0),
               template_var 2),
             template_var 1))
         )),
    ("Sepref_Basic.pure_the_pure", "is_pure ?R ==> pure (the_pure ?R) = ?R",
     template_implication
      ([template_predicate
         (template_app (template_hole 3, template_var 0))],
       template_equation
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 0)),
         template_var 0))),
    ("Sepref_Id_Op.id_rule", "?c ::\<^sub>i ?I ==> ID ?c ?c ?I",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 0, template_var 1),
               template_var 1),
             template_var 0)
           ))),
    ("Sepref_Rules.fcomp_norm_simps",
     "CONSTRAINT (IS_PURE ?P) ?A ==> ?P (the_pure ?A)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app (template_hole 1, template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_var 1, template_app (template_hole 0, template_var 0))
           ))),
    ("Sepref_Intf_Util.handle_purity2",
     "CONSTRAINT (IS_PURE ?\<Phi>) ?A ==> CONSTRAINT is_pure ?A",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app (template_hole 1, template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 2, template_hole 0),
             template_var 0)
           ))),
    ("Sepref_Frame.frame_thms",
     "hn_ctxt ?R ?x ?y \<Longrightarrow>\<^sub>t hn_invalid ?R ?x ?y",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 1),
               template_var 0)),
           template_app
            (template_app
              (template_app
                (template_hole 1,
                 template_app (template_hole 0, template_var 2)),
               template_var 1),
             template_var 0))
         )),
    ("Sepref_Tool.sepref_opt_simps",
     "imp_nfoldli [?l..<?u] ?c = imp_for ?l ?u ?c",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_app (template_hole 0, template_var 2), template_var 1),
         template_var 0))),
    ("Sepref_Foreach.imp_for_imp_for'",
     "imp_for ?i ?u (%_. return True) = imp_for' ?i ?u",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 3, template_var 1), template_var 0),
         t_empty),
       template_app
        (template_app (template_hole 0, template_var 1), template_var 0))),
    ("Sepref_Foreach.imp_for_down_no_cond",
     "imp_for_down ?l ?u (%_. return True) = imp_for_down' ?l ?u",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 3, template_var 1), template_var 0),
         t_empty),
       template_app
        (template_app (template_hole 0, template_var 1), template_var 0))),
    ("Sepref_Rules.hfprod_fst_snd",
     "fst (?A *\<^sub>a ?B) = fst ?A \<times>\<^sub>a fst ?B",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 0, template_var 0)))),
    ("Sepref_Rules.to_hnr_prod_fst_snd",
     "fst (?A *\<^sub>a ?B) = to_hnr_prod (fst ?A) (fst ?B)",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 0, template_var 0)))),
    ("Sepref_Rules.hfprod_fst_snd",
     "snd (?A *\<^sub>a ?B) = snd ?A \<times>\<^sub>a snd ?B",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 0, template_var 0)))),
    ("Sepref_Rules.to_hnr_prod_fst_snd",
     "snd (?A *\<^sub>a ?B) = to_hnr_prod (snd ?A) (snd ?B)",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 0, template_var 0)))),
    ("Sepref_HOL_Bindings.b_rel_Range",
     "Range (b_rel ?R ?P) = Range ?R Int Collect ?P",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_app (template_hole 2, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 1, template_app (template_hole 3, template_var 1)),
         template_app (template_hole 0, template_var 0)))),
    ("Sepref_Translate.import_param_3",
     "\<up> (?P & ?Q) = \<up> ?P * \<up> ?Q",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 2, template_var 1)),
         template_app (template_hole 2, template_var 0)))),
    ("Sepref_HOL_Bindings.list_assn_simps",
     "hn_ctxt (list_assn ?P) [] ?l' = \<up> (?l' = [])",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_hole 5,
                  template_app (template_hole 4, template_var 1)),
                template_hole 3),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_hole 0))
           ))),
    ("Sepref_HOL_Bindings.list_assn_simps",
     "hn_ctxt (list_assn ?P) ?l [] = \<up> (?l = [])",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_hole 5,
                  template_app (template_hole 4, template_var 1)),
                template_var 0),
              template_hole 3)
            )],
       template_predicate
        (
           template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 0),
               template_hole 0))
           ))),
    ("Sepref_HOL_Bindings.hn_Nil",
     "hn_refine emp (return []) emp (list_assn ?P) (RETURN $ [])",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app (template_hole 7, template_hole 6),
                 template_app (template_hole 5, template_hole 4)),
               template_hole 6),
             template_app (template_hole 3, template_var 0)),
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_hole 0))
         )),
    ("Sepref_HOL_Bindings.hn_None",
     "hn_refine emp (return None) emp (option_assn ?P) (RETURN $ None)",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app (template_hole 7, template_hole 6),
                 template_app (template_hole 5, template_hole 4)),
               template_hole 6),
             template_app (template_hole 3, template_var 0)),
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_hole 0))
         )),
    ("Sepref_Translate.pure_precise_iff_sv",
     "is_pure ?R ==> precise ?R = single_valued (the_pure ?R)",
     template_implication
      ([template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_equation
        (template_app (template_hole 2, template_var 0),
         template_app
          (template_hole 1,
           template_app (template_hole 0, template_var 0))))),
    ("Sepref_Rules.fcomp_norm_simps",
     "CONSTRAINT is_pure ?P ==> pure (the_pure ?P) = ?P",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 4, template_hole 3),
              template_var 0)
            )],
       template_equation
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 0)),
         template_var 0))),
    ("Sepref_Intf_Util.sepref_relprops_simps",
     "CONSTRAINT (IS_PURE IS_BELOW_ID) ?A ==>
      CONSTRAINT (IS_PURE single_valued) ?A",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app (template_hole 2, template_hole 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app (template_hole 2, template_hole 0)),
             template_var 0)
           ))),
    ("Sepref_Intf_Util.sepref_relprops_simps",
     "CONSTRAINT (IS_PURE IS_BELOW_ID) ?A ==>
      CONSTRAINT (IS_PURE IS_LEFT_UNIQUE) ?A",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app (template_hole 2, template_hole 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app (template_hole 2, template_hole 0)),
             template_var 0)
           ))),
    ("Sepref_Intf_Util.sepref_relprops_simps",
     "CONSTRAINT (IS_PURE IS_ID) ?A ==>
      CONSTRAINT (IS_PURE IS_BELOW_ID) ?A",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app (template_hole 2, template_hole 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app (template_hole 2, template_hole 0)),
             template_var 0)
           ))),
    ("Sepref_Intf_Util.sepref_relprops_simps",
     "CONSTRAINT (IS_PURE IS_ID) ?A ==>
      CONSTRAINT (IS_PURE IS_LEFT_TOTAL) ?A",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app (template_hole 2, template_hole 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app (template_hole 2, template_hole 0)),
             template_var 0)
           ))),
    ("Sepref_Intf_Util.sepref_relprops_simps",
     "CONSTRAINT (IS_PURE IS_ID) ?A ==>
      CONSTRAINT (IS_PURE IS_RIGHT_TOTAL) ?A",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app (template_hole 2, template_hole 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app (template_hole 2, template_hole 0)),
             template_var 0)
           ))),
    ("Sepref_Intf_Util.handle_purity1",
     "CONSTRAINT (IS_PURE ?\<Phi>) ?A ==> CONSTRAINT ?\<Phi> (the_pure ?A)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app (template_hole 2, template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 1, template_var 1),
             template_app (template_hole 0, template_var 0))
           ))),
    ("Sepref_Constraints.constraint_rules",
     "[| single_valued ?R; IS_LEFT_UNIQUE ?R |] ==> IS_PRES_EQ ?R",
     template_implication
      ([template_predicate (template_app (template_hole 2, template_var 0)),
        template_predicate
         (template_app (template_hole 1, template_var 0))],
       template_predicate
        (template_app (template_hole 0, template_var 0)))),
    ("Sepref_Frame.frame_thms",
     "hn_ctxt ?R ?x ?y \<Longrightarrow>\<^sub>t
      hn_ctxt (%_ _. true) ?x ?y",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 1),
               template_var 0)),
           template_app
            (template_app
              (template_app (template_hole 1, t_empty), template_var 1),
             template_var 0))
         )),
    ("Sepref_HOL_Bindings.b_assn_subtyping_match_eqA_tR",
     "hn_ctxt (b_assn ?A ?P) ?x ?y \<Longrightarrow>\<^sub>t
      hn_ctxt ?A ?x ?y",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_app
                  (template_hole 1,
                   template_app
                    (template_app (template_hole 0, template_var 3),
                     template_var 2)),
                 template_var 1),
               template_var 0)),
           template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 1),
             template_var 0))
         )),
    ("Sepref_Rules.hr_comp_assoc",
     "hr_comp (hr_comp ?R ?S) ?T = hr_comp ?R (?S O ?T)",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 1, template_var 2),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_HOL_Bindings.list_assn_comp",
     "hr_comp (list_assn ?A) (\<langle>?B\<rangle>list_rel) =
      list_assn (hr_comp ?A ?B)",
     template_equation
      (template_app
        (template_app
          (template_hole 5, template_app (template_hole 4, template_var 1)),
         template_app
          (template_app (template_hole 3, template_hole 2),
           template_var 0)),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_HOL_Bindings.hr_comp_option_conv",
     "hr_comp (option_assn ?R) (\<langle>?R'\<rangle>option_rel) =
      option_assn (hr_comp ?R ?R')",
     template_equation
      (template_app
        (template_app
          (template_hole 5, template_app (template_hole 4, template_var 1)),
         template_app
          (template_app (template_hole 3, template_hole 2),
           template_var 0)),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_Rules.ensure_fref_nres_unfold",
     "(RETURN \<circ>\<circ> uncurry) ?f =
      uncurry (RETURN \<circ>\<circ> ?f)",
     template_equation
      (template_app
        (template_app (template_hole 4, template_hole 3),
         template_app (template_hole 2, template_var 0)),
       template_app (template_hole 1, t_empty))),
    ("Sepref_Misc.fold_partial_uncurry",
     "uncurry (%(ps, cf). ?f ps cf) = uncurry2 ?f",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, t_empty)),
       template_app
        (template_hole 2, template_app (template_hole 0, template_var 0)))),
    ("Sepref_Rules.fref_param1",
     "?R \<rightarrow> ?S = ?R \<rightarrow>\<^sub>f ?S",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_app (template_hole 1, t_empty), template_var 1),
         template_var 0))),
    ("Sepref_Rules.uncurry0_hfref_post",
     "[uncurry0 True]\<^sub>a ?R \<rightarrow> ?S =
      ?R \<rightarrow>\<^sub>a ?S",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 1, template_hole 0)),
           template_var 1),
         template_var 0),
       template_app
        (template_app
          (template_app (template_hole 2, t_empty), template_var 1),
         template_var 0))),
    ("Sepref_Basic.is_pure_iff_pure_assn",
     "is_pure ?P = (ALL x x'. is_pure_assn (?P x x'))",
     template_equation
      (template_app (template_hole 3, template_var 0),
       template_app (template_hole 2, t_empty))),
    ("Sepref_Rules.auto_weaken_pre_to_imp_nf",
     "((?A & ?B) & ?C) = (?A & ?B & ?C)",
     template_equation
      (template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 0, template_var 2),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_Rules.auto_weaken_pre_to_imp_nf",
     "(?A --> ?B --> ?C) = (?A & ?B --> ?C)",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 2),
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1)),
         template_var 0))),
    ("Sepref_Translate.import_param_1",
     "(?P --> ?Q --> ?R) = (?P & ?Q --> ?R)",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 2),
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1)),
         template_var 0))),
    ("Sepref_Basic.pure_app_eq", "pure ?R ?a ?c = \<up> ((?c, ?a) : ?R)",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 3, template_var 2), template_var 1),
         template_var 0),
       template_app
        (template_hole 2,
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 0),
               template_var 1)),
           template_var 2)))),
    ("Sepref_Rules.norm_return_o",
     "(return o ?f) $ ?x = return $ (?f $ ?x)",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 1, template_hole 2),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_Rules.hrp_comp_dest",
     "hrp_comp (?A\<^sup>d) ?B = (hr_comp ?A ?B)\<^sup>d",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 1),
             template_hole 2)),
         template_var 0),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0)),
         template_hole 2))),
    ("Sepref_Rules.hrp_comp_keep",
     "hrp_comp (?A\<^sup>k) ?B = (hr_comp ?A ?B)\<^sup>k",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 1),
             template_hole 2)),
         template_var 0),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0)),
         template_hole 2))),
    ("Sepref_Rules.norm_RETURN_o",
     "(RETURN o ?f) $ ?x = RETURN $ (?f $ ?x)",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 1, template_hole 2),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_Intf_Util.mop_spec_rl", "?P ?x ==> mop ?P ?f ?x <= ?f ?x",
     template_implication
      ([template_predicate (template_app (template_var 2, template_var 1))],
       template_inequation
        (less_equals,
         template_app
          (template_app
            (template_app (template_hole 0, template_var 2),
             template_var 0),
           template_var 1),
         template_app (template_var 0, template_var 1)))),
    ("Sepref_Rules.fcomp_norm_simps",
     "CONSTRAINT (IS_PURE ?\<Phi>) ?P ==> pure (the_pure ?P) = ?P",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app (template_hole 3, template_var 1)),
              template_var 0)
            )],
       template_equation
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 0)),
         template_var 0))),
    ("Sepref_Translate.vassn_dest",
     "vassn_tag (?\<Gamma>\<^sub>1 * ?\<Gamma>\<^sub>2) ==>
      vassn_tag ?\<Gamma>\<^sub>1 & vassn_tag ?\<Gamma>\<^sub>2",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 2,
              template_app
               (template_app (template_hole 1, template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 0,
               template_app (template_hole 2, template_var 1)),
             template_app (template_hole 2, template_var 0))
           ))),
    ("Sepref_Tool.prec_specI",
     "?h \<Turnstile> ?\<Gamma> \<and>\<^sub>A ?\<Gamma>' ==>
      prec_spec ?h ?\<Gamma> ?\<Gamma>'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 0, template_var 0),
               template_var 2),
             template_var 1)
           ))),
    ("Sepref_Rules.fcomp_prenorm_simps", "(?a, ?b) : ?r ==> ?a : Domain ?r",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app (template_hole 2, template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 1, template_var 2),
             template_app (template_hole 0, template_var 0))
           ))),
    ("Sepref_Intf_Util.IMP_PRED",
     "[| IMP_PRE ?P1.0 ?P2.0; ?P1.0 ?x |] ==> ?P2.0 ?x",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 0, template_var 2),
              template_var 1)
            ),
        template_predicate (template_app (template_var 2, template_var 0))],
       template_predicate (template_app (template_var 1, template_var 0)))),
    ("Sepref_Constraints.insert_slot_rl1",
     "[| [| PROP ?P; CONSTRAINT_SLOT (True) |] ==> PROP ?Q;
         CONSTRAINT_SLOT PROP ?P |]
      ==> PROP ?Q",
     template_implication
      ([template_implication
         ([template_predicate (template_var 1)],
          template_implication
           ([template_predicate
              (
                 template_app
                  (template_hole 2,
                   template_app (template_hole 1, template_hole 0))
                 )],
            template_predicate (template_var 0))),
        template_predicate
         (template_app (template_hole 2, template_var 1))],
       template_predicate (template_var 0))),
    ("Sepref_Basic.invalidate_clone",
     "?R ?x ?y \<Longrightarrow>\<^sub>A invalid_assn ?R ?x ?y * ?R ?x ?y",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_var 2, template_var 1),
               template_var 0)),
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app
                  (template_app (template_hole 0, template_var 2),
                   template_var 1),
                 template_var 0)),
             template_app
              (template_app (template_var 2, template_var 1),
               template_var 0)))
         )),
    ("Sepref_Rules.uncurry_APP", "uncurry ?f $ (?a, ?b) = ?f $ ?a $ ?b",
     template_equation
      (template_app
        (template_app
          (template_hole 4, template_app (template_hole 3, template_var 2)),
         template_app
          (template_app (template_hole 2, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1)),
         template_var 0))),
    ("Sepref_Foreach.nfoldli_to_monadic",
     "nfoldli ?l ?c ?f = monadic_nfoldli ?l (%x. RETURN (?c x)) ?f",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 2, template_var 2), template_var 1),
         template_var 0),
       template_app
        (template_app
          (template_app (template_hole 1, template_var 2), t_empty),
         template_var 0))),
    ("Sepref_HOL_Bindings.sum_assn_pure_conv",
     "pure ?A +\<^sub>a pure ?B = pure (\<langle>?A, ?B\<rangle>sum_rel)",
     template_equation
      (template_app
        (template_app
          (template_hole 6, template_app (template_hole 5, template_var 1)),
         template_app (template_hole 4, template_var 0)),
       template_app
        (template_hole 3,
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 1)),
           template_var 0)))),
    ("Sepref_Basic.prod_assn_pure_conv",
     "pure ?R1.0 \<times>\<^sub>a pure ?R2.0 =
      pure (?R1.0 \<times>\<^sub>r ?R2.0)",
     template_equation
      (template_app
        (template_app
          (template_hole 6, template_app (template_hole 5, template_var 1)),
         template_app (template_hole 4, template_var 0)),
       template_app
        (template_hole 3,
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 1)),
           template_var 0)))),
    ("Sepref_Rules.fcomp_norm_unfold",
     "pure (?R1.0 \<times>\<^sub>r ?R2.0) =
      pure ?R1.0 \<times>\<^sub>a pure ?R2.0",
     template_equation
      (template_app
        (template_hole 6,
         template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app (template_hole 4, template_hole 3),
               template_var 1)),
           template_var 0)),
       template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 0, template_var 0)))),
    ("Sepref_Basic.Range_of_constraint_conv",
     "Range (?A Int UNIV \<times> ?C) = Range ?A Int ?C",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_var 1),
           template_app
            (template_app (template_hole 2, template_hole 1), t_empty))),
       template_app
        (template_app
          (template_hole 0, template_app (template_hole 4, template_var 1)),
         template_var 0))),
    ("Sepref_HOL_Bindings.IS_LEFT_TOTAL_alt",
     "IS_LEFT_TOTAL ?R = (ALL x. EX y. (x, y) : ?R)",
     template_equation
      (template_app (template_hole 4, template_var 0),
       template_app (template_hole 3, t_empty))),
    ("Sepref_HOL_Bindings.IS_RIGHT_TOTAL_alt",
     "IS_RIGHT_TOTAL ?R = (ALL x. EX y. (y, x) : ?R)",
     template_equation
      (template_app (template_hole 4, template_var 0),
       template_app (template_hole 3, t_empty))),
    ("Sepref_HOL_Bindings.b_assn_rdom",
     "rdomp (b_assn ?R ?P) ?x = (rdomp ?R ?x & ?P ?x)",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 0)),
         template_app (template_var 1, template_var 0)))),
    ("Sepref_Misc.index_eqlen_conv",
     "(index ?l ?x = length ?l) = (?x ~: set ?l)",
     template_equation
      (template_app
        (template_app
          (template_hole 5,
           template_app
            (template_app (template_hole 4, template_var 1),
             template_var 0)),
         template_app (template_hole 3, template_var 1)),
       template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 0),
           template_app (template_hole 0, template_var 1))))),
    ("Sepref_Basic.hn_val_unfold",
     "hn_val ?R ?a ?b = \<up> ((?b, ?a) : ?R)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 4,
             template_app (template_hole 3, template_var 2)),
           template_var 1),
         template_var 0),
       template_app
        (template_hole 2,
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 0),
               template_var 1)),
           template_var 2)))),
    ("Sepref_Basic.invalid_pure_recover",
     "invalid_assn (pure ?R) ?x ?y = pure ?R ?x ?y * true",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 3,
             template_app (template_hole 2, template_var 2)),
           template_var 1),
         template_var 0),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app
              (template_app (template_hole 2, template_var 2),
               template_var 1),
             template_var 0)),
         template_hole 0))),
    ("Sepref_Translate.import_param_3",
     "\<up> ((?c, ?a) : ?R) = hn_val ?R ?a ?c",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_hole 2, template_var 2),
               template_var 1)),
           template_var 0)),
       template_app
        (template_app
          (template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 0)),
           template_var 1),
         template_var 2))),
    ("Sepref_Translate.invalid_assn_const",
     "invalid_assn (%_ _. ?P) ?x ?y = \<up> (vassn_tag ?P) * true",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 4, t_empty), template_var 1),
         template_var 0),
       template_app
        (template_app
          (template_hole 3,
           template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 2))),
         template_hole 0))),
    ("Sepref_Tool.if_return",
     "(if ?b then return ?t else return ?e) =
      return (if ?b then ?t else ?e)",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 2, template_var 2),
           template_app (template_hole 1, template_var 1)),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 1,
         template_app
          (template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1),
           template_var 0)))),
    ("Sepref_Tool.return_bind_eq_let", "return ?v >>= ?f = Let ?v ?f",
     template_equation
      (template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         t_empty),
       template_app
        (template_app (template_hole 0, template_var 1), t_empty))),
    ("Sepref_Id_Op.id_rules",
     "PR_CONST
       (String.Literal ?b0.0 ?b1.0 ?b2.0 ?b3.0 ?b4.0 ?b5.0 ?b6.0
         ?s) ::\<^sub>i
      TYPE(String.literal)",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app (template_hole 1, template_var 7),
                             template_var 6),
                           template_var 5),
                         template_var 4),
                       template_var 3),
                     template_var 2),
                   template_var 1),
                 template_var 0))),
           template_hole 0)
         )),
    ("Sepref_Id_Op.annot_rule",
     "ID ?t ?t' ?I ==> ID (?t :::\<^sub>i ?I) ?t' ?I",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 1, template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_var 2),
                   template_var 0)),
               template_var 1),
             template_var 0)
           ))),
    ("Sepref_Frame.merge_sat1",
     "?A \<or>\<^sub>A ?A' \<Longrightarrow>\<^sub>t ?Am ==>
      ?A \<or>\<^sub>A ?Am \<Longrightarrow>\<^sub>t ?Am",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 1,
                template_app
                 (template_app (template_hole 0, template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 0)),
             template_var 0)
           ))),
    ("Sepref_Frame.merge_sat2",
     "?A \<or>\<^sub>A ?A' \<Longrightarrow>\<^sub>t ?Am ==>
      ?Am \<or>\<^sub>A ?A' \<Longrightarrow>\<^sub>t ?Am",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 1,
                template_app
                 (template_app (template_hole 0, template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 0),
                 template_var 1)),
             template_var 0)
           ))),
    ("Sepref_Frame.is_merge",
     "?P1.0 \<or>\<^sub>A ?P2.0 \<Longrightarrow>\<^sub>t ?P ==>
      ?P1.0 \<or>\<^sub>A ?P2.0 \<Longrightarrow>\<^sub>t ?P",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 1,
                template_app
                 (template_app (template_hole 0, template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 1)),
             template_var 0)
           ))),
    ("Sepref_Id_Op.unprotect_rl1",
     "ID (PR_CONST ?x) ?t ?T ==> ID (UNPROTECT ?x) ?t ?T",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_hole 2,
                  template_app (template_hole 1, template_var 2)),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 2,
                 template_app (template_hole 0, template_var 2)),
               template_var 1),
             template_var 0)
           ))),
    ("Sepref_Id_Op.ID_PR_CONST_trigger",
     "ID (PR_CONST ?x) ?y ?T ==> ID (PR_CONST ?x) ?y ?T",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_hole 1,
                  template_app (template_hole 0, template_var 2)),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 1,
                 template_app (template_hole 0, template_var 2)),
               template_var 1),
             template_var 0)
           ))),
    ("Sepref_Translate.vassn_dest",
     "vassn_tag (hn_ctxt ?R ?a ?b) ==> ?a : rdom ?R",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 4,
              template_app
               (template_app
                 (template_app (template_hole 3, template_var 2),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 2, template_var 1),
             template_app
              (template_hole 1,
               template_app (template_hole 0, template_var 2)))
           ))),
    ("Sepref_HOL_Bindings.list_assn_aux_eqlen_simp",
     "vassn_tag (list_assn ?P ?l ?l') ==> length ?l' = length ?l",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 4,
              template_app
               (template_app
                 (template_app (template_hole 3, template_var 2),
                  template_var 1),
                template_var 0))
            )],
       template_equation
        (template_app (template_hole 1, template_var 0),
         template_app (template_hole 0, template_var 1)))),
    ("Sepref_Translate.entails_preI",
     "(vassn_tag ?A ==> ?A \<Longrightarrow>\<^sub>A ?B) ==>
      ?A \<Longrightarrow>\<^sub>A ?B",
     template_implication
      ([template_implication
         ([template_predicate
            (template_app (template_hole 1, template_var 1))],
          template_predicate
           (
              template_app
               (template_app (template_hole 0, template_var 1),
                template_var 0)
              ))],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 1), template_var 0)
           ))),
    ("Sepref_HOL_Bindings.prod_assn_precise",
     "[| precise ?P1.0; precise ?P2.0 |]
      ==> precise (?P1.0 \<times>\<^sub>a ?P2.0)",
     template_implication
      ([template_predicate (template_app (template_hole 3, template_var 1)),
        template_predicate
         (template_app (template_hole 2, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.hr_comp_precise",
     "[| precise ?R; single_valued ?S |] ==> precise (hr_comp ?R ?S)",
     template_implication
      ([template_predicate (template_app (template_hole 3, template_var 1)),
        template_predicate
         (template_app (template_hole 2, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))
           ))),
    ("Sepref_HOL_Bindings.sum_assn_pure",
     "[| is_pure ?A; is_pure ?B |] ==> is_pure (?A +\<^sub>a ?B)",
     template_implication
      ([template_predicate (template_app (template_hole 3, template_var 1)),
        template_predicate
         (template_app (template_hole 2, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))
           ))),
    ("Sepref_HOL_Bindings.pure_prod",
     "[| is_pure ?P1.0; is_pure ?P2.0 |]
      ==> is_pure (?P1.0 \<times>\<^sub>a ?P2.0)",
     template_implication
      ([template_predicate (template_app (template_hole 3, template_var 1)),
        template_predicate
         (template_app (template_hole 2, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))
           ))),
    ("Sepref_HOL_Bindings.entt_invalid_list",
     "hn_invalid (list_assn ?A) ?l ?l' \<Longrightarrow>\<^sub>t
      hn_ctxt (list_assn (invalid_assn ?A)) ?l ?l'",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app
                (template_app
                  (template_hole 3,
                   template_app
                    (template_hole 2,
                     template_app (template_hole 1, template_var 2))),
                 template_var 1),
               template_var 0)),
           template_app
            (template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_hole 1,
                   template_app (template_hole 0, template_var 2))),
               template_var 1),
             template_var 0))
         )),
    ("Sepref_Translate.import_rel2_pure_conv",
     "import_rel2 ?R (pure ?A) (pure ?B) =
      pure (\<langle>?A, ?B\<rangle>?R)",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 5, template_var 2),
           template_app (template_hole 4, template_var 1)),
         template_app (template_hole 3, template_var 0)),
       template_app
        (template_hole 2,
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 1)),
           template_var 0)))),
    ("Sepref_Rules.fcomp_norm_unfold",
     "\<langle>?A\<rangle>nres_rel O \<langle>?B\<rangle>nres_rel =
      \<langle>?A O ?B\<rangle>nres_rel",
     template_equation
      (template_app
        (template_app
          (template_hole 7,
           template_app
            (template_app (template_hole 6, template_hole 5),
             template_var 1)),
         template_app
          (template_app (template_hole 4, template_hole 3),
           template_var 0)),
       template_app
        (template_app (template_hole 2, template_hole 1),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_Basic.pure_rel_eq_false_iff",
     "(pure ?R ?x ?y = false) = ((?y, ?x) ~: ?R)",
     template_equation
      (template_app
        (template_app
          (template_hole 5,
           template_app
            (template_app
              (template_app (template_hole 4, template_var 2),
               template_var 1),
             template_var 0)),
         template_hole 3),
       template_app
        (template_hole 2,
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 0),
               template_var 1)),
           template_var 2)))),
    ("Sepref_HOL_Bindings.b_assn_simp",
     "b_assn ?A ?P ?x ?y = ?A ?x ?y * \<up> (?P ?x)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app (template_hole 2, template_var 3),
             template_var 2),
           template_var 1),
         template_var 0),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_var 3, template_var 1),
             template_var 0)),
         template_app
          (template_hole 0,
           template_app (template_var 2, template_var 1))))),
    ("Sepref_Tool.case_prod_return_opt",
     "(case ?p of (a, b) => return (?f a b)) =
      return (case ?p of (x, xa) => ?f x xa)",
     template_equation
      (template_app
        (template_app (template_hole 2, t_empty), template_var 0),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_Tool.sepref_opt_simps",
     "?f >>= ?g >>= ?k = ?f >>= (%x. ?g x >>= ?k)",
     template_equation
      (template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 0, template_var 2), t_empty))),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine emp (return (numeral ?n6)) emp int_assn
       (RETURN $ PR_CONST (numeral ?n6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app (template_hole 8, template_hole 7),
                 template_app
                  (template_hole 6,
                   template_app (template_hole 5, template_var 0))),
               template_hole 7),
             template_app (template_hole 4, template_hole 3)),
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_app
              (template_hole 0,
               template_app (template_hole 5, template_var 0))))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine emp (return (numeral ?n6)) emp nat_assn
       (RETURN $ PR_CONST (numeral ?n6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app (template_hole 8, template_hole 7),
                 template_app
                  (template_hole 6,
                   template_app (template_hole 5, template_var 0))),
               template_hole 7),
             template_app (template_hole 4, template_hole 3)),
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_app
              (template_hole 0,
               template_app (template_hole 5, template_var 0))))
         )),
    ("Sepref_Frame.weaken_hnr_post",
     "WEAKEN_HNR_POST (hn_ctxt ?R ?x ?y) (hn_ctxt ?R ?x ?y)
       (hn_ctxt ?R ?x ?y)",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app
                  (template_app (template_hole 0, template_var 2),
                   template_var 1),
                 template_var 0)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 1),
               template_var 0)),
           template_app
            (template_app
              (template_app (template_hole 0, template_var 2),
               template_var 1),
             template_var 0))
         )),
    ("Sepref_Misc.param_uncurry0",
     "(uncurry0, uncurry0) : ?A \<rightarrow> unit_rel \<rightarrow> ?A",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 10,
             template_app
              (template_app (template_hole 9, template_hole 8),
               template_hole 7)),
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app (template_hole 5, template_hole 4),
                 template_var 0)),
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app (template_hole 2, template_hole 1),
                   template_hole 0)),
               template_var 0)))
         )),
    ("Sepref_Misc.index_of_last_distinct",
     "distinct ?l ==> index ?l (last ?l) = length ?l - 1",
     template_implication
      ([template_predicate
         (template_app (template_hole 6, template_var 0))],
       template_equation
        (template_app
          (template_app (template_hole 4, template_var 0),
           template_app (template_hole 3, template_var 0)),
         template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 0)),
           template_hole 0)))),
    ("Sepref_Basic.is_pure_the_pure_id_eq",
     "is_pure ?R ==> (the_pure ?R = Id) = (?R = id_assn)",
     template_implication
      ([template_predicate
         (template_app (template_hole 6, template_var 0))],
       template_bimplication
        (template_equation
          (template_app (template_hole 3, template_var 0), template_hole 2),
         template_equation
          (template_var 0,
           template_app (template_hole 0, template_hole 2))))),
    ("Sepref_Rules.hr_comp_the_pure",
     "is_pure ?A ==> the_pure (hr_comp ?A ?B) = the_pure ?A O ?B",
     template_implication
      ([template_predicate
         (template_app (template_hole 5, template_var 1))],
       template_equation
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 1),
             template_var 0)),
         template_app
          (template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 1)),
           template_var 0)))),
    ("Sepref_Frame.frame_rem3",
     "?F \<Longrightarrow>\<^sub>t ?F' ==>
      ?F * hn_ctxt ?A ?x ?y \<Longrightarrow>\<^sub>t ?F'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 2, template_var 4),
              template_var 3)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 4),
                 template_app
                  (template_app
                    (template_app (template_hole 0, template_var 2),
                     template_var 1),
                   template_var 0))),
             template_var 3)
           ))),
    ("Sepref_Rules.fref_triv",
     "?A <= Id ==> (?f, ?f) : [?P]\<^sub>f ?A \<rightarrow> Id",
     template_implication
      ([template_inequation (less_equals, template_var 2, template_hole 4)],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app (template_hole 2, template_var 1),
                 template_var 1)),
             template_app
              (template_app
                (template_app (template_hole 1, template_var 0),
                 template_var 2),
               template_hole 0))
           ))),
    ("Sepref_HOL_Bindings.hn_ctxt_eq",
     "?A ?x ?y = ?z ==> hn_ctxt ?A ?x ?y = ?z",
     template_implication
      ([template_equation
         (template_app
           (template_app (template_var 3, template_var 2), template_var 1),
          template_var 0)],
       template_equation
        (template_app
          (template_app
            (template_app (template_hole 0, template_var 3),
             template_var 2),
           template_var 1),
         template_var 0))),
    ("Sepref_Translate.add_PR_CONST",
     "(?c, ?a) : ?R ==> (?c, PR_CONST ?a) : ?R",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_app (template_hole 0, template_var 1))),
             template_var 0)
           ))),
    ("Sepref_HOL_Bindings.list_assn_aux_eqlen_simp",
     "?h \<Turnstile> list_assn ?P ?l ?l' ==> length ?l' = length ?l",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app
                 (template_app
                   (template_app (template_hole 3, template_var 3),
                    template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_equation
        (template_app (template_hole 1, template_var 1),
         template_app (template_hole 0, template_var 2)))),
    ("Sepref_Intf_Util.IMP_PRE_CUSTOMI",
     "(!!x. ?P1.0 x ==> ?P2.0 x) ==> IMP_PRE_CUSTOM ?P1.0 ?P2.0",
     template_implication
      ([template_predicate (template_app (template_hole 2, t_empty))],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 1), template_var 0)
           ))),
    ("Sepref_Rules.hfsynth_ID_R_D",
     "[| hfsynth_ID_R ?R ?a; intf_of_assn ?R ?I |] ==> ?a ::\<^sub>i ?I",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 2, template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 2),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 1), template_var 0)
           ))),
    ("Sepref_Rules.hrp_imp_trans",
     "[| hrp_imp ?A ?B; hrp_imp ?B ?C |] ==> hrp_imp ?A ?C",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 0, template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 0, template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 2), template_var 0)
           ))),
    ("Sepref_Basic.invalidate_clone'",
     "?R ?x ?y \<Longrightarrow>\<^sub>A
      invalid_assn ?R ?x ?y * ?R ?x ?y * true",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app (template_var 2, template_var 1),
               template_var 0)),
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app
                      (template_app (template_hole 1, template_var 2),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app (template_var 2, template_var 1),
                   template_var 0))),
             template_hole 0))
         )),
    ("Sepref_HOL_Bindings.b_assn_nesting",
     "b_assn (b_assn ?A ?P1.0) ?P2.0 = b_assn ?A (%x. ?P1.0 x & ?P2.0 x)",
     template_equation
      (template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 1, template_var 2), t_empty))),
    ("Sepref_HOL_Bindings.b_rel_nesting",
     "b_rel (b_rel ?R ?P1.0) ?P2.0 = b_rel ?R (%x. ?P1.0 x & ?P2.0 x)",
     template_equation
      (template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 1, template_var 2), t_empty))),
    ("Sepref_HOL_Bindings.inv_fun_rel_eq",
     "(?A \<rightarrow> ?B)^-1 = ?A^-1 \<rightarrow> ?B^-1",
     template_equation
      (template_app
        (template_hole 8,
         template_app
          (template_app
            (template_hole 7,
             template_app
              (template_app (template_hole 6, template_hole 5),
               template_var 1)),
           template_var 0)),
       template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app (template_hole 1, template_var 1))),
         template_app (template_hole 0, template_var 0)))),
    ("Sepref_HOL_Bindings.inv_sum_rel_eq",
     "(\<langle>?P, ?Q\<rangle>sum_rel)^-1 = \<langle>?P^-1,
      ?Q^-1\<rangle>sum_rel",
     template_equation
      (template_app
        (template_hole 8,
         template_app
          (template_app
            (template_hole 7,
             template_app
              (template_app (template_hole 6, template_hole 5),
               template_var 1)),
           template_var 0)),
       template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app (template_hole 1, template_var 1))),
         template_app (template_hole 0, template_var 0)))),
    ("Sepref_HOL_Bindings.inv_prod_rel_eq",
     "(?P \<times>\<^sub>r ?Q)^-1 = ?P^-1 \<times>\<^sub>r ?Q^-1",
     template_equation
      (template_app
        (template_hole 8,
         template_app
          (template_app
            (template_hole 7,
             template_app
              (template_app (template_hole 6, template_hole 5),
               template_var 1)),
           template_var 0)),
       template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app (template_hole 1, template_var 1))),
         template_app (template_hole 0, template_var 0)))),
    ("Sepref_Rules.in_CURRY_conv",
     "((?f, ?g) : CURRY ?R) = ((uncurry ?f, uncurry ?g) : ?R)",
     template_equation
      (template_app
        (template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, template_var 2),
             template_var 1)),
         template_app (template_hole 4, template_var 0)),
       template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app
              (template_hole 2,
               template_app (template_hole 1, template_var 2)),
             template_app (template_hole 0, template_var 1))),
         template_var 0))),
    ("Sepref_Tool.case_option_return_opt",
     "(case ?v of None => return ?fn | Some s => return (?fs s)) =
      return (case ?v of None => ?fn | Some x => ?fs x)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 2)),
           t_empty),
         template_var 0),
       template_app
        (template_hole 1,
         template_app
          (template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1),
           template_var 0)))),
    ("Sepref_Translate.WHILEIT_to_monadic",
     "WHILE\<^sub>T\<^bsup>?I\<^esup> ?b ?f ?s =
      monadic_WHILEIT ?I (%s. RETURN (?b s)) ?f ?s",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app (template_hole 2, template_var 3),
             template_var 2),
           template_var 1),
         template_var 0),
       template_app
        (template_app
          (template_app
            (template_app (template_hole 1, template_var 3), t_empty),
           template_var 1),
         template_var 0))),
    ("Sepref_Monadify.monadify_simps",
     "(>>=) $ (RETURN $ ?x) $ (%x. (#?f x#)) = ?f ?x",
     template_equation
      (template_app
        (template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, template_hole 4),
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_var 1))),
         t_empty),
       template_app (template_var 0, template_var 1))),
    ("Sepref_Rules.hfref_imp",
     "hrp_imp ?RR ?RR' ==>
      [?P]\<^sub>a ?RR \<rightarrow> ?S
      <= [?P]\<^sub>a ?RR' \<rightarrow> ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 2, template_var 3),
              template_var 2)
            )],
       template_inequation
        (less_equals,
         template_app
          (template_app
            (template_app (template_hole 0, template_var 1),
             template_var 3),
           template_var 0),
         template_app
          (template_app
            (template_app (template_hole 0, template_var 1),
             template_var 2),
           template_var 0)))),
    ("Sepref_HOL_Bindings.list_assn_aux_ineq_len",
     "length ?l ~= length ?li ==> list_assn ?A ?l ?li = false",
     template_implication
      ([template_negation
         (
            template_equation
             (template_app (template_hole 4, template_var 2),
              template_app (template_hole 3, template_var 1))
            )],
       template_equation
        (template_app
          (template_app
            (template_app (template_hole 1, template_var 0),
             template_var 2),
           template_var 1),
         template_hole 0))),
    ("Sepref_Constraints.safe_constraint_rules",
     "[| single_valued ?A; IS_RIGHT_TOTAL ?B |]
      ==> IS_RIGHT_TOTAL (?A \<rightarrow> ?B)",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 1)),
        template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "[| single_valued ?R1.0; single_valued ?R2.0 |]
      ==> single_valued (?R1.0 \<times>\<^sub>r ?R2.0)",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 1)),
        template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "[| single_valued ?Rl; single_valued ?Rr |]
      ==> single_valued (\<langle>?Rl, ?Rr\<rangle>sum_rel)",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 1)),
        template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "[| IS_BELOW_ID ?R1.0; IS_BELOW_ID ?R2.0 |]
      ==> IS_BELOW_ID (\<langle>?R1.0, ?R2.0\<rangle>sum_rel)",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 1)),
        template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "[| IS_BELOW_ID ?R1.0; IS_BELOW_ID ?R2.0 |]
      ==> IS_BELOW_ID (?R1.0 \<times>\<^sub>r ?R2.0)",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 1)),
        template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_HOL_Bindings.IS_BELOW_ID_fun_rel",
     "[| IS_ID ?R1.0; IS_BELOW_ID ?R2.0 |]
      ==> IS_BELOW_ID (?R1.0 \<rightarrow> ?R2.0)",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 1)),
        template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "[| IS_ID ?R1.0; IS_ID ?R2.0 |] ==> IS_ID (?R1.0 \<rightarrow> ?R2.0)",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 1)),
        template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "[| IS_ID ?R1.0; IS_ID ?R2.0 |]
      ==> IS_ID (\<langle>?R1.0, ?R2.0\<rangle>sum_rel)",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 1)),
        template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "[| IS_ID ?R1.0; IS_ID ?R2.0 |]
      ==> IS_ID (?R1.0 \<times>\<^sub>r ?R2.0)",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 1)),
        template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "[| IS_LEFT_TOTAL ?A; IS_LEFT_UNIQUE ?B |]
      ==> IS_LEFT_UNIQUE (?A \<rightarrow> ?B)",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 1)),
        template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "[| IS_LEFT_TOTAL ?R1.0; IS_LEFT_TOTAL ?R2.0 |]
      ==> IS_LEFT_TOTAL (\<langle>?R1.0, ?R2.0\<rangle>sum_rel)",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 1)),
        template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "[| IS_LEFT_TOTAL ?R1.0; IS_LEFT_TOTAL ?R2.0 |]
      ==> IS_LEFT_TOTAL (?R1.0 \<times>\<^sub>r ?R2.0)",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 1)),
        template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "[| IS_LEFT_UNIQUE ?A; IS_LEFT_TOTAL ?B |]
      ==> IS_LEFT_TOTAL (?A \<rightarrow> ?B)",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 1)),
        template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "[| IS_LEFT_UNIQUE ?R1.0; IS_LEFT_UNIQUE ?R2.0 |]
      ==> IS_LEFT_UNIQUE (\<langle>?R1.0, ?R2.0\<rangle>sum_rel)",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 1)),
        template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "[| IS_LEFT_UNIQUE ?R1.0; IS_LEFT_UNIQUE ?R2.0 |]
      ==> IS_LEFT_UNIQUE (?R1.0 \<times>\<^sub>r ?R2.0)",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 1)),
        template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "[| IS_RIGHT_TOTAL ?A; single_valued ?B |]
      ==> single_valued (?A \<rightarrow> ?B)",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 1)),
        template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "[| IS_RIGHT_TOTAL ?R1.0; IS_RIGHT_TOTAL ?R2.0 |]
      ==> IS_RIGHT_TOTAL (\<langle>?R1.0, ?R2.0\<rangle>sum_rel)",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 1)),
        template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_Constraints.safe_constraint_rules",
     "[| IS_RIGHT_TOTAL ?R1.0; IS_RIGHT_TOTAL ?R2.0 |]
      ==> IS_RIGHT_TOTAL (?R1.0 \<times>\<^sub>r ?R2.0)",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 1)),
        template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_Tool.ho_prod_move",
     "(%(a, b) x. ?f x a b) = (%p x. case p of (xa, xb) => ?f x xa xb)",
     template_equation (template_app (template_hole 1, t_empty), t_empty)),
    ("Sepref_Rules.ensure_fref_nres_unfold",
     "(RETURN \<circ>\<circ>\<circ> uncurry) ?f =
      uncurry (RETURN \<circ>\<circ>\<circ> ?f)",
     template_equation (t_empty, template_app (template_hole 0, t_empty))),
    ("Sepref_Rules.PRE_D1",
     "?Q ?x & ?P ?x --> comp_PRE ?S1.0 ?Q (%x _. ?P x) ?S ?x",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_hole 1,
                 template_app (template_var 4, template_var 3)),
               template_app (template_var 2, template_var 3))),
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 1),
                   template_var 4),
                 t_empty),
               template_var 0),
             template_var 3))
         )),
    ("Sepref_Basic.hnr_RETURN_pass",
     "hn_refine (hn_ctxt ?R ?x ?p) (return ?p) (hn_invalid ?R ?x ?p) ?R
       (RETURN ?x)",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 4,
                   template_app
                    (template_app
                      (template_app (template_hole 3, template_var 2),
                       template_var 1),
                     template_var 0)),
                 template_app (template_hole 2, template_var 0)),
               template_app
                (template_app
                  (template_app
                    (template_hole 3,
                     template_app (template_hole 1, template_var 2)),
                   template_var 1),
                 template_var 0)),
             template_var 2),
           template_app (template_hole 0, template_var 1))
         )),
    ("Sepref_Frame.recover_pure_aux",
     "CONSTRAINT is_pure ?R ==>
      hn_invalid ?R ?x ?y \<Longrightarrow>\<^sub>t hn_ctxt ?R ?x ?y",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 4, template_hole 3),
              template_var 2)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_app
                    (template_hole 1,
                     template_app (template_hole 0, template_var 2)),
                   template_var 1),
                 template_var 0)),
             template_app
              (template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 1),
               template_var 0))
           ))),
    ("Sepref_Frame.recover_pure",
     "CONSTRAINT is_pure ?R ==>
      RECOVER_PURE (hn_invalid ?R ?x ?y) (hn_ctxt ?R ?x ?y)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 4, template_hole 3),
              template_var 2)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_app
                    (template_hole 1,
                     template_app (template_hole 0, template_var 2)),
                   template_var 1),
                 template_var 0)),
             template_app
              (template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 1),
               template_var 0))
           ))),
    ("Sepref_Basic.hn_invalidI",
     "?h \<Turnstile> hn_ctxt ?P ?x ?y ==> hn_invalid ?P ?x ?y = true",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app
                 (template_app
                   (template_app (template_hole 3, template_var 3),
                    template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_equation
        (template_app
          (template_app
            (template_app
              (template_hole 3,
               template_app (template_hole 1, template_var 3)),
             template_var 2),
           template_var 1),
         template_hole 0))),
    ("Sepref_HOL_Bindings.hn_ctxt_list",
     "list_assn ?A ?x ?y = ?z ==> hn_ctxt (list_assn ?A) ?x ?y = ?z",
     template_implication
      ([template_equation
         (template_app
           (template_app
             (template_app (template_hole 1, template_var 3),
              template_var 2),
            template_var 1),
          template_var 0)],
       template_equation
        (template_app
          (template_app
            (template_app
              (template_hole 0,
               template_app (template_hole 1, template_var 3)),
             template_var 2),
           template_var 1),
         template_var 0))),
    ("Sepref_HOL_Bindings.hn_ctxt_option",
     "option_assn ?A ?x ?y = ?z ==> hn_ctxt (option_assn ?A) ?x ?y = ?z",
     template_implication
      ([template_equation
         (template_app
           (template_app
             (template_app (template_hole 1, template_var 3),
              template_var 2),
            template_var 1),
          template_var 0)],
       template_equation
        (template_app
          (template_app
            (template_app
              (template_hole 0,
               template_app (template_hole 1, template_var 3)),
             template_var 2),
           template_var 1),
         template_var 0))),
    ("Sepref_Intf_Util.and_pre_beta",
     "?PP --> ?P ?x & ?Q ?x ==> ?PP --> and_pre ?P ?Q ?x",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 2, template_var 3),
              template_app
               (template_app
                 (template_hole 1,
                  template_app (template_var 2, template_var 1)),
                template_app (template_var 0, template_var 1)))
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 2, template_var 3),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 0),
               template_var 1))
           ))),
    ("Sepref_Intf_Util.imp_pre_beta",
     "?PP --> ?P ?x --> ?Q ?x ==> ?PP --> imp_pre ?P ?Q ?x",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 3),
              template_app
               (template_app
                 (template_hole 1,
                  template_app (template_var 2, template_var 1)),
                template_app (template_var 0, template_var 1)))
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 1, template_var 3),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 0),
               template_var 1))
           ))),
    ("Sepref_HOL_Bindings.IS_BELOW_ID_fun_rel_aux",
     "[| Id <= ?R1.0; IS_BELOW_ID ?R2.0 |]
      ==> IS_BELOW_ID (?R1.0 \<rightarrow> ?R2.0)",
     template_implication
      ([template_inequation (less_equals, template_hole 5, template_var 1),
        template_predicate
         (template_app (template_hole 4, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_HOL_Bindings.intf_of_prod_assn",
     "[| intf_of_assn ?A TYPE(?'a); intf_of_assn ?B TYPE(?'b) |]
      ==> intf_of_assn (?A \<times>\<^sub>a ?B) TYPE(?'a * ?'b)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 6, template_var 1),
              template_hole 5)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 4, template_var 0),
              template_hole 3)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 1),
                 template_var 0)),
             template_hole 0)
           ))),
    ("Sepref_HOL_Bindings.entt_invalid_sum",
     "hn_invalid (?A +\<^sub>a ?B) ?e ?e' \<Longrightarrow>\<^sub>t
      hn_ctxt (invalid_assn ?A +\<^sub>a invalid_assn ?B) ?e ?e'",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app
                (template_app
                  (template_hole 4,
                   template_app
                    (template_hole 3,
                     template_app
                      (template_app (template_hole 2, template_var 3),
                       template_var 2))),
                 template_var 1),
               template_var 0)),
           template_app
            (template_app
              (template_app
                (template_hole 4,
                 template_app
                  (template_app
                    (template_hole 2,
                     template_app (template_hole 1, template_var 3)),
                   template_app (template_hole 0, template_var 2))),
               template_var 1),
             template_var 0))
         )),
    ("Sepref_HOL_Bindings.entt_invalid_prod",
     "hn_invalid (?A \<times>\<^sub>a ?B) ?p ?p' \<Longrightarrow>\<^sub>t
      hn_ctxt (invalid_assn ?A \<times>\<^sub>a invalid_assn ?B) ?p ?p'",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app
                (template_app
                  (template_hole 4,
                   template_app
                    (template_hole 3,
                     template_app
                      (template_app (template_hole 2, template_var 3),
                       template_var 2))),
                 template_var 1),
               template_var 0)),
           template_app
            (template_app
              (template_app
                (template_hole 4,
                 template_app
                  (template_app
                    (template_hole 2,
                     template_app (template_hole 1, template_var 3)),
                   template_app (template_hole 0, template_var 2))),
               template_var 1),
             template_var 0))
         )),
    ("Sepref_Frame.hn_merge_mismatch",
     "hn_ctxt ?R1.0 ?x ?x' \<or>\<^sub>A
      hn_ctxt ?R2.0 ?x ?x' \<Longrightarrow>\<^sub>t
      hn_mismatch ?R1.0 ?R2.0 ?x ?x'",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app
                    (template_app (template_hole 1, template_var 3),
                     template_var 2),
                   template_var 1)),
               template_app
                (template_app
                  (template_app (template_hole 1, template_var 0),
                   template_var 2),
                 template_var 1))),
           template_app
            (template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_var 3),
                   template_var 0)),
               template_var 2),
             template_var 1))
         )),
    ("Sepref_Frame.hn_merge2",
     "hn_ctxt ?R ?x ?x' \<or>\<^sub>A
      hn_invalid ?R ?x ?x' \<Longrightarrow>\<^sub>t
      hn_invalid ?R ?x ?x'",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app
                    (template_app (template_hole 1, template_var 2),
                     template_var 1),
                   template_var 0)),
               template_app
                (template_app
                  (template_app
                    (template_hole 1,
                     template_app (template_hole 0, template_var 2)),
                   template_var 1),
                 template_var 0))),
           template_app
            (template_app
              (template_app
                (template_hole 1,
                 template_app (template_hole 0, template_var 2)),
               template_var 1),
             template_var 0))
         )),
    ("Sepref_Frame.hn_merge2",
     "hn_invalid ?R ?x ?x' \<or>\<^sub>A
      hn_ctxt ?R ?x ?x' \<Longrightarrow>\<^sub>t
      hn_invalid ?R ?x ?x'",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app
                    (template_app
                      (template_hole 1,
                       template_app (template_hole 0, template_var 2)),
                     template_var 1),
                   template_var 0)),
               template_app
                (template_app
                  (template_app (template_hole 1, template_var 2),
                   template_var 1),
                 template_var 0))),
           template_app
            (template_app
              (template_app
                (template_hole 1,
                 template_app (template_hole 0, template_var 2)),
               template_var 1),
             template_var 0))
         )),
    ("Sepref_HOL_Bindings.b_rel_subtyping_merge_eqA_tL",
     "hn_ctxt ?A ?x ?y \<or>\<^sub>A
      hn_ctxt (b_assn ?A ?P') ?x ?y \<Longrightarrow>\<^sub>t
      hn_ctxt ?A ?x ?y",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app
                    (template_app (template_hole 1, template_var 3),
                     template_var 2),
                   template_var 1)),
               template_app
                (template_app
                  (template_app
                    (template_hole 1,
                     template_app
                      (template_app (template_hole 0, template_var 3),
                       template_var 0)),
                   template_var 2),
                 template_var 1))),
           template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 1))
         )),
    ("Sepref_HOL_Bindings.b_rel_subtyping_merge_eqA_tR",
     "hn_ctxt (b_assn ?A ?P) ?x ?y \<or>\<^sub>A
      hn_ctxt ?A ?x ?y \<Longrightarrow>\<^sub>t
      hn_ctxt ?A ?x ?y",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app
                    (template_app
                      (template_hole 1,
                       template_app
                        (template_app (template_hole 0, template_var 3),
                         template_var 2)),
                     template_var 1),
                   template_var 0)),
               template_app
                (template_app
                  (template_app (template_hole 1, template_var 3),
                   template_var 1),
                 template_var 0))),
           template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 1),
             template_var 0))
         )),
    ("Sepref_Foreach.fold_idx_conv",
     "fold ?f ?l ?s = fold (%i. ?f (?l ! i)) [0..<length ?l] ?s",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 5, template_var 2), template_var 1),
         template_var 0),
       template_app
        (template_app
          (template_app (template_hole 4, t_empty),
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_app (template_hole 0, template_var 1))),
         template_var 0))),
    ("Sepref_HOL_Bindings.b_rel_simp",
     "((?x, ?y) : b_rel ?R ?P) = ((?x, ?y) : ?R & ?P ?y)",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 3),
             template_var 2)),
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app (template_hole 2, template_var 3),
                 template_var 2)),
             template_var 1)),
         template_app (template_var 0, template_var 2)))),
    ("Sepref_HOL_Bindings.list_assn_aux_len",
     "list_assn ?P ?l ?l' =
      list_assn ?P ?l ?l' * \<up> (length ?l = length ?l')",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 5, template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app
                  (template_app (template_hole 5, template_var 2),
                   template_var 1),
                 template_var 0)),
             template_app
              (template_hole 3,
               template_app
                (template_app
                  (template_hole 2,
                   template_app (template_hole 1, template_var 1)),
                 template_app (template_hole 0, template_var 0))))
           ))),
    ("Sepref_Rules.hr_comp_emp",
     "hr_comp (%a c. emp) ?R ?a ?c = \<up> (EX b. (b, ?a) : ?R)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app (template_hole 5, t_empty), template_var 2),
           template_var 1),
         template_var 0),
       template_app
        (template_hole 3, template_app (template_hole 2, t_empty)))),
    ("Sepref_Tool.case_list_return",
     "(case ?l of [] => return ?fn | x # xs => return (?fc x xs)) =
      return (case ?l of [] => ?fn | x # xa => ?fc x xa)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 1, template_var 2)),
           t_empty),
         template_var 0),
       template_app
        (template_hole 1,
         template_app
          (template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1),
           template_var 0)))),
    ("Sepref_Translate.hn_pass",
     "hn_refine (hn_ctxt ?P ?x ?x') (return ?x') (hn_invalid ?P ?x ?x') ?P
       (PASS $ ?x)",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 5,
                   template_app
                    (template_app
                      (template_app (template_hole 4, template_var 2),
                       template_var 1),
                     template_var 0)),
                 template_app (template_hole 3, template_var 0)),
               template_app
                (template_app
                  (template_app
                    (template_hole 4,
                     template_app (template_hole 2, template_var 2)),
                   template_var 1),
                 template_var 0)),
             template_var 2),
           template_app
            (template_app (template_hole 1, template_hole 0),
             template_var 1))
         )),
    ("Sepref_Frame.weaken_hnr_post",
     "WEAKEN_HNR_POST (hn_ctxt ?R ?x ?y) (hn_invalid ?R ?x ?y)
       (hn_ctxt (%_ _. true) ?x ?y)",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app
                  (template_app (template_hole 2, template_var 2),
                   template_var 1),
                 template_var 0)),
             template_app
              (template_app
                (template_app
                  (template_hole 2,
                   template_app (template_hole 1, template_var 2)),
                 template_var 1),
               template_var 0)),
           template_app
            (template_app
              (template_app (template_hole 2, t_empty), template_var 1),
             template_var 0))
         )),
    ("Sepref_HOL_Bindings.projl_hnr",
     "(return o projl, RETURN o projl)
      : [isl]\<^sub>a (?A +\<^sub>a ?B)\<^sup>d \<rightarrow> ?A",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 12,
             template_app
              (template_app
                (template_hole 11,
                 template_app
                  (template_app (template_hole 10, template_hole 9),
                   template_hole 8)),
               template_app
                (template_app (template_hole 7, template_hole 6),
                 template_hole 5))),
           template_app
            (template_app
              (template_app (template_hole 4, template_hole 3),
               template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app (template_hole 1, template_var 1),
                     template_var 0)),
                 template_hole 0)),
             template_var 1))
         )),
    ("Sepref_Rules.hr_compI",
     "(?b, ?a) : ?R2.0 ==>
      ?R1.0 ?b ?c \<Longrightarrow>\<^sub>A hr_comp ?R1.0 ?R2.0 ?a ?c",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app (template_hole 2, template_var 4),
                  template_var 3)),
              template_var 2)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_var 1, template_var 4),
                 template_var 0)),
             template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 1),
                   template_var 2),
                 template_var 3),
               template_var 0))
           ))),
    ("Sepref_Basic.hnr_RETURN_pure",
     "(?c, ?a) : ?R ==>
      hn_refine emp (return ?c) emp (pure ?R) (RETURN ?a)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_app (template_hole 5, template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 4, template_hole 3),
                   template_app (template_hole 2, template_var 2)),
                 template_hole 3),
               template_app (template_hole 1, template_var 0)),
             template_app (template_hole 0, template_var 1))
           ))),
    ("Sepref_Basic.hn_refine_split_post",
     "hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R ?a ==>
      hn_refine ?\<Gamma> ?c (?\<Gamma>' \<or>\<^sub>A ?\<Gamma>'') ?R ?a",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 1, template_var 5),
                    template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 1, template_var 5),
                   template_var 4),
                 template_app
                  (template_app (template_hole 0, template_var 3),
                   template_var 0)),
               template_var 2),
             template_var 1)
           ))),
    ("Sepref_Basic.hn_refine_post_other",
     "hn_refine ?\<Gamma> ?c ?\<Gamma>'' ?R ?a ==>
      hn_refine ?\<Gamma> ?c (?\<Gamma>' \<or>\<^sub>A ?\<Gamma>'') ?R ?a",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 1, template_var 5),
                    template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 1, template_var 5),
                   template_var 4),
                 template_app
                  (template_app (template_hole 0, template_var 0),
                   template_var 3)),
               template_var 2),
             template_var 1)
           ))),
    ("Sepref_HOL_Bindings.rdomp_prodD",
     "rdomp (?A \<times>\<^sub>a ?B) (?a, ?b) ==>
      rdomp ?A ?a & rdomp ?B ?b",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, template_var 3),
                  template_var 2)),
              template_app
               (template_app (template_hole 3, template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 3),
                 template_var 1)),
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 0))
           ))),
    ("Sepref_Basic.is_pureI",
     "(!!x x'. ?P x x' = \<up> (?P' x x')) ==> is_pure ?P",
     template_implication
      ([template_predicate (template_app (template_hole 5, t_empty))],
       template_predicate
        (template_app (template_hole 0, template_var 1)))),
    ("Sepref_Rules.hr_comp_prod_conv",
     "hr_comp (?Ra \<times>\<^sub>a ?Rb) (?Ra' \<times>\<^sub>r ?Rb') =
      hr_comp ?Ra ?Ra' \<times>\<^sub>a hr_comp ?Rb ?Rb'",
     template_equation
      (template_app
        (template_app
          (template_hole 7,
           template_app
            (template_app (template_hole 6, template_var 3),
             template_var 2)),
         template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app (template_hole 4, template_hole 3),
               template_var 1)),
           template_var 0)),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 3),
             template_var 1)),
         template_app
          (template_app (template_hole 0, template_var 2),
           template_var 0)))),
    ("Sepref_Tool.case_prod_opt2",
     "(%x. return (case x of (a, b) => ?f a b)) =
      (%(a, b). return (?f a b))",
     template_equation (t_empty, template_app (template_hole 0, t_empty))),
    ("Sepref_Rules.rdomp_hrcomp_conv",
     "rdomp (hr_comp ?A ?R) ?x = (EX y. rdomp ?A y & (y, ?x) : ?R)",
     template_equation
      (template_app
        (template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, template_var 2),
             template_var 1)),
         template_var 0),
       template_app (template_hole 4, t_empty))),
    ("Sepref_Translate.import_param_1",
     "((?a, ?c) : ?Rel & PROTECT ?P) = (PROTECT ?P & (?a, ?c) : ?Rel)",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 3),
                 template_var 2)),
             template_var 1)),
         template_app (template_hole 0, template_var 0)),
       template_app
        (template_app
          (template_hole 3, template_app (template_hole 0, template_var 0)),
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2)),
           template_var 1)))),
    ("Sepref_Basic.prod_assn_pair_conv",
     "(?A \<times>\<^sub>a ?B) (?a1.0, ?b1.0) (?a2.0, ?b2.0) =
      ?A ?a1.0 ?a2.0 * ?B ?b1.0 ?b2.0",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app (template_hole 3, template_var 5),
             template_var 4),
           template_app
            (template_app (template_hole 2, template_var 3),
             template_var 2)),
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_var 5, template_var 3),
             template_var 1)),
         template_app
          (template_app (template_var 4, template_var 2),
           template_var 0)))),
    ("Sepref_Rules.norm_return_o",
     "(return \<circ>\<circ> ?f) $ ?x $ ?y = return $ (?f $ ?x $ ?y)",
     template_equation
      (template_app
        (template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, t_empty), template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 2, template_hole 3),
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 1)),
           template_var 0)))),
    ("Sepref_Rules.prod_hrp_comp",
     "hrp_comp (?A *\<^sub>a ?B) (?C \<times>\<^sub>r ?D) =
      hrp_comp ?A ?C *\<^sub>a hrp_comp ?B ?D",
     template_equation
      (template_app
        (template_app
          (template_hole 7,
           template_app
            (template_app (template_hole 6, template_var 3),
             template_var 2)),
         template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app (template_hole 4, template_hole 3),
               template_var 1)),
           template_var 0)),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 3),
             template_var 1)),
         template_app
          (template_app (template_hole 0, template_var 2),
           template_var 0)))),
    ("Sepref_Foreach.fold_eq_nfoldli",
     "RETURN (fold ?f ?l ?s) =
      nfoldli ?l (%_. True) (%x s. RETURN (?f x s)) ?s",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1),
           template_var 0)),
       template_app
        (template_app
          (template_app
            (template_app (template_hole 1, template_var 1), t_empty),
           t_empty),
         template_var 0))),
    ("Sepref_Foreach.foldli_eq_nfoldli",
     "RETURN (foldli ?l ?c ?f ?s) =
      nfoldli ?l ?c (%x s. RETURN (?f x s)) ?s",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)),
       template_app
        (template_app
          (template_app
            (template_app (template_hole 0, template_var 3),
             template_var 2),
           t_empty),
         template_var 0))),
    ("Sepref_Rules.norm_RETURN_o",
     "(RETURN \<circ>\<circ> ?f) $ ?x $ ?y = RETURN $ (?f $ ?x $ ?y)",
     template_equation
      (template_app
        (template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, t_empty), template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 2, template_hole 3),
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 1)),
           template_var 0)))),
    ("Sepref_HOL_Bindings.fst_hnr",
     "(return o fst, RETURN o fst)
      : (?A \<times>\<^sub>a ?B)\<^sup>d \<rightarrow>\<^sub>a ?A",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 12,
             template_app
              (template_app
                (template_hole 11,
                 template_app
                  (template_app (template_hole 10, template_hole 9),
                   template_hole 8)),
               template_app
                (template_app (template_hole 7, template_hole 6),
                 template_hole 5))),
           template_app
            (template_app
              (template_app (template_hole 4, t_empty),
               template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app (template_hole 1, template_var 1),
                     template_var 0)),
                 template_hole 0)),
             template_var 1))
         )),
    ("Sepref_HOL_Bindings.snd_hnr",
     "(return o snd, RETURN o snd)
      : (?A \<times>\<^sub>a ?B)\<^sup>d \<rightarrow>\<^sub>a ?B",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 12,
             template_app
              (template_app
                (template_hole 11,
                 template_app
                  (template_app (template_hole 10, template_hole 9),
                   template_hole 8)),
               template_app
                (template_app (template_hole 7, template_hole 6),
                 template_hole 5))),
           template_app
            (template_app
              (template_app (template_hole 4, t_empty),
               template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app (template_hole 1, template_var 1),
                     template_var 0)),
                 template_hole 0)),
             template_var 0))
         )),
    ("Sepref_HOL_Bindings.prod_assn_ctxt",
     "(?A1.0 \<times>\<^sub>a ?A2.0) ?x ?y = ?z ==>
      hn_ctxt (?A1.0 \<times>\<^sub>a ?A2.0) ?x ?y = ?z",
     template_implication
      ([template_equation
         (template_app
           (template_app
             (template_app
               (template_app (template_hole 1, template_var 4),
                template_var 3),
              template_var 2),
            template_var 1),
          template_var 0)],
       template_equation
        (template_app
          (template_app
            (template_app
              (template_hole 0,
               template_app
                (template_app (template_hole 1, template_var 4),
                 template_var 3)),
             template_var 2),
           template_var 1),
         template_var 0))),
    ("Sepref_HOL_Bindings.sum_assn_ctxt",
     "(?A +\<^sub>a ?B) ?x ?y = ?z ==>
      hn_ctxt (?A +\<^sub>a ?B) ?x ?y = ?z",
     template_implication
      ([template_equation
         (template_app
           (template_app
             (template_app
               (template_app (template_hole 1, template_var 4),
                template_var 3),
              template_var 2),
            template_var 1),
          template_var 0)],
       template_equation
        (template_app
          (template_app
            (template_app
              (template_hole 0,
               template_app
                (template_app (template_hole 1, template_var 4),
                 template_var 3)),
             template_var 2),
           template_var 1),
         template_var 0))),
    ("Sepref_Tool.prec_specD",
     "[| precise ?R; prec_spec ?h (?R ?a ?p) (?R ?a' ?p) |] ==> ?a = ?a'",
     template_implication
      ([template_predicate (template_app (template_hole 2, template_var 4)),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 1, template_var 3),
                template_app
                 (template_app (template_var 4, template_var 2),
                  template_var 1)),
              template_app
               (template_app (template_var 4, template_var 0),
                template_var 1))
            )],
       template_equation (template_var 2, template_var 0))),
    ("Sepref_Frame.gen_merge_cons1",
     "[| ?A \<Longrightarrow>\<^sub>t ?A';
         ?A' \<or>\<^sub>A ?B \<Longrightarrow>\<^sub>t ?C |]
      ==> ?A \<or>\<^sub>A ?B \<Longrightarrow>\<^sub>t ?C",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 1,
                template_app
                 (template_app (template_hole 0, template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 3),
                 template_var 1)),
             template_var 0)
           ))),
    ("Sepref_Frame.gen_merge_cons2",
     "[| ?B \<Longrightarrow>\<^sub>t ?B';
         ?A \<or>\<^sub>A ?B' \<Longrightarrow>\<^sub>t ?C |]
      ==> ?A \<or>\<^sub>A ?B \<Longrightarrow>\<^sub>t ?C",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 1,
                template_app
                 (template_app (template_hole 0, template_var 1),
                  template_var 2)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 1),
                 template_var 3)),
             template_var 0)
           ))),
    ("Sepref_Frame.frame_thms",
     "[| ?P \<Longrightarrow>\<^sub>t ?P';
         ?F \<Longrightarrow>\<^sub>t ?F' |]
      ==> ?F * ?P \<Longrightarrow>\<^sub>t ?F' * ?P'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 1),
                 template_var 3)),
             template_app
              (template_app (template_hole 0, template_var 0),
               template_var 2))
           ))),
    ("Sepref_Intf_Util.CNV_split",
     "[| CNV ?A ?A'; CNV ?B ?B' |] ==> CNV (?A & ?B) (?A' & ?B')",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 3),
                 template_var 1)),
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 0))
           ))),
    ("Sepref_Frame.recover_pure",
     "[| RECOVER_PURE ?P2.0 ?Q2.0; RECOVER_PURE ?P1.0 ?Q1.0 |]
      ==> RECOVER_PURE (?P1.0 * ?P2.0) (?Q1.0 * ?Q2.0)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 1),
                 template_var 3)),
             template_app
              (template_app (template_hole 0, template_var 0),
               template_var 2))
           ))),
    ("Sepref_Rules.hrp_comp_cong",
     "[| hrp_imp ?A ?A'; ?B = ?B' |]
      ==> hrp_imp (hrp_comp ?A ?B) (hrp_comp ?A' ?B')",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 3, template_var 3),
              template_var 2)
            ),
        template_equation (template_var 1, template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 3),
                 template_var 1)),
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 0))
           ))),
    ("Sepref_Rules.hrp_prod_cong",
     "[| hrp_imp ?A ?A'; hrp_imp ?B ?B' |]
      ==> hrp_imp (?A *\<^sub>a ?B) (?A' *\<^sub>a ?B')",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 3, template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 2, template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 3),
                 template_var 1)),
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 0))
           ))),
    ("Sepref_Translate.CPR_TAG_starI",
     "[| CPR_TAG ?P1.0 ?Q1.0; CPR_TAG ?P2.0 ?Q2.0 |]
      ==> CPR_TAG (?P1.0 * ?P2.0) (?Q1.0 * ?Q2.0)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 3),
                 template_var 1)),
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 0))
           ))),
    ("Sepref_Intf_Util.IMP_PRE_eqI",
     "[| !!x. ?P x --> ?Q x; CNV ?P ?P' |] ==> IMP_PRE ?P' ?Q",
     template_implication
      ([template_predicate (template_app (template_hole 4, t_empty)),
        template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 2),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 0), template_var 1)
           ))),
    ("Sepref_HOL_Bindings.b_assn_invalid_merge7",
     "hn_ctxt ?A ?x ?y \<or>\<^sub>A
      hn_invalid (b_assn ?A ?P) ?x ?y \<Longrightarrow>\<^sub>t
      hn_invalid ?A ?x ?y",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app
                    (template_app (template_hole 2, template_var 3),
                     template_var 2),
                   template_var 1)),
               template_app
                (template_app
                  (template_app
                    (template_hole 2,
                     template_app
                      (template_hole 1,
                       template_app
                        (template_app (template_hole 0, template_var 3),
                         template_var 0))),
                   template_var 2),
                 template_var 1))),
           template_app
            (template_app
              (template_app
                (template_hole 2,
                 template_app (template_hole 1, template_var 3)),
               template_var 2),
             template_var 1))
         )),
    ("Sepref_HOL_Bindings.b_assn_invalid_merge9",
     "hn_invalid ?A ?x ?y \<or>\<^sub>A
      hn_ctxt (b_assn ?A ?P) ?x ?y \<Longrightarrow>\<^sub>t
      hn_invalid ?A ?x ?y",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app
                    (template_app
                      (template_hole 2,
                       template_app (template_hole 1, template_var 3)),
                     template_var 2),
                   template_var 1)),
               template_app
                (template_app
                  (template_app
                    (template_hole 2,
                     template_app
                      (template_app (template_hole 0, template_var 3),
                       template_var 0)),
                   template_var 2),
                 template_var 1))),
           template_app
            (template_app
              (template_app
                (template_hole 2,
                 template_app (template_hole 1, template_var 3)),
               template_var 2),
             template_var 1))
         )),
    ("Sepref_HOL_Bindings.b_assn_invalid_merge8",
     "hn_ctxt (b_assn ?A ?P) ?x ?y \<or>\<^sub>A
      hn_invalid ?A ?x ?y \<Longrightarrow>\<^sub>t
      hn_invalid ?A ?x ?y",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app
                    (template_app
                      (template_hole 2,
                       template_app
                        (template_app (template_hole 1, template_var 3),
                         template_var 2)),
                     template_var 1),
                   template_var 0)),
               template_app
                (template_app
                  (template_app
                    (template_hole 2,
                     template_app (template_hole 0, template_var 3)),
                   template_var 1),
                 template_var 0))),
           template_app
            (template_app
              (template_app
                (template_hole 2,
                 template_app (template_hole 0, template_var 3)),
               template_var 1),
             template_var 0))
         )),
    ("Sepref_HOL_Bindings.b_assn_invalid_merge6",
     "hn_invalid (b_assn ?A ?P) ?x ?y \<or>\<^sub>A
      hn_ctxt ?A ?x ?y \<Longrightarrow>\<^sub>t
      hn_invalid ?A ?x ?y",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app
                    (template_app
                      (template_hole 2,
                       template_app
                        (template_hole 1,
                         template_app
                          (template_app (template_hole 0, template_var 3),
                           template_var 2))),
                     template_var 1),
                   template_var 0)),
               template_app
                (template_app
                  (template_app (template_hole 2, template_var 3),
                   template_var 1),
                 template_var 0))),
           template_app
            (template_app
              (template_app
                (template_hole 2,
                 template_app (template_hole 1, template_var 3)),
               template_var 1),
             template_var 0))
         )),
    ("Sepref_Basic.mod_pure_conv",
     "((?h, ?as) \<Turnstile> pure ?R ?a ?b) = (?as = {} & (?b, ?a) : ?R)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app
                 (template_app
                   (template_app (template_hole 6, template_var 4),
                    template_var 3),
                  template_var 2)),
              template_app
               (template_app (template_hole 5, template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_var 0),
                 template_hole 2)),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_var 2),
                   template_var 3)),
               template_var 4))
           ))),
    ("Sepref_Basic.hnr_pre_pure_conv",
     "hn_refine (?\<Gamma> * \<up> ?P) ?c ?\<Gamma>' ?R ?a =
      (?P --> hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R ?a)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app (template_hole 2, template_var 5),
                   template_app (template_hole 1, template_var 4))),
               template_var 3),
             template_var 2),
           template_var 1),
         template_var 0),
       template_app
        (template_app (template_hole 0, template_var 4),
         template_app
          (template_app
            (template_app
              (template_app
                (template_app (template_hole 3, template_var 5),
                 template_var 3),
               template_var 2),
             template_var 1),
           template_var 0)))),
    ("Sepref_Foreach.FOREACH_oci_to_monadic",
     "FOREACH\<^sub>O\<^sub>C\<^bsup>?R,?\<Phi>\<^esup> ?S ?c ?f
       ?\<sigma>0.0 =
      monadic_FOREACH ?R ?\<Phi> ?S (%\<sigma>. RETURN (?c \<sigma>)) ?f
       ?\<sigma>0.0",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app
              (template_app
                (template_app (template_hole 2, template_var 5),
                 template_var 4),
               template_var 3),
             template_var 2),
           template_var 1),
         template_var 0),
       template_app
        (template_app
          (template_app
            (template_app
              (template_app
                (template_app (template_hole 1, template_var 5),
                 template_var 4),
               template_var 3),
             t_empty),
           template_var 1),
         template_var 0))),
    ("Sepref_Foreach.FOREACHoci_itsl",
     "it_to_sorted_list ?R ?s >>= (%l. nfoldli l ?c ?f ?\<sigma>)
      <= FOREACH\<^sub>O\<^sub>C\<^bsup>?R,?I\<^esup> ?s ?c ?f ?\<sigma>",
     template_inequation
      (less_equals,
       template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 5),
             template_var 4)),
         t_empty),
       template_app
        (template_app
          (template_app
            (template_app
              (template_app
                (template_app (template_hole 0, template_var 5),
                 template_var 0),
               template_var 4),
             template_var 3),
           template_var 2),
         template_var 1))),
    ("Sepref_Foreach.monadic_FOREACH_itsl",
     "it_to_sorted_list ?R ?s >>= (%l. monadic_nfoldli l ?c ?f ?\<sigma>)
      <= monadic_FOREACH ?R ?I ?s ?c ?f ?\<sigma>",
     template_inequation
      (less_equals,
       template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 5),
             template_var 4)),
         t_empty),
       template_app
        (template_app
          (template_app
            (template_app
              (template_app
                (template_app (template_hole 0, template_var 5),
                 template_var 0),
               template_var 4),
             template_var 3),
           template_var 2),
         template_var 1))),
    ("Sepref_HOL_Bindings.projr_hnr",
     "(return o projr, RETURN o projr)
      : [Not o isl]\<^sub>a (?A +\<^sub>a ?B)\<^sup>d \<rightarrow> ?B",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 14,
             template_app
              (template_app
                (template_hole 13,
                 template_app
                  (template_app (template_hole 12, template_hole 11),
                   template_hole 10)),
               template_app
                (template_app (template_hole 9, template_hole 8),
                 template_hole 7))),
           template_app
            (template_app
              (template_app
                (template_hole 6,
                 template_app
                  (template_app (template_hole 5, template_hole 4),
                   template_hole 3)),
               template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app (template_hole 1, template_var 1),
                     template_var 0)),
                 template_hole 0)),
             template_var 0))
         )),
    ("Sepref_HOL_Bindings.isl_hnr",
     "(return o isl, RETURN o isl)
      : (?A +\<^sub>a ?B)\<^sup>k \<rightarrow>\<^sub>a bool_assn",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 13,
             template_app
              (template_app
                (template_hole 12,
                 template_app
                  (template_app (template_hole 11, template_hole 10),
                   template_hole 9)),
               template_app
                (template_app (template_hole 8, template_hole 7),
                 template_hole 6))),
           template_app
            (template_app
              (template_app (template_hole 5, t_empty),
               template_app
                (template_app
                  (template_hole 3,
                   template_app
                    (template_app (template_hole 2, template_var 1),
                     template_var 0)),
                 template_hole 4)),
             template_app (template_hole 1, template_hole 0)))
         )),
    ("Sepref_Frame.frame_rem2",
     "?F \<Longrightarrow>\<^sub>t ?F' ==>
      ?F * hn_ctxt ?A ?x ?y \<Longrightarrow>\<^sub>t
      ?F' * hn_ctxt ?A ?x ?y",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 2, template_var 4),
              template_var 3)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 4),
                 template_app
                  (template_app
                    (template_app (template_hole 0, template_var 2),
                     template_var 1),
                   template_var 0))),
             template_app
              (template_app (template_hole 1, template_var 3),
               template_app
                (template_app
                  (template_app (template_hole 0, template_var 2),
                   template_var 1),
                 template_var 0)))
           ))),
    ("Sepref_Tool.hnr_pure_COPY",
     "CONSTRAINT is_pure ?R ==>
      (return, RETURN o COPY) : ?R\<^sup>k \<rightarrow>\<^sub>a ?R",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 10, template_hole 9),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 8,
               template_app
                (template_app (template_hole 7, template_hole 6),
                 template_app
                  (template_app (template_hole 5, template_hole 4),
                   template_hole 3))),
             template_app
              (template_app
                (template_app (template_hole 2, t_empty),
                 template_app
                  (template_app (template_hole 0, template_var 0),
                   template_hole 1)),
               template_var 0))
           ))),
    ("Sepref_Rules.fref_param0I",
     "(?c, ?a) : ?R ==>
      (uncurry0 ?c, uncurry0 ?a) : unit_rel \<rightarrow>\<^sub>f ?R",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app
                 (template_app (template_hole 7, template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app
                  (template_hole 5,
                   template_app (template_hole 4, template_var 2)),
                 template_app (template_hole 3, template_var 1))),
             template_app
              (template_app
                (template_app (template_hole 2, t_empty), template_hole 0),
               template_var 0))
           ))),
    ("Sepref_Basic.hn_refine_nofailI",
     "(nofail ?a ==> hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R ?a) ==>
      hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R ?a",
     template_implication
      ([template_implication
         ([template_predicate
            (template_app (template_hole 1, template_var 4))],
          template_predicate
           (
              template_app
               (template_app
                 (template_app
                   (template_app
                     (template_app (template_hole 0, template_var 3),
                      template_var 2),
                    template_var 1),
                  template_var 0),
                template_var 4)
              ))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 3),
                   template_var 2),
                 template_var 1),
               template_var 0),
             template_var 4)
           ))),
    ("Sepref_Intf_Util.simp_imp",
     "[| ?P ==> CNV ?Q ?Q'; ?PP --> ?Q' |] ==> ?PP --> ?P --> ?Q",
     template_implication
      ([template_implication
         ([template_predicate (template_var 3)],
          template_predicate
           (
              template_app
               (template_app (template_hole 1, template_var 2),
                template_var 1)
              )),
        template_predicate
         (
            template_app
             (template_app (template_hole 0, template_var 0),
              template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 0),
             template_app
              (template_app (template_hole 0, template_var 3),
               template_var 2))
           ))),
    ("Sepref_HOL_Bindings.b_assn_invalid_merge3",
     "hn_invalid ?A ?x ?y \<or>\<^sub>A
      hn_invalid (b_assn ?A ?P) ?x ?y \<Longrightarrow>\<^sub>t
      hn_invalid ?A ?x ?y",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app
                    (template_app
                      (template_hole 2,
                       template_app (template_hole 1, template_var 3)),
                     template_var 2),
                   template_var 1)),
               template_app
                (template_app
                  (template_app
                    (template_hole 2,
                     template_app
                      (template_hole 1,
                       template_app
                        (template_app (template_hole 0, template_var 3),
                         template_var 0))),
                   template_var 2),
                 template_var 1))),
           template_app
            (template_app
              (template_app
                (template_hole 2,
                 template_app (template_hole 1, template_var 3)),
               template_var 2),
             template_var 1))
         )),
    ("Sepref_HOL_Bindings.b_assn_invalid_merge2",
     "hn_invalid (b_assn ?A ?P) ?x ?y \<or>\<^sub>A
      hn_invalid ?A ?x ?y \<Longrightarrow>\<^sub>t
      hn_invalid ?A ?x ?y",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app
                    (template_app
                      (template_hole 2,
                       template_app
                        (template_hole 1,
                         template_app
                          (template_app (template_hole 0, template_var 3),
                           template_var 2))),
                     template_var 1),
                   template_var 0)),
               template_app
                (template_app
                  (template_app
                    (template_hole 2,
                     template_app (template_hole 1, template_var 3)),
                   template_var 1),
                 template_var 0))),
           template_app
            (template_app
              (template_app
                (template_hole 2,
                 template_app (template_hole 1, template_var 3)),
               template_var 1),
             template_var 0))
         )),
    ("Sepref_Basic.hnr_pre_ex_conv",
     "hn_refine (\<exists>\<^sub>Ax. ?\<Gamma> x) ?c ?\<Gamma>' ?R ?a =
      (ALL x. hn_refine (?\<Gamma> x) ?c ?\<Gamma>' ?R ?a)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app
              (template_app
                (template_hole 2, template_app (template_hole 1, t_empty)),
               template_var 3),
             template_var 2),
           template_var 1),
         template_var 0),
       template_app (template_hole 0, t_empty))),
    ("Sepref_Rules.fref_unit_conv",
     "((%_. ?c, %_. ?a) : [?P]\<^sub>f unit_rel \<rightarrow> ?S) =
      (?P () --> (?c, ?a) : ?S)",
     template_equation
      (template_app
        (template_app
          (template_hole 7,
           template_app (template_app (template_hole 6, t_empty), t_empty)),
         template_app
          (template_app
            (template_app (template_hole 5, template_var 1),
             template_hole 4),
           template_var 0)),
       template_app
        (template_app
          (template_hole 3, template_app (template_var 1, template_hole 2)),
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 3),
               template_var 2)),
           template_var 0)))),
    ("Sepref_HOL_Bindings.param_distinct",
     "[| IS_LEFT_UNIQUE ?A; single_valued ?A |]
      ==> (distinct, distinct)
          : \<langle>?A\<rangle>list_rel \<rightarrow> bool_rel",
     template_implication
      ([template_predicate
         (template_app (template_hole 11, template_var 0)),
        template_predicate
         (template_app (template_hole 10, template_var 0))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 9,
               template_app
                (template_app (template_hole 8, template_hole 7),
                 template_hole 6)),
             template_app
              (template_app
                (template_hole 5,
                 template_app
                  (template_app (template_hole 4, template_hole 3),
                   template_app
                    (template_app (template_hole 2, template_hole 1),
                     template_var 0))),
               template_hole 0))
           ))),
    ("Sepref_Basic.hn_refine_cons_pre",
     "[| ?P \<Longrightarrow>\<^sub>t ?P'; hn_refine ?P' ?c ?Q ?R ?m |]
      ==> hn_refine ?P ?c ?Q ?R ?m",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 5),
              template_var 4)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 0, template_var 4),
                    template_var 3),
                  template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 5),
                   template_var 3),
                 template_var 2),
               template_var 1),
             template_var 0)
           ))),
    ("Sepref_Basic.hn_refine_ref",
     "[| ?m <= ?m'; hn_refine ?P ?c ?Q ?R ?m |]
      ==> hn_refine ?P ?c ?Q ?R ?m'",
     template_implication
      ([template_inequation (less_equals, template_var 5, template_var 4),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 0, template_var 3),
                    template_var 2),
                  template_var 1),
                template_var 0),
              template_var 5)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 3),
                   template_var 2),
                 template_var 1),
               template_var 0),
             template_var 4)
           ))),
    ("Sepref_Translate.recover_pure_cons",
     "[| RECOVER_PURE ?\<Gamma> ?\<Gamma>';
         hn_refine ?\<Gamma>' ?c ?\<Gamma>'' ?R ?a |]
      ==> hn_refine ?\<Gamma> ?c ?\<Gamma>'' ?R ?a",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 5),
              template_var 4)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 0, template_var 4),
                    template_var 3),
                  template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 5),
                   template_var 3),
                 template_var 2),
               template_var 1),
             template_var 0)
           ))),
    ("Sepref_Basic.bind_det_aux",
     "[| RETURN ?x <= ?m; RETURN ?y <= ?f ?x |] ==> RETURN ?y <= ?m >>= ?f",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 3, template_var 3),
          template_var 2),
        template_inequation
         (less_equals, template_app (template_hole 1, template_var 1),
          template_app (template_var 0, template_var 3))],
       template_inequation
        (less_equals, template_app (template_hole 1, template_var 1),
         template_app
          (template_app (template_hole 0, template_var 2),
           template_var 0)))),
    ("Sepref_Basic.hn_refine_cons_post",
     "[| hn_refine ?P ?c ?Q ?R ?m; ?Q \<Longrightarrow>\<^sub>t ?Q' |]
      ==> hn_refine ?P ?c ?Q' ?R ?m",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 1, template_var 5),
                    template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 0, template_var 3),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 1, template_var 5),
                   template_var 4),
                 template_var 0),
               template_var 2),
             template_var 1)
           ))),
    ("Sepref_Basic.hn_refine_guessI",
     "[| hn_refine ?P ?f ?P' ?R ?f'; ?f = ?f_conc |]
      ==> hn_refine ?P ?f_conc ?P' ?R ?f'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 1, template_var 5),
                    template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_equation (template_var 4, template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 1, template_var 5),
                   template_var 0),
                 template_var 3),
               template_var 2),
             template_var 1)
           ))),
    ("Sepref_Tool.TRANS_init",
     "[| hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R ?a; CNV ?c ?c' |]
      ==> hn_refine ?\<Gamma> ?c' ?\<Gamma>' ?R ?a",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 1, template_var 5),
                    template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 0, template_var 4),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 1, template_var 5),
                   template_var 0),
                 template_var 3),
               template_var 2),
             template_var 1)
           ))),
    ("Sepref_Rules.fcomp_norm_dflt_init",
     "[| ?x : [?P]\<^sub>a ?R \<rightarrow> ?T; hrp_imp ?R ?S |]
      ==> ?x : [?P]\<^sub>a ?S \<rightarrow> ?T",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 2, template_var 4),
              template_app
               (template_app
                 (template_app (template_hole 1, template_var 3),
                  template_var 2),
                template_var 1))
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 0, template_var 2),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 2, template_var 4),
             template_app
              (template_app
                (template_app (template_hole 1, template_var 3),
                 template_var 0),
               template_var 1))
           ))),
    ("Sepref_HOL_Bindings.invalid_list_split",
     "invalid_assn (list_assn ?A) (?x # ?xs)
       (?y # ?ys) \<Longrightarrow>\<^sub>t
      invalid_assn ?A ?x ?y * invalid_assn (list_assn ?A) ?xs ?ys",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 6,
             template_app
              (template_app
                (template_app
                  (template_hole 5,
                   template_app (template_hole 4, template_var 4)),
                 template_app
                  (template_app (template_hole 3, template_var 3),
                   template_var 2)),
               template_app
                (template_app (template_hole 2, template_var 1),
                 template_var 0))),
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app
                  (template_app (template_hole 0, template_var 4),
                   template_var 3),
                 template_var 1)),
             template_app
              (template_app
                (template_app
                  (template_hole 5,
                   template_app (template_hole 4, template_var 4)),
                 template_var 2),
               template_var 0)))
         )),
    ("Sepref_HOL_Bindings.pres_eq_iff_svb",
     "(((=), (=)) : ?K \<rightarrow> ?K \<rightarrow> bool_rel) =
      (single_valued ?K & single_valued (?K^-1))",
     template_equation
      (template_app
        (template_app
          (template_hole 14,
           template_app
            (template_app (template_hole 13, template_hole 12),
             template_hole 11)),
         template_app
          (template_app
            (template_hole 10,
             template_app
              (template_app (template_hole 9, template_hole 8),
               template_var 0)),
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_hole 5),
                 template_var 0)),
             template_hole 4))),
       template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, template_var 0)),
         template_app
          (template_hole 1,
           template_app (template_hole 0, template_var 0))))),
    ("Sepref_HOL_Bindings.list_assn_simps",
     "hn_ctxt (list_assn ?P) (?a # ?as) (?c # ?cs) =
      hn_ctxt ?P ?a ?c * hn_ctxt (list_assn ?P) ?as ?cs",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 5,
             template_app (template_hole 4, template_var 4)),
           template_app
            (template_app (template_hole 3, template_var 3),
             template_var 2)),
         template_app
          (template_app (template_hole 2, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app
              (template_app (template_hole 0, template_var 4),
               template_var 3),
             template_var 1)),
         template_app
          (template_app
            (template_app
              (template_hole 5,
               template_app (template_hole 4, template_var 4)),
             template_var 2),
           template_var 0)))),
    ("Sepref_HOL_Bindings.hn_Some",
     "hn_refine (hn_ctxt ?P ?v ?v') (return (Some ?v'))
       (hn_invalid ?P ?v ?v') (option_assn ?P) (RETURN $ (Some $ ?v))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app (template_hole 8, template_var 2),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_hole 7,
                   template_app (template_hole 6, template_var 0))),
               template_app
                (template_app
                  (template_app
                    (template_hole 8,
                     template_app (template_hole 5, template_var 2)),
                   template_var 1),
                 template_var 0)),
             template_app (template_hole 4, template_var 2)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 1)))
         )),
    ("Sepref_Translate.pure_hn_refineI",
     "?Q --> (?c, ?a) : ?R ==>
      hn_refine (\<up> ?Q) (return ?c) (\<up> ?Q) (pure ?R) (RETURN ?a)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 7, template_var 3),
              template_app
               (template_app
                 (template_hole 6,
                  template_app
                   (template_app (template_hole 5, template_var 2),
                    template_var 1)),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_hole 4,
                     template_app (template_hole 3, template_var 3)),
                   template_app (template_hole 2, template_var 2)),
                 template_app (template_hole 3, template_var 3)),
               template_app (template_hole 1, template_var 0)),
             template_app (template_hole 0, template_var 1))
           ))),
    ("Sepref_Rules.fref_ncI",
     "(?f, ?g) : ?R \<rightarrow> ?S ==>
      (?f, ?g) : ?R \<rightarrow>\<^sub>f ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_app (template_hole 5, template_var 3),
                  template_var 2)),
              template_app
               (template_app
                 (template_hole 4,
                  template_app
                   (template_app (template_hole 3, template_hole 2),
                    template_var 1)),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app (template_hole 5, template_var 3),
                 template_var 2)),
             template_app
              (template_app
                (template_app (template_hole 1, t_empty), template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.fref_ncD",
     "(?f, ?g) : ?R \<rightarrow>\<^sub>f ?S ==>
      (?f, ?g) : ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_app (template_hole 5, template_var 3),
                  template_var 2)),
              template_app
               (template_app
                 (template_app (template_hole 4, t_empty), template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app (template_hole 5, template_var 3),
                 template_var 2)),
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_Frame.weaken_hnr_postI",
     "[| WEAKEN_HNR_POST ?\<Gamma> ?\<Gamma>'' ?\<Gamma>';
         hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R ?a |]
      ==> hn_refine ?\<Gamma> ?c ?\<Gamma>'' ?R ?a",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 1, template_var 5),
                template_var 4),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 0, template_var 5),
                    template_var 2),
                  template_var 3),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 5),
                   template_var 2),
                 template_var 4),
               template_var 1),
             template_var 0)
           ))),
    ("Sepref_Id_Op.app_rule",
     "[| ID ?f ?f' TYPE(?'a => ?'b); ID ?x ?x' TYPE(?'a) |]
      ==> ID (?f $ ?x) (?f' $ ?x') TYPE(?'b)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 6, template_var 3),
                template_var 2),
              template_hole 5)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 4, template_var 1),
                template_var 0),
              template_hole 3)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_var 3),
                   template_var 1)),
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 0)),
             template_hole 0)
           ))),
    ("Sepref_Id_Op.app'_rule",
     "[| ID ?f ?f' TYPE(?'a => ?'b); ID ?x ?x' TYPE(?'a) |]
      ==> ID (?f $' ?x) (?f' $ ?x') TYPE(?'b)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 7, template_var 3),
                template_var 2),
              template_hole 6)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 5, template_var 1),
                template_var 0),
              template_hole 4)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app (template_hole 2, template_var 3),
                   template_var 1)),
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 0)),
             template_hole 0)
           ))),
    ("Sepref_Tool.ID_init",
     "[| ID ?a ?a' TYPE(?'T); hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R ?a' |]
      ==> hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R ?a",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 2, template_var 5),
                template_var 4),
              template_hole 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 0, template_var 3),
                    template_var 2),
                  template_var 1),
                template_var 0),
              template_var 4)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 3),
                   template_var 2),
                 template_var 1),
               template_var 0),
             template_var 5)
           ))),
    ("Sepref_Intf_Util.simp_and2",
     "[| ?P ==> CNV ?Q ?Q'; ?PP --> ?P & ?Q' |] ==> ?PP --> ?P & ?Q",
     template_implication
      ([template_implication
         ([template_predicate (template_var 3)],
          template_predicate
           (
              template_app
               (template_app (template_hole 2, template_var 2),
                template_var 1)
              )),
        template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 0),
              template_app
               (template_app (template_hole 0, template_var 3),
                template_var 1))
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 1, template_var 0),
             template_app
              (template_app (template_hole 0, template_var 3),
               template_var 2))
           ))),
    ("Sepref_Intf_Util.simp_and1",
     "[| ?Q ==> CNV ?P ?P'; ?PP --> ?P' & ?Q |] ==> ?PP --> ?P & ?Q",
     template_implication
      ([template_implication
         ([template_predicate (template_var 3)],
          template_predicate
           (
              template_app
               (template_app (template_hole 2, template_var 2),
                template_var 1)
              )),
        template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 0),
              template_app
               (template_app (template_hole 0, template_var 1),
                template_var 3))
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 1, template_var 0),
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 3))
           ))),
    ("Sepref_Tool.sepref_opt_simps",
     "imp_nfoldli (rev [?l..<?u]) ?c =
      (%f s. if ?u <= ?l then return s else imp_for_down ?l ?u ?c f s)",
     template_equation
      (template_app
        (template_app
          (template_hole 6,
           template_app
            (template_hole 5,
             template_app
              (template_app (template_hole 4, template_var 2),
               template_var 1))),
         template_var 0),
       t_empty)),
    ("Sepref_Rules.fcomp_norm_unfold",
     "(?A \<times>\<^sub>r ?B) O (?C \<times>\<^sub>r ?D) =
      ?A O ?C \<times>\<^sub>r ?B O ?D",
     template_equation
      (template_app
        (template_app
          (template_hole 11,
           template_app
            (template_app
              (template_hole 10,
               template_app
                (template_app (template_hole 9, template_hole 8),
                 template_var 3)),
             template_var 2)),
         template_app
          (template_app
            (template_hole 7,
             template_app
              (template_app (template_hole 6, template_hole 5),
               template_var 1)),
           template_var 0)),
       template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app (template_hole 1, template_var 3),
               template_var 1))),
         template_app
          (template_app (template_hole 0, template_var 2),
           template_var 0)))),
    ("Sepref_Translate.heap_WHILET_unfold",
     "heap_WHILET ?b ?f ?s =
      ?b ?s >>=
      (%bv. if bv then ?f ?s >>= heap_WHILET ?b ?f else return ?s)",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 4, template_var 2), template_var 1),
         template_var 0),
       template_app
        (template_app
          (template_hole 3, template_app (template_var 2, template_var 0)),
         t_empty))),
    ("Sepref_HOL_Bindings.uminus_hnr",
     "hn_refine (hn_val int_rel ?x'5 ?x5) (return (- ?x5))
       (hn_val int_rel ?x'5 ?x5) int_assn (RETURN $ (uminus $ ?x'5))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 8,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 7,
                         template_app (template_hole 6, template_hole 5)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_hole 4,
                   template_app (template_hole 3, template_var 0))),
               template_app
                (template_app
                  (template_app
                    (template_hole 7,
                     template_app (template_hole 6, template_hole 5)),
                   template_var 1),
                 template_var 0)),
             template_app (template_hole 6, template_hole 5)),
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_app
              (template_app (template_hole 0, template_hole 3),
               template_var 1)))
         )),
    ("Sepref_HOL_Bindings.int_param",
     "hn_refine (hn_val nat_rel ?x'5 ?x5) (return (int ?x5))
       (hn_val nat_rel ?x'5 ?x5) int_assn (RETURN $ (int $ ?x'5))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 9,
                         template_app (template_hole 8, template_hole 7)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_hole 6,
                   template_app (template_hole 5, template_var 0))),
               template_app
                (template_app
                  (template_app
                    (template_hole 9,
                     template_app (template_hole 8, template_hole 7)),
                   template_var 1),
                 template_var 0)),
             template_app (template_hole 4, template_hole 3)),
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_app
              (template_app (template_hole 0, template_hole 5),
               template_var 1)))
         )),
    ("Sepref_HOL_Bindings.nat_param",
     "hn_refine (hn_val int_rel ?x'5 ?x5) (return (nat ?x5))
       (hn_val int_rel ?x'5 ?x5) nat_assn (RETURN $ (nat $ ?x'5))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 9,
                         template_app (template_hole 8, template_hole 7)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_hole 6,
                   template_app (template_hole 5, template_var 0))),
               template_app
                (template_app
                  (template_app
                    (template_hole 9,
                     template_app (template_hole 8, template_hole 7)),
                   template_var 1),
                 template_var 0)),
             template_app (template_hole 4, template_hole 3)),
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_app
              (template_app (template_hole 0, template_hole 5),
               template_var 1)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val nat_rel ?x'5 ?x5) (return (Suc ?x5))
       (hn_val nat_rel ?x'5 ?x5) nat_assn (RETURN $ (Suc $ ?x'5))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 8,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 7,
                         template_app (template_hole 6, template_hole 5)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_hole 4,
                   template_app (template_hole 3, template_var 0))),
               template_app
                (template_app
                  (template_app
                    (template_hole 7,
                     template_app (template_hole 6, template_hole 5)),
                   template_var 1),
                 template_var 0)),
             template_app (template_hole 6, template_hole 5)),
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_app
              (template_app (template_hole 0, template_hole 3),
               template_var 1)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val bool_rel ?x'5 ?x5) (return (~ ?x5))
       (hn_val bool_rel ?x'5 ?x5) bool_assn (RETURN $ (Not $ ?x'5))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 8,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 7,
                         template_app (template_hole 6, template_hole 5)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_hole 4,
                   template_app (template_hole 3, template_var 0))),
               template_app
                (template_app
                  (template_app
                    (template_hole 7,
                     template_app (template_hole 6, template_hole 5)),
                   template_var 1),
                 template_var 0)),
             template_app (template_hole 6, template_hole 5)),
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_app
              (template_app (template_hole 0, template_hole 3),
               template_var 1)))
         )),
    ("Sepref_HOL_Bindings.hn_is_None",
     "hn_refine (hn_ctxt (option_assn ?P) ?a ?a') (return (is_None ?a'))
       (hn_ctxt (option_assn ?P) ?a ?a') bool_assn
       (RETURN $ (is_None $ ?a))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 9,
                         template_app (template_hole 8, template_var 2)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_hole 7,
                   template_app (template_hole 6, template_var 0))),
               template_app
                (template_app
                  (template_app
                    (template_hole 9,
                     template_app (template_hole 8, template_var 2)),
                   template_var 1),
                 template_var 0)),
             template_app (template_hole 5, template_hole 4)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 1)))
         )),
    ("Sepref_Translate.hn_ASSERT_bind",
     "(?I ==> hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R ?m) ==>
      hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R
       (PR_CONST (op_ASSERT_bind ?I) $ ?m)",
     template_implication
      ([template_implication
         ([template_predicate (template_var 5)],
          template_predicate
           (
              template_app
               (template_app
                 (template_app
                   (template_app
                     (template_app (template_hole 3, template_var 4),
                      template_var 3),
                    template_var 2),
                  template_var 1),
                template_var 0)
              ))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 3, template_var 4),
                   template_var 3),
                 template_var 2),
               template_var 1),
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_hole 1,
                   template_app (template_hole 0, template_var 5))),
               template_var 0))
           ))),
    ("Sepref_Basic.hnr_ASSERT",
     "(?\<Phi> ==> hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R ?c') ==>
      hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R (ASSERT ?\<Phi> >>= (%_. ?c'))",
     template_implication
      ([template_implication
         ([template_predicate (template_var 5)],
          template_predicate
           (
              template_app
               (template_app
                 (template_app
                   (template_app
                     (template_app (template_hole 2, template_var 4),
                      template_var 3),
                    template_var 2),
                  template_var 1),
                template_var 0)
              ))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 2, template_var 4),
                   template_var 3),
                 template_var 2),
               template_var 1),
             template_app
              (template_app
                (template_hole 1,
                 template_app (template_hole 0, template_var 5)),
               t_empty))
           ))),
    ("Sepref_Basic.hn_refine_preI",
     "(!!h. h \<Turnstile> ?\<Gamma> ==>
            hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R ?a) ==>
      hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R ?a",
     template_implication
      ([template_predicate (template_app (template_hole 3, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 4),
                   template_var 3),
                 template_var 2),
               template_var 1),
             template_var 0)
           ))),
    ("Sepref_Foreach.IS_TO_SORTED_LISTI",
     "(?tsl, PR_CONST (it_to_sorted_list ?\<Omega>))
      : ?Rs\<^sup>k \<rightarrow>\<^sub>a list_assn ?Rk ==>
      IS_TO_SORTED_LIST ?\<Omega> ?Rs ?Rk ?tsl",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app
                 (template_app (template_hole 7, template_var 3),
                  template_app
                   (template_hole 6,
                    template_app (template_hole 5, template_var 2)))),
              template_app
               (template_app
                 (template_app (template_hole 4, t_empty),
                  template_app
                   (template_app (template_hole 2, template_var 1),
                    template_hole 3)),
                template_app (template_hole 1, template_var 0)))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 1),
               template_var 0),
             template_var 3)
           ))),
    ("Sepref_Tool.split_merge",
     "[| ?A \<or>\<^sub>A ?B \<Longrightarrow>\<^sub>t ?X;
         ?X \<or>\<^sub>A ?C \<Longrightarrow>\<^sub>t ?D |]
      ==> ?A \<or>\<^sub>A ?B \<or>\<^sub>A ?C \<Longrightarrow>\<^sub>t
          ?D",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 1,
                template_app
                 (template_app (template_hole 0, template_var 4),
                  template_var 3)),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 1,
                template_app
                 (template_app (template_hole 0, template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 4),
                 template_app
                  (template_app (template_hole 0, template_var 3),
                   template_var 1))),
             template_var 0)
           ))),
    ("Sepref_HOL_Bindings.IS_RIGHT_UNIQUED",
     "[| single_valued ?r; (?x, ?y) : ?r; (?x, ?z) : ?r |] ==> ?y = ?z",
     template_implication
      ([template_predicate (template_app (template_hole 3, template_var 3)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 2),
                  template_var 1)),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 2),
                  template_var 0)),
              template_var 3)
            )],
       template_equation (template_var 1, template_var 0))),
    ("Sepref_HOL_Bindings.IS_LEFT_UNIQUED",
     "[| IS_LEFT_UNIQUE ?r; (?y, ?x) : ?r; (?z, ?x) : ?r |] ==> ?y = ?z",
     template_implication
      ([template_predicate (template_app (template_hole 3, template_var 3)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 2),
                  template_var 1)),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 0),
                  template_var 1)),
              template_var 3)
            )],
       template_equation (template_var 2, template_var 0))),
    ("Sepref_Foreach.nfoldli_assert'",
     "nfoldli ?l ?c (%x s. ASSERT (x : set ?l) >>= (%_. ?f x s)) ?s =
      nfoldli ?l ?c ?f ?s",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app (template_hole 4, template_var 3),
             template_var 2),
           t_empty),
         template_var 0),
       template_app
        (template_app
          (template_app
            (template_app (template_hole 4, template_var 3),
             template_var 2),
           template_var 1),
         template_var 0))),
    ("Sepref_Foreach.monadic_nfoldli_assert",
     "monadic_nfoldli ?l ?c (%x s. ASSERT (x : set ?l) >>= (%_. ?f x s))
       ?s =
      monadic_nfoldli ?l ?c ?f ?s",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app (template_hole 4, template_var 3),
             template_var 2),
           t_empty),
         template_var 0),
       template_app
        (template_app
          (template_app
            (template_app (template_hole 4, template_var 3),
             template_var 2),
           template_var 1),
         template_var 0))),
    ("Sepref_Frame.invalid_assn_mono",
     "hn_ctxt ?A ?x ?y \<Longrightarrow>\<^sub>t hn_ctxt ?B ?x ?y ==>
      hn_invalid ?A ?x ?y \<Longrightarrow>\<^sub>t hn_invalid ?B ?x ?y",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app
                   (template_app (template_hole 1, template_var 3),
                    template_var 2),
                  template_var 1)),
              template_app
               (template_app
                 (template_app (template_hole 1, template_var 0),
                  template_var 2),
                template_var 1))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_app
                    (template_hole 1,
                     template_app (template_hole 0, template_var 3)),
                   template_var 2),
                 template_var 1)),
             template_app
              (template_app
                (template_app
                  (template_hole 1,
                   template_app (template_hole 0, template_var 0)),
                 template_var 2),
               template_var 1))
           ))),
    ("Sepref_HOL_Bindings.b_assn_subtyping_match_eqA_tL",
     "(vassn_tag (hn_ctxt ?A ?x ?y) ==> ?P' ?x) ==>
      hn_ctxt ?A ?x ?y \<Longrightarrow>\<^sub>t
      hn_ctxt (b_assn ?A ?P') ?x ?y",
     template_implication
      ([template_implication
         ([template_predicate
            (
               template_app
                (template_hole 3,
                 template_app
                  (template_app
                    (template_app (template_hole 2, template_var 3),
                     template_var 2),
                   template_var 1))
               )],
          template_predicate
           (template_app (template_var 0, template_var 2)))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app
                  (template_app (template_hole 2, template_var 3),
                   template_var 2),
                 template_var 1)),
             template_app
              (template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app (template_hole 0, template_var 3),
                     template_var 0)),
                 template_var 2),
               template_var 1))
           ))),
    ("Sepref_HOL_Bindings.invalid_list_merge",
     "?A \<or>\<^sub>A
      hn_ctxt (list_assn (invalid_assn ?Aa)) ?l
       ?l' \<Longrightarrow>\<^sub>t
      ?C ==>
      ?A \<or>\<^sub>A
      hn_invalid (list_assn ?Aa) ?l ?l' \<Longrightarrow>\<^sub>t
      ?C",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, template_var 4),
                  template_app
                   (template_app
                     (template_app
                       (template_hole 3,
                        template_app
                         (template_hole 2,
                          template_app (template_hole 1, template_var 3))),
                      template_var 2),
                    template_var 1))),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 5,
               template_app
                (template_app (template_hole 4, template_var 4),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 3,
                       template_app
                        (template_hole 0,
                         template_app (template_hole 2, template_var 3))),
                     template_var 2),
                   template_var 1))),
             template_var 0)
           ))),
    ("Sepref_HOL_Bindings.invalid_list_merge",
     "hn_ctxt (list_assn (invalid_assn ?A)) ?l ?l' \<or>\<^sub>A
      ?B \<Longrightarrow>\<^sub>t
      ?C ==>
      hn_invalid (list_assn ?A) ?l ?l' \<or>\<^sub>A
      ?B \<Longrightarrow>\<^sub>t
      ?C",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app
                   (template_hole 4,
                    template_app
                     (template_app
                       (template_app
                         (template_hole 3,
                          template_app
                           (template_hole 2,
                            template_app
                             (template_hole 1, template_var 4))),
                        template_var 3),
                      template_var 2)),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 5,
               template_app
                (template_app
                  (template_hole 4,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 3,
                         template_app
                          (template_hole 0,
                           template_app (template_hole 2, template_var 4))),
                       template_var 3),
                     template_var 2)),
                 template_var 1)),
             template_var 0)
           ))),
    ("Sepref_HOL_Bindings.list_assn_mono",
     "(!!x x'. ?P x x' \<Longrightarrow>\<^sub>A ?P' x x') ==>
      list_assn ?P ?l ?l' \<Longrightarrow>\<^sub>A list_assn ?P' ?l ?l'",
     template_implication
      ([template_predicate (template_app (template_hole 4, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app
                  (template_app (template_hole 0, template_var 3),
                   template_var 1),
                 template_var 0)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 1),
               template_var 0))
           ))),
    ("Sepref_HOL_Bindings.list_assn_monot",
     "(!!x x'. ?P x x' \<Longrightarrow>\<^sub>t ?P' x x') ==>
      list_assn ?P ?l ?l' \<Longrightarrow>\<^sub>t list_assn ?P' ?l ?l'",
     template_implication
      ([template_predicate (template_app (template_hole 4, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app
                  (template_app (template_hole 0, template_var 3),
                   template_var 1),
                 template_var 0)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 2),
                 template_var 1),
               template_var 0))
           ))),
    ("Sepref_Frame.weaken_hnr_post",
     "[| WEAKEN_HNR_POST ?\<Gamma> ?P ?P';
         WEAKEN_HNR_POST ?\<Gamma>' ?Q ?Q' |]
      ==> WEAKEN_HNR_POST (?\<Gamma> * ?\<Gamma>') (?P * ?Q) (?P' * ?Q')",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 1, template_var 5),
                template_var 4),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 1, template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_var 5),
                   template_var 2)),
               template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 1)),
             template_app
              (template_app (template_hole 0, template_var 3),
               template_var 0))
           ))),
    ("Sepref_Frame.merge_mono",
     "[| ?A \<Longrightarrow>\<^sub>t ?A'; ?B \<Longrightarrow>\<^sub>t ?B';
         ?A' \<or>\<^sub>A ?B' \<Longrightarrow>\<^sub>t ?C |]
      ==> ?A \<or>\<^sub>A ?B \<Longrightarrow>\<^sub>t ?C",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 4),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 1,
                template_app
                 (template_app (template_hole 0, template_var 3),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 2)),
             template_var 0)
           ))),
    ("Sepref_Rules.norm_return_o",
     "(return \<circ>\<circ>\<circ> ?f) $ ?x $ ?y $ ?z =
      return $ (?f $ ?x $ ?y $ ?z)",
     template_equation
      (template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, t_empty), template_var 2)),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 3, template_hole 4),
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_var 3),
                   template_var 2)),
               template_var 1)),
           template_var 0)))),
    ("Sepref_Rules.norm_RETURN_o",
     "(RETURN \<circ>\<circ>\<circ> ?f) $ ?x $ ?y $ ?z =
      RETURN $ (?f $ ?x $ ?y $ ?z)",
     template_equation
      (template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, t_empty), template_var 2)),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 3, template_hole 4),
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_var 3),
                   template_var 2)),
               template_var 1)),
           template_var 0)))),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_ctxt ?A ?x ?xi) (return $ (Inl $ ?xi))
       (hn_invalid ?A ?x ?xi) (?A +\<^sub>a ?B) (RETURN $ (Inl $ ?x))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 11,
                   template_app
                    (template_app
                      (template_app (template_hole 10, template_var 3),
                       template_var 2),
                     template_var 1)),
                 template_app
                  (template_app (template_hole 9, template_hole 8),
                   template_app
                    (template_app (template_hole 7, template_hole 6),
                     template_var 1))),
               template_app
                (template_app
                  (template_app
                    (template_hole 10,
                     template_app (template_hole 5, template_var 3)),
                   template_var 2),
                 template_var 1)),
             template_app
              (template_app (template_hole 4, template_var 3),
               template_var 0)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 2)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_ctxt ?B ?x ?xi) (return $ (Inr $ ?xi))
       (hn_invalid ?B ?x ?xi) (?A +\<^sub>a ?B) (RETURN $ (Inr $ ?x))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 11,
                   template_app
                    (template_app
                      (template_app (template_hole 10, template_var 3),
                       template_var 2),
                     template_var 1)),
                 template_app
                  (template_app (template_hole 9, template_hole 8),
                   template_app
                    (template_app (template_hole 7, template_hole 6),
                     template_var 1))),
               template_app
                (template_app
                  (template_app
                    (template_hole 10,
                     template_app (template_hole 5, template_var 3)),
                   template_var 2),
                 template_var 1)),
             template_app
              (template_app (template_hole 4, template_var 0),
               template_var 3)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 2)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "CONSTRAINT is_pure ?S ==>
      hn_refine (hn_ctxt ?S ?x ?xi) (return $ ?xi) (hn_ctxt ?S ?x ?xi) ?S
       (RETURN $ (COPY $ ?x))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 9, template_hole 8),
              template_var 2)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_hole 7,
                     template_app
                      (template_app
                        (template_app (template_hole 6, template_var 2),
                         template_var 1),
                       template_var 0)),
                   template_app
                    (template_app (template_hole 5, template_hole 4),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app (template_hole 6, template_var 2),
                     template_var 1),
                   template_var 0)),
               template_var 2),
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_app
                (template_app (template_hole 1, template_hole 0),
                 template_var 1)))
           ))),
    ("Sepref_Foreach.list_rel_congD",
     "(?li, ?l) : \<langle>?S\<rangle>list_rel ==>
      (?li, ?l) : \<langle>?S Int set ?li \<times> set ?l\<rangle>list_rel",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app
                 (template_app (template_hole 6, template_var 2),
                  template_var 1)),
              template_app
               (template_app (template_hole 5, template_hole 4),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, template_var 2),
                 template_var 1)),
             template_app
              (template_app (template_hole 5, template_hole 4),
               template_app
                (template_app (template_hole 3, template_var 0),
                 template_app
                  (template_app
                    (template_hole 2,
                     template_app (template_hole 1, template_var 2)),
                   t_empty))))
           ))),
    ("Sepref_Basic.hn_refine_frame",
     "[| hn_refine ?P' ?c ?Q' ?R ?m;
         ?P \<Longrightarrow>\<^sub>t ?F * ?P' |]
      ==> hn_refine ?P ?c (?F * ?Q') ?R ?m",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 2, template_var 6),
                    template_var 5),
                  template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 1),
              template_app
               (template_app (template_hole 0, template_var 0),
                template_var 6))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 2, template_var 1),
                   template_var 5),
                 template_app
                  (template_app (template_hole 0, template_var 0),
                   template_var 4)),
               template_var 3),
             template_var 2)
           ))),
    ("Sepref_Intf_Util.hfref_mop_conv",
     "((?g, mop ?P ?f) : [?Q]\<^sub>a ?R \<rightarrow> ?S) =
      ((?g, ?f) : [%x. ?P x & ?Q x]\<^sub>a ?R \<rightarrow> ?S)",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 5),
             template_app
              (template_app (template_hole 2, template_var 4),
               template_var 3))),
         template_app
          (template_app
            (template_app (template_hole 1, template_var 2),
             template_var 1),
           template_var 0)),
       template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 5),
             template_var 3)),
         template_app
          (template_app
            (template_app (template_hole 1, t_empty), template_var 1),
           template_var 0)))),
    ("Sepref_Foreach.fold_eq_nfoldli_assert",
     "RETURN (fold ?f ?l ?s) =
      nfoldli ?l (%_. True)
       (%x s. ASSERT (x : set ?l) >>= (%_. RETURN (?f x s))) ?s",
     template_equation
      (template_app
        (template_hole 7,
         template_app
          (template_app
            (template_app (template_hole 6, template_var 2),
             template_var 1),
           template_var 0)),
       template_app
        (template_app
          (template_app
            (template_app (template_hole 5, template_var 1), t_empty),
           t_empty),
         template_var 0))),
    ("Sepref_Foreach.monadic_nfoldli_simp",
     "monadic_nfoldli (?x # ?ls) ?c ?f ?s =
      ?c ?s >>=
      (%b. if b then ?f ?x ?s >>= monadic_nfoldli ?ls ?c ?f
           else RETURN ?s)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app
              (template_hole 5,
               template_app
                (template_app (template_hole 4, template_var 4),
                 template_var 3)),
             template_var 2),
           template_var 1),
         template_var 0),
       template_app
        (template_app
          (template_hole 3, template_app (template_var 2, template_var 0)),
         t_empty))),
    ("Sepref_Foreach.nfoldli_alt_simp",
     "nfoldli_alt (?x # ?ls) ?c ?f ?s =
      (let b = ?c ?s
       in if b then ?f ?x ?s >>= nfoldli_alt ?ls ?c ?f else RETURN ?s)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app
              (template_hole 5,
               template_app
                (template_app (template_hole 4, template_var 4),
                 template_var 3)),
             template_var 2),
           template_var 1),
         template_var 0),
       template_app
        (template_app
          (template_hole 3, template_app (template_var 2, template_var 0)),
         t_empty))),
    ("Sepref_Rules.PRE_D2",
     "?Q ?x & (ALL y. (y, ?x) : ?S1.0 --> ?S ?x --> ?P ?x y) -->
      comp_PRE ?S1.0 ?Q ?P ?S ?x",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app
                (template_hole 4,
                 template_app (template_var 4, template_var 3)),
               template_app (template_hole 3, t_empty))),
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 2),
                   template_var 4),
                 template_var 0),
               template_var 1),
             template_var 3))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_ctxt ?S ?x ?xi) (return $ ((%x. x) $ ?xi))
       (hn_invalid ?S ?x ?xi) ?S
       (RETURN $ (PR_CONST (ASSN_ANNOT ?S) $ ?x))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_app (template_hole 9, template_var 2),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app (template_hole 8, template_hole 7),
                   template_app
                    (template_app (template_hole 6, t_empty),
                     template_var 0))),
               template_app
                (template_app
                  (template_app
                    (template_hole 9,
                     template_app (template_hole 5, template_var 2)),
                   template_var 1),
                 template_var 0)),
             template_var 2),
           template_app
            (template_app (template_hole 4, template_hole 3),
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_hole 1,
                   template_app (template_hole 0, template_var 2))),
               template_var 1)))
         )),
    ("Sepref_Rules.ensure_fref_nresI",
     "(?f, ?g) : [?P]\<^sub>f ?R \<rightarrow> ?S ==>
      (RETURN o ?f, RETURN o ?g)
      : [?P]\<^sub>f ?R \<rightarrow> \<langle>?S\<rangle>nres_rel",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 11,
                template_app
                 (template_app (template_hole 10, template_var 4),
                  template_var 3)),
              template_app
               (template_app
                 (template_app (template_hole 9, template_var 2),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 8,
               template_app
                (template_app
                  (template_hole 7,
                   template_app
                    (template_app (template_hole 6, template_hole 5),
                     template_var 4)),
                 template_app
                  (template_app (template_hole 4, template_hole 3),
                   template_var 3))),
             template_app
              (template_app
                (template_app (template_hole 2, template_var 2),
                 template_var 1),
               template_app
                (template_app (template_hole 1, template_hole 0),
                 template_var 0)))
           ))),
    ("Sepref_Rules.hfref_weaken_pre_nofail",
     "(?f, ?g) : [?P]\<^sub>a ?R \<rightarrow> ?S ==>
      (?f, ?g) : [%x. nofail (?g x) --> ?P x]\<^sub>a ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app
                 (template_app (template_hole 3, template_var 4),
                  template_var 3)),
              template_app
               (template_app
                 (template_app (template_hole 2, template_var 2),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_var 4),
                 template_var 3)),
             template_app
              (template_app
                (template_app (template_hole 2, t_empty), template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.hn_rel_compI",
     "[| nofail ?a; (?b, ?a) : \<langle>?R2.0\<rangle>nres_rel |]
      ==> hn_rel ?R1.0 ?b ?c \<Longrightarrow>\<^sub>A
          hn_rel (hr_comp ?R1.0 ?R2.0) ?a ?c",
     template_implication
      ([template_predicate (template_app (template_hole 8, template_var 4)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app
                 (template_app (template_hole 6, template_var 3),
                  template_var 4)),
              template_app
               (template_app (template_hole 5, template_hole 4),
                template_var 2))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app
                  (template_app (template_hole 2, template_var 1),
                   template_var 3),
                 template_var 0)),
             template_app
              (template_app
                (template_app
                  (template_hole 1,
                   template_app
                    (template_app (template_hole 0, template_var 1),
                     template_var 2)),
                 template_var 4),
               template_var 0))
           ))),
    ("Sepref_Basic.is_pureE",
     "[| is_pure ?P;
         !!P'. (!!x x'. ?P x x' = \<up> (P' x x')) ==> ?thesis |]
      ==> ?thesis",
     template_implication
      ([template_predicate (template_app (template_hole 5, template_var 1)),
        template_predicate (template_app (template_hole 4, t_empty))],
       template_predicate (template_var 0))),
    ("Sepref_Translate.cons_pre_rule",
     "[| CPR_TAG ?P ?P'; ?P \<Longrightarrow>\<^sub>t ?P';
         hn_refine ?P' ?c ?Q ?R ?m |]
      ==> hn_refine ?P ?c ?Q ?R ?m",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 2, template_var 5),
              template_var 4)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 5),
              template_var 4)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 0, template_var 4),
                    template_var 3),
                  template_var 2),
                template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 5),
                   template_var 3),
                 template_var 2),
               template_var 1),
             template_var 0)
           ))),
    ("Sepref_HOL_Bindings.b_rel_subtyping_merge_eqA",
     "hn_ctxt (b_assn ?A ?P) ?x ?y \<or>\<^sub>A
      hn_ctxt (b_assn ?A ?P') ?x ?y \<Longrightarrow>\<^sub>t
      hn_ctxt (b_assn ?A (%x. ?P x | ?P' x)) ?x ?y",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app
                    (template_app
                      (template_hole 2,
                       template_app
                        (template_app (template_hole 1, template_var 4),
                         template_var 3)),
                     template_var 2),
                   template_var 1)),
               template_app
                (template_app
                  (template_app
                    (template_hole 2,
                     template_app
                      (template_app (template_hole 1, template_var 4),
                       template_var 0)),
                   template_var 2),
                 template_var 1))),
           template_app
            (template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_var 4),
                   t_empty)),
               template_var 2),
             template_var 1))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_ctxt (?A \<times>\<^sub>a ?S) ?x ?xi)
       (return $ (snd $ ?xi)) (hn_invalid (?A \<times>\<^sub>a ?S) ?x ?xi)
       ?S (RETURN $ (snd $ ?x))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 11,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 10,
                         template_app
                          (template_app (template_hole 9, template_var 3),
                           template_var 2)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app (template_hole 8, template_hole 7),
                   template_app
                    (template_app (template_hole 6, template_hole 5),
                     template_var 0))),
               template_app
                (template_app
                  (template_app
                    (template_hole 10,
                     template_app
                      (template_hole 4,
                       template_app
                        (template_app (template_hole 9, template_var 3),
                         template_var 2))),
                   template_var 1),
                 template_var 0)),
             template_var 2),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 1)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_ctxt (?S \<times>\<^sub>a ?B) ?x ?xi)
       (return $ (fst $ ?xi)) (hn_invalid (?S \<times>\<^sub>a ?B) ?x ?xi)
       ?S (RETURN $ (fst $ ?x))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 11,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 10,
                         template_app
                          (template_app (template_hole 9, template_var 3),
                           template_var 2)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app (template_hole 8, template_hole 7),
                   template_app
                    (template_app (template_hole 6, template_hole 5),
                     template_var 0))),
               template_app
                (template_app
                  (template_app
                    (template_hole 10,
                     template_app
                      (template_hole 4,
                       template_app
                        (template_app (template_hole 9, template_var 3),
                         template_var 2))),
                   template_var 1),
                 template_var 0)),
             template_var 3),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 1)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_ctxt (?A +\<^sub>a ?B) ?x ?xi) (return $ (isl $ ?xi))
       (hn_ctxt (?A +\<^sub>a ?B) ?x ?xi) bool_assn (RETURN $ (isl $ ?x))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 12,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 11,
                         template_app
                          (template_app (template_hole 10, template_var 3),
                           template_var 2)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app (template_hole 9, template_hole 8),
                   template_app
                    (template_app (template_hole 7, template_hole 6),
                     template_var 0))),
               template_app
                (template_app
                  (template_app
                    (template_hole 11,
                     template_app
                      (template_app (template_hole 10, template_var 3),
                       template_var 2)),
                   template_var 1),
                 template_var 0)),
             template_app (template_hole 5, template_hole 4)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app (template_hole 1, template_hole 0),
               template_var 1)))
         )),
    ("Sepref_HOL_Bindings.list_assn_aux_append",
     "length ?l1.0 = length ?l1' ==>
      list_assn ?P (?l1.0 @ ?l2.0) (?l1' @ ?l2') =
      list_assn ?P ?l1.0 ?l1' * list_assn ?P ?l2.0 ?l2'",
     template_implication
      ([template_equation
         (template_app (template_hole 6, template_var 4),
          template_app (template_hole 5, template_var 3))],
       template_equation
        (template_app
          (template_app
            (template_app (template_hole 3, template_var 2),
             template_app
              (template_app (template_hole 2, template_var 4),
               template_var 1)),
           template_app
            (template_app (template_hole 1, template_var 3),
             template_var 0)),
         template_app
          (template_app
            (template_hole 0,
             template_app
              (template_app
                (template_app (template_hole 3, template_var 2),
                 template_var 4),
               template_var 3)),
           template_app
            (template_app
              (template_app (template_hole 3, template_var 2),
               template_var 1),
             template_var 0))))),
    ("Sepref_HOL_Bindings.list_assn_aux_append2",
     "length ?l2.0 = length ?l2' ==>
      list_assn ?P (?l1.0 @ ?l2.0) (?l1' @ ?l2') =
      list_assn ?P ?l1.0 ?l1' * list_assn ?P ?l2.0 ?l2'",
     template_implication
      ([template_equation
         (template_app (template_hole 6, template_var 4),
          template_app (template_hole 5, template_var 3))],
       template_equation
        (template_app
          (template_app
            (template_app (template_hole 3, template_var 2),
             template_app
              (template_app (template_hole 2, template_var 1),
               template_var 4)),
           template_app
            (template_app (template_hole 1, template_var 0),
             template_var 3)),
         template_app
          (template_app
            (template_hole 0,
             template_app
              (template_app
                (template_app (template_hole 3, template_var 2),
                 template_var 1),
               template_var 0)),
           template_app
            (template_app
              (template_app (template_hole 3, template_var 2),
               template_var 4),
             template_var 3))))),
    ("Sepref_HOL_Bindings.invalid_sum_merge",
     "?A \<or>\<^sub>A
      hn_ctxt (invalid_assn ?Aa +\<^sub>a invalid_assn ?B) ?e
       ?e' \<Longrightarrow>\<^sub>t
      ?C ==>
      ?A \<or>\<^sub>A
      hn_invalid (?Aa +\<^sub>a ?B) ?e ?e' \<Longrightarrow>\<^sub>t
      ?C",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_app (template_hole 5, template_var 5),
                  template_app
                   (template_app
                     (template_app
                       (template_hole 4,
                        template_app
                         (template_app
                           (template_hole 3,
                            template_app (template_hole 2, template_var 4)),
                          template_app (template_hole 1, template_var 3))),
                      template_var 2),
                    template_var 1))),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app (template_hole 5, template_var 5),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 4,
                       template_app
                        (template_hole 0,
                         template_app
                          (template_app (template_hole 3, template_var 4),
                           template_var 3))),
                     template_var 2),
                   template_var 1))),
             template_var 0)
           ))),
    ("Sepref_HOL_Bindings.invalid_prod_merge",
     "?A \<or>\<^sub>A
      hn_ctxt (invalid_assn ?Aa \<times>\<^sub>a invalid_assn ?B) ?p
       ?p' \<Longrightarrow>\<^sub>t
      ?C ==>
      ?A \<or>\<^sub>A
      hn_invalid (?Aa \<times>\<^sub>a ?B) ?p ?p' \<Longrightarrow>\<^sub>t
      ?C",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_app (template_hole 5, template_var 5),
                  template_app
                   (template_app
                     (template_app
                       (template_hole 4,
                        template_app
                         (template_app
                           (template_hole 3,
                            template_app (template_hole 2, template_var 4)),
                          template_app (template_hole 1, template_var 3))),
                      template_var 2),
                    template_var 1))),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app (template_hole 5, template_var 5),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 4,
                       template_app
                        (template_hole 0,
                         template_app
                          (template_app (template_hole 3, template_var 4),
                           template_var 3))),
                     template_var 2),
                   template_var 1))),
             template_var 0)
           ))),
    ("Sepref_HOL_Bindings.invalid_sum_merge",
     "hn_ctxt (invalid_assn ?A +\<^sub>a invalid_assn ?Ba) ?e
       ?e' \<or>\<^sub>A
      ?B \<Longrightarrow>\<^sub>t
      ?C ==>
      hn_invalid (?A +\<^sub>a ?Ba) ?e ?e' \<or>\<^sub>A
      ?B \<Longrightarrow>\<^sub>t
      ?C",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_app
                   (template_hole 5,
                    template_app
                     (template_app
                       (template_app
                         (template_hole 4,
                          template_app
                           (template_app
                             (template_hole 3,
                              template_app
                               (template_hole 2, template_var 5)),
                            template_app
                             (template_hole 1, template_var 4))),
                        template_var 3),
                      template_var 2)),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app
                  (template_hole 5,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 4,
                         template_app
                          (template_hole 0,
                           template_app
                            (template_app (template_hole 3, template_var 5),
                             template_var 4))),
                       template_var 3),
                     template_var 2)),
                 template_var 1)),
             template_var 0)
           ))),
    ("Sepref_HOL_Bindings.invalid_prod_merge",
     "hn_ctxt (invalid_assn ?A \<times>\<^sub>a invalid_assn ?Ba) ?p
       ?p' \<or>\<^sub>A
      ?B \<Longrightarrow>\<^sub>t
      ?C ==>
      hn_invalid (?A \<times>\<^sub>a ?Ba) ?p ?p' \<or>\<^sub>A
      ?B \<Longrightarrow>\<^sub>t
      ?C",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_app
                   (template_hole 5,
                    template_app
                     (template_app
                       (template_app
                         (template_hole 4,
                          template_app
                           (template_app
                             (template_hole 3,
                              template_app
                               (template_hole 2, template_var 5)),
                            template_app
                             (template_hole 1, template_var 4))),
                        template_var 3),
                      template_var 2)),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app
                  (template_hole 5,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 4,
                         template_app
                          (template_hole 0,
                           template_app
                            (template_app (template_hole 3, template_var 5),
                             template_var 4))),
                       template_var 3),
                     template_var 2)),
                 template_var 1)),
             template_var 0)
           ))),
    ("Sepref_Frame.ent_disj_star_mono",
     "[| ?A \<or>\<^sub>A ?C \<Longrightarrow>\<^sub>A ?E;
         ?B \<or>\<^sub>A ?D \<Longrightarrow>\<^sub>A ?F |]
      ==> ?A * ?B \<or>\<^sub>A ?C * ?D \<Longrightarrow>\<^sub>A ?E * ?F",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 5),
                  template_var 4)),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_hole 1,
                   template_app
                    (template_app (template_hole 0, template_var 5),
                     template_var 2)),
                 template_app
                  (template_app (template_hole 0, template_var 4),
                   template_var 1))),
             template_app
              (template_app (template_hole 0, template_var 3),
               template_var 0))
           ))),
    ("Sepref_Frame.entt_disj_star_mono",
     "[| ?A \<or>\<^sub>A ?C \<Longrightarrow>\<^sub>t ?E;
         ?B \<or>\<^sub>A ?D \<Longrightarrow>\<^sub>t ?F |]
      ==> ?A * ?B \<or>\<^sub>A ?C * ?D \<Longrightarrow>\<^sub>t ?E * ?F",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 5),
                  template_var 4)),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_hole 1,
                   template_app
                    (template_app (template_hole 0, template_var 5),
                     template_var 2)),
                 template_app
                  (template_app (template_hole 0, template_var 4),
                   template_var 1))),
             template_app
              (template_app (template_hole 0, template_var 3),
               template_var 0))
           ))),
    ("Sepref_Rules.rel2p_fref",
     "rel2p ([?P]\<^sub>f ?R \<rightarrow> ?S) =
      (%f g. ALL x y. ?P y --> rel2p ?R x y --> rel2p ?S (f x) (g y))",
     template_equation
      (template_app
        (template_hole 6,
         template_app
          (template_app
            (template_app (template_hole 5, template_var 2),
             template_var 1),
           template_var 0)),
       t_empty)),
    ("Sepref_HOL_Bindings.list_assn_aux_cons_conv2",
     "list_assn ?R ?l (?b # ?m) =
      (\<exists>\<^sub>Aa l'.
          ?R a ?b * list_assn ?R l' ?m * \<up> (?l = a # l'))",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 7, template_var 3), template_var 2),
         template_app
          (template_app (template_hole 6, template_var 1), template_var 0)),
       template_app (template_hole 5, t_empty))),
    ("Sepref_HOL_Bindings.list_assn_aux_cons_conv1",
     "list_assn ?R (?a # ?l) ?m =
      (\<exists>\<^sub>Ab m'.
          ?R ?a b * list_assn ?R ?l m' * \<up> (?m = b # m'))",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 7, template_var 3),
           template_app
            (template_app (template_hole 6, template_var 2),
             template_var 1)),
         template_var 0),
       template_app (template_hole 5, t_empty))),
    ("Sepref_Foreach.imp_nfoldli_simps",
     "imp_nfoldli (?x # ?ls) ?c ?f ?s =
      ?c ?s >>=
      (%b. if b then ?f ?x ?s >>= imp_nfoldli ?ls ?c ?f else return ?s)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app
              (template_hole 5,
               template_app
                (template_app (template_hole 4, template_var 4),
                 template_var 3)),
             template_var 2),
           template_var 1),
         template_var 0),
       template_app
        (template_app
          (template_hole 3, template_app (template_var 2, template_var 0)),
         t_empty))),
    ("Sepref_HOL_Bindings.sepref_the_id",
     "CONSTRAINT (IS_PURE IS_ID) ?R ==>
      hn_refine (hn_ctxt (option_assn ?R) ?x ?xi) (return (the ?xi))
       (hn_ctxt (option_assn ?R) ?x ?xi) ?R (RETURN $ (the $ ?x))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 10,
                template_app (template_hole 9, template_hole 8)),
              template_var 2)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_hole 7,
                     template_app
                      (template_app
                        (template_app
                          (template_hole 6,
                           template_app (template_hole 5, template_var 2)),
                         template_var 1),
                       template_var 0)),
                   template_app
                    (template_hole 4,
                     template_app (template_hole 3, template_var 0))),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 6,
                       template_app (template_hole 5, template_var 2)),
                     template_var 1),
                   template_var 0)),
               template_var 2),
             template_app
              (template_app (template_hole 2, template_hole 1),
               template_app
                (template_app (template_hole 0, template_hole 3),
                 template_var 1)))
           ))),
    ("Sepref_Rules.hfref_PRE_D3",
     "(?f, ?h) : [comp_PRE ?S1.0 ?Q ?P ?X]\<^sub>a ?R \<rightarrow> ?S ==>
      (?f, ?h) : [comp_PRE ?S1.0 ?Q ?P ?X]\<^sub>a ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app (template_hole 2, template_var 7),
                  template_var 6)),
              template_app
               (template_app
                 (template_app
                   (template_hole 1,
                    template_app
                     (template_app
                       (template_app
                         (template_app (template_hole 0, template_var 5),
                          template_var 4),
                        template_var 3),
                      template_var 2)),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app (template_hole 2, template_var 7),
                 template_var 6)),
             template_app
              (template_app
                (template_app
                  (template_hole 1,
                   template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 0, template_var 5),
                         template_var 4),
                       template_var 3),
                     template_var 2)),
                 template_var 1),
               template_var 0))
           ))),
    ("Sepref_Foreach.imp_nfoldli_mono",
     "(!!x \<sigma>. mono_Heap (%fa. ?f fa x \<sigma>)) ==>
      mono_Heap (%x. imp_nfoldli ?l ?c (?f x) ?\<sigma>)",
     template_implication
      ([template_predicate (template_app (template_hole 7, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 4,
                 template_app (template_hole 3, template_hole 2)),
               template_hole 1),
             t_empty)
           ))),
    ("Sepref_HOL_Bindings.b_assn_subtyping_match_tR",
     "(?P ?x ==>
       hn_ctxt ?A ?x ?y \<Longrightarrow>\<^sub>t hn_ctxt ?A' ?x ?y) ==>
      hn_ctxt (b_assn ?A ?P) ?x ?y \<Longrightarrow>\<^sub>t
      hn_ctxt ?A' ?x ?y",
     template_implication
      ([template_implication
         ([template_predicate
            (template_app (template_var 4, template_var 3))],
          template_predicate
           (
              template_app
               (template_app
                 (template_hole 2,
                  template_app
                   (template_app
                     (template_app (template_hole 1, template_var 2),
                      template_var 3),
                    template_var 1)),
                template_app
                 (template_app
                   (template_app (template_hole 1, template_var 0),
                    template_var 3),
                  template_var 1))
              ))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app
                  (template_app
                    (template_hole 1,
                     template_app
                      (template_app (template_hole 0, template_var 2),
                       template_var 4)),
                   template_var 3),
                 template_var 1)),
             template_app
              (template_app
                (template_app (template_hole 1, template_var 0),
                 template_var 3),
               template_var 1))
           ))),
    ("Sepref_Tool.prec_spec_splitE",
     "[| prec_spec ?h (?A * ?B) (?C * ?D);
         [| prec_spec ?h ?A ?C; prec_spec ?h ?B ?D |] ==> ?thesis |]
      ==> ?thesis",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 1, template_var 5),
                template_app
                 (template_app (template_hole 0, template_var 4),
                  template_var 3)),
              template_app
               (template_app (template_hole 0, template_var 2),
                template_var 1))
            ),
        template_implication
         ([template_predicate
            (
               template_app
                (template_app
                  (template_app (template_hole 1, template_var 5),
                   template_var 4),
                 template_var 2)
               )],
          template_implication
           ([template_predicate
              (
                 template_app
                  (template_app
                    (template_app (template_hole 1, template_var 5),
                     template_var 3),
                   template_var 1)
                 )],
            template_predicate (template_var 0)))],
       template_predicate (template_var 0))),
    ("Sepref_HOL_Bindings.b_assn_invalid_merge5",
     "hn_ctxt (b_assn ?A ?P') ?x ?y \<or>\<^sub>A
      hn_invalid (b_assn ?A ?P) ?x ?y \<Longrightarrow>\<^sub>t
      hn_invalid (b_assn ?A (%x. ?P x | ?P' x)) ?x ?y",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app
                (template_hole 4,
                 template_app
                  (template_app
                    (template_app
                      (template_hole 3,
                       template_app
                        (template_app (template_hole 2, template_var 4),
                         template_var 3)),
                     template_var 2),
                   template_var 1)),
               template_app
                (template_app
                  (template_app
                    (template_hole 3,
                     template_app
                      (template_hole 1,
                       template_app
                        (template_app (template_hole 2, template_var 4),
                         template_var 0))),
                   template_var 2),
                 template_var 1))),
           template_app
            (template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_hole 1,
                   template_app
                    (template_app (template_hole 2, template_var 4),
                     t_empty))),
               template_var 2),
             template_var 1))
         )),
    ("Sepref_HOL_Bindings.b_assn_invalid_merge4",
     "hn_invalid (b_assn ?A ?P) ?x ?y \<or>\<^sub>A
      hn_ctxt (b_assn ?A ?P') ?x ?y \<Longrightarrow>\<^sub>t
      hn_invalid (b_assn ?A (%x. ?P x | ?P' x)) ?x ?y",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app
                (template_hole 4,
                 template_app
                  (template_app
                    (template_app
                      (template_hole 3,
                       template_app
                        (template_hole 2,
                         template_app
                          (template_app (template_hole 1, template_var 4),
                           template_var 3))),
                     template_var 2),
                   template_var 1)),
               template_app
                (template_app
                  (template_app
                    (template_hole 3,
                     template_app
                      (template_app (template_hole 1, template_var 4),
                       template_var 0)),
                   template_var 2),
                 template_var 1))),
           template_app
            (template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_hole 2,
                   template_app
                    (template_app (template_hole 1, template_var 4),
                     t_empty))),
               template_var 2),
             template_var 1))
         )),
    ("Sepref_HOL_Bindings.list_assn_aux_append_conv2",
     "list_assn ?R ?l (?m1.0 @ ?m2.0) =
      (\<exists>\<^sub>Al1 l2.
          list_assn ?R l1 ?m1.0 * list_assn ?R l2 ?m2.0 *
          \<up> (?l = l1 @ l2))",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 6, template_var 3), template_var 2),
         template_app
          (template_app (template_hole 5, template_var 1), template_var 0)),
       template_app (template_hole 4, t_empty))),
    ("Sepref_HOL_Bindings.list_assn_aux_append_conv1",
     "list_assn ?R (?l1.0 @ ?l2.0) ?m =
      (\<exists>\<^sub>Am1 m2.
          list_assn ?R ?l1.0 m1 * list_assn ?R ?l2.0 m2 *
          \<up> (?m = m1 @ m2))",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 6, template_var 3),
           template_app
            (template_app (template_hole 5, template_var 2),
             template_var 1)),
         template_var 0),
       template_app (template_hole 4, t_empty))),
    ("Sepref_HOL_Bindings.Literal_hnr",
     "hn_refine emp
       (return
         (String.Literal ?b0.5 ?b1.5 ?b2.5 ?b3.5 ?b4.5 ?b5.5 ?b6.5 ?s5))
       emp id_assn
       (RETURN $
        PR_CONST
         (String.Literal ?b0.5 ?b1.5 ?b2.5 ?b3.5 ?b4.5 ?b5.5 ?b6.5 ?s5))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app (template_hole 8, template_hole 7),
                 template_app
                  (template_hole 6,
                   template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_app
                                  (template_hole 5, template_var 7),
                                 template_var 6),
                               template_var 5),
                             template_var 4),
                           template_var 3),
                         template_var 2),
                       template_var 1),
                     template_var 0))),
               template_hole 7),
             template_app (template_hole 4, template_hole 3)),
           template_app
            (template_app (template_hole 2, template_hole 1),
             template_app
              (template_hole 0,
               template_app
                (template_app
                  (template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app
                            (template_app (template_hole 5, template_var 7),
                             template_var 6),
                           template_var 5),
                         template_var 4),
                       template_var 3),
                     template_var 2),
                   template_var 1),
                 template_var 0))))
         )),
    ("Sepref_HOL_Bindings.sepref_the_complete",
     "?x ~= None ==>
      hn_refine (hn_ctxt (option_assn ?R) ?x ?xi) (return (the ?xi))
       (hn_invalid (option_assn ?R) ?x ?xi) ?R (RETURN $ (the $ ?x))",
     template_implication
      ([template_negation
         (template_equation (template_var 2, template_hole 10))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_hole 9,
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_var 1)),
                         template_var 2),
                       template_var 0)),
                   template_app
                    (template_hole 6,
                     template_app (template_hole 5, template_var 0))),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app
                        (template_hole 4,
                         template_app (template_hole 7, template_var 1))),
                     template_var 2),
                   template_var 0)),
               template_var 1),
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_app
                (template_app (template_hole 1, template_hole 0),
                 template_var 2)))
           ))),
    ("Sepref_Foreach.nfoldli_assert",
     "set ?l <= ?S ==>
      nfoldli ?l ?c (%x s. ASSERT (x : ?S) >>= (%_. ?f x s)) ?s =
      nfoldli ?l ?c ?f ?s",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 5, template_var 4),
          template_var 3)],
       template_equation
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 3, template_var 4),
               template_var 2),
             t_empty),
           template_var 0),
         template_app
          (template_app
            (template_app
              (template_app (template_hole 3, template_var 4),
               template_var 2),
             template_var 1),
           template_var 0)))),
    ("Sepref_Foreach.monadic_nfoldli_assert_aux",
     "set ?l <= ?S ==>
      monadic_nfoldli ?l ?c (%x s. ASSERT (x : ?S) >>= (%_. ?f x s)) ?s =
      monadic_nfoldli ?l ?c ?f ?s",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 5, template_var 4),
          template_var 3)],
       template_equation
        (template_app
          (template_app
            (template_app
              (template_app (template_hole 3, template_var 4),
               template_var 2),
             t_empty),
           template_var 0),
         template_app
          (template_app
            (template_app
              (template_app (template_hole 3, template_var 4),
               template_var 2),
             template_var 1),
           template_var 0)))),
    ("Sepref_Foreach.imp_foreach_mono",
     "(!!x \<sigma>. mono_Heap (%fa. ?f fa x \<sigma>)) ==>
      mono_Heap (%x. imp_foreach ?tsl ?l ?c (?f x) ?\<sigma>)",
     template_implication
      ([template_predicate (template_app (template_hole 7, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 4,
                 template_app (template_hole 3, template_hole 2)),
               template_hole 1),
             t_empty)
           ))),
    ("Sepref_Translate.trans_frame_rule",
     "[| RECOVER_PURE ?\<Gamma> ?\<Gamma>';
         vassn_tag ?\<Gamma>' ==>
         hn_refine ?\<Gamma>' ?c ?\<Gamma>'' ?R ?a |]
      ==> hn_refine (?F * ?\<Gamma>) ?c (?F * ?\<Gamma>'') ?R ?a",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 3, template_var 6),
              template_var 5)
            ),
        template_implication
         ([template_predicate
            (template_app (template_hole 2, template_var 5))],
          template_predicate
           (
              template_app
               (template_app
                 (template_app
                   (template_app
                     (template_app (template_hole 1, template_var 5),
                      template_var 4),
                    template_var 3),
                  template_var 2),
                template_var 1)
              ))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_hole 1,
                     template_app
                      (template_app (template_hole 0, template_var 0),
                       template_var 6)),
                   template_var 4),
                 template_app
                  (template_app (template_hole 0, template_var 0),
                   template_var 3)),
               template_var 2),
             template_var 1)
           ))),
    ("Sepref_Basic.hn_refine_cons_res",
     "[| hn_refine ?\<Gamma> ?f ?\<Gamma>' ?R ?g;
         !!a c. ?R a c \<Longrightarrow>\<^sub>t ?R' a c |]
      ==> hn_refine ?\<Gamma> ?f ?\<Gamma>' ?R' ?g",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 3, template_var 5),
                    template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_predicate (template_app (template_hole 2, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 3, template_var 5),
                   template_var 4),
                 template_var 3),
               template_var 0),
             template_var 1)
           ))),
    ("Sepref_Rules.fref_weaken_pre",
     "[| !!x. ?P x --> ?P' x;
         (?f, ?h) : [?P']\<^sub>f ?R \<rightarrow> ?S |]
      ==> (?f, ?h) : [?P]\<^sub>f ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate (template_app (template_hole 5, t_empty)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 3),
                  template_var 2)),
              template_app
               (template_app
                 (template_app (template_hole 0, template_var 4),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 3),
                 template_var 2)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 5),
                 template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.hfref_weaken_pre",
     "[| !!x. ?P x --> ?P' x;
         (?f, ?h) : [?P']\<^sub>a ?R \<rightarrow> ?S |]
      ==> (?f, ?h) : [?P]\<^sub>a ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate (template_app (template_hole 5, t_empty)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 3),
                  template_var 2)),
              template_app
               (template_app
                 (template_app (template_hole 0, template_var 4),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 3),
                 template_var 2)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 5),
                 template_var 1),
               template_var 0))
           ))),
    ("Sepref_HOL_Bindings.b_assn_invalid_merge1",
     "hn_invalid (b_assn ?A ?P) ?x ?y \<or>\<^sub>A
      hn_invalid (b_assn ?A ?P') ?x ?y \<Longrightarrow>\<^sub>t
      hn_invalid (b_assn ?A (%x. ?P x | ?P' x)) ?x ?y",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app
                (template_hole 4,
                 template_app
                  (template_app
                    (template_app
                      (template_hole 3,
                       template_app
                        (template_hole 2,
                         template_app
                          (template_app (template_hole 1, template_var 4),
                           template_var 3))),
                     template_var 2),
                   template_var 1)),
               template_app
                (template_app
                  (template_app
                    (template_hole 3,
                     template_app
                      (template_hole 2,
                       template_app
                        (template_app (template_hole 1, template_var 4),
                         template_var 0))),
                   template_var 2),
                 template_var 1))),
           template_app
            (template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_hole 2,
                   template_app
                    (template_app (template_hole 1, template_var 4),
                     t_empty))),
               template_var 2),
             template_var 1))
         )),
    ("Sepref_Foreach.monadic_nfoldli_eq",
     "monadic_nfoldli ?l ?c ?f ?s =
      (case ?l of [] => RETURN ?s
       | x # ls =>
           ?c ?s >>=
           (%b. if b then ?f x ?s >>= monadic_nfoldli ls ?c ?f
                else RETURN ?s))",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app (template_hole 5, template_var 3),
             template_var 2),
           template_var 1),
         template_var 0),
       template_app
        (template_app
          (template_app
            (template_hole 4,
             template_app (template_hole 3, template_var 0)),
           t_empty),
         template_var 3))),
    ("Sepref_Foreach.nfoldli_alt_eq",
     "nfoldli_alt ?l ?c ?f ?s =
      (case ?l of [] => RETURN ?s
       | x # ls =>
           let b = ?c ?s
           in if b then ?f x ?s >>= nfoldli_alt ls ?c ?f else RETURN ?s)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app (template_hole 5, template_var 3),
             template_var 2),
           template_var 1),
         template_var 0),
       template_app
        (template_app
          (template_app
            (template_hole 4,
             template_app (template_hole 3, template_var 0)),
           t_empty),
         template_var 3))),
    ("Sepref_HOL_Bindings.b_assn_subtyping_match_eqA",
     "([| vassn_tag (hn_ctxt ?A ?x ?y); ?P ?x |] ==> ?P' ?x) ==>
      hn_ctxt (b_assn ?A ?P) ?x ?y \<Longrightarrow>\<^sub>t
      hn_ctxt (b_assn ?A ?P') ?x ?y",
     template_implication
      ([template_implication
         ([template_predicate
            (
               template_app
                (template_hole 3,
                 template_app
                  (template_app
                    (template_app (template_hole 2, template_var 4),
                     template_var 3),
                   template_var 2))
               )],
          template_implication
           ([template_predicate
              (template_app (template_var 1, template_var 3))],
            template_predicate
             (template_app (template_var 0, template_var 3))))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app
                  (template_app
                    (template_hole 2,
                     template_app
                      (template_app (template_hole 0, template_var 4),
                       template_var 1)),
                   template_var 3),
                 template_var 2)),
             template_app
              (template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app (template_hole 0, template_var 4),
                     template_var 0)),
                 template_var 3),
               template_var 2))
           ))),
    ("Sepref_Translate.hn_ASSUME_bind",
     "[| vassn_tag ?\<Gamma> ==> ?I;
         ?I ==> hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R ?m |]
      ==> hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R
           (PR_CONST (op_ASSUME_bind ?I) $ ?m)",
     template_implication
      ([template_implication
         ([template_predicate
            (template_app (template_hole 4, template_var 5))],
          template_predicate (template_var 4)),
        template_implication
         ([template_predicate (template_var 4)],
          template_predicate
           (
              template_app
               (template_app
                 (template_app
                   (template_app
                     (template_app (template_hole 3, template_var 5),
                      template_var 3),
                    template_var 2),
                  template_var 1),
                template_var 0)
              ))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 3, template_var 5),
                   template_var 3),
                 template_var 2),
               template_var 1),
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_hole 1,
                   template_app (template_hole 0, template_var 4))),
               template_var 0))
           ))),
    ("Sepref_Rules.hfrefD",
     "[| (?f, ?g) : [?P]\<^sub>a ?RS \<rightarrow> ?T; ?P ?a |]
      ==> hn_refine (fst ?RS ?a ?c) (?f ?c) (snd ?RS ?a ?c) ?T (?g ?a)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, template_var 6),
                  template_var 5)),
              template_app
               (template_app
                 (template_app (template_hole 3, template_var 4),
                  template_var 3),
                template_var 2))
            ),
        template_predicate (template_app (template_var 4, template_var 1))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_hole 2,
                     template_app
                      (template_app
                        (template_app (template_hole 1, template_var 3),
                         template_var 1),
                       template_var 0)),
                   template_app (template_var 6, template_var 0)),
                 template_app
                  (template_app
                    (template_app (template_hole 0, template_var 3),
                     template_var 1),
                   template_var 0)),
               template_var 2),
             template_app (template_var 5, template_var 1))
           ))),
    ("Sepref_Rules.auto_weaken_pre_init_f",
     "[| !!x. PROTECT ?P x --> ?P' x;
         (?f, ?h) : [?P']\<^sub>f ?R \<rightarrow> ?S |]
      ==> (?f, ?h) : [?P]\<^sub>f ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate (template_app (template_hole 6, t_empty)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 3),
                  template_var 2)),
              template_app
               (template_app
                 (template_app (template_hole 0, template_var 4),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 3),
                 template_var 2)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 5),
                 template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.auto_weaken_pre_init_hf",
     "[| !!x. PROTECT ?P x --> ?P' x;
         (?f, ?h) : [?P']\<^sub>a ?R \<rightarrow> ?S |]
      ==> (?f, ?h) : [?P]\<^sub>a ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate (template_app (template_hole 6, t_empty)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 3),
                  template_var 2)),
              template_app
               (template_app
                 (template_app (template_hole 0, template_var 4),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 3),
                 template_var 2)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 5),
                 template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.frefD",
     "[| (?f, ?g) : [?P]\<^sub>f ?R \<rightarrow> ?S; ?P ?y;
         (?x, ?y) : ?R |]
      ==> (?f ?x, ?g ?y) : ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_app (template_hole 5, template_var 6),
                  template_var 5)),
              template_app
               (template_app
                 (template_app (template_hole 4, template_var 4),
                  template_var 3),
                template_var 2))
            ),
        template_predicate (template_app (template_var 4, template_var 1)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app (template_hole 2, template_var 0),
                  template_var 1)),
              template_var 3)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app
                  (template_hole 0,
                   template_app (template_var 6, template_var 0)),
                 template_app (template_var 5, template_var 1))),
             template_var 2)
           ))),
    ("Sepref_Rules.norm_return_o",
     "(%x. return \<circ>\<circ>\<circ> ?f x) $ ?x $ ?y $ ?z $ ?a =
      return $ (?f $ ?x $ ?y $ ?z $ ?a)",
     template_equation
      (template_app
        (template_app
          (template_hole 10,
           template_app
            (template_app
              (template_hole 9,
               template_app
                (template_app
                  (template_hole 8,
                   template_app
                    (template_app (template_hole 7, t_empty),
                     template_var 3)),
                 template_var 2)),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 4, template_hole 5),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app
                    (template_hole 1,
                     template_app
                      (template_app (template_hole 0, template_var 4),
                       template_var 3)),
                   template_var 2)),
               template_var 1)),
           template_var 0)))),
    ("Sepref_Rules.norm_RETURN_o",
     "(%x. RETURN \<circ>\<circ>\<circ> ?f x) $ ?x $ ?y $ ?z $ ?a =
      RETURN $ (?f $ ?x $ ?y $ ?z $ ?a)",
     template_equation
      (template_app
        (template_app
          (template_hole 10,
           template_app
            (template_app
              (template_hole 9,
               template_app
                (template_app
                  (template_hole 8,
                   template_app
                    (template_app (template_hole 7, t_empty),
                     template_var 3)),
                 template_var 2)),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 4, template_hole 5),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app
                    (template_hole 1,
                     template_app
                      (template_app (template_hole 0, template_var 4),
                       template_var 3)),
                   template_var 2)),
               template_var 1)),
           template_var 0)))),
    ("Sepref_Translate.sepref_fr_rules",
     "isl ?x ==>
      hn_refine (hn_ctxt (?S +\<^sub>a ?B) ?x ?xi) (return $ (projl $ ?xi))
       (hn_invalid (?S +\<^sub>a ?B) ?x ?xi) ?S (RETURN $ (projl $ ?x))",
     template_implication
      ([template_predicate
         (template_app (template_hole 12, template_var 3))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_hole 11,
                     template_app
                      (template_app
                        (template_app
                          (template_hole 10,
                           template_app
                            (template_app (template_hole 9, template_var 2),
                             template_var 1)),
                         template_var 3),
                       template_var 0)),
                   template_app
                    (template_app (template_hole 8, template_hole 7),
                     template_app
                      (template_app (template_hole 6, template_hole 5),
                       template_var 0))),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 10,
                       template_app
                        (template_hole 4,
                         template_app
                          (template_app (template_hole 9, template_var 2),
                           template_var 1))),
                     template_var 3),
                   template_var 0)),
               template_var 2),
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_app
                (template_app (template_hole 1, template_hole 0),
                 template_var 3)))
           ))),
    ("Sepref_Basic.hn_refine_augment_res",
     "[| hn_refine ?\<Gamma> ?f ?\<Gamma>' ?R ?g;
         ?g \<le>\<^sub>n SPEC ?\<Phi> |]
      ==> hn_refine ?\<Gamma> ?f ?\<Gamma>'
           (%a c. ?R a c * \<up> (?\<Phi> a)) ?g",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 5, template_var 5),
                    template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 4, template_var 1),
              template_app
               (template_hole 3,
                template_app (template_hole 2, template_var 0)))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 5, template_var 5),
                   template_var 4),
                 template_var 3),
               t_empty),
             template_var 1)
           ))),
    ("Sepref_Translate.to_import_frefD",
     "[| (?f, ?g) : [?P]\<^sub>f ?R \<rightarrow> ?S; PROTECT (?P ?y);
         (?x, ?y) : ?R |]
      ==> (?f ?x, ?g ?y) : ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app
                 (template_app (template_hole 6, template_var 6),
                  template_var 5)),
              template_app
               (template_app
                 (template_app (template_hole 5, template_var 4),
                  template_var 3),
                template_var 2))
            ),
        template_predicate
         (
            template_app
             (template_hole 4,
              template_app (template_var 4, template_var 1))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app (template_hole 2, template_var 0),
                  template_var 1)),
              template_var 3)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app
                  (template_hole 0,
                   template_app (template_var 6, template_var 0)),
                 template_app (template_var 5, template_var 1))),
             template_var 2)
           ))),
    ("Sepref_Rules.fref_mono",
     "[| !!x. ?P' x ==> ?P x; ?R' <= ?R; ?S <= ?S' |]
      ==> [?P]\<^sub>f ?R \<rightarrow> ?S
          <= [?P']\<^sub>f ?R' \<rightarrow> ?S'",
     template_implication
      ([template_predicate (template_app (template_hole 5, t_empty)),
        template_inequation (less_equals, template_var 3, template_var 2),
        template_inequation (less_equals, template_var 1, template_var 0)],
       template_inequation
        (less_equals,
         template_app
          (template_app
            (template_app (template_hole 0, template_var 4),
             template_var 2),
           template_var 1),
         template_app
          (template_app
            (template_app (template_hole 0, template_var 5),
             template_var 3),
           template_var 0)))),
    ("Sepref_Rules.uc_hfprod_sel",
     "fst (?A *\<^sub>a ?B) ?a ?c =
      (case (?a, ?c) of ((a1, a2), c1, c2) => fst ?A a1 c1 * fst ?B a2 c2)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 8,
             template_app
              (template_app (template_hole 7, template_var 3),
               template_var 2)),
           template_var 1),
         template_var 0),
       template_app
        (template_app (template_hole 6, t_empty),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_Rules.uc_hfprod_sel",
     "snd (?A *\<^sub>a ?B) ?a ?c =
      (case (?a, ?c) of ((a1, a2), c1, c2) => snd ?A a1 c1 * snd ?B a2 c2)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 8,
             template_app
              (template_app (template_hole 7, template_var 3),
               template_var 2)),
           template_var 1),
         template_var 0),
       template_app
        (template_app (template_hole 6, t_empty),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_Rules.fref_PRE_D1",
     "(?f, ?h)
      : [comp_PRE ?S1.0 ?Q (%x _. ?P x) ?X]\<^sub>f ?R \<rightarrow> ?S ==>
      (?f, ?h) : [%x. ?Q x & ?P x]\<^sub>f ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app
                 (template_app (template_hole 3, template_var 7),
                  template_var 6)),
              template_app
               (template_app
                 (template_app
                   (template_hole 2,
                    template_app
                     (template_app
                       (template_app
                         (template_app (template_hole 1, template_var 5),
                          template_var 4),
                        t_empty),
                      template_var 2)),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_var 7),
                 template_var 6)),
             template_app
              (template_app
                (template_app (template_hole 2, t_empty), template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.hfref_PRE_D1",
     "(?f, ?h)
      : [comp_PRE ?S1.0 ?Q (%x _. ?P x) ?X]\<^sub>a ?R \<rightarrow> ?S ==>
      (?f, ?h) : [%x. ?Q x & ?P x]\<^sub>a ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app
                 (template_app (template_hole 3, template_var 7),
                  template_var 6)),
              template_app
               (template_app
                 (template_app
                   (template_hole 2,
                    template_app
                     (template_app
                       (template_app
                         (template_app (template_hole 1, template_var 5),
                          template_var 4),
                        t_empty),
                      template_var 2)),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_var 7),
                 template_var 6)),
             template_app
              (template_app
                (template_app (template_hole 2, t_empty), template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.fref_compI",
     "([?P]\<^sub>f ?R1.0 \<rightarrow> ?R2.0) O
      ([?Q]\<^sub>f ?S1.0 \<rightarrow> ?S2.0)
      <= [%x. ?Q x &
              (ALL y.
                  (y, x) : ?S1.0 -->
                  ?P y)]\<^sub>f ?R1.0 O ?S1.0 \<rightarrow> ?R2.0 O ?S2.0",
     template_inequation
      (less_equals,
       template_app
        (template_app
          (template_hole 10,
           template_app
            (template_app
              (template_app (template_hole 9, template_var 5),
               template_var 4),
             template_var 3)),
         template_app
          (template_app
            (template_app (template_hole 8, template_var 2),
             template_var 1),
           template_var 0)),
       template_app
        (template_app
          (template_app (template_hole 7, t_empty),
           template_app
            (template_app (template_hole 1, template_var 4),
             template_var 1)),
         template_app
          (template_app (template_hole 0, template_var 3),
           template_var 0)))),
    ("Sepref_Translate.sepref_fr_rules",
     "(Not o isl) ?x ==>
      hn_refine (hn_ctxt (?A +\<^sub>a ?S) ?x ?xi) (return $ (projr $ ?xi))
       (hn_invalid (?A +\<^sub>a ?S) ?x ?xi) ?S (RETURN $ (projr $ ?x))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 14, template_hole 13),
                template_hole 12),
              template_var 3)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_hole 11,
                     template_app
                      (template_app
                        (template_app
                          (template_hole 10,
                           template_app
                            (template_app (template_hole 9, template_var 2),
                             template_var 1)),
                         template_var 3),
                       template_var 0)),
                   template_app
                    (template_app (template_hole 8, template_hole 7),
                     template_app
                      (template_app (template_hole 6, template_hole 5),
                       template_var 0))),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 10,
                       template_app
                        (template_hole 4,
                         template_app
                          (template_app (template_hole 9, template_var 2),
                           template_var 1))),
                     template_var 3),
                   template_var 0)),
               template_var 1),
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_app
                (template_app (template_hole 1, template_hole 0),
                 template_var 3)))
           ))),
    ("Sepref_Rules.hfref_to_ASSERT_conv",
     "NO_MATCH (%_. True) ?P ==>
      ((?a, ?b) : [?P]\<^sub>a ?R \<rightarrow> ?S) =
      ((?a, %x. ASSERT (?P x) >>= (%_. ?b x))
       : ?R \<rightarrow>\<^sub>a ?S)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 7, t_empty), template_var 4)
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_var 3),
               template_var 2)),
           template_app
            (template_app
              (template_app (template_hole 2, template_var 4),
               template_var 1),
             template_var 0)),
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_var 3), t_empty)),
           template_app
            (template_app
              (template_app (template_hole 2, t_empty), template_var 1),
             template_var 0))))),
    ("Sepref_Basic.hn_refineI",
     "(nofail ?m ==>
       <?\<Gamma>> ?c <%r. ?\<Gamma>' *
                           (\<exists>\<^sub>Ax.
                               ?R x r *
                               \<up> (RETURN x <= ?m))>\<^sub>t) ==>
      hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R ?m",
     template_implication
      ([template_implication
         ([template_predicate
            (template_app (template_hole 8, template_var 4))],
          template_predicate
           (
              template_app
               (template_app
                 (template_app (template_hole 7, template_var 3),
                  template_var 2),
                t_empty)
              ))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 3),
                   template_var 2),
                 template_var 1),
               template_var 0),
             template_var 4)
           ))),
    ("Sepref_HOL_Bindings.param_Image",
     "[| IS_LEFT_UNIQUE ?A; single_valued ?A |]
      ==> ((``), (``))
          : \<langle>?A \<times>\<^sub>r ?B\<rangle>set_rel \<rightarrow>
            \<langle>?A\<rangle>set_rel \<rightarrow>
            \<langle>?B\<rangle>set_rel",
     template_implication
      ([template_predicate
         (template_app (template_hole 20, template_var 1)),
        template_predicate
         (template_app (template_hole 19, template_var 1))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 18,
               template_app
                (template_app (template_hole 17, template_hole 16),
                 template_hole 15)),
             template_app
              (template_app
                (template_hole 14,
                 template_app
                  (template_app (template_hole 13, template_hole 12),
                   template_app
                    (template_app (template_hole 11, template_hole 10),
                     template_app
                      (template_app
                        (template_hole 9,
                         template_app
                          (template_app (template_hole 8, template_hole 7),
                           template_var 1)),
                       template_var 0)))),
               template_app
                (template_app
                  (template_hole 6,
                   template_app
                    (template_app (template_hole 5, template_hole 4),
                     template_app
                      (template_app (template_hole 3, template_hole 2),
                       template_var 1))),
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 0))))
           ))),
    ("Sepref_Basic.hn_refineD",
     "[| hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R ?m; nofail ?m |]
      ==> <?\<Gamma>> ?c <%r. ?\<Gamma>' *
                              (\<exists>\<^sub>Ax.
                                  ?R x r *
                                  \<up> (RETURN x <= ?m))>\<^sub>t",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 8, template_var 4),
                    template_var 3),
                  template_var 2),
                template_var 1),
              template_var 0)
            ),
        template_predicate
         (template_app (template_hole 7, template_var 0))],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 6, template_var 4),
               template_var 3),
             t_empty)
           ))),
    ("Sepref_HOL_Bindings.b_rel_subtyping_merge_tL",
     "hn_ctxt ?A ?x ?y \<or>\<^sub>A
      hn_ctxt ?A' ?x ?y \<Longrightarrow>\<^sub>t
      hn_ctxt ?Am ?x ?y ==>
      hn_ctxt ?A ?x ?y \<or>\<^sub>A
      hn_ctxt (b_assn ?A' ?P') ?x ?y \<Longrightarrow>\<^sub>t
      hn_ctxt ?Am ?x ?y",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app
                   (template_hole 2,
                    template_app
                     (template_app
                       (template_app (template_hole 1, template_var 5),
                        template_var 4),
                      template_var 3)),
                  template_app
                   (template_app
                     (template_app (template_hole 1, template_var 2),
                      template_var 4),
                    template_var 3))),
              template_app
               (template_app
                 (template_app (template_hole 1, template_var 1),
                  template_var 4),
                template_var 3))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app
                      (template_app (template_hole 1, template_var 5),
                       template_var 4),
                     template_var 3)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 1,
                       template_app
                        (template_app (template_hole 0, template_var 2),
                         template_var 0)),
                     template_var 4),
                   template_var 3))),
             template_app
              (template_app
                (template_app (template_hole 1, template_var 1),
                 template_var 4),
               template_var 3))
           ))),
    ("Sepref_HOL_Bindings.b_rel_subtyping_merge_tR",
     "hn_ctxt ?A ?x ?y \<or>\<^sub>A
      hn_ctxt ?A' ?x ?y \<Longrightarrow>\<^sub>t
      hn_ctxt ?Am ?x ?y ==>
      hn_ctxt (b_assn ?A ?P) ?x ?y \<or>\<^sub>A
      hn_ctxt ?A' ?x ?y \<Longrightarrow>\<^sub>t
      hn_ctxt ?Am ?x ?y",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app
                   (template_hole 2,
                    template_app
                     (template_app
                       (template_app (template_hole 1, template_var 5),
                        template_var 4),
                      template_var 3)),
                  template_app
                   (template_app
                     (template_app (template_hole 1, template_var 2),
                      template_var 4),
                    template_var 3))),
              template_app
               (template_app
                 (template_app (template_hole 1, template_var 1),
                  template_var 4),
                template_var 3))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 1,
                         template_app
                          (template_app (template_hole 0, template_var 5),
                           template_var 0)),
                       template_var 4),
                     template_var 3)),
                 template_app
                  (template_app
                    (template_app (template_hole 1, template_var 2),
                     template_var 4),
                   template_var 3))),
             template_app
              (template_app
                (template_app (template_hole 1, template_var 1),
                 template_var 4),
               template_var 3))
           ))),
    ("Sepref_Id_Op.abs_rule",
     "(!!x x'. ID x x' TYPE(?'a) ==> ID (?t x) (?t' x x') TYPE(?'b)) ==>
      ID (%x. (#?t x#)) (%x. (#?t' x x#)) TYPE(?'a => ?'b)",
     template_implication
      ([template_predicate (template_app (template_hole 9, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 3, t_empty), t_empty),
             template_hole 0)
           ))),
    ("Sepref_Rules.hfrefI",
     "(!!c a.
          ?P a ==>
          hn_refine (fst ?RS a c) (?f c) (snd ?RS a c) ?T (?g a)) ==>
      (?f, ?g) : [?P]\<^sub>a ?RS \<rightarrow> ?T",
     template_implication
      ([template_predicate (template_app (template_hole 8, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 0)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 3),
               template_var 1))
           ))),
    ("Sepref_Rules.frefI",
     "(!!x y. [| ?P y; (x, y) : ?R |] ==> (?f x, ?g y) : ?S) ==>
      (?f, ?g) : [?P]\<^sub>f ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate (template_app (template_hole 9, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 1)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 3),
               template_var 0))
           ))),
    ("Sepref_Basic.imp_correctI",
     "[| hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R ?a; ?a <= SPEC ?\<Phi> |]
      ==> <?\<Gamma>> ?c <%r. \<exists>\<^sub>Ara.
                                 ?\<Gamma>' * ?R ra r *
                                 \<up> (?\<Phi> ra)>\<^sub>t",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 8, template_var 5),
                    template_var 4),
                  template_var 3),
                template_var 2),
              template_var 1)
            ),
        template_inequation
         (less_equals, template_var 1,
          template_app
           (template_hole 6,
            template_app (template_hole 5, template_var 0)))],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 4, template_var 5),
               template_var 4),
             t_empty)
           ))),
    ("Sepref_Translate.hn_RCALL",
     "[| RPREM (hn_refine ?P' ?c ?Q' ?R (RCALL $ ?a $ ?b));
         ?P \<Longrightarrow>\<^sub>t ?F * ?P' |]
      ==> hn_refine ?P ?c (?F * ?Q') ?R (RCALL $ ?a $ ?b)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_hole 6,
              template_app
               (template_app
                 (template_app
                   (template_app
                     (template_app (template_hole 5, template_var 7),
                      template_var 6),
                    template_var 5),
                  template_var 4),
                template_app
                 (template_app
                   (template_hole 4,
                    template_app
                     (template_app (template_hole 3, template_hole 2),
                      template_var 3)),
                  template_var 2)))
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 1),
              template_app
               (template_app (template_hole 0, template_var 0),
                template_var 7))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 5, template_var 1),
                   template_var 6),
                 template_app
                  (template_app (template_hole 0, template_var 0),
                   template_var 5)),
               template_var 4),
             template_app
              (template_app
                (template_hole 4,
                 template_app
                  (template_app (template_hole 3, template_hole 2),
                   template_var 3)),
               template_var 2))
           ))),
    ("Sepref_Rules.hfref_weaken_pre_nofail'",
     "[| (?f, ?g) : [?P]\<^sub>a ?R \<rightarrow> ?S;
         !!x. [| nofail (?g x); ?Q x |] ==> ?P x |]
      ==> (?f, ?g) : [?Q]\<^sub>a ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app
                 (template_app (template_hole 3, template_var 5),
                  template_var 4)),
              template_app
               (template_app
                 (template_app (template_hole 2, template_var 3),
                  template_var 2),
                template_var 1))
            ),
        template_predicate (template_app (template_hole 1, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_var 5),
                 template_var 4)),
             template_app
              (template_app
                (template_app (template_hole 2, template_var 0),
                 template_var 2),
               template_var 1))
           ))),
    ("Sepref_HOL_Bindings.b_assn_subtyping_match_tL",
     "[| hn_ctxt ?A ?x ?y \<Longrightarrow>\<^sub>t hn_ctxt ?A' ?x ?y;
         vassn_tag (hn_ctxt ?A ?x ?y) ==> ?P' ?x |]
      ==> hn_ctxt ?A ?x ?y \<Longrightarrow>\<^sub>t
          hn_ctxt (b_assn ?A' ?P') ?x ?y",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app
                   (template_app (template_hole 2, template_var 4),
                    template_var 3),
                  template_var 2)),
              template_app
               (template_app
                 (template_app (template_hole 2, template_var 1),
                  template_var 3),
                template_var 2))
            ),
        template_implication
         ([template_predicate
            (
               template_app
                (template_hole 1,
                 template_app
                  (template_app
                    (template_app (template_hole 2, template_var 4),
                     template_var 3),
                   template_var 2))
               )],
          template_predicate
           (template_app (template_var 0, template_var 3)))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app
                  (template_app (template_hole 2, template_var 4),
                   template_var 3),
                 template_var 2)),
             template_app
              (template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app (template_hole 0, template_var 1),
                     template_var 0)),
                 template_var 3),
               template_var 2))
           ))),
    ("Sepref_Translate.sepref_fr_rules",
     "[| CONSTRAINT is_pure ?A6; CONSTRAINT is_pure ?B6 |]
      ==> hn_refine (hn_ctxt (?A6 \<times>\<^sub>a ?B6) ?x'6 ?x6)
           (return (prod.swap ?x6))
           (hn_ctxt (?A6 \<times>\<^sub>a ?B6) ?x'6 ?x6)
           (?B6 \<times>\<^sub>a ?A6) (RETURN $ (prod.swap $ ?x'6))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 13, template_hole 12),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 11, template_hole 10),
              template_var 2)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_hole 9,
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app
                            (template_app (template_hole 7, template_var 3),
                             template_var 2)),
                         template_var 1),
                       template_var 0)),
                   template_app
                    (template_hole 6,
                     template_app (template_hole 5, template_var 0))),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app
                        (template_app (template_hole 7, template_var 3),
                         template_var 2)),
                     template_var 1),
                   template_var 0)),
               template_app
                (template_app (template_hole 4, template_var 2),
                 template_var 3)),
             template_app
              (template_app (template_hole 3, template_hole 2),
               template_app
                (template_app (template_hole 1, template_hole 0),
                 template_var 1)))
           ))),
    ("Sepref_Basic.wit_swap_forall",
     "[| <?P> ?c <%_. true>; ALL x. ?A x --> <?P> ?c <?Q x> |]
      ==> <?P> ?c
          <%r. \<not>\<^sub>A (\<exists>\<^sub>Ax.
                                  \<up> (?A x) * \<not>\<^sub>A ?Q x r)>",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app (template_hole 7, template_var 3),
                template_var 2),
              t_empty)
            ),
        template_predicate (template_app (template_hole 5, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 7, template_var 3),
               template_var 2),
             t_empty)
           ))),
    ("Sepref_Rules.hfref_weaken_pre'",
     "[| !!x. [| ?P x; rdomp (fst ?R) x |] ==> ?P' x;
         (?f, ?h) : [?P']\<^sub>a ?R \<rightarrow> ?S |]
      ==> (?f, ?h) : [?P]\<^sub>a ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate (template_app (template_hole 6, t_empty)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 2),
                  template_var 1)),
              template_app
               (template_app
                 (template_app (template_hole 0, template_var 3),
                  template_var 4),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 1)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 5),
                 template_var 4),
               template_var 0))
           ))),
    ("Sepref_Tool.CONS_init",
     "[| hn_refine ?\<Gamma> ?c ?\<Gamma>' ?R ?a;
         ?\<Gamma>' \<Longrightarrow>\<^sub>t ?\<Gamma>c';
         !!a c. hn_ctxt ?R a c \<Longrightarrow>\<^sub>t hn_ctxt ?Rc a c |]
      ==> hn_refine ?\<Gamma> ?c ?\<Gamma>c' ?Rc ?a",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 4, template_var 6),
                    template_var 5),
                  template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 3, template_var 4),
              template_var 1)
            ),
        template_predicate (template_app (template_hole 2, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 4, template_var 6),
                   template_var 5),
                 template_var 1),
               template_var 0),
             template_var 2)
           ))),
    ("Sepref_Rules.norm_return_o",
     "(%x y. return \<circ>\<circ>\<circ> ?f x y) $ ?x $ ?y $ ?z $ ?a $ ?b =
      return $ (?f $ ?x $ ?y $ ?z $ ?a $ ?b)",
     template_equation
      (template_app
        (template_app
          (template_hole 12,
           template_app
            (template_app
              (template_hole 11,
               template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app (template_hole 8, t_empty),
                         template_var 4)),
                     template_var 3)),
                 template_var 2)),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 5, template_hole 6),
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app
                    (template_hole 2,
                     template_app
                      (template_app
                        (template_hole 1,
                         template_app
                          (template_app (template_hole 0, template_var 5),
                           template_var 4)),
                       template_var 3)),
                   template_var 2)),
               template_var 1)),
           template_var 0)))),
    ("Sepref_Rules.norm_RETURN_o",
     "(%x y. RETURN \<circ>\<circ>\<circ> ?f x y) $ ?x $ ?y $ ?z $ ?a $ ?b =
      RETURN $ (?f $ ?x $ ?y $ ?z $ ?a $ ?b)",
     template_equation
      (template_app
        (template_app
          (template_hole 12,
           template_app
            (template_app
              (template_hole 11,
               template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app (template_hole 8, t_empty),
                         template_var 4)),
                     template_var 3)),
                 template_var 2)),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 5, template_hole 6),
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app
                    (template_hole 2,
                     template_app
                      (template_app
                        (template_hole 1,
                         template_app
                          (template_app (template_hole 0, template_var 5),
                           template_var 4)),
                       template_var 3)),
                   template_var 2)),
               template_var 1)),
           template_var 0)))),
    ("Sepref_HOL_Bindings.hn_Pair",
     "hn_refine (hn_ctxt ?P1.0 ?x1.0 ?x1' * hn_ctxt ?P2.0 ?x2.0 ?x2')
       (return (?x1', ?x2'))
       (hn_invalid ?P1.0 ?x1.0 ?x1' * hn_invalid ?P2.0 ?x2.0 ?x2')
       (?P1.0 \<times>\<^sub>a ?P2.0) (RETURN $ (Pair $ ?x1.0 $ ?x2.0))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 13,
                   template_app
                    (template_app
                      (template_hole 12,
                       template_app
                        (template_app
                          (template_app (template_hole 11, template_var 5),
                           template_var 4),
                         template_var 3)),
                     template_app
                      (template_app
                        (template_app (template_hole 10, template_var 2),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 9,
                   template_app
                    (template_app (template_hole 8, template_var 3),
                     template_var 0))),
               template_app
                (template_app
                  (template_hole 12,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 11,
                         template_app (template_hole 7, template_var 5)),
                       template_var 4),
                     template_var 3)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 10,
                       template_app (template_hole 6, template_var 2)),
                     template_var 1),
                   template_var 0))),
             template_app
              (template_app (template_hole 5, template_var 5),
               template_var 2)),
           template_app
            (template_app (template_hole 4, template_hole 3),
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 4)),
               template_var 1)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_ctxt ?P2.0 ?x2.0 ?x2' * hn_ctxt ?P1.0 ?x1.0 ?x1')
       (return (?x1', ?x2'))
       (hn_invalid ?P1.0 ?x1.0 ?x1' * hn_invalid ?P2.0 ?x2.0 ?x2')
       (?P1.0 \<times>\<^sub>a ?P2.0) (RETURN $ (Pair $ ?x1.0 $ ?x2.0))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 13,
                   template_app
                    (template_app
                      (template_hole 12,
                       template_app
                        (template_app
                          (template_app (template_hole 11, template_var 5),
                           template_var 4),
                         template_var 3)),
                     template_app
                      (template_app
                        (template_app (template_hole 10, template_var 2),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 9,
                   template_app
                    (template_app (template_hole 8, template_var 0),
                     template_var 3))),
               template_app
                (template_app
                  (template_hole 12,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 10,
                         template_app (template_hole 7, template_var 2)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 11,
                       template_app (template_hole 6, template_var 5)),
                     template_var 4),
                   template_var 3))),
             template_app
              (template_app (template_hole 5, template_var 2),
               template_var 5)),
           template_app
            (template_app (template_hole 4, template_hole 3),
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 4)))
         )),
    ("Sepref_HOL_Bindings.param_max_int",
     "hn_refine (hn_val int_rel ?x'6 ?x6 * hn_val int_rel ?x'a6 ?xa6)
       (return (max ?x6 ?xa6))
       (hn_val int_rel ?x'6 ?x6 * hn_val int_rel ?x'a6 ?xa6) int_assn
       (RETURN $ (max $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 2),
                     template_var 0))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 3),
                     template_var 2)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 1),
                   template_var 0))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 3)),
               template_var 1)))
         )),
    ("Sepref_HOL_Bindings.param_min_int",
     "hn_refine (hn_val int_rel ?x'6 ?x6 * hn_val int_rel ?x'a6 ?xa6)
       (return (min ?x6 ?xa6))
       (hn_val int_rel ?x'6 ?x6 * hn_val int_rel ?x'a6 ?xa6) int_assn
       (RETURN $ (min $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 2),
                     template_var 0))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 3),
                     template_var 2)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 1),
                   template_var 0))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 3)),
               template_var 1)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val int_rel ?x'a6 ?xa6 * hn_val int_rel ?x'6 ?x6)
       (return (?x6 - ?xa6))
       (hn_val int_rel ?x'6 ?x6 * hn_val int_rel ?x'a6 ?xa6) int_assn
       (RETURN $ ((-) $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val int_rel ?x'a6 ?xa6 * hn_val int_rel ?x'6 ?x6)
       (return (?x6 + ?xa6))
       (hn_val int_rel ?x'6 ?x6 * hn_val int_rel ?x'a6 ?xa6) int_assn
       (RETURN $ ((+) $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val int_rel ?x'a6 ?xa6 * hn_val int_rel ?x'6 ?x6)
       (return (?x6 * ?xa6))
       (hn_val int_rel ?x'6 ?x6 * hn_val int_rel ?x'a6 ?xa6) int_assn
       (RETURN $ ((*) $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val int_rel ?x'a6 ?xa6 * hn_val int_rel ?x'6 ?x6)
       (return (max ?x6 ?xa6))
       (hn_val int_rel ?x'6 ?x6 * hn_val int_rel ?x'a6 ?xa6) int_assn
       (RETURN $ (max $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val int_rel ?x'a6 ?xa6 * hn_val int_rel ?x'6 ?x6)
       (return (min ?x6 ?xa6))
       (hn_val int_rel ?x'6 ?x6 * hn_val int_rel ?x'a6 ?xa6) int_assn
       (RETURN $ (min $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val int_rel ?x'a6 ?xa6 * hn_val int_rel ?x'6 ?x6)
       (return (?x6 div ?xa6))
       (hn_val int_rel ?x'6 ?x6 * hn_val int_rel ?x'a6 ?xa6) int_assn
       (RETURN $ ((div) $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val int_rel ?x'a6 ?xa6 * hn_val int_rel ?x'6 ?x6)
       (return (?x6 mod ?xa6))
       (hn_val int_rel ?x'6 ?x6 * hn_val int_rel ?x'a6 ?xa6) int_assn
       (RETURN $ ((mod) $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_HOL_Bindings.param_max_nat",
     "hn_refine (hn_val nat_rel ?x'6 ?x6 * hn_val nat_rel ?x'a6 ?xa6)
       (return (max ?x6 ?xa6))
       (hn_val nat_rel ?x'6 ?x6 * hn_val nat_rel ?x'a6 ?xa6) nat_assn
       (RETURN $ (max $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 2),
                     template_var 0))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 3),
                     template_var 2)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 1),
                   template_var 0))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 3)),
               template_var 1)))
         )),
    ("Sepref_HOL_Bindings.param_min_nat",
     "hn_refine (hn_val nat_rel ?x'6 ?x6 * hn_val nat_rel ?x'a6 ?xa6)
       (return (min ?x6 ?xa6))
       (hn_val nat_rel ?x'6 ?x6 * hn_val nat_rel ?x'a6 ?xa6) nat_assn
       (RETURN $ (min $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 2),
                     template_var 0))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 3),
                     template_var 2)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 1),
                   template_var 0))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 3)),
               template_var 1)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val nat_rel ?x'a6 ?xa6 * hn_val nat_rel ?x'6 ?x6)
       (return (?x6 - ?xa6))
       (hn_val nat_rel ?x'6 ?x6 * hn_val nat_rel ?x'a6 ?xa6) nat_assn
       (RETURN $ ((-) $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val nat_rel ?x'a6 ?xa6 * hn_val nat_rel ?x'6 ?x6)
       (return (?x6 + ?xa6))
       (hn_val nat_rel ?x'6 ?x6 * hn_val nat_rel ?x'a6 ?xa6) nat_assn
       (RETURN $ ((+) $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val nat_rel ?x'a6 ?xa6 * hn_val nat_rel ?x'6 ?x6)
       (return (?x6 * ?xa6))
       (hn_val nat_rel ?x'6 ?x6 * hn_val nat_rel ?x'a6 ?xa6) nat_assn
       (RETURN $ ((*) $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val nat_rel ?x'a6 ?xa6 * hn_val nat_rel ?x'6 ?x6)
       (return (max ?x6 ?xa6))
       (hn_val nat_rel ?x'6 ?x6 * hn_val nat_rel ?x'a6 ?xa6) nat_assn
       (RETURN $ (max $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val nat_rel ?x'a6 ?xa6 * hn_val nat_rel ?x'6 ?x6)
       (return (min ?x6 ?xa6))
       (hn_val nat_rel ?x'6 ?x6 * hn_val nat_rel ?x'a6 ?xa6) nat_assn
       (RETURN $ (min $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val nat_rel ?x'a6 ?xa6 * hn_val nat_rel ?x'6 ?x6)
       (return (?x6 div ?xa6))
       (hn_val nat_rel ?x'6 ?x6 * hn_val nat_rel ?x'a6 ?xa6) nat_assn
       (RETURN $ ((div) $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val nat_rel ?x'a6 ?xa6 * hn_val nat_rel ?x'6 ?x6)
       (return (?x6 mod ?xa6))
       (hn_val nat_rel ?x'6 ?x6 * hn_val nat_rel ?x'a6 ?xa6) nat_assn
       (RETURN $ ((mod) $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val int_rel ?x'a6 ?xa6 * hn_val int_rel ?x'6 ?x6)
       (return (?x6 = ?xa6))
       (hn_val int_rel ?x'6 ?x6 * hn_val int_rel ?x'a6 ?xa6) bool_assn
       (RETURN $ ((=) $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 12,
                   template_app
                    (template_app
                      (template_hole 11,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 10,
                             template_app
                              (template_hole 9, template_hole 8)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 10,
                           template_app (template_hole 9, template_hole 8)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 7,
                   template_app
                    (template_app (template_hole 6, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 11,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 10,
                         template_app (template_hole 9, template_hole 8)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 10,
                       template_app (template_hole 9, template_hole 8)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 5, template_hole 4)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 6),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val int_rel ?x'a6 ?xa6 * hn_val int_rel ?x'6 ?x6)
       (return (?x6 < ?xa6))
       (hn_val int_rel ?x'6 ?x6 * hn_val int_rel ?x'a6 ?xa6) bool_assn
       (RETURN $ ((<) $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 12,
                   template_app
                    (template_app
                      (template_hole 11,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 10,
                             template_app
                              (template_hole 9, template_hole 8)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 10,
                           template_app (template_hole 9, template_hole 8)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 7,
                   template_app
                    (template_app (template_hole 6, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 11,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 10,
                         template_app (template_hole 9, template_hole 8)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 10,
                       template_app (template_hole 9, template_hole 8)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 5, template_hole 4)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 6),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val int_rel ?x'a6 ?xa6 * hn_val int_rel ?x'6 ?x6)
       (return (?x6 <= ?xa6))
       (hn_val int_rel ?x'6 ?x6 * hn_val int_rel ?x'a6 ?xa6) bool_assn
       (RETURN $ ((<=) $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 12,
                   template_app
                    (template_app
                      (template_hole 11,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 10,
                             template_app
                              (template_hole 9, template_hole 8)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 10,
                           template_app (template_hole 9, template_hole 8)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 7,
                   template_app
                    (template_app (template_hole 6, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 11,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 10,
                         template_app (template_hole 9, template_hole 8)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 10,
                       template_app (template_hole 9, template_hole 8)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 5, template_hole 4)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 6),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val nat_rel ?x'a6 ?xa6 * hn_val nat_rel ?x'6 ?x6)
       (return (?x6 = ?xa6))
       (hn_val nat_rel ?x'6 ?x6 * hn_val nat_rel ?x'a6 ?xa6) bool_assn
       (RETURN $ ((=) $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 12,
                   template_app
                    (template_app
                      (template_hole 11,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 10,
                             template_app
                              (template_hole 9, template_hole 8)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 10,
                           template_app (template_hole 9, template_hole 8)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 7,
                   template_app
                    (template_app (template_hole 6, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 11,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 10,
                         template_app (template_hole 9, template_hole 8)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 10,
                       template_app (template_hole 9, template_hole 8)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 5, template_hole 4)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 6),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val nat_rel ?x'a6 ?xa6 * hn_val nat_rel ?x'6 ?x6)
       (return (?x6 < ?xa6))
       (hn_val nat_rel ?x'6 ?x6 * hn_val nat_rel ?x'a6 ?xa6) bool_assn
       (RETURN $ ((<) $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 12,
                   template_app
                    (template_app
                      (template_hole 11,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 10,
                             template_app
                              (template_hole 9, template_hole 8)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 10,
                           template_app (template_hole 9, template_hole 8)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 7,
                   template_app
                    (template_app (template_hole 6, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 11,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 10,
                         template_app (template_hole 9, template_hole 8)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 10,
                       template_app (template_hole 9, template_hole 8)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 5, template_hole 4)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 6),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val nat_rel ?x'a6 ?xa6 * hn_val nat_rel ?x'6 ?x6)
       (return (?x6 <= ?xa6))
       (hn_val nat_rel ?x'6 ?x6 * hn_val nat_rel ?x'a6 ?xa6) bool_assn
       (RETURN $ ((<=) $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 12,
                   template_app
                    (template_app
                      (template_hole 11,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 10,
                             template_app
                              (template_hole 9, template_hole 8)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 10,
                           template_app (template_hole 9, template_hole 8)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 7,
                   template_app
                    (template_app (template_hole 6, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 11,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 10,
                         template_app (template_hole 9, template_hole 8)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 10,
                       template_app (template_hole 9, template_hole 8)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 5, template_hole 4)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 6),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val bool_rel ?x'a6 ?xa6 * hn_val bool_rel ?x'6 ?x6)
       (return (?x6 & ?xa6))
       (hn_val bool_rel ?x'6 ?x6 * hn_val bool_rel ?x'a6 ?xa6) bool_assn
       (RETURN $ ((&) $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val bool_rel ?x'a6 ?xa6 * hn_val bool_rel ?x'6 ?x6)
       (return (?x6 | ?xa6))
       (hn_val bool_rel ?x'6 ?x6 * hn_val bool_rel ?x'a6 ?xa6) bool_assn
       (RETURN $ ((|) $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val bool_rel ?x'a6 ?xa6 * hn_val bool_rel ?x'6 ?x6)
       (return (?x6 = ?xa6))
       (hn_val bool_rel ?x'6 ?x6 * hn_val bool_rel ?x'a6 ?xa6) bool_assn
       (RETURN $ ((=) $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val bool_rel ?x'a6 ?xa6 * hn_val bool_rel ?x'6 ?x6)
       (return (?x6 --> ?xa6))
       (hn_val bool_rel ?x'6 ?x6 * hn_val bool_rel ?x'a6 ?xa6) bool_assn
       (RETURN $ ((-->) $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 8,
                             template_app
                              (template_hole 7, template_hole 6)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 8,
                           template_app (template_hole 7, template_hole 6)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 5,
                   template_app
                    (template_app (template_hole 4, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 8,
                         template_app (template_hole 7, template_hole 6)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 8,
                       template_app (template_hole 7, template_hole 6)),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 7, template_hole 6)),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 4),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_HOL_Bindings.hn_Cons",
     "hn_refine (hn_ctxt ?P ?x ?x' * hn_ctxt (list_assn ?P) ?xs ?xs')
       (return (?x' # ?xs'))
       (hn_invalid ?P ?x ?x' * hn_invalid (list_assn ?P) ?xs ?xs')
       (list_assn ?P) (RETURN $ ((#) $ ?x $ ?xs))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 13,
                   template_app
                    (template_app
                      (template_hole 12,
                       template_app
                        (template_app
                          (template_app (template_hole 11, template_var 4),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 10,
                           template_app (template_hole 9, template_var 4)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 8,
                   template_app
                    (template_app (template_hole 7, template_var 2),
                     template_var 0))),
               template_app
                (template_app
                  (template_hole 12,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 11,
                         template_app (template_hole 6, template_var 4)),
                       template_var 3),
                     template_var 2)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 10,
                       template_app
                        (template_hole 5,
                         template_app (template_hole 9, template_var 4))),
                     template_var 1),
                   template_var 0))),
             template_app (template_hole 9, template_var 4)),
           template_app
            (template_app (template_hole 4, template_hole 3),
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 3)),
               template_var 1)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_ctxt (list_assn ?P) ?xs ?xs' * hn_ctxt ?P ?x ?x')
       (return (?x' # ?xs'))
       (hn_invalid ?P ?x ?x' * hn_invalid (list_assn ?P) ?xs ?xs')
       (list_assn ?P) (RETURN $ ((#) $ ?x $ ?xs))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 13,
                   template_app
                    (template_app
                      (template_hole 12,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 11,
                             template_app
                              (template_hole 10, template_var 4)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app (template_hole 9, template_var 4),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 8,
                   template_app
                    (template_app (template_hole 7, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 12,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 9,
                         template_app (template_hole 6, template_var 4)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 11,
                       template_app
                        (template_hole 5,
                         template_app (template_hole 10, template_var 4))),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 10, template_var 4)),
           template_app
            (template_app (template_hole 4, template_hole 3),
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Rules.auto_weaken_pre_comp_PRE_I",
     "[| ?S ?x ==> ?P ?x;
         !!y. [| (y, ?x) : ?R; ?P ?x; ?S ?x |] ==> ?Q ?x y |]
      ==> comp_PRE ?R ?P ?Q ?S ?x",
     template_implication
      ([template_implication
         ([template_predicate
            (template_app (template_var 4, template_var 3))],
          template_predicate
           (template_app (template_var 2, template_var 3))),
        template_predicate (template_app (template_hole 3, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 1),
                   template_var 2),
                 template_var 0),
               template_var 4),
             template_var 3)
           ))),
    ("Sepref_Definition.synth_hnrI",
     "[| CP_UNCURRY ?fi ?f; INTRO_KD ?R ?R'; SPEC_RES_ASSN ?S ?S' |]
      ==> SYNTH_TERM (SYNTH ?f ([?P]\<^sub>a ?R \<rightarrow> ?S))
           ((?fi, SDUMMY) : SDUMMY,
            (?fi, ?f) : [?P]\<^sub>a ?R' \<rightarrow> ?S')",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 13, template_var 6),
              template_var 5)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 12, template_var 4),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 11, template_var 2),
              template_var 1)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 10,
               template_app
                (template_app (template_hole 9, template_var 5),
                 template_app
                  (template_app
                    (template_app (template_hole 8, template_var 0),
                     template_var 4),
                   template_var 2))),
             template_app
              (template_app
                (template_hole 7,
                 template_app
                  (template_app
                    (template_hole 6,
                     template_app
                      (template_app (template_hole 5, template_var 6),
                       template_hole 4)),
                   template_hole 3)),
               template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app (template_hole 1, template_var 6),
                     template_var 5)),
                 template_app
                  (template_app
                    (template_app (template_hole 0, template_var 0),
                     template_var 3),
                   template_var 1))))
           ))),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val nat_rel ?x'a6 ?xa6 * hn_val nat_rel ?x'6 ?x6)
       (return [?x6..<?xa6])
       (hn_val nat_rel ?x'6 ?x6 * hn_val nat_rel ?x'a6 ?xa6)
       (list_assn nat_assn) (RETURN $ (upt $ ?x'6 $ ?x'a6))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 11,
                   template_app
                    (template_app
                      (template_hole 10,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 9,
                             template_app
                              (template_hole 8, template_hole 7)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 9,
                           template_app (template_hole 8, template_hole 7)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 6,
                   template_app
                    (template_app (template_hole 5, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 9,
                         template_app (template_hole 8, template_hole 7)),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 9,
                       template_app (template_hole 8, template_hole 7)),
                     template_var 3),
                   template_var 2))),
             template_app
              (template_hole 4,
               template_app (template_hole 8, template_hole 7))),
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_hole 5),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_Intf_Util.param_op_mop_iff",
     "(?Q, ?P) : ?R \<rightarrow> bool_rel ==>
      ((?f, ?g)
       : [?P]\<^sub>f ?R \<rightarrow> \<langle>?S\<rangle>nres_rel) =
      ((mop ?Q ?f, mop ?P ?g)
       : ?R \<rightarrow>\<^sub>f \<langle>?S\<rangle>nres_rel)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 14,
                template_app
                 (template_app (template_hole 13, template_var 5),
                  template_var 4)),
              template_app
               (template_app
                 (template_hole 12,
                  template_app
                   (template_app (template_hole 11, template_hole 10),
                    template_var 3)),
                template_hole 9))
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 7,
             template_app
              (template_app (template_hole 6, template_var 2),
               template_var 1)),
           template_app
            (template_app
              (template_app (template_hole 5, template_var 4),
               template_var 3),
             template_app
              (template_app (template_hole 4, template_hole 3),
               template_var 0))),
         template_app
          (template_app
            (template_hole 7,
             template_app
              (template_app
                (template_hole 6,
                 template_app
                  (template_app (template_hole 2, template_var 5),
                   template_var 2)),
               template_app
                (template_app (template_hole 1, template_var 4),
                 template_var 1))),
           template_app
            (template_app
              (template_app (template_hole 5, t_empty), template_var 3),
             template_app
              (template_app (template_hole 4, template_hole 3),
               template_var 0)))))),
    ("Sepref_Rules.fref_cons'",
     "[| (?f, ?g) : [?P]\<^sub>f ?R \<rightarrow> ?S;
         !!c a. [| (c, a) : ?R; ?Q a |] ==> ?P a |]
      ==> (?f, ?g) : [?Q]\<^sub>f ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_app (template_hole 5, template_var 5),
                  template_var 4)),
              template_app
               (template_app
                 (template_app (template_hole 4, template_var 3),
                  template_var 2),
                template_var 1))
            ),
        template_predicate (template_app (template_hole 3, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app (template_hole 5, template_var 5),
                 template_var 4)),
             template_app
              (template_app
                (template_app (template_hole 4, template_var 0),
                 template_var 2),
               template_var 1))
           ))),
    ("Sepref_Intf_Util.hfcomp_tcomp_pre",
     "[| (?g, ?h)
         : [?Q]\<^sub>f ?T \<rightarrow> \<langle>?U\<rangle>nres_rel;
         (?f, ?g) : [?P]\<^sub>a ?RR' \<rightarrow> ?S |]
      ==> (?f, ?h)
          : [tcomp_pre ?Q ?T
              ?P]\<^sub>a hrp_comp ?RR' ?T \<rightarrow> hr_comp ?S ?U",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 13,
                template_app
                 (template_app (template_hole 12, template_var 8),
                  template_var 7)),
              template_app
               (template_app
                 (template_app (template_hole 11, template_var 6),
                  template_var 5),
                template_app
                 (template_app (template_hole 10, template_hole 9),
                  template_var 4)))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app
                 (template_app (template_hole 7, template_var 3),
                  template_var 8)),
              template_app
               (template_app
                 (template_app (template_hole 6, template_var 2),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 5,
               template_app
                (template_app (template_hole 4, template_var 3),
                 template_var 7)),
             template_app
              (template_app
                (template_app
                  (template_hole 3,
                   template_app
                    (template_app
                      (template_app (template_hole 2, template_var 6),
                       template_var 5),
                     template_var 2)),
                 template_app
                  (template_app (template_hole 1, template_var 1),
                   template_var 5)),
               template_app
                (template_app (template_hole 0, template_var 0),
                 template_var 4)))
           ))),
    ("Sepref_Basic.hn_refine_cons",
     "[| ?P \<Longrightarrow>\<^sub>t ?P'; hn_refine ?P' ?c ?Q ?R ?m;
         ?Q \<Longrightarrow>\<^sub>t ?Q';
         !!x y. ?R x y \<Longrightarrow>\<^sub>t ?R' x y |]
      ==> hn_refine ?P ?c ?Q' ?R' ?m",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 3, template_var 7),
              template_var 6)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 2, template_var 6),
                    template_var 5),
                  template_var 4),
                template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 3, template_var 4),
              template_var 1)
            ),
        template_predicate (template_app (template_hole 1, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 2, template_var 7),
                   template_var 5),
                 template_var 1),
               template_var 0),
             template_var 2)
           ))),
    ("Sepref_HOL_Bindings.hn_append",
     "hn_refine
       (hn_ctxt (list_assn ?P) ?l1.0 ?l1' *
        hn_ctxt (list_assn ?P) ?l2.0 ?l2')
       (return (?l1' @ ?l2'))
       (hn_invalid (list_assn ?P) ?l1.0 ?l1' *
        hn_invalid (list_assn ?P) ?l2.0 ?l2')
       (list_assn ?P) (RETURN $ ((@) $ ?l1.0 $ ?l2.0))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 11,
                   template_app
                    (template_app
                      (template_hole 10,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 9,
                             template_app
                              (template_hole 8, template_var 4)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 9,
                           template_app (template_hole 8, template_var 4)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 7,
                   template_app
                    (template_app (template_hole 6, template_var 2),
                     template_var 0))),
               template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 9,
                         template_app
                          (template_hole 5,
                           template_app (template_hole 8, template_var 4))),
                       template_var 3),
                     template_var 2)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_hole 5,
                         template_app (template_hole 8, template_var 4))),
                     template_var 1),
                   template_var 0))),
             template_app (template_hole 8, template_var 4)),
           template_app
            (template_app (template_hole 4, template_hole 3),
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 3)),
               template_var 1)))
         )),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine
       (hn_ctxt (list_assn ?P) ?l2.0 ?l2' *
        hn_ctxt (list_assn ?P) ?l1.0 ?l1')
       (return (?l1' @ ?l2'))
       (hn_invalid (list_assn ?P) ?l1.0 ?l1' *
        hn_invalid (list_assn ?P) ?l2.0 ?l2')
       (list_assn ?P) (RETURN $ ((@) $ ?l1.0 $ ?l2.0))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 11,
                   template_app
                    (template_app
                      (template_hole 10,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 9,
                             template_app
                              (template_hole 8, template_var 4)),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 9,
                           template_app (template_hole 8, template_var 4)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 7,
                   template_app
                    (template_app (template_hole 6, template_var 0),
                     template_var 2))),
               template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 9,
                         template_app
                          (template_hole 5,
                           template_app (template_hole 8, template_var 4))),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_hole 5,
                         template_app (template_hole 8, template_var 4))),
                     template_var 3),
                   template_var 2))),
             template_app (template_hole 8, template_var 4)),
           template_app
            (template_app (template_hole 4, template_hole 3),
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 3)))
         )),
    ("Sepref_HOL_Bindings.list_match_cong",
     "(!!x x'.
          [| x : set ?l; x' : set ?l' |]
          ==> hn_ctxt ?A x x' \<Longrightarrow>\<^sub>t
              hn_ctxt ?A' x x') ==>
      hn_ctxt (list_assn ?A) ?l ?l' \<Longrightarrow>\<^sub>t
      hn_ctxt (list_assn ?A') ?l ?l'",
     template_implication
      ([template_predicate (template_app (template_hole 10, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app
                  (template_app
                    (template_hole 1,
                     template_app (template_hole 0, template_var 1)),
                   template_var 3),
                 template_var 2)),
             template_app
              (template_app
                (template_app
                  (template_hole 1,
                   template_app (template_hole 0, template_var 0)),
                 template_var 3),
               template_var 2))
           ))),
    ("Sepref_Rules.fref_compI_PRE",
     "[| (?f, ?g) : [?P]\<^sub>f ?R1.0 \<rightarrow> ?R2.0;
         (?g, ?h) : [?Q]\<^sub>f ?S1.0 \<rightarrow> ?S2.0 |]
      ==> (?f, ?h)
          : [comp_PRE ?S1.0 ?Q (%_. ?P)
              (%_. True)]\<^sub>f ?R1.0 O
                                  ?S1.0 \<rightarrow> ?R2.0 O ?S2.0",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 12,
                template_app
                 (template_app (template_hole 11, template_var 8),
                  template_var 7)),
              template_app
               (template_app
                 (template_app (template_hole 10, template_var 6),
                  template_var 5),
                template_var 4))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 9,
                template_app
                 (template_app (template_hole 8, template_var 7),
                  template_var 3)),
              template_app
               (template_app
                 (template_app (template_hole 7, template_var 2),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app (template_hole 5, template_var 8),
                 template_var 3)),
             template_app
              (template_app
                (template_app
                  (template_hole 4,
                   template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 3, template_var 1),
                         template_var 2),
                       t_empty),
                     t_empty)),
                 template_app
                  (template_app (template_hole 1, template_var 5),
                   template_var 1)),
               template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 0)))
           ))),
    ("Sepref_Intf_Util.param_mopI",
     "[| (?f, ?g)
         : [?P]\<^sub>f ?R \<rightarrow> \<langle>?S\<rangle>nres_rel;
         (?Q, ?P) : ?R \<rightarrow> bool_rel |]
      ==> (mop ?Q ?f, mop ?P ?g)
          : ?R \<rightarrow>\<^sub>f \<langle>?S\<rangle>nres_rel",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 13,
                template_app
                 (template_app (template_hole 12, template_var 5),
                  template_var 4)),
              template_app
               (template_app
                 (template_app (template_hole 11, template_var 3),
                  template_var 2),
                template_app
                 (template_app (template_hole 10, template_hole 9),
                  template_var 1)))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app
                 (template_app (template_hole 7, template_var 0),
                  template_var 3)),
              template_app
               (template_app
                 (template_hole 6,
                  template_app
                   (template_app (template_hole 5, template_hole 4),
                    template_var 2)),
                template_hole 3))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 13,
               template_app
                (template_app
                  (template_hole 12,
                   template_app
                    (template_app (template_hole 2, template_var 0),
                     template_var 5)),
                 template_app
                  (template_app (template_hole 1, template_var 3),
                   template_var 4))),
             template_app
              (template_app
                (template_app (template_hole 11, t_empty), template_var 2),
               template_app
                (template_app (template_hole 10, template_hole 9),
                 template_var 1)))
           ))),
    ("Sepref_Rules.hf2hnr",
     "(?f, ?g) : [?P]\<^sub>a ?R \<rightarrow> ?S ==>
      ALL x xi.
         ?P x -->
         hn_refine (emp * hn_ctxt (fst ?R) x xi) (?f $ xi)
          (emp * hn_ctxt (snd ?R) x xi) ?S (?g $ x)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 13,
                template_app
                 (template_app (template_hole 12, template_var 4),
                  template_var 3)),
              template_app
               (template_app
                 (template_app (template_hole 11, template_var 2),
                  template_var 1),
                template_var 0))
            )],
       template_predicate (template_app (template_hole 10, t_empty)))),
    ("Sepref_Rules.fref_PRE_D2",
     "(?f, ?h) : [comp_PRE ?S1.0 ?Q ?P ?X]\<^sub>f ?R \<rightarrow> ?S ==>
      (?f, ?h)
      : [%x. ?Q x &
             (ALL y.
                 (y, x) : ?S1.0 -->
                 ?X x --> ?P x y)]\<^sub>f ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app
                 (template_app (template_hole 7, template_var 7),
                  template_var 6)),
              template_app
               (template_app
                 (template_app
                   (template_hole 6,
                    template_app
                     (template_app
                       (template_app
                         (template_app (template_hole 5, template_var 5),
                          template_var 4),
                        template_var 3),
                      template_var 2)),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 8,
               template_app
                (template_app (template_hole 7, template_var 7),
                 template_var 6)),
             template_app
              (template_app
                (template_app (template_hole 6, t_empty), template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.hfref_PRE_D2",
     "(?f, ?h) : [comp_PRE ?S1.0 ?Q ?P ?X]\<^sub>a ?R \<rightarrow> ?S ==>
      (?f, ?h)
      : [%x. ?Q x &
             (ALL y.
                 (y, x) : ?S1.0 -->
                 ?X x --> ?P x y)]\<^sub>a ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app
                 (template_app (template_hole 7, template_var 7),
                  template_var 6)),
              template_app
               (template_app
                 (template_app
                   (template_hole 6,
                    template_app
                     (template_app
                       (template_app
                         (template_app (template_hole 5, template_var 5),
                          template_var 4),
                        template_var 3),
                      template_var 2)),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 8,
               template_app
                (template_app (template_hole 7, template_var 7),
                 template_var 6)),
             template_app
              (template_app
                (template_app (template_hole 6, t_empty), template_var 1),
               template_var 0))
           ))),
    ("Sepref_Frame.hn_merge3",
     "[| NO_MATCH (hn_invalid ?XX) ?R1.0;
         hn_ctxt ?R1.0 ?x ?x' \<or>\<^sub>A
         hn_ctxt ?R2.0 ?x ?x' \<Longrightarrow>\<^sub>t
         hn_ctxt ?Rm ?x ?x' |]
      ==> hn_ctxt ?R1.0 ?x ?x' \<or>\<^sub>A
          hn_invalid ?R2.0 ?x ?x' \<Longrightarrow>\<^sub>t
          hn_invalid ?Rm ?x ?x'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_hole 5,
                  template_app (template_hole 4, template_var 5))),
              template_var 4)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app
                   (template_hole 2,
                    template_app
                     (template_app
                       (template_app (template_hole 1, template_var 4),
                        template_var 3),
                      template_var 2)),
                  template_app
                   (template_app
                     (template_app (template_hole 1, template_var 1),
                      template_var 3),
                    template_var 2))),
              template_app
               (template_app
                 (template_app (template_hole 1, template_var 0),
                  template_var 3),
                template_var 2))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app
                      (template_app (template_hole 1, template_var 4),
                       template_var 3),
                     template_var 2)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 1,
                       template_app (template_hole 0, template_var 1)),
                     template_var 3),
                   template_var 2))),
             template_app
              (template_app
                (template_app
                  (template_hole 1,
                   template_app (template_hole 0, template_var 0)),
                 template_var 3),
               template_var 2))
           ))),
    ("Sepref_Frame.hn_merge3",
     "[| NO_MATCH (hn_invalid ?XX) ?R2.0;
         hn_ctxt ?R1.0 ?x ?x' \<or>\<^sub>A
         hn_ctxt ?R2.0 ?x ?x' \<Longrightarrow>\<^sub>t
         hn_ctxt ?Rm ?x ?x' |]
      ==> hn_invalid ?R1.0 ?x ?x' \<or>\<^sub>A
          hn_ctxt ?R2.0 ?x ?x' \<Longrightarrow>\<^sub>t
          hn_invalid ?Rm ?x ?x'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_hole 5,
                  template_app (template_hole 4, template_var 5))),
              template_var 4)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app
                   (template_hole 2,
                    template_app
                     (template_app
                       (template_app (template_hole 1, template_var 3),
                        template_var 2),
                      template_var 1)),
                  template_app
                   (template_app
                     (template_app (template_hole 1, template_var 4),
                      template_var 2),
                    template_var 1))),
              template_app
               (template_app
                 (template_app (template_hole 1, template_var 0),
                  template_var 2),
                template_var 1))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 1,
                         template_app (template_hole 0, template_var 3)),
                       template_var 2),
                     template_var 1)),
                 template_app
                  (template_app
                    (template_app (template_hole 1, template_var 4),
                     template_var 2),
                   template_var 1))),
             template_app
              (template_app
                (template_app
                  (template_hole 1,
                   template_app (template_hole 0, template_var 0)),
                 template_var 2),
               template_var 1))
           ))),
    ("Sepref_Rules.hfref_compI_PRE_aux",
     "[| (?f, ?g) : [?P]\<^sub>a ?RR' \<rightarrow> ?S;
         (?g, ?h)
         : [?Q]\<^sub>f ?T \<rightarrow> \<langle>?U\<rangle>nres_rel |]
      ==> (?f, ?h)
          : [comp_PRE ?T ?Q (%_. ?P)
              (%_. True)]\<^sub>a hrp_comp ?RR'
                                   ?T \<rightarrow> hr_comp ?S ?U",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 14,
                template_app
                 (template_app (template_hole 13, template_var 8),
                  template_var 7)),
              template_app
               (template_app
                 (template_app (template_hole 12, template_var 6),
                  template_var 5),
                template_var 4))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 11,
                template_app
                 (template_app (template_hole 10, template_var 7),
                  template_var 3)),
              template_app
               (template_app
                 (template_app (template_hole 9, template_var 2),
                  template_var 1),
                template_app
                 (template_app (template_hole 8, template_hole 7),
                  template_var 0)))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app (template_hole 5, template_var 8),
                 template_var 3)),
             template_app
              (template_app
                (template_app
                  (template_hole 4,
                   template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 3, template_var 1),
                         template_var 2),
                       t_empty),
                     t_empty)),
                 template_app
                  (template_app (template_hole 1, template_var 5),
                   template_var 1)),
               template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 0)))
           ))),
    ("Sepref_HOL_Bindings.b_rel_subtyping_merge",
     "hn_ctxt ?A ?x ?y \<or>\<^sub>A
      hn_ctxt ?A' ?x ?y \<Longrightarrow>\<^sub>t
      hn_ctxt ?Am ?x ?y ==>
      hn_ctxt (b_assn ?A ?P) ?x ?y \<or>\<^sub>A
      hn_ctxt (b_assn ?A' ?P') ?x ?y \<Longrightarrow>\<^sub>t
      hn_ctxt (b_assn ?Am (%x. ?P x | ?P' x)) ?x ?y",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app
                 (template_app
                   (template_hole 3,
                    template_app
                     (template_app
                       (template_app (template_hole 2, template_var 6),
                        template_var 5),
                      template_var 4)),
                  template_app
                   (template_app
                     (template_app (template_hole 2, template_var 3),
                      template_var 5),
                    template_var 4))),
              template_app
               (template_app
                 (template_app (template_hole 2, template_var 2),
                  template_var 5),
                template_var 4))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app
                  (template_hole 3,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 2,
                         template_app
                          (template_app (template_hole 1, template_var 6),
                           template_var 1)),
                       template_var 5),
                     template_var 4)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 2,
                       template_app
                        (template_app (template_hole 1, template_var 3),
                         template_var 0)),
                     template_var 5),
                   template_var 4))),
             template_app
              (template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app (template_hole 1, template_var 2),
                     t_empty)),
                 template_var 5),
               template_var 4))
           ))),
    ("Sepref_Basic.hn_refine_cons_complete",
     "[| ?P \<Longrightarrow>\<^sub>t ?P'; hn_refine ?P' ?c ?Q ?R ?m;
         ?Q \<Longrightarrow>\<^sub>t ?Q';
         !!x y. ?R x y \<Longrightarrow>\<^sub>t ?R' x y; ?m <= ?m' |]
      ==> hn_refine ?P ?c ?Q' ?R' ?m'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 4, template_var 8),
              template_var 7)
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 3, template_var 7),
                    template_var 6),
                  template_var 5),
                template_var 4),
              template_var 3)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 4, template_var 5),
              template_var 2)
            ),
        template_predicate (template_app (template_hole 2, t_empty)),
        template_inequation (less_equals, template_var 3, template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 3, template_var 8),
                   template_var 6),
                 template_var 2),
               template_var 1),
             template_var 0)
           ))),
    ("Sepref_HOL_Bindings.prod_frame_match",
     "[| hn_ctxt ?A (fst ?x) (fst ?y) \<Longrightarrow>\<^sub>t
         hn_ctxt ?A' (fst ?x) (fst ?y);
         hn_ctxt ?B (snd ?x) (snd ?y) \<Longrightarrow>\<^sub>t
         hn_ctxt ?B' (snd ?x) (snd ?y) |]
      ==> hn_ctxt (?A \<times>\<^sub>a ?B) ?x ?y \<Longrightarrow>\<^sub>t
          hn_ctxt (?A' \<times>\<^sub>a ?B') ?x ?y",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app
                 (template_app
                   (template_app (template_hole 7, template_var 5),
                    template_app (template_hole 6, template_var 4)),
                  template_app (template_hole 5, template_var 3))),
              template_app
               (template_app
                 (template_app (template_hole 7, template_var 2),
                  template_app (template_hole 6, template_var 4)),
                template_app (template_hole 5, template_var 3)))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app
                 (template_app
                   (template_app (template_hole 4, template_var 1),
                    template_app (template_hole 3, template_var 4)),
                  template_app (template_hole 2, template_var 3))),
              template_app
               (template_app
                 (template_app (template_hole 4, template_var 0),
                  template_app (template_hole 3, template_var 4)),
                template_app (template_hole 2, template_var 3)))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 8,
               template_app
                (template_app
                  (template_app
                    (template_hole 1,
                     template_app
                      (template_app (template_hole 0, template_var 5),
                       template_var 1)),
                   template_var 4),
                 template_var 3)),
             template_app
              (template_app
                (template_app
                  (template_hole 1,
                   template_app
                    (template_app (template_hole 0, template_var 2),
                     template_var 0)),
                 template_var 4),
               template_var 3))
           ))),
    ("Sepref_Frame.hn_merge1",
     "[| hn_ctxt ?R1.0 ?x ?x' \<or>\<^sub>A
         hn_ctxt ?R2.0 ?x ?x' \<Longrightarrow>\<^sub>t
         hn_ctxt ?R ?x ?x';
         ?Fl \<or>\<^sub>A ?Fr \<Longrightarrow>\<^sub>t ?F |]
      ==> ?Fl * hn_ctxt ?R1.0 ?x ?x' \<or>\<^sub>A
          ?Fr * hn_ctxt ?R2.0 ?x ?x' \<Longrightarrow>\<^sub>t
          ?F * hn_ctxt ?R ?x ?x'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app
                   (template_hole 2,
                    template_app
                     (template_app
                       (template_app (template_hole 1, template_var 7),
                        template_var 6),
                      template_var 5)),
                  template_app
                   (template_app
                     (template_app (template_hole 1, template_var 4),
                      template_var 6),
                    template_var 5))),
              template_app
               (template_app
                 (template_app (template_hole 1, template_var 3),
                  template_var 6),
                template_var 5))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app (template_hole 2, template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app (template_hole 0, template_var 2),
                     template_app
                      (template_app
                        (template_app (template_hole 1, template_var 7),
                         template_var 6),
                       template_var 5))),
                 template_app
                  (template_app (template_hole 0, template_var 1),
                   template_app
                    (template_app
                      (template_app (template_hole 1, template_var 4),
                       template_var 6),
                     template_var 5)))),
             template_app
              (template_app (template_hole 0, template_var 0),
               template_app
                (template_app
                  (template_app (template_hole 1, template_var 3),
                   template_var 6),
                 template_var 5)))
           ))),
    ("Sepref_Rules.hnr_intro_dummy",
     "ALL x xi.
         ?P x -->
         hn_refine (?\<Gamma> x xi) (?c xi) (?\<Gamma>' x xi) ?R (?a x) ==>
      ALL x xi.
         ?P x -->
         hn_refine (emp * ?\<Gamma> x xi) (?c xi) (emp * ?\<Gamma>' x xi) ?R
          (?a x)",
     template_implication
      ([template_predicate (template_app (template_hole 5, t_empty))],
       template_predicate (template_app (template_hole 5, t_empty)))),
    ("Sepref_Rules.hfsynth_hnr_from_hfI",
     "ALL x xi.
         ?P x & hfsynth_ID_R (fst ?R) x -->
         hn_refine (emp * hn_ctxt (fst ?R) x xi) (?f $ xi)
          (emp * hn_ctxt (snd ?R) x xi) ?S (?g $ x) ==>
      (?f, ?g) : [?P]\<^sub>a ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate (template_app (template_hole 15, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 0)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 3),
               template_var 1))
           ))),
    ("Sepref_Rules.hfref_compI_PRE",
     "[| (?f, ?g) : [?P]\<^sub>a ?RR' \<rightarrow> ?S;
         (?g, ?h)
         : [?Q]\<^sub>f ?T \<rightarrow> \<langle>?U\<rangle>nres_rel |]
      ==> (?f, ?h)
          : [comp_PRE ?T ?Q (%x. ?P)
              (%x. nofail
                    (?h x))]\<^sub>a hrp_comp ?RR'
?T \<rightarrow> hr_comp ?S ?U",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 14,
                template_app
                 (template_app (template_hole 13, template_var 8),
                  template_var 7)),
              template_app
               (template_app
                 (template_app (template_hole 12, template_var 6),
                  template_var 5),
                template_var 4))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 11,
                template_app
                 (template_app (template_hole 10, template_var 7),
                  template_var 3)),
              template_app
               (template_app
                 (template_app (template_hole 9, template_var 2),
                  template_var 1),
                template_app
                 (template_app (template_hole 8, template_hole 7),
                  template_var 0)))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app (template_hole 5, template_var 8),
                 template_var 3)),
             template_app
              (template_app
                (template_app
                  (template_hole 4,
                   template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 3, template_var 1),
                         template_var 2),
                       t_empty),
                     t_empty)),
                 template_app
                  (template_app (template_hole 1, template_var 5),
                   template_var 1)),
               template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 0)))
           ))),
    ("Sepref_Foreach.extend_list_of_filtered_set",
     "[| finite ?S; distinct ?xs'; set ?xs' = {x: ?S. ?P x};
         !!xs. [| ?xs' = filter ?P xs; distinct xs; set xs = ?S |]
               ==> ?thesis |]
      ==> ?thesis",
     template_implication
      ([template_predicate (template_app (template_hole 9, template_var 3)),
        template_predicate (template_app (template_hole 8, template_var 2)),
        template_equation
         (template_app (template_hole 6, template_var 2),
          template_app (template_hole 5, t_empty)),
        template_predicate (template_app (template_hole 2, t_empty))],
       template_predicate (template_var 0))),
    ("Sepref_Rules.fref_compI'",
     "[| (?f, ?g) : [?P]\<^sub>f ?R1.0 \<rightarrow> ?R2.0;
         (?g, ?h) : [?Q]\<^sub>f ?S1.0 \<rightarrow> ?S2.0 |]
      ==> (?f, ?h)
          : [%x. ?Q x &
                 (ALL y.
                     (y, x) : ?S1.0 -->
                     ?P y)]\<^sub>f ?R1.0 O
                                    ?S1.0 \<rightarrow> ?R2.0 O ?S2.0",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 15,
                template_app
                 (template_app (template_hole 14, template_var 8),
                  template_var 7)),
              template_app
               (template_app
                 (template_app (template_hole 13, template_var 6),
                  template_var 5),
                template_var 4))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 12,
                template_app
                 (template_app (template_hole 11, template_var 7),
                  template_var 3)),
              template_app
               (template_app
                 (template_app (template_hole 10, template_var 2),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 9,
               template_app
                (template_app (template_hole 8, template_var 8),
                 template_var 3)),
             template_app
              (template_app
                (template_app (template_hole 7, t_empty),
                 template_app
                  (template_app (template_hole 1, template_var 5),
                   template_var 1)),
               template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 0)))
           ))),
    ("Sepref_Translate.sepref_fr_rules",
     "hn_refine (hn_val ?A ?x ?xi * hn_val (?A \<rightarrow> ?B) ?f ?fi)
       (return (pho_apply $ ?fi $ ?xi))
       (hn_val (?A \<rightarrow> ?B) ?f ?fi * hn_val ?A ?x ?xi) (pure ?B)
       (RETURN $ (pho_apply $ ?f $ ?x))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 18,
                   template_app
                    (template_app
                      (template_hole 17,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 16,
                             template_app
                              (template_hole 15, template_var 5)),
                           template_var 4),
                         template_var 3)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 14,
                           template_app
                            (template_hole 13,
                             template_app
                              (template_app
                                (template_hole 12,
                                 template_app
                                  (template_app
                                    (template_hole 11, template_hole 10),
                                   template_var 5)),
                               template_var 2))),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_hole 8,
                       template_app
                        (template_app (template_hole 7, template_hole 6),
                         template_var 0)),
                     template_var 3))),
               template_app
                (template_app
                  (template_hole 17,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 14,
                         template_app
                          (template_hole 13,
                           template_app
                            (template_app
                              (template_hole 12,
                               template_app
                                (template_app
                                  (template_hole 11, template_hole 10),
                                 template_var 5)),
                             template_var 2))),
                       template_var 1),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 16,
                       template_app (template_hole 15, template_var 5)),
                     template_var 4),
                   template_var 3))),
             template_app (template_hole 5, template_var 2)),
           template_app
            (template_app (template_hole 4, template_hole 3),
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 4)))
         )),
    ("Sepref_Improper.pure_fun_refine",
     "hn_refine (hn_val (?A \<rightarrow> ?B) ?f ?fi * hn_val ?A ?x ?xi)
       (return (pho_apply $ ?fi $ ?xi))
       (hn_val (?A \<rightarrow> ?B) ?f ?fi * hn_val ?A ?x ?xi) (pure ?B)
       (RETURN $ (pho_apply $ ?f $ ?x))",
     template_predicate
      (
         template_app
          (template_app
            (template_app
              (template_app
                (template_app
                  (template_hole 18,
                   template_app
                    (template_app
                      (template_hole 17,
                       template_app
                        (template_app
                          (template_app
                            (template_hole 16,
                             template_app
                              (template_hole 15,
                               template_app
                                (template_app
                                  (template_hole 14,
                                   template_app
                                    (template_app
(template_hole 13, template_hole 12),
                                     template_var 5)),
                                 template_var 4))),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 11,
                           template_app (template_hole 10, template_var 5)),
                         template_var 1),
                       template_var 0))),
                 template_app
                  (template_hole 9,
                   template_app
                    (template_app
                      (template_hole 8,
                       template_app
                        (template_app (template_hole 7, template_hole 6),
                         template_var 2)),
                     template_var 0))),
               template_app
                (template_app
                  (template_hole 17,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 16,
                         template_app
                          (template_hole 15,
                           template_app
                            (template_app
                              (template_hole 14,
                               template_app
                                (template_app
                                  (template_hole 13, template_hole 12),
                                 template_var 5)),
                             template_var 4))),
                       template_var 3),
                     template_var 2)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 11,
                       template_app (template_hole 10, template_var 5)),
                     template_var 1),
                   template_var 0))),
             template_app (template_hole 5, template_var 4)),
           template_app
            (template_app (template_hole 4, template_hole 3),
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 3)),
               template_var 1)))
         )),
    ("Sepref_Rules.hfcomp",
     "[| (?f, ?g) : [?P]\<^sub>a ?RR' \<rightarrow> ?S;
         (?g, ?h)
         : [?Q]\<^sub>f ?T \<rightarrow> \<langle>?U\<rangle>nres_rel |]
      ==> (?f, ?h)
          : [%a. ?Q a &
                 (ALL a'.
                     (a', a) : ?T -->
                     ?P a')]\<^sub>a hrp_comp ?RR'
?T \<rightarrow> hr_comp ?S ?U",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 17,
                template_app
                 (template_app (template_hole 16, template_var 8),
                  template_var 7)),
              template_app
               (template_app
                 (template_app (template_hole 15, template_var 6),
                  template_var 5),
                template_var 4))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 14,
                template_app
                 (template_app (template_hole 13, template_var 7),
                  template_var 3)),
              template_app
               (template_app
                 (template_app (template_hole 12, template_var 2),
                  template_var 1),
                template_app
                 (template_app (template_hole 11, template_hole 10),
                  template_var 0)))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 9,
               template_app
                (template_app (template_hole 8, template_var 8),
                 template_var 3)),
             template_app
              (template_app
                (template_app (template_hole 7, t_empty),
                 template_app
                  (template_app (template_hole 1, template_var 5),
                   template_var 1)),
               template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 0)))
           ))),
    ("Sepref_Foreach.heap_fixp_mono",
     "[| !!x d. mono_Heap (%xa. ?B x xa d);
         !!Z xa. mono_Heap (%a. ?B a Z xa) |]
      ==> mono_Heap (%x. heap.fixp_fun (?B x) ?\<sigma>)",
     template_implication
      ([template_predicate (template_app (template_hole 12, t_empty)),
        template_predicate (template_app (template_hole 6, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_hole 5,
                 template_app (template_hole 4, template_hole 3)),
               template_hole 7),
             t_empty)
           ))),
    ("Sepref_Rules.fref_cons",
     "[| (?f, ?g) : [?P]\<^sub>f ?R \<rightarrow> ?S;
         !!c a. [| (c, a) : ?R'; ?Q a |] ==> ?P a; ?R' <= ?R; ?S <= ?S' |]
      ==> (?f, ?g) : [?Q]\<^sub>f ?R' \<rightarrow> ?S'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app
                 (template_app (template_hole 7, template_var 7),
                  template_var 6)),
              template_app
               (template_app
                 (template_app (template_hole 6, template_var 5),
                  template_var 4),
                template_var 3))
            ),
        template_predicate (template_app (template_hole 5, t_empty)),
        template_inequation (less_equals, template_var 2, template_var 4),
        template_inequation (less_equals, template_var 3, template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 8,
               template_app
                (template_app (template_hole 7, template_var 7),
                 template_var 6)),
             template_app
              (template_app
                (template_app (template_hole 6, template_var 1),
                 template_var 2),
               template_var 0))
           ))),
    ("Sepref_Rules.fref_to_pure_hfref'",
     "[| (?f, ?g)
         : [?P]\<^sub>f ?R \<rightarrow> \<langle>?S\<rangle>nres_rel;
         !!x. x : Domain ?R Int ?R^-1 `` Collect ?P ==>
              ?f x = RETURN (?f' x) |]
      ==> (return o ?f', ?g)
          : [?P]\<^sub>a (pure ?R)\<^sup>k \<rightarrow> pure ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 22,
                template_app
                 (template_app (template_hole 21, template_var 5),
                  template_var 4)),
              template_app
               (template_app
                 (template_app (template_hole 20, template_var 3),
                  template_var 2),
                template_app
                 (template_app (template_hole 19, template_hole 18),
                  template_var 1)))
            ),
        template_predicate (template_app (template_hole 17, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 8,
               template_app
                (template_app
                  (template_hole 7,
                   template_app
                    (template_app (template_hole 6, template_hole 5),
                     template_var 0)),
                 template_var 4)),
             template_app
              (template_app
                (template_app (template_hole 4, template_var 3),
                 template_app
                  (template_app
                    (template_hole 3,
                     template_app (template_hole 2, template_var 2)),
                   template_hole 1)),
               template_app (template_hole 0, template_var 1)))
           ))),
    ("Sepref_HOL_Bindings.b_assn_subtyping_match",
     "[| hn_ctxt (b_assn ?A ?P) ?x ?y \<Longrightarrow>\<^sub>t
         hn_ctxt ?A' ?x ?y;
         [| vassn_tag (hn_ctxt ?A ?x ?y); vassn_tag (hn_ctxt ?A' ?x ?y);
            ?P ?x |]
         ==> ?P' ?x |]
      ==> hn_ctxt (b_assn ?A ?P) ?x ?y \<Longrightarrow>\<^sub>t
          hn_ctxt (b_assn ?A' ?P') ?x ?y",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app
                   (template_app
                     (template_hole 2,
                      template_app
                       (template_app (template_hole 1, template_var 5),
                        template_var 4)),
                    template_var 3),
                  template_var 2)),
              template_app
               (template_app
                 (template_app (template_hole 2, template_var 1),
                  template_var 3),
                template_var 2))
            ),
        template_implication
         ([template_predicate
            (
               template_app
                (template_hole 0,
                 template_app
                  (template_app
                    (template_app (template_hole 2, template_var 5),
                     template_var 3),
                   template_var 2))
               )],
          template_implication
           ([template_predicate
              (
                 template_app
                  (template_hole 0,
                   template_app
                    (template_app
                      (template_app (template_hole 2, template_var 1),
                       template_var 3),
                     template_var 2))
                 )],
            template_implication
             ([template_predicate
                (template_app (template_var 4, template_var 3))],
              template_predicate
               (template_app (template_var 0, template_var 3)))))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app
                  (template_app
                    (template_hole 2,
                     template_app
                      (template_app (template_hole 1, template_var 5),
                       template_var 4)),
                   template_var 3),
                 template_var 2)),
             template_app
              (template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app (template_hole 1, template_var 1),
                     template_var 0)),
                 template_var 3),
               template_var 2))
           ))),
    ("Sepref_Basic.hn_admissible",
     "[| precise ?Ry;
         ALL f:?A. nofail (f ?x) --> <?P> ?c <%r. hn_rel ?Ry (f ?x) r * ?F>;
         nofail (INF f\<in>?A. f ?x) |]
      ==> <?P> ?c <%r. hn_rel ?Ry (INF f\<in>?A. f ?x) r * ?F>",
     template_implication
      ([template_predicate (template_app (template_hole 8, template_var 5)),
        template_predicate
         (
            template_app
             (template_app (template_hole 7, template_var 4), t_empty)
            ),
        template_predicate
         (
            template_app
             (template_hole 5,
              template_app
               (template_hole 1,
                template_app
                 (template_app (template_hole 0, t_empty), template_var 4)))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 4, template_var 2),
               template_var 1),
             t_empty)
           ))),
    ("Sepref_Foreach.imp_for'_rule",
     "[| ?l <= ?u; ?P \<Longrightarrow>\<^sub>A ?I ?l ?s;
         !!i s. [| ?l <= i; i < ?u |] ==> <?I i s> ?f i s <?I (i + 1)> |]
      ==> <?P> imp_for' ?l ?u ?f ?s <?I ?u>",
     template_implication
      ([template_inequation (less_equals, template_var 5, template_var 4),
        template_predicate
         (
            template_app
             (template_app (template_hole 7, template_var 3),
              template_app
               (template_app (template_var 2, template_var 5),
                template_var 1))
            ),
        template_predicate (template_app (template_hole 6, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 3, template_var 3),
               template_app
                (template_app
                  (template_app
                    (template_app (template_hole 0, template_var 5),
                     template_var 4),
                   template_var 0),
                 template_var 1)),
             template_app (template_var 2, template_var 4))
           ))),
    ("Sepref_Rules.fref_uncurry_conv",
     "((uncurry ?c, uncurry ?a)
       : [?P]\<^sub>f ?R1.0 \<times>\<^sub>r ?R2.0 \<rightarrow> ?S) =
      (ALL x1 y1 x2 y2.
          ?P (y1, y2) -->
          (x1, y1) : ?R1.0 -->
          (x2, y2) : ?R2.0 --> (?c x1 x2, ?a y1 y2) : ?S)",
     template_equation
      (template_app
        (template_app
          (template_hole 19,
           template_app
            (template_app
              (template_hole 18,
               template_app (template_hole 17, template_var 5)),
             template_app (template_hole 16, template_var 4))),
         template_app
          (template_app
            (template_app (template_hole 15, template_var 3),
             template_app
              (template_app
                (template_hole 14,
                 template_app
                  (template_app (template_hole 13, template_hole 12),
                   template_var 2)),
               template_var 1)),
           template_var 0)),
       template_app (template_hole 11, t_empty))),
    ("Sepref_HOL_Bindings.list_merge_cong",
     "(!!x x'.
          [| x : set ?l; x' : set ?l' |]
          ==> hn_ctxt ?A x x' \<or>\<^sub>A
              hn_ctxt ?A' x x' \<Longrightarrow>\<^sub>t
              hn_ctxt ?Am x x') ==>
      hn_ctxt (list_assn ?A) ?l ?l' \<or>\<^sub>A
      hn_ctxt (list_assn ?A') ?l ?l' \<Longrightarrow>\<^sub>t
      hn_ctxt (list_assn ?Am) ?l ?l'",
     template_implication
      ([template_predicate (template_app (template_hole 11, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app
                  (template_hole 3,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 1,
                         template_app (template_hole 0, template_var 2)),
                       template_var 4),
                     template_var 3)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 1,
                       template_app (template_hole 0, template_var 1)),
                     template_var 4),
                   template_var 3))),
             template_app
              (template_app
                (template_app
                  (template_hole 1,
                   template_app (template_hole 0, template_var 0)),
                 template_var 4),
               template_var 3))
           ))),
    ("Sepref_Translate.sepref_fr_rules",
     "CONSTRAINT is_pure ?R7 ==>
      hn_refine
       (hn_val bool_rel ?x'b7 ?xb7 * hn_ctxt ?R7 ?x'a7 ?xa7 *
        hn_ctxt ?R7 ?x'7 ?x7)
       (return (case ?xb7 of True => ?x7 | False => ?xa7))
       (hn_ctxt ?R7 ?x'7 ?x7 *
        (hn_ctxt ?R7 ?x'a7 ?xa7 * hn_val bool_rel ?x'b7 ?xb7))
       ?R7 (RETURN $ (case_bool $ ?x'7 $ ?x'a7 $ ?x'b7))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 15, template_hole 14),
              template_var 6)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_hole 13,
                     template_app
                      (template_app
                        (template_hole 12,
                         template_app
                          (template_app
                            (template_hole 12,
                             template_app
                              (template_app
                                (template_app
                                  (template_hole 11,
                                   template_app
                                    (template_hole 10, template_hole 9)),
                                 template_var 5),
                               template_var 4)),
                           template_app
                            (template_app
                              (template_app
                                (template_hole 8, template_var 6),
                               template_var 3),
                             template_var 2))),
                       template_app
                        (template_app
                          (template_app (template_hole 8, template_var 6),
                           template_var 1),
                         template_var 0))),
                   template_app
                    (template_hole 7,
                     template_app
                      (template_app
                        (template_app (template_hole 6, template_var 0),
                         template_var 2),
                       template_var 4))),
                 template_app
                  (template_app
                    (template_hole 12,
                     template_app
                      (template_app
                        (template_app (template_hole 8, template_var 6),
                         template_var 1),
                       template_var 0)),
                   template_app
                    (template_app
                      (template_hole 12,
                       template_app
                        (template_app
                          (template_app (template_hole 8, template_var 6),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 11,
                           template_app
                            (template_hole 10, template_hole 9)),
                         template_var 5),
                       template_var 4)))),
               template_var 6),
             template_app
              (template_app (template_hole 5, template_hole 4),
               template_app
                (template_app
                  (template_hole 3,
                   template_app
                    (template_app
                      (template_hole 2,
                       template_app
                        (template_app (template_hole 1, template_hole 0),
                         template_var 1)),
                     template_var 3)),
                 template_var 5)))
           ))),
    ("Sepref_Translate.sepref_fr_rules",
     "CONSTRAINT is_pure ?R7 ==>
      hn_refine
       (hn_val bool_rel ?x'b7 ?xb7 * hn_ctxt ?R7 ?x'a7 ?xa7 *
        hn_ctxt ?R7 ?x'7 ?x7)
       (return (old.rec_bool ?x7 ?xa7 ?xb7))
       (hn_ctxt ?R7 ?x'7 ?x7 *
        (hn_ctxt ?R7 ?x'a7 ?xa7 * hn_val bool_rel ?x'b7 ?xb7))
       ?R7 (RETURN $ (old.rec_bool $ ?x'7 $ ?x'a7 $ ?x'b7))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 15, template_hole 14),
              template_var 6)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_hole 13,
                     template_app
                      (template_app
                        (template_hole 12,
                         template_app
                          (template_app
                            (template_hole 12,
                             template_app
                              (template_app
                                (template_app
                                  (template_hole 11,
                                   template_app
                                    (template_hole 10, template_hole 9)),
                                 template_var 5),
                               template_var 4)),
                           template_app
                            (template_app
                              (template_app
                                (template_hole 8, template_var 6),
                               template_var 3),
                             template_var 2))),
                       template_app
                        (template_app
                          (template_app (template_hole 8, template_var 6),
                           template_var 1),
                         template_var 0))),
                   template_app
                    (template_hole 7,
                     template_app
                      (template_app
                        (template_app (template_hole 6, template_var 0),
                         template_var 2),
                       template_var 4))),
                 template_app
                  (template_app
                    (template_hole 12,
                     template_app
                      (template_app
                        (template_app (template_hole 8, template_var 6),
                         template_var 1),
                       template_var 0)),
                   template_app
                    (template_app
                      (template_hole 12,
                       template_app
                        (template_app
                          (template_app (template_hole 8, template_var 6),
                           template_var 3),
                         template_var 2)),
                     template_app
                      (template_app
                        (template_app
                          (template_hole 11,
                           template_app
                            (template_hole 10, template_hole 9)),
                         template_var 5),
                       template_var 4)))),
               template_var 6),
             template_app
              (template_app (template_hole 5, template_hole 4),
               template_app
                (template_app
                  (template_hole 3,
                   template_app
                    (template_app
                      (template_hole 2,
                       template_app
                        (template_app (template_hole 1, template_hole 0),
                         template_var 1)),
                     template_var 3)),
                 template_var 5)))
           ))),
    ("Sepref_Basic.hn_admissible'",
     "[| precise ?Ry;
         ALL f:?A.
            nofail (f ?x) -->
            <?P> ?c <%r. hn_rel ?Ry (f ?x) r * ?F>\<^sub>t;
         nofail (INF f\<in>?A. f ?x) |]
      ==> <?P> ?c <%r. hn_rel ?Ry (INF f\<in>?A. f ?x) r * ?F>\<^sub>t",
     template_implication
      ([template_predicate (template_app (template_hole 9, template_var 5)),
        template_predicate
         (
            template_app
             (template_app (template_hole 8, template_var 4), t_empty)
            ),
        template_predicate
         (
            template_app
             (template_hole 6,
              template_app
               (template_hole 1,
                template_app
                 (template_app (template_hole 0, t_empty), template_var 4)))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app (template_hole 5, template_var 2),
               template_var 1),
             t_empty)
           ))),
    ("Sepref_Intf_Util.transform_pre_param",
     "[| IMP_LIST ?Cns
          ((?f, ?h)
           : [tcomp_pre ?Q ?T
               ?P]\<^sub>a hrp_comp ?RR' ?T \<rightarrow> hr_comp ?S ?U);
         IMP_LIST ?Cns ((?P, ?P') : ?T \<rightarrow> bool_rel);
         IMP_PRE ?PP' (and_pre ?P' ?Q) |]
      ==> IMP_LIST ?Cns
           ((?f, ?h)
            : [?PP']\<^sub>a hrp_comp ?RR' ?T \<rightarrow> hr_comp ?S ?U)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 14, template_var 10),
              template_app
               (template_app
                 (template_hole 13,
                  template_app
                   (template_app (template_hole 12, template_var 9),
                    template_var 8)),
                template_app
                 (template_app
                   (template_app
                     (template_hole 11,
                      template_app
                       (template_app
                         (template_app (template_hole 10, template_var 7),
                          template_var 6),
                        template_var 5)),
                    template_app
                     (template_app (template_hole 9, template_var 4),
                      template_var 6)),
                  template_app
                   (template_app (template_hole 8, template_var 3),
                    template_var 2))))
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 14, template_var 10),
              template_app
               (template_app
                 (template_hole 7,
                  template_app
                   (template_app (template_hole 6, template_var 5),
                    template_var 1)),
                template_app
                 (template_app
                   (template_hole 5,
                    template_app
                     (template_app (template_hole 4, template_hole 3),
                      template_var 6)),
                  template_hole 2)))
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 0),
              template_app
               (template_app (template_hole 0, template_var 1),
                template_var 7))
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 14, template_var 10),
             template_app
              (template_app
                (template_hole 13,
                 template_app
                  (template_app (template_hole 12, template_var 9),
                   template_var 8)),
               template_app
                (template_app
                  (template_app (template_hole 11, template_var 0),
                   template_app
                    (template_app (template_hole 9, template_var 4),
                     template_var 6)),
                 template_app
                  (template_app (template_hole 8, template_var 3),
                   template_var 2))))
           ))),
    ("Sepref_Foreach.monadic_nfoldli_rec",
     "monadic_nfoldli ?x' ?c ?f ?\<sigma>
      <= \<Down> Id
          (REC\<^sub>T
            (%W (xs, \<sigma>).
                ASSERT (FOREACH_inv ?xs0.0 ?I (xs, \<sigma>)) >>=
                (%_. if xs = [] then RETURN (xs, \<sigma>)
                     else ?c \<sigma> >>=
                          (%b. if b
                               then FOREACH_body ?f (xs, \<sigma>) >>= W
                               else RETURN (xs, \<sigma>))))
            (?x', ?\<sigma>) >>=
           (%(uu_, y). RETURN y))",
     template_inequation
      (less_equals,
       template_app
        (template_app
          (template_app
            (template_app (template_hole 18, template_var 5),
             template_var 4),
           template_var 3),
         template_var 2),
       template_app
        (template_app (template_hole 17, template_hole 16),
         template_app
          (template_app
            (template_hole 15,
             template_app
              (template_app (template_hole 14, t_empty),
               template_app
                (template_app (template_hole 9, template_var 5),
                 template_var 2))),
           template_app (template_hole 1, t_empty))))),
    ("Sepref_Basic.hnr_bind",
     "[| hn_refine ?\<Gamma> ?m' ?\<Gamma>1.0 ?Rh ?m;
         !!x x'.
            RETURN x <= ?m ==>
            hn_refine (?\<Gamma>1.0 * hn_ctxt ?Rh x x') (?f' x')
             (?\<Gamma>2.0 x x') ?R (?f x);
         !!x x'.
            ?\<Gamma>2.0 x x' \<Longrightarrow>\<^sub>t
            ?\<Gamma>' * hn_ctxt ?Rx x x' |]
      ==> hn_refine ?\<Gamma> (?m' >>= ?f') ?\<Gamma>' ?R (?m >>= ?f)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 10, template_var 10),
                    template_var 9),
                  template_var 8),
                template_var 7),
              template_var 6)
            ),
        template_predicate (template_app (template_hole 9, t_empty)),
        template_predicate (template_app (template_hole 9, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 5, template_var 10),
                   template_app
                    (template_app (template_hole 1, template_var 9),
                     template_var 5)),
                 template_var 1),
               template_var 3),
             template_app
              (template_app (template_hole 0, template_var 6),
               template_var 2))
           ))),
    ("Sepref_HOL_Bindings.prod_frame_merge",
     "[| hn_ctxt ?A (fst ?x) (fst ?y) \<or>\<^sub>A
         hn_ctxt ?A' (fst ?x) (fst ?y) \<Longrightarrow>\<^sub>t
         hn_ctxt ?Am (fst ?x) (fst ?y);
         hn_ctxt ?B (snd ?x) (snd ?y) \<or>\<^sub>A
         hn_ctxt ?B' (snd ?x) (snd ?y) \<Longrightarrow>\<^sub>t
         hn_ctxt ?Bm (snd ?x) (snd ?y) |]
      ==> hn_ctxt (?A \<times>\<^sub>a ?B) ?x ?y \<or>\<^sub>A
          hn_ctxt (?A' \<times>\<^sub>a ?B') ?x ?y \<Longrightarrow>\<^sub>t
          hn_ctxt (?Am \<times>\<^sub>a ?Bm) ?x ?y",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 9,
                template_app
                 (template_app
                   (template_hole 8,
                    template_app
                     (template_app
                       (template_app (template_hole 7, template_var 7),
                        template_app (template_hole 6, template_var 6)),
                      template_app (template_hole 5, template_var 5))),
                  template_app
                   (template_app
                     (template_app (template_hole 7, template_var 4),
                      template_app (template_hole 6, template_var 6)),
                    template_app (template_hole 5, template_var 5)))),
              template_app
               (template_app
                 (template_app (template_hole 7, template_var 3),
                  template_app (template_hole 6, template_var 6)),
                template_app (template_hole 5, template_var 5)))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 9,
                template_app
                 (template_app
                   (template_hole 8,
                    template_app
                     (template_app
                       (template_app (template_hole 4, template_var 2),
                        template_app (template_hole 3, template_var 6)),
                      template_app (template_hole 2, template_var 5))),
                  template_app
                   (template_app
                     (template_app (template_hole 4, template_var 1),
                      template_app (template_hole 3, template_var 6)),
                    template_app (template_hole 2, template_var 5)))),
              template_app
               (template_app
                 (template_app (template_hole 4, template_var 0),
                  template_app (template_hole 3, template_var 6)),
                template_app (template_hole 2, template_var 5)))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 9,
               template_app
                (template_app
                  (template_hole 8,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 1,
                         template_app
                          (template_app (template_hole 0, template_var 7),
                           template_var 2)),
                       template_var 6),
                     template_var 5)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 1,
                       template_app
                        (template_app (template_hole 0, template_var 4),
                         template_var 1)),
                     template_var 6),
                   template_var 5))),
             template_app
              (template_app
                (template_app
                  (template_hole 1,
                   template_app
                    (template_app (template_hole 0, template_var 3),
                     template_var 0)),
                 template_var 6),
               template_var 5))
           ))),
    ("Sepref_Basic.hnr_If",
     "[| ?\<Gamma> \<Longrightarrow>\<^sub>t
         ?\<Gamma>1.0 * hn_val bool_rel ?a ?a';
         ?a ==>
         hn_refine (?\<Gamma>1.0 * hn_val bool_rel ?a ?a') ?b' ?\<Gamma>2b
          ?R ?b;
         ~ ?a ==>
         hn_refine (?\<Gamma>1.0 * hn_val bool_rel ?a ?a') ?c' ?\<Gamma>2c
          ?R ?c;
         ?\<Gamma>2b \<or>\<^sub>A ?\<Gamma>2c \<Longrightarrow>\<^sub>t
         ?\<Gamma>' |]
      ==> hn_refine ?\<Gamma> (if ?a' then ?b' else ?c') ?\<Gamma>' ?R
           (if ?a then ?b else ?c)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 9, template_var 11),
              template_app
               (template_app (template_hole 8, template_var 10),
                template_app
                 (template_app
                   (template_app
                     (template_hole 7,
                      template_app (template_hole 6, template_hole 5)),
                    template_var 9),
                  template_var 8)))
            ),
        template_implication
         ([template_predicate (template_var 9)],
          template_predicate
           (
              template_app
               (template_app
                 (template_app
                   (template_app
                     (template_app
                       (template_hole 4,
                        template_app
                         (template_app (template_hole 8, template_var 10),
                          template_app
                           (template_app
                             (template_app
                               (template_hole 7,
                                template_app
                                 (template_hole 6, template_hole 5)),
                              template_var 9),
                            template_var 8))),
                      template_var 7),
                    template_var 6),
                  template_var 5),
                template_var 4)
              )),
        template_implication
         ([template_negation (template_predicate (template_var 9))],
          template_predicate
           (
              template_app
               (template_app
                 (template_app
                   (template_app
                     (template_app
                       (template_hole 4,
                        template_app
                         (template_app (template_hole 8, template_var 10),
                          template_app
                           (template_app
                             (template_app
                               (template_hole 7,
                                template_app
                                 (template_hole 6, template_hole 5)),
                              template_var 9),
                            template_var 8))),
                      template_var 3),
                    template_var 2),
                  template_var 5),
                template_var 1)
              )),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 9,
                template_app
                 (template_app (template_hole 2, template_var 6),
                  template_var 2)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 4, template_var 11),
                   template_app
                    (template_app
                      (template_app (template_hole 1, template_var 8),
                       template_var 7),
                     template_var 3)),
                 template_var 0),
               template_var 5),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 9),
                 template_var 4),
               template_var 1))
           ))),
    ("Sepref_Translate.hn_bind",
     "[| hn_refine ?\<Gamma> ?m' ?\<Gamma>1.0 ?Rh ?m;
         !!x x'.
            bind_ref_tag x ?m ==>
            hn_refine (?\<Gamma>1.0 * hn_ctxt ?Rh x x') (?f' x')
             (?\<Gamma>2.0 x x') ?R (?f x);
         !!x x'.
            ?\<Gamma>2.0 x x' \<Longrightarrow>\<^sub>t
            ?\<Gamma>' * hn_ctxt ?Rx x x' |]
      ==> hn_refine ?\<Gamma> (?m' >>= ?f') ?\<Gamma>' ?R
           ((>>=) $ ?m $ (%x. (#?f x#)))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_app
                 (template_app
                   (template_app (template_hole 13, template_var 10),
                    template_var 9),
                  template_var 8),
                template_var 7),
              template_var 6)
            ),
        template_predicate (template_app (template_hole 12, t_empty)),
        template_predicate (template_app (template_hole 12, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 9, template_var 10),
                   template_app
                    (template_app (template_hole 5, template_var 9),
                     template_var 5)),
                 template_var 1),
               template_var 3),
             template_app
              (template_app
                (template_hole 4,
                 template_app
                  (template_app (template_hole 3, template_hole 2),
                   template_var 6)),
               t_empty))
           ))),
    ("Sepref_HOL_Bindings.sum_match_cong",
     "[| !!x y.
            [| ?e = Inl x; ?e' = Inl y |]
            ==> hn_ctxt ?A x y \<Longrightarrow>\<^sub>t hn_ctxt ?A' x y;
         !!x y.
            [| ?e = Inr x; ?e' = Inr y |]
            ==> hn_ctxt ?B x y \<Longrightarrow>\<^sub>t hn_ctxt ?B' x y |]
      ==> hn_ctxt (?A +\<^sub>a ?B) ?e ?e' \<Longrightarrow>\<^sub>t
          hn_ctxt (?A' +\<^sub>a ?B') ?e ?e'",
     template_implication
      ([template_predicate (template_app (template_hole 15, t_empty)),
        template_predicate (template_app (template_hole 6, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 8,
               template_app
                (template_app
                  (template_app
                    (template_hole 1,
                     template_app
                      (template_app (template_hole 0, template_var 3),
                       template_var 1)),
                   template_var 5),
                 template_var 4)),
             template_app
              (template_app
                (template_app
                  (template_hole 1,
                   template_app
                    (template_app (template_hole 0, template_var 2),
                     template_var 0)),
                 template_var 5),
               template_var 4))
           ))),
    ("Sepref_Translate.monadic_WHILEIT_refine_WHILET",
     "[| (?s', ?s) : ?R;
         !!s' s. (s', s) : ?R ==> ?b' s' <= SPEC (%r. r = ?b s);
         !!s' s. [| (s', s) : ?R; ?b s |] ==> ?f' s' <= \<Down> ?R (?f s) |]
      ==> monadic_WHILEIT (%_. True) ?b' ?f' ?s'
          <= \<Down> ?R (WHILE\<^sub>T ?b ?f ?s)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 12,
                template_app
                 (template_app (template_hole 11, template_var 6),
                  template_var 5)),
              template_var 4)
            ),
        template_predicate (template_app (template_hole 10, t_empty)),
        template_predicate (template_app (template_hole 10, t_empty))],
       template_inequation
        (less_equals,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 2, t_empty), template_var 3),
             template_var 1),
           template_var 6),
         template_app
          (template_app (template_hole 3, template_var 4),
           template_app
            (template_app
              (template_app (template_hole 0, template_var 2),
               template_var 0),
             template_var 5))))),
    ("Sepref_HOL_Bindings.hn_if",
     "[| ?\<Gamma> \<Longrightarrow>\<^sub>t
         ?\<Gamma>1.0 * hn_val bool_rel ?a ?a';
         ?a ==>
         hn_refine (?\<Gamma>1.0 * hn_val bool_rel ?a ?a') ?b' ?\<Gamma>2b
          ?R ?b;
         ~ ?a ==>
         hn_refine (?\<Gamma>1.0 * hn_val bool_rel ?a ?a') ?c' ?\<Gamma>2c
          ?R ?c;
         TERM If ==>
         ?\<Gamma>2b \<or>\<^sub>A ?\<Gamma>2c \<Longrightarrow>\<^sub>t
         ?\<Gamma>' |]
      ==> hn_refine ?\<Gamma> (if ?a' then ?b' else ?c') ?\<Gamma>' ?R
           (If $ ?a $ ?b $ ?c)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 14, template_var 11),
              template_app
               (template_app (template_hole 13, template_var 10),
                template_app
                 (template_app
                   (template_app
                     (template_hole 12,
                      template_app (template_hole 11, template_hole 10)),
                    template_var 9),
                  template_var 8)))
            ),
        template_implication
         ([template_predicate (template_var 9)],
          template_predicate
           (
              template_app
               (template_app
                 (template_app
                   (template_app
                     (template_app
                       (template_hole 9,
                        template_app
                         (template_app (template_hole 13, template_var 10),
                          template_app
                           (template_app
                             (template_app
                               (template_hole 12,
                                template_app
                                 (template_hole 11, template_hole 10)),
                              template_var 9),
                            template_var 8))),
                      template_var 7),
                    template_var 6),
                  template_var 5),
                template_var 4)
              )),
        template_implication
         ([template_negation (template_predicate (template_var 9))],
          template_predicate
           (
              template_app
               (template_app
                 (template_app
                   (template_app
                     (template_app
                       (template_hole 9,
                        template_app
                         (template_app (template_hole 13, template_var 10),
                          template_app
                           (template_app
                             (template_app
                               (template_hole 12,
                                template_app
                                 (template_hole 11, template_hole 10)),
                              template_var 9),
                            template_var 8))),
                      template_var 3),
                    template_var 2),
                  template_var 5),
                template_var 1)
              )),
        template_implication
         ([template_predicate
            (template_app (template_hole 7, template_hole 6))],
          template_predicate
           (
              template_app
               (template_app
                 (template_hole 14,
                  template_app
                   (template_app (template_hole 5, template_var 6),
                    template_var 2)),
                template_var 0)
              ))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 9, template_var 11),
                   template_app
                    (template_app
                      (template_app (template_hole 4, template_var 8),
                       template_var 7),
                     template_var 3)),
                 template_var 0),
               template_var 5),
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app
                    (template_hole 2,
                     template_app
                      (template_app (template_hole 1, template_hole 0),
                       template_var 9)),
                   template_var 4)),
               template_var 1))
           ))),
    ("Sepref_Rules.hfref_cons",
     "[| (?f, ?g) : [?P]\<^sub>a ?R \<rightarrow> ?S; !!x. ?P' x ==> ?P x;
         !!x y. fst ?R' x y \<Longrightarrow>\<^sub>t fst ?R x y;
         !!x y. snd ?R x y \<Longrightarrow>\<^sub>t snd ?R' x y;
         !!x y. ?S x y \<Longrightarrow>\<^sub>t ?S' x y |]
      ==> (?f, ?g) : [?P']\<^sub>a ?R' \<rightarrow> ?S'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 9,
                template_app
                 (template_app (template_hole 8, template_var 7),
                  template_var 6)),
              template_app
               (template_app
                 (template_app (template_hole 7, template_var 5),
                  template_var 4),
                template_var 3))
            ),
        template_predicate (template_app (template_hole 6, t_empty)),
        template_predicate (template_app (template_hole 6, t_empty)),
        template_predicate (template_app (template_hole 6, t_empty)),
        template_predicate (template_app (template_hole 1, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 9,
               template_app
                (template_app (template_hole 8, template_var 7),
                 template_var 6)),
             template_app
              (template_app
                (template_app (template_hole 7, template_var 2),
                 template_var 1),
               template_var 0))
           ))),
    ("Sepref_HOL_Bindings.hn_let",
     "[| ?\<Gamma> \<Longrightarrow>\<^sub>t
         ?\<Gamma>1.0 * hn_ctxt ?R ?v ?v';
         !!x x'.
            x = ?v ==>
            hn_refine (?\<Gamma>1.0 * hn_ctxt ?R x x') (?f' x')
             (?\<Gamma>' x x') ?R2.0 (?f x);
         !!x x'.
            ?\<Gamma>' x x' \<Longrightarrow>\<^sub>t
            ?\<Gamma>2.0 * hn_ctxt ?R' x x' |]
      ==> hn_refine ?\<Gamma> (Let ?v' ?f')
           (?\<Gamma>2.0 * hn_ctxt ?R' ?v ?v') ?R2.0
           (Let $ ?v $ (%x. (#?f x#)))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 12, template_var 10),
              template_app
               (template_app (template_hole 11, template_var 9),
                template_app
                 (template_app
                   (template_app (template_hole 10, template_var 8),
                    template_var 7),
                  template_var 6)))
            ),
        template_predicate (template_app (template_hole 9, t_empty)),
        template_predicate (template_app (template_hole 9, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 6, template_var 10),
                   template_app
                    (template_app (template_hole 5, template_var 6),
                     template_var 5)),
                 template_app
                  (template_app (template_hole 11, template_var 1),
                   template_app
                    (template_app
                      (template_app (template_hole 10, template_var 0),
                       template_var 7),
                     template_var 6))),
               template_var 3),
             template_app
              (template_app
                (template_hole 4,
                 template_app
                  (template_app (template_hole 3, template_hole 2),
                   template_var 7)),
               t_empty))
           ))),
    ("Sepref_Rules.hnr_uncurry_unfold",
     "(ALL x xi.
          ?P x -->
          hn_refine (?\<Gamma> * hn_ctxt (to_hnr_prod ?A ?B) x xi) (?fi xi)
           (?\<Gamma>' * hn_ctxt (to_hnr_prod ?A' ?B') x xi) ?R (?f x)) =
      (ALL b bi a ai.
          ?P (a, b) -->
          hn_refine (?\<Gamma> * hn_ctxt ?B b bi * hn_ctxt ?A a ai)
           (?fi (ai, bi)) (?\<Gamma>' * hn_ctxt ?B' b bi * hn_ctxt ?A' a ai)
           ?R (?f (a, b)))",
     template_equation
      (template_app (template_hole 14, t_empty),
       template_app (template_hole 7, t_empty))),
    ("Sepref_Basic.hnr_RECT",
     "[| !!cf af ax px.
            (!!ax px.
                hn_refine (hn_ctxt ?Rx ax px * ?F) (cf px) (?F' ax px) ?Ry
                 (af ax)) ==>
            hn_refine (hn_ctxt ?Rx ax px * ?F) (?cB cf px) (?F' ax px) ?Ry
             (?aB af ax);
         !!x. mono_Heap (%f. ?cB f x) |]
      ==> hn_refine (hn_ctxt ?Rx ?ax ?px * ?F) (heap.fixp_fun ?cB ?px)
           (?F' ?ax ?px) ?Ry (REC\<^sub>T ?aB ?ax)",
     template_implication
      ([template_predicate (template_app (template_hole 14, t_empty)),
        template_predicate (template_app (template_hole 11, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_hole 9,
                     template_app
                      (template_app
                        (template_hole 8,
                         template_app
                          (template_app
                            (template_app (template_hole 7, template_var 7),
                             template_var 1),
                           template_var 0)),
                       template_var 6)),
                   template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_hole 3,
                           template_app (template_hole 2, template_hole 1)),
                         template_app (template_hole 5, template_hole 4)),
                       template_var 3),
                     template_var 0)),
                 template_app
                  (template_app (template_var 5, template_var 1),
                   template_var 0)),
               template_var 4),
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 1))
           ))),
    ("Sepref_Rules.fref_composeI",
     "[| (?f, ?g) : [?P]\<^sub>f ?R1.0 \<rightarrow> ?R2.0;
         (?g, ?h) : [?Q]\<^sub>f ?S1.0 \<rightarrow> ?S2.0;
         !!x. ?P' x ==> ?Q x; !!x y. [| ?P' x; (y, x) : ?S1.0 |] ==> ?P y;
         ?R' <= ?R1.0 O ?S1.0; ?R2.0 O ?S2.0 <= ?S'; ?f' = ?f; ?h' = ?h |]
      ==> (?f', ?h') : [?P']\<^sub>f ?R' \<rightarrow> ?S'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 18,
                template_app
                 (template_app (template_hole 17, template_var 13),
                  template_var 12)),
              template_app
               (template_app
                 (template_app (template_hole 16, template_var 11),
                  template_var 10),
                template_var 9))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 15,
                template_app
                 (template_app (template_hole 14, template_var 12),
                  template_var 8)),
              template_app
               (template_app
                 (template_app (template_hole 13, template_var 7),
                  template_var 6),
                template_var 5))
            ),
        template_predicate (template_app (template_hole 12, t_empty)),
        template_predicate (template_app (template_hole 12, t_empty)),
        template_inequation
         (less_equals, template_var 3,
          template_app
           (template_app (template_hole 7, template_var 10),
            template_var 6)),
        template_inequation
         (less_equals,
          template_app
           (template_app (template_hole 5, template_var 9), template_var 5),
          template_var 2),
        template_equation (template_var 1, template_var 13),
        template_equation (template_var 0, template_var 8)],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 1),
                 template_var 0)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 3),
               template_var 2))
           ))),
    ("Sepref_HOL_Bindings.enum_merge_cong",
     "[| !!x y.
            [| ?e = Inl x; ?e' = Inl y |]
            ==> hn_ctxt ?A x y \<or>\<^sub>A
                hn_ctxt ?A' x y \<Longrightarrow>\<^sub>t
                hn_ctxt ?Am x y;
         !!x y.
            [| ?e = Inr x; ?e' = Inr y |]
            ==> hn_ctxt ?B x y \<or>\<^sub>A
                hn_ctxt ?B' x y \<Longrightarrow>\<^sub>t
                hn_ctxt ?Bm x y |]
      ==> hn_ctxt (?A +\<^sub>a ?B) ?e ?e' \<or>\<^sub>A
          hn_ctxt (?A' +\<^sub>a ?B') ?e ?e' \<Longrightarrow>\<^sub>t
          hn_ctxt (?Am +\<^sub>a ?Bm) ?e ?e'",
     template_implication
      ([template_predicate (template_app (template_hole 16, t_empty)),
        template_predicate (template_app (template_hole 6, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 9,
               template_app
                (template_app
                  (template_hole 8,
                   template_app
                    (template_app
                      (template_app
                        (template_hole 1,
                         template_app
                          (template_app (template_hole 0, template_var 5),
                           template_var 2)),
                       template_var 7),
                     template_var 6)),
                 template_app
                  (template_app
                    (template_app
                      (template_hole 1,
                       template_app
                        (template_app (template_hole 0, template_var 4),
                         template_var 1)),
                     template_var 7),
                   template_var 6))),
             template_app
              (template_app
                (template_app
                  (template_hole 1,
                   template_app
                    (template_app (template_hole 0, template_var 3),
                     template_var 0)),
                 template_var 7),
               template_var 6))
           ))),
    ("Sepref_Basic.hnr_RECT_old",
     "[| !!cf af ax px.
            (!!ax px.
                hn_refine (hn_ctxt ?Rx ax px * ?F) (cf px) (?F' ax px) ?Ry
                 (af ax)) ==>
            hn_refine (hn_ctxt ?Rx ax px * ?F) (?cB cf px) (?F' ax px) ?Ry
             (?aB af ax);
         !!x. mono_Heap (%f. ?cB f x); precise ?Ry |]
      ==> hn_refine (hn_ctxt ?Rx ?ax ?px * ?F) (heap.fixp_fun ?cB ?px)
           (?F' ?ax ?px) ?Ry (REC\<^sub>T ?aB ?ax)",
     template_implication
      ([template_predicate (template_app (template_hole 15, t_empty)),
        template_predicate (template_app (template_hole 12, t_empty)),
        template_predicate
         (template_app (template_hole 4, template_var 4))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_hole 10,
                     template_app
                      (template_app
                        (template_hole 9,
                         template_app
                          (template_app
                            (template_app (template_hole 8, template_var 7),
                             template_var 1),
                           template_var 0)),
                       template_var 6)),
                   template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_hole 3,
                           template_app (template_hole 2, template_hole 1)),
                         template_app (template_hole 6, template_hole 5)),
                       template_var 3),
                     template_var 0)),
                 template_app
                  (template_app (template_var 5, template_var 1),
                   template_var 0)),
               template_var 4),
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 1))
           ))),
    ("Sepref_Foreach.monadic_nfoldli_refine",
     "[| (?li, ?l) : \<langle>?S\<rangle>list_rel; (?si, ?s) : ?R;
         !!si s. (si, s) : ?R ==> ?ci si <= \<Down> bool_rel (?c s);
         !!xi x si s.
            [| (xi, x) : ?S; x : set ?l; (si, s) : ?R; inres (?c s) True |]
            ==> ?fi xi si <= \<Down> ?R (?f x s) |]
      ==> monadic_nfoldli ?li ?ci ?fi ?si
          <= \<Down> ?R (monadic_nfoldli ?l ?c ?f ?s)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 22,
                template_app
                 (template_app (template_hole 21, template_var 9),
                  template_var 8)),
              template_app
               (template_app (template_hole 20, template_hole 19),
                template_var 7))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 18,
                template_app
                 (template_app (template_hole 17, template_var 6),
                  template_var 5)),
              template_var 4)
            ),
        template_predicate (template_app (template_hole 16, t_empty)),
        template_predicate (template_app (template_hole 11, t_empty))],
       template_inequation
        (less_equals,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 9),
               template_var 3),
             template_var 1),
           template_var 6),
         template_app
          (template_app (template_hole 2, template_var 4),
           template_app
            (template_app
              (template_app
                (template_app (template_hole 0, template_var 8),
                 template_var 2),
               template_var 0),
             template_var 5))))),
    ("Sepref_Rules.hnr_comp1_aux",
     "[| !!b1 c1.
            ?P b1 ==>
            hn_refine (hn_ctxt ?R1.0 b1 c1) (?c c1) (hn_ctxt ?R1p b1 c1) ?R
             (?b $ b1);
         !!a1 b1.
            [| ?Q a1; (b1, a1) : ?R1' |]
            ==> (?b $ b1, ?a $ a1) : \<langle>?R'\<rangle>nres_rel;
         !!a1 b1. [| ?Q a1; (b1, a1) : ?R1' |] ==> ?P b1; ?Q ?a1.0 |]
      ==> hn_refine (hr_comp ?R1.0 ?R1' ?a1.0 ?c1.0) (?c ?c1.0)
           (hr_comp ?R1p ?R1' ?a1.0 ?c1.0) (hr_comp ?R ?R') (?a ?a1.0)",
     template_implication
      ([template_predicate (template_app (template_hole 16, t_empty)),
        template_predicate (template_app (template_hole 10, t_empty)),
        template_predicate (template_app (template_hole 10, t_empty)),
        template_predicate (template_app (template_var 5, template_var 1))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_hole 2,
                     template_app
                      (template_app
                        (template_app
                          (template_app (template_hole 1, template_var 10),
                           template_var 4),
                         template_var 1),
                       template_var 0)),
                   template_app (template_var 9, template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 1, template_var 8),
                       template_var 4),
                     template_var 1),
                   template_var 0)),
               template_app
                (template_app (template_hole 0, template_var 7),
                 template_var 2)),
             template_app (template_var 3, template_var 1))
           ))),
    ("Sepref_Rules.hnr_comp",
     "[| !!b1 c1.
            ?P b1 ==>
            hn_refine (?R1.0 b1 c1 * ?\<Gamma>) (?c c1)
             (?R1p b1 c1 * ?\<Gamma>') ?R (?b b1);
         !!a1 b1.
            [| ?Q a1; (b1, a1) : ?R1' |]
            ==> (?b b1, ?a a1) : \<langle>?R'\<rangle>nres_rel;
         !!a1 b1. [| ?Q a1; (b1, a1) : ?R1' |] ==> ?P b1; ?Q ?a1.0 |]
      ==> hn_refine (hr_comp ?R1.0 ?R1' ?a1.0 ?c1.0 * ?\<Gamma>) (?c ?c1.0)
           (hr_comp ?R1p ?R1' ?a1.0 ?c1.0 * ?\<Gamma>') (hr_comp ?R ?R')
           (?a ?a1.0)",
     template_implication
      ([template_predicate (template_app (template_hole 14, t_empty)),
        template_predicate (template_app (template_hole 9, t_empty)),
        template_predicate (template_app (template_hole 9, t_empty)),
        template_predicate (template_app (template_var 5, template_var 1))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_hole 2,
                     template_app
                      (template_app
                        (template_hole 10,
                         template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_hole 1, template_var 12),
                               template_var 4),
                             template_var 1),
                           template_var 0)),
                       template_var 11)),
                   template_app (template_var 10, template_var 0)),
                 template_app
                  (template_app
                    (template_hole 10,
                     template_app
                      (template_app
                        (template_app
                          (template_app (template_hole 1, template_var 9),
                           template_var 4),
                         template_var 1),
                       template_var 0)),
                   template_var 8)),
               template_app
                (template_app (template_hole 0, template_var 7),
                 template_var 2)),
             template_app (template_var 3, template_var 1))
           ))),
    ("Sepref_Translate.monadic_WHILEIT_refine_WHILEIT",
     "[| (?s', ?s) : ?R; !!s' s. [| (s', s) : ?R; ?I s |] ==> ?I' s';
         !!s' s.
            [| (s', s) : ?R; ?I s; ?I' s' |]
            ==> ?b' s' <= SPEC (%r. r = ?b s);
         !!s' s.
            [| (s', s) : ?R; ?I s; ?I' s'; ?b s |]
            ==> ?f' s' <= \<Down> ?R (?f s) |]
      ==> monadic_WHILEIT ?I' ?b' ?f' ?s'
          <= \<Down> ?R (WHILE\<^sub>T\<^bsup>?I\<^esup> ?b ?f ?s)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 11,
                template_app
                 (template_app (template_hole 10, template_var 8),
                  template_var 7)),
              template_var 6)
            ),
        template_predicate (template_app (template_hole 9, t_empty)),
        template_predicate (template_app (template_hole 9, t_empty)),
        template_predicate (template_app (template_hole 9, t_empty))],
       template_inequation
        (less_equals,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 4),
               template_var 3),
             template_var 1),
           template_var 8),
         template_app
          (template_app (template_hole 2, template_var 6),
           template_app
            (template_app
              (template_app
                (template_app (template_hole 0, template_var 5),
                 template_var 2),
               template_var 0),
             template_var 7))))),
    ("Sepref_Foreach.monadic_nfoldli_refine_aux",
     "[| !!s s'.
            hn_refine (?\<Gamma> * hn_ctxt ?Rs s' s) (?c s)
             (?\<Gamma> * hn_ctxt ?Rs s' s) bool_assn (?c' s');
         !!x x' s s'.
            hn_refine (?\<Gamma> * hn_ctxt ?Rl x' x * hn_ctxt ?Rs s' s)
             (?f x s)
             (?\<Gamma> * hn_invalid ?Rl x' x * hn_invalid ?Rs s' s) ?Rs
             (?f' x' s') |]
      ==> hn_refine
           (?\<Gamma> * hn_ctxt (list_assn ?Rl) ?l' ?l * hn_ctxt ?Rs ?s' ?s)
           (imp_nfoldli ?l ?c ?f ?s)
           (?\<Gamma> * hn_invalid (list_assn ?Rl) ?l' ?l *
            hn_invalid ?Rs ?s' ?s)
           ?Rs (monadic_nfoldli ?l' ?c' ?f' ?s')",
     template_implication
      ([template_predicate (template_app (template_hole 18, t_empty)),
        template_predicate (template_app (template_hole 10, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_hole 8,
                     template_app
                      (template_app
                        (template_hole 14,
                         template_app
                          (template_app (template_hole 14, template_var 10),
                           template_app
                            (template_app
                              (template_app
                                (template_hole 4,
                                 template_app
                                  (template_hole 3, template_var 6)),
                               template_var 3),
                             template_var 2))),
                       template_app
                        (template_app
                          (template_app (template_hole 13, template_var 9),
                           template_var 1),
                         template_var 0))),
                   template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 2, template_var 2),
                         template_var 8),
                       template_var 5),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_hole 14,
                     template_app
                      (template_app (template_hole 14, template_var 10),
                       template_app
                        (template_app
                          (template_app
                            (template_hole 4,
                             template_app
                              (template_hole 1,
                               template_app
                                (template_hole 3, template_var 6))),
                           template_var 3),
                         template_var 2))),
                   template_app
                    (template_app
                      (template_app
                        (template_hole 13,
                         template_app (template_hole 5, template_var 9)),
                       template_var 1),
                     template_var 0))),
               template_var 9),
             template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 3),
                   template_var 7),
                 template_var 4),
               template_var 1))
           ))),
    ("Sepref_Translate.monadic_WHILEIT_refine",
     "[| (?s', ?s) : ?R; !!s' s. [| (s', s) : ?R; ?I s |] ==> ?I' s';
         !!s' s.
            [| (s', s) : ?R; ?I s; ?I' s' |]
            ==> ?b' s' <= \<Down> bool_rel (?b s);
         !!s' s.
            [| (s', s) : ?R; ?I s; ?I' s'; nofail (?b s);
               inres (?b s) True |]
            ==> ?f' s' <= \<Down> ?R (?f s) |]
      ==> monadic_WHILEIT ?I' ?b' ?f' ?s'
          <= \<Down> ?R (monadic_WHILEIT ?I ?b ?f ?s)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 13,
                template_app
                 (template_app (template_hole 12, template_var 8),
                  template_var 7)),
              template_var 6)
            ),
        template_predicate (template_app (template_hole 11, t_empty)),
        template_predicate (template_app (template_hole 11, t_empty)),
        template_predicate (template_app (template_hole 11, t_empty))],
       template_inequation
        (less_equals,
         template_app
          (template_app
            (template_app
              (template_app (template_hole 1, template_var 4),
               template_var 3),
             template_var 1),
           template_var 8),
         template_app
          (template_app (template_hole 2, template_var 6),
           template_app
            (template_app
              (template_app
                (template_app (template_hole 0, template_var 5),
                 template_var 2),
               template_var 0),
             template_var 7))))),
    ("Sepref_HOL_Bindings.option_assn_eq",
     "[| ?\<Gamma> \<Longrightarrow>\<^sub>t
         hn_ctxt (option_assn ?P) ?a ?a' * hn_ctxt (option_assn ?P) ?b ?b' *
         ?\<Gamma>1.0;
         !!va va' vb vb'.
            hn_refine (hn_ctxt ?P va va' * hn_ctxt ?P vb vb' * ?\<Gamma>1.0)
             (?eq' va' vb') (?\<Gamma>' va va' vb vb') bool_assn
             (RETURN $ ((=) $ va $ vb));
         !!va va' vb vb'.
            ?\<Gamma>' va va' vb vb' \<Longrightarrow>\<^sub>t
            hn_ctxt ?P va va' * hn_ctxt ?P vb vb' * ?\<Gamma>1.0 |]
      ==> hn_refine ?\<Gamma> (imp_option_eq ?eq' ?a' ?b')
           (hn_ctxt (option_assn ?P) ?a ?a' *
            hn_ctxt (option_assn ?P) ?b ?b' *
            ?\<Gamma>1.0)
           bool_assn (RETURN $ ((=) $ ?a $ ?b))",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 18, template_var 8),
              template_app
               (template_app
                 (template_hole 17,
                  template_app
                   (template_app
                     (template_hole 17,
                      template_app
                       (template_app
                         (template_app
                           (template_hole 16,
                            template_app
                             (template_hole 15, template_var 7)),
                          template_var 6),
                        template_var 5)),
                    template_app
                     (template_app
                       (template_app
                         (template_hole 16,
                          template_app (template_hole 15, template_var 7)),
                        template_var 4),
                      template_var 3))),
                template_var 2))
            ),
        template_predicate (template_app (template_hole 14, t_empty)),
        template_predicate (template_app (template_hole 14, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 12, template_var 8),
                   template_app
                    (template_app
                      (template_app (template_hole 3, template_var 1),
                       template_var 5),
                     template_var 3)),
                 template_app
                  (template_app
                    (template_hole 17,
                     template_app
                      (template_app
                        (template_hole 17,
                         template_app
                          (template_app
                            (template_app
                              (template_hole 16,
                               template_app
                                (template_hole 15, template_var 7)),
                             template_var 6),
                           template_var 5)),
                       template_app
                        (template_app
                          (template_app
                            (template_hole 16,
                             template_app
                              (template_hole 15, template_var 7)),
                           template_var 4),
                         template_var 3))),
                   template_var 2)),
               template_app (template_hole 10, template_hole 9)),
             template_app
              (template_app (template_hole 8, template_hole 7),
               template_app
                (template_app
                  (template_hole 2,
                   template_app
                    (template_app (template_hole 1, template_hole 0),
                     template_var 6)),
                 template_var 4)))
           ))),
    ("Sepref_Translate.hn_monadic_WHILE_aux",
     "[| ?P \<Longrightarrow>\<^sub>t ?\<Gamma> * hn_ctxt ?Rs ?s' ?s;
         !!s s'.
            ?I s' ==>
            hn_refine (?\<Gamma> * hn_ctxt ?Rs s' s) (?b s)
             (?\<Gamma>b s' s) bool_assn (?b' s');
         !!s' s.
            ?\<Gamma>b s' s \<Longrightarrow>\<^sub>t
            ?\<Gamma> * hn_ctxt ?Rs s' s;
         !!s' s.
            ?I s' ==>
            hn_refine (?\<Gamma> * hn_ctxt ?Rs s' s) (?f s)
             (?\<Gamma>f s' s) ?Rs (?f' s');
         !!s' s.
            ?\<Gamma>f s' s \<Longrightarrow>\<^sub>t
            ?\<Gamma> * hn_ctxt (%_ _. true) s' s |]
      ==> hn_refine ?P (heap_WHILET ?b ?f ?s)
           (?\<Gamma> * hn_invalid ?Rs ?s' ?s) ?Rs
           (monadic_WHILEIT ?I ?b' ?f' ?s')",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 12, template_var 11),
              template_app
               (template_app (template_hole 11, template_var 10),
                template_app
                 (template_app
                   (template_app (template_hole 10, template_var 9),
                    template_var 8),
                  template_var 7)))
            ),
        template_predicate (template_app (template_hole 9, t_empty)),
        template_predicate (template_app (template_hole 8, t_empty)),
        template_predicate (template_app (template_hole 8, t_empty)),
        template_predicate (template_app (template_hole 8, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 4, template_var 11),
                   template_app
                    (template_app
                      (template_app (template_hole 2, template_var 5),
                       template_var 2),
                     template_var 7)),
                 template_app
                  (template_app (template_hole 11, template_var 10),
                   template_app
                    (template_app
                      (template_app
                        (template_hole 10,
                         template_app (template_hole 1, template_var 9)),
                       template_var 8),
                     template_var 7))),
               template_var 9),
             template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 6),
                   template_var 3),
                 template_var 0),
               template_var 8))
           ))),
    ("Sepref_Foreach.hn_monadic_nfoldli",
     "[| ?P \<Longrightarrow>\<^sub>t
         ?\<Gamma> * hn_ctxt (list_assn ?Rl) ?l' ?l * hn_ctxt ?Rs ?s' ?s;
         !!s s'.
            hn_refine (?\<Gamma> * hn_ctxt ?Rs s' s) (?c s)
             (?\<Gamma> * hn_ctxt ?Rs s' s) bool_assn (?c' $ s');
         !!x x' s s'.
            hn_refine (?\<Gamma> * hn_ctxt ?Rl x' x * hn_ctxt ?Rs s' s)
             (?f x s)
             (?\<Gamma> * hn_invalid ?Rl x' x * hn_invalid ?Rs s' s) ?Rs
             (?f' $ x' $ s') |]
      ==> hn_refine ?P (imp_nfoldli ?l ?c ?f ?s)
           (?\<Gamma> * hn_invalid (list_assn ?Rl) ?l' ?l *
            hn_invalid ?Rs ?s' ?s)
           ?Rs (monadic_nfoldli $ ?l' $ ?c' $ ?f' $ ?s')",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 24, template_var 11),
              template_app
               (template_app
                 (template_hole 23,
                  template_app
                   (template_app (template_hole 23, template_var 10),
                    template_app
                     (template_app
                       (template_app
                         (template_hole 22,
                          template_app (template_hole 21, template_var 9)),
                        template_var 8),
                      template_var 7))),
                template_app
                 (template_app
                   (template_app (template_hole 20, template_var 6),
                    template_var 5),
                  template_var 4)))
            ),
        template_predicate (template_app (template_hole 19, t_empty)),
        template_predicate (template_app (template_hole 13, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 11, template_var 11),
                   template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 5, template_var 7),
                         template_var 3),
                       template_var 1),
                     template_var 4)),
                 template_app
                  (template_app
                    (template_hole 23,
                     template_app
                      (template_app (template_hole 23, template_var 10),
                       template_app
                        (template_app
                          (template_app
                            (template_hole 22,
                             template_app
                              (template_hole 4,
                               template_app
                                (template_hole 21, template_var 9))),
                           template_var 8),
                         template_var 7))),
                   template_app
                    (template_app
                      (template_app
                        (template_hole 20,
                         template_app (template_hole 8, template_var 6)),
                       template_var 5),
                     template_var 4))),
               template_var 6),
             template_app
              (template_app
                (template_hole 7,
                 template_app
                  (template_app
                    (template_hole 3,
                     template_app
                      (template_app
                        (template_hole 2,
                         template_app
                          (template_app (template_hole 1, template_hole 0),
                           template_var 8)),
                       template_var 2)),
                   template_var 0)),
               template_var 5))
           ))),
    ("Sepref_HOL_Bindings.hn_case_prod_old",
     "[| ?\<Gamma> \<Longrightarrow>\<^sub>t
         ?\<Gamma>1.0 * hn_ctxt (?P1.0 \<times>\<^sub>a ?P2.0) ?p' ?p;
         !!a1 a2 a1' a2'.
            ?p' = (a1', a2') ==>
            hn_refine
             (?\<Gamma>1.0 * hn_ctxt ?P1.0 a1' a1 * hn_ctxt ?P2.0 a2' a2 *
              hn_invalid (?P1.0 \<times>\<^sub>a ?P2.0) ?p' ?p)
             (?f a1 a2) (?\<Gamma>h a1 a1' a2 a2') ?R (?f' a1' a2');
         !!a1 a1' a2 a2'.
            ?\<Gamma>h a1 a1' a2 a2' \<Longrightarrow>\<^sub>t
            ?\<Gamma>' * hn_ctxt ?P1' a1' a1 * hn_ctxt ?P2' a2' a2 *
            hn_ctxt ?Pxx ?p' ?p |]
      ==> hn_refine ?\<Gamma> (case ?p of (x, xa) => ?f x xa)
           (?\<Gamma>' * hn_ctxt (?P1' \<times>\<^sub>a ?P2') ?p' ?p) ?R
           (case_prod $ (%x. (#%xa. (#?f' x xa#)#)) $ ?p')",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 20, template_var 13),
              template_app
               (template_app (template_hole 19, template_var 12),
                template_app
                 (template_app
                   (template_app
                     (template_hole 18,
                      template_app
                       (template_app (template_hole 17, template_var 11),
                        template_var 10)),
                    template_var 9),
                  template_var 8)))
            ),
        template_predicate (template_app (template_hole 16, t_empty)),
        template_predicate (template_app (template_hole 16, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 10, template_var 13),
                   template_app
                    (template_app (template_hole 6, template_var 7),
                     template_var 8)),
                 template_app
                  (template_app (template_hole 19, template_var 3),
                   template_app
                    (template_app
                      (template_app
                        (template_hole 18,
                         template_app
                          (template_app (template_hole 17, template_var 2),
                           template_var 1)),
                       template_var 9),
                     template_var 8))),
               template_var 5),
             template_app
              (template_app
                (template_hole 5,
                 template_app
                  (template_app (template_hole 4, template_hole 3),
                   t_empty)),
               template_var 9))
           ))),
    ("Sepref_HOL_Bindings.hn_case_prod'",
     "[| ?\<Gamma> \<Longrightarrow>\<^sub>t
         hn_ctxt (?P1.0 \<times>\<^sub>a ?P2.0) ?p' ?p * ?\<Gamma>1.0;
         !!a1 a2 a1' a2'.
            ?p' = (a1', a2') ==>
            hn_refine
             (hn_ctxt ?P1.0 a1' a1 * hn_ctxt ?P2.0 a2' a2 * ?\<Gamma>1.0 *
              hn_invalid (?P1.0 \<times>\<^sub>a ?P2.0) ?p' ?p)
             (?f a1 a2) (?Q a1 a2 a1' a2') ?R (?f' a1' a2');
         !!a1 a2 a1' a2'.
            ?p' = (a1', a2') ==>
            ?Q a1 a2 a1' a2' \<Longrightarrow>\<^sub>t
            hn_ctxt ?P1' a1' a1 * hn_ctxt ?P2' a2' a2 *
            hn_ctxt ?XX1.0 ?p' ?p *
            ?\<Gamma>1' |]
      ==> hn_refine ?\<Gamma> (case ?p of (x, xa) => ?f x xa)
           (hn_ctxt (?P1' \<times>\<^sub>a ?P2') ?p' ?p * ?\<Gamma>1') ?R
           (case_prod $ (%x. (#%xa. (#?f' x xa#)#)) $ ?p')",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 20, template_var 13),
              template_app
               (template_app
                 (template_hole 19,
                  template_app
                   (template_app
                     (template_app
                       (template_hole 18,
                        template_app
                         (template_app (template_hole 17, template_var 12),
                          template_var 11)),
                      template_var 10),
                    template_var 9)),
                template_var 8))
            ),
        template_predicate (template_app (template_hole 16, t_empty)),
        template_predicate (template_app (template_hole 16, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 10, template_var 13),
                   template_app
                    (template_app (template_hole 6, template_var 7),
                     template_var 9)),
                 template_app
                  (template_app
                    (template_hole 19,
                     template_app
                      (template_app
                        (template_app
                          (template_hole 18,
                           template_app
                            (template_app
                              (template_hole 17, template_var 3),
                             template_var 2)),
                         template_var 10),
                       template_var 9)),
                   template_var 0)),
               template_var 5),
             template_app
              (template_app
                (template_hole 5,
                 template_app
                  (template_app (template_hole 4, template_hole 3),
                   t_empty)),
               template_var 10))
           ))),
    ("Sepref_Translate.hn_RECT'",
     "[| INDEP ?Ry; INDEP ?Rx; INDEP ?Rx';
         ?P \<Longrightarrow>\<^sub>t hn_ctxt ?Rx ?ax ?px * ?F;
         !!cf af ax px.
            (!!ax px.
                hn_refine (hn_ctxt ?Rx ax px * ?F) (cf px)
                 (hn_ctxt ?Rx' ax px * ?F) ?Ry (RCALL $ af $ ax)) ==>
            hn_refine (hn_ctxt ?Rx ax px * ?F) (?cB cf px) (?F' ax px) ?Ry
             (?aB af ax);
         !!ax px.
            ?F' ax px \<Longrightarrow>\<^sub>t hn_ctxt ?Rx' ax px * ?F;
         !!x. mono_Heap (%f. ?cB f x) |]
      ==> hn_refine ?P (heap.fixp_fun ?cB ?px) (hn_ctxt ?Rx' ?ax ?px * ?F)
           ?Ry (REC\<^sub>T $ (%x. (#%xa. (#?aB x xa#)#)) $ ?ax)",
     template_implication
      ([template_predicate
         (template_app (template_hole 23, template_var 9)),
        template_predicate
         (template_app (template_hole 22, template_var 8)),
        template_predicate
         (template_app (template_hole 22, template_var 7)),
        template_predicate
         (
            template_app
             (template_app (template_hole 21, template_var 6),
              template_app
               (template_app
                 (template_hole 20,
                  template_app
                   (template_app
                     (template_app (template_hole 19, template_var 8),
                      template_var 5),
                    template_var 4)),
                template_var 3))
            ),
        template_predicate (template_app (template_hole 18, t_empty)),
        template_predicate (template_app (template_hole 16, t_empty)),
        template_predicate (template_app (template_hole 15, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 14, template_var 6),
                   template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_hole 7,
                           template_app (template_hole 6, template_hole 5)),
                         template_app (template_hole 9, template_hole 8)),
                       template_var 2),
                     template_var 4)),
                 template_app
                  (template_app
                    (template_hole 20,
                     template_app
                      (template_app
                        (template_app (template_hole 19, template_var 7),
                         template_var 5),
                       template_var 4)),
                   template_var 3)),
               template_var 9),
             template_app
              (template_app
                (template_hole 13,
                 template_app
                  (template_app (template_hole 4, template_hole 3),
                   t_empty)),
               template_var 5))
           ))),
    ("Sepref_Foreach.monadic_nfoldli_refine_aux'",
     "[| set ?l' <= ?S;
         !!s s'.
            hn_refine (?\<Gamma> * hn_ctxt ?Rs s' s) (?c s)
             (?\<Gamma> * hn_ctxt ?Rs s' s) bool_assn (?c' s');
         !!x x' s s'.
            x' : ?S ==>
            hn_refine (?\<Gamma> * hn_ctxt ?Rl x' x * hn_ctxt ?Rs s' s)
             (?f x s) (?\<Gamma> * hn_ctxt ?Rl' x' x * hn_invalid ?Rs s' s)
             ?Rs (?f' x' s');
         !!x x'.
            hn_ctxt ?Rl' x' x \<or>\<^sub>A
            hn_ctxt ?Rl x' x \<Longrightarrow>\<^sub>t
            hn_ctxt ?Rl'' x' x |]
      ==> hn_refine
           (?\<Gamma> * hn_ctxt (list_assn ?Rl) ?l' ?l * hn_ctxt ?Rs ?s' ?s)
           (imp_nfoldli ?l ?c ?f ?s)
           (?\<Gamma> * hn_ctxt (list_assn ?Rl'') ?l' ?l *
            hn_invalid ?Rs ?s' ?s)
           ?Rs (monadic_nfoldli ?l' ?c' ?f' ?s')",
     template_implication
      ([template_inequation
         (less_equals, template_app (template_hole 19, template_var 13),
          template_var 12),
        template_predicate (template_app (template_hole 18, t_empty)),
        template_predicate (template_app (template_hole 11, t_empty)),
        template_predicate (template_app (template_hole 11, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_hole 8,
                     template_app
                      (template_app
                        (template_hole 15,
                         template_app
                          (template_app (template_hole 15, template_var 11),
                           template_app
                            (template_app
                              (template_app
                                (template_hole 3,
                                 template_app
                                  (template_hole 2, template_var 7)),
                               template_var 13),
                             template_var 2))),
                       template_app
                        (template_app
                          (template_app (template_hole 14, template_var 10),
                           template_var 1),
                         template_var 0))),
                   template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 1, template_var 2),
                         template_var 9),
                       template_var 6),
                     template_var 0)),
                 template_app
                  (template_app
                    (template_hole 15,
                     template_app
                      (template_app (template_hole 15, template_var 11),
                       template_app
                        (template_app
                          (template_app
                            (template_hole 3,
                             template_app
                              (template_hole 2, template_var 3)),
                           template_var 13),
                         template_var 2))),
                   template_app
                    (template_app
                      (template_app
                        (template_hole 14,
                         template_app (template_hole 6, template_var 10)),
                       template_var 1),
                     template_var 0))),
               template_var 10),
             template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 13),
                   template_var 8),
                 template_var 4),
               template_var 1))
           ))),
    ("Sepref_HOL_Bindings.sum_cases_hnr",
     "[| ?\<Gamma> \<Longrightarrow>\<^sub>t
         hn_ctxt (?A +\<^sub>a ?B) ?e ?e' * ?F;
         !!x1 x1a.
            [| ?e = Inl x1; ?e' = Inl x1a |]
            ==> hn_refine
                 (hn_ctxt ?A x1 x1a * hn_invalid (?A +\<^sub>a ?B) ?e ?e' *
                  ?F)
                 (?f1' x1a)
                 (hn_ctxt ?A' x1 x1a * hn_ctxt ?XX1.0 ?e ?e' * ?\<Gamma>1')
                 ?R (?f1.0 x1);
         !!x2 x2a.
            [| ?e = Inr x2; ?e' = Inr x2a |]
            ==> hn_refine
                 (hn_ctxt ?B x2 x2a * hn_invalid (?A +\<^sub>a ?B) ?e ?e' *
                  ?F)
                 (?f2' x2a)
                 (hn_ctxt ?B' x2 x2a * hn_ctxt ?XX2.0 ?e ?e' * ?\<Gamma>2')
                 ?R (?f2.0 x2);
         ?\<Gamma>1' \<or>\<^sub>A ?\<Gamma>2' \<Longrightarrow>\<^sub>t
         ?\<Gamma>' |]
      ==> hn_refine ?\<Gamma>
           (case ?e' of Inl x => ?f1' x | Inr x => ?f2' x)
           (hn_ctxt (?A' +\<^sub>a ?B') ?e ?e' * ?\<Gamma>') ?R
           (case_sum $ (%x. (#?f1.0 x#)) $ (%x. (#?f2.0 x#)) $ ?e)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 25, template_var 17),
              template_app
               (template_app
                 (template_hole 24,
                  template_app
                   (template_app
                     (template_app
                       (template_hole 23,
                        template_app
                         (template_app (template_hole 22, template_var 16),
                          template_var 15)),
                      template_var 14),
                    template_var 13)),
                template_var 12))
            ),
        template_predicate (template_app (template_hole 21, t_empty)),
        template_predicate (template_app (template_hole 12, t_empty)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 25,
                template_app
                 (template_app (template_hole 7, template_var 8),
                  template_var 2)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 15, template_var 17),
                   template_app
                    (template_app
                      (template_app (template_hole 6, template_var 11),
                       template_var 5),
                     template_var 13)),
                 template_app
                  (template_app
                    (template_hole 24,
                     template_app
                      (template_app
                        (template_app
                          (template_hole 23,
                           template_app
                            (template_app
                              (template_hole 22, template_var 10),
                             template_var 4)),
                         template_var 14),
                       template_var 13)),
                   template_var 0)),
               template_var 7),
             template_app
              (template_app
                (template_hole 5,
                 template_app
                  (template_app
                    (template_hole 4,
                     template_app
                      (template_app (template_hole 3, template_hole 2),
                       t_empty)),
                   t_empty)),
               template_var 14))
           ))),
    ("Sepref_HOL_Bindings.hn_case_option",
     "[| ?\<Gamma> \<Longrightarrow>\<^sub>t
         hn_ctxt (option_assn ?P) ?p ?p' * ?F;
         ?p = None ==>
         hn_refine (hn_ctxt (option_assn ?P) ?p ?p' * ?F) ?f1' ?Qa ?R ?f1.0;
         ?p = None ==>
         ?Qa \<Longrightarrow>\<^sub>t hn_ctxt ?XX1.0 ?p ?p' * ?\<Gamma>1';
         !!x x'.
            [| ?p = Some x; ?p' = Some x' |]
            ==> hn_refine
                 (hn_ctxt ?P x x' * hn_invalid (option_assn ?P) ?p ?p' * ?F)
                 (?f2' x') (?Q x x') ?R (?f2.0 x);
         !!x x'.
            [| ?p = Some x; ?p' = Some x' |]
            ==> ?Q x x' \<Longrightarrow>\<^sub>t
                hn_ctxt ?P' x x' * hn_ctxt ?XX2.0 ?p ?p' * ?\<Gamma>2';
         ?\<Gamma>1' \<or>\<^sub>A ?\<Gamma>2' \<Longrightarrow>\<^sub>t
         ?\<Gamma>' |]
      ==> hn_refine ?\<Gamma> (case ?p' of None => ?f1' | Some x => ?f2' x)
           (hn_ctxt (option_assn ?P') ?p ?p' * ?\<Gamma>') ?R
           (case_option $ ?f1.0 $ (%x. (#?f2.0 x#)) $ ?p)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 21, template_var 17),
              template_app
               (template_app
                 (template_hole 20,
                  template_app
                   (template_app
                     (template_app
                       (template_hole 19,
                        template_app (template_hole 18, template_var 16)),
                      template_var 15),
                    template_var 14)),
                template_var 13))
            ),
        template_implication
         ([template_equation (template_var 15, template_hole 16)],
          template_predicate
           (
              template_app
               (template_app
                 (template_app
                   (template_app
                     (template_app
                       (template_hole 15,
                        template_app
                         (template_app
                           (template_hole 20,
                            template_app
                             (template_app
                               (template_app
                                 (template_hole 19,
                                  template_app
                                   (template_hole 18, template_var 16)),
                                template_var 15),
                              template_var 14)),
                          template_var 13)),
                      template_var 12),
                    template_var 11),
                  template_var 10),
                template_var 9)
              )),
        template_implication
         ([template_equation (template_var 15, template_hole 16)],
          template_predicate
           (
              template_app
               (template_app (template_hole 21, template_var 11),
                template_app
                 (template_app
                   (template_hole 20,
                    template_app
                     (template_app
                       (template_app (template_hole 19, template_var 8),
                        template_var 15),
                      template_var 14)),
                  template_var 7))
              )),
        template_predicate (template_app (template_hole 14, t_empty)),
        template_predicate (template_app (template_hole 14, t_empty)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 21,
                template_app
                 (template_app (template_hole 7, template_var 7),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 15, template_var 17),
                   template_app
                    (template_app
                      (template_app (template_hole 6, template_var 12),
                       template_var 6),
                     template_var 14)),
                 template_app
                  (template_app
                    (template_hole 20,
                     template_app
                      (template_app
                        (template_app
                          (template_hole 19,
                           template_app (template_hole 18, template_var 3)),
                         template_var 15),
                       template_var 14)),
                   template_var 0)),
               template_var 10),
             template_app
              (template_app
                (template_hole 5,
                 template_app
                  (template_app
                    (template_hole 4,
                     template_app
                      (template_app (template_hole 3, template_hole 2),
                       template_var 9)),
                   t_empty)),
               template_var 15))
           ))),
    ("Sepref_Translate.sepref_comb_rules",
     "[| ?\<Gamma> \<Longrightarrow>\<^sub>t
         hn_ctxt (?A +\<^sub>a ?B) ?e ?e' * ?F;
         !!x1 x1a.
            [| ?e = Inl x1; ?e' = Inl x1a |]
            ==> hn_refine
                 (hn_ctxt ?A x1 x1a * hn_invalid (?A +\<^sub>a ?B) ?e ?e' *
                  ?F)
                 (?f1' x1a) (?Qa x1 x1a) ?R (?f1.0 x1);
         !!x1 x1a.
            [| ?e = Inl x1; ?e' = Inl x1a |]
            ==> ?Qa x1 x1a \<Longrightarrow>\<^sub>t
                hn_ctxt ?A' x1 x1a * hn_ctxt ?XX1.0 ?e ?e' * ?\<Gamma>1';
         !!x2 x2a.
            [| ?e = Inr x2; ?e' = Inr x2a |]
            ==> hn_refine
                 (hn_ctxt ?B x2 x2a * hn_invalid (?A +\<^sub>a ?B) ?e ?e' *
                  ?F)
                 (?f2' x2a) (?Q x2 x2a) ?R (?f2.0 x2);
         !!x2 x2a.
            [| ?e = Inr x2; ?e' = Inr x2a |]
            ==> ?Q x2 x2a \<Longrightarrow>\<^sub>t
                hn_ctxt ?B' x2 x2a * hn_ctxt ?XX2.0 ?e ?e' * ?\<Gamma>2';
         ?\<Gamma>1' \<or>\<^sub>A ?\<Gamma>2' \<Longrightarrow>\<^sub>t
         ?\<Gamma>' |]
      ==> hn_refine ?\<Gamma>
           (case ?e' of Inl x => ?f1' x | Inr x => ?f2' x)
           (hn_ctxt (?A' +\<^sub>a ?B') ?e ?e' * ?\<Gamma>') ?R
           (case_sum $ (%x. (#?f1.0 x#)) $ (%x. (#?f2.0 x#)) $ ?e)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 25, template_var 19),
              template_app
               (template_app
                 (template_hole 24,
                  template_app
                   (template_app
                     (template_app
                       (template_hole 23,
                        template_app
                         (template_app (template_hole 22, template_var 18),
                          template_var 17)),
                      template_var 16),
                    template_var 15)),
                template_var 14))
            ),
        template_predicate (template_app (template_hole 21, t_empty)),
        template_predicate (template_app (template_hole 21, t_empty)),
        template_predicate (template_app (template_hole 12, t_empty)),
        template_predicate (template_app (template_hole 12, t_empty)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 25,
                template_app
                 (template_app (template_hole 7, template_var 7),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 15, template_var 19),
                   template_app
                    (template_app
                      (template_app (template_hole 6, template_var 13),
                       template_var 6),
                     template_var 15)),
                 template_app
                  (template_app
                    (template_hole 24,
                     template_app
                      (template_app
                        (template_app
                          (template_hole 23,
                           template_app
                            (template_app
                              (template_hole 22, template_var 9),
                             template_var 3)),
                         template_var 16),
                       template_var 15)),
                   template_var 0)),
               template_var 11),
             template_app
              (template_app
                (template_hole 5,
                 template_app
                  (template_app
                    (template_hole 4,
                     template_app
                      (template_app (template_hole 3, template_hole 2),
                       t_empty)),
                   t_empty)),
               template_var 16))
           ))),
    ("Sepref_Foreach.hn_monadic_nfoldli_rl'",
     "[| INDEP ?Rk; INDEP ?R\<sigma>;
         ?P \<Longrightarrow>\<^sub>t
         ?\<Gamma> * hn_ctxt (list_assn ?Rk) ?s' ?s *
         hn_ctxt ?R\<sigma> ?\<sigma>' ?\<sigma>;
         !!\<sigma> \<sigma>'.
            hn_refine (?\<Gamma> * hn_ctxt ?R\<sigma> \<sigma>' \<sigma>)
             (?c \<sigma>) (?\<Gamma>c \<sigma>' \<sigma>) bool_assn
             (?c' \<sigma>');
         !!\<sigma>' \<sigma>.
            TERM monadic_nfoldli ==>
            ?\<Gamma>c \<sigma>' \<sigma> \<Longrightarrow>\<^sub>t
            ?\<Gamma> * hn_ctxt ?R\<sigma> \<sigma>' \<sigma>;
         !!x' x \<sigma>' \<sigma>.
            x' : set ?s' ==>
            hn_refine
             (?\<Gamma> * hn_ctxt ?Rk x' x *
              hn_ctxt ?R\<sigma> \<sigma>' \<sigma>)
             (?f x \<sigma>) (?\<Gamma>f x' x \<sigma>' \<sigma>) ?R\<sigma>
             (?f' x' \<sigma>');
         !!x' x \<sigma>' \<sigma>.
            TERM monadic_nfoldli ==>
            ?\<Gamma>f x' x \<sigma>' \<sigma> \<Longrightarrow>\<^sub>t
            ?\<Gamma> * hn_ctxt ?Rk' x' x *
            hn_ctxt ?Pf\<sigma> \<sigma>' \<sigma>;
         !!x x'.
            hn_ctxt ?Rk' x' x \<or>\<^sub>A
            hn_ctxt ?Rk x' x \<Longrightarrow>\<^sub>t
            hn_ctxt ?Rk'' x' x |]
      ==> hn_refine ?P (imp_nfoldli ?s ?c ?f ?\<sigma>)
           (?\<Gamma> * hn_ctxt (list_assn ?Rk'') ?s' ?s *
            hn_invalid ?R\<sigma> ?\<sigma>' ?\<sigma>)
           ?R\<sigma>
           (monadic_nfoldli $ ?s' $ (%x. (#?c' x#)) $
            (%x. (#%xa. (#?f' x xa#)#)) $
            ?\<sigma>')",
     template_implication
      ([template_predicate
         (template_app (template_hole 33, template_var 16)),
        template_predicate
         (template_app (template_hole 32, template_var 15)),
        template_predicate
         (
            template_app
             (template_app (template_hole 31, template_var 14),
              template_app
               (template_app
                 (template_hole 30,
                  template_app
                   (template_app (template_hole 30, template_var 13),
                    template_app
                     (template_app
                       (template_app
                         (template_hole 29,
                          template_app (template_hole 28, template_var 16)),
                        template_var 12),
                      template_var 11))),
                template_app
                 (template_app
                   (template_app (template_hole 27, template_var 15),
                    template_var 10),
                  template_var 9)))
            ),
        template_predicate (template_app (template_hole 26, t_empty)),
        template_predicate (template_app (template_hole 25, t_empty)),
        template_predicate (template_app (template_hole 19, t_empty)),
        template_predicate (template_app (template_hole 19, t_empty)),
        template_predicate (template_app (template_hole 18, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 15, template_var 14),
                   template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 10, template_var 11),
                         template_var 8),
                       template_var 5),
                     template_var 9)),
                 template_app
                  (template_app
                    (template_hole 30,
                     template_app
                      (template_app (template_hole 30, template_var 13),
                       template_app
                        (template_app
                          (template_app
                            (template_hole 29,
                             template_app
                              (template_hole 28, template_var 0)),
                           template_var 12),
                         template_var 11))),
                   template_app
                    (template_app
                      (template_app
                        (template_hole 27,
                         template_app (template_hole 9, template_var 15)),
                       template_var 10),
                     template_var 9))),
               template_var 15),
             template_app
              (template_app
                (template_hole 8,
                 template_app
                  (template_app
                    (template_hole 7,
                     template_app
                      (template_app
                        (template_hole 6,
                         template_app
                          (template_app (template_hole 5, template_hole 4),
                           template_var 12)),
                       t_empty)),
                   t_empty)),
               template_var 10))
           ))),
    ("Sepref_HOL_Bindings.hn_case_list",
     "[| ?\<Gamma> \<Longrightarrow>\<^sub>t
         hn_ctxt (list_assn ?P) ?p ?p' * ?F;
         ?p = [] ==>
         hn_refine (hn_ctxt (list_assn ?P) ?p ?p' * ?F) ?f1' ?Qa ?R ?f1.0;
         ?p = [] ==>
         ?Qa \<Longrightarrow>\<^sub>t hn_ctxt ?XX1.0 ?p ?p' * ?\<Gamma>1';
         !!x l x' l'.
            [| ?p = x # l; ?p' = x' # l' |]
            ==> hn_refine
                 (hn_ctxt ?P x x' * hn_ctxt (list_assn ?P) l l' *
                  hn_invalid (list_assn ?P) ?p ?p' *
                  ?F)
                 (?f2' x' l') (?Q x l x' l') ?R (?f2.0 x l);
         !!x l x' l'.
            [| ?p = x # l; ?p' = x' # l' |]
            ==> ?Q x l x' l' \<Longrightarrow>\<^sub>t
                hn_ctxt ?P1' x x' * hn_ctxt (list_assn ?P2') l l' *
                hn_ctxt ?XX2.0 ?p ?p' *
                ?\<Gamma>2';
         !!x x'.
            hn_ctxt ?P1' x x' \<or>\<^sub>A
            hn_ctxt ?P2' x x' \<Longrightarrow>\<^sub>t
            hn_ctxt ?P' x x';
         ?\<Gamma>1' \<or>\<^sub>A ?\<Gamma>2' \<Longrightarrow>\<^sub>t
         ?\<Gamma>' |]
      ==> hn_refine ?\<Gamma> (case ?p' of [] => ?f1' | x # xa => ?f2' x xa)
           (hn_ctxt (list_assn ?P') ?p ?p' * ?\<Gamma>') ?R
           (case_list $ ?f1.0 $ (%x. (#%xa. (#?f2.0 x xa#)#)) $ ?p)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 24, template_var 19),
              template_app
               (template_app
                 (template_hole 23,
                  template_app
                   (template_app
                     (template_app
                       (template_hole 22,
                        template_app (template_hole 21, template_var 18)),
                      template_var 17),
                    template_var 16)),
                template_var 15))
            ),
        template_implication
         ([template_equation (template_var 17, template_hole 19)],
          template_predicate
           (
              template_app
               (template_app
                 (template_app
                   (template_app
                     (template_app
                       (template_hole 18,
                        template_app
                         (template_app
                           (template_hole 23,
                            template_app
                             (template_app
                               (template_app
                                 (template_hole 22,
                                  template_app
                                   (template_hole 21, template_var 18)),
                                template_var 17),
                              template_var 16)),
                          template_var 15)),
                      template_var 14),
                    template_var 13),
                  template_var 12),
                template_var 11)
              )),
        template_implication
         ([template_equation (template_var 17, template_hole 19)],
          template_predicate
           (
              template_app
               (template_app (template_hole 24, template_var 13),
                template_app
                 (template_app
                   (template_hole 23,
                    template_app
                     (template_app
                       (template_app (template_hole 22, template_var 10),
                        template_var 17),
                      template_var 16)),
                  template_var 9))
              )),
        template_predicate (template_app (template_hole 17, t_empty)),
        template_predicate (template_app (template_hole 17, t_empty)),
        template_predicate (template_app (template_hole 17, t_empty)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 24,
                template_app
                 (template_app (template_hole 8, template_var 9),
                  template_var 2)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 18, template_var 19),
                   template_app
                    (template_app
                      (template_app (template_hole 7, template_var 14),
                       template_var 8),
                     template_var 16)),
                 template_app
                  (template_app
                    (template_hole 23,
                     template_app
                      (template_app
                        (template_app
                          (template_hole 22,
                           template_app (template_hole 21, template_var 1)),
                         template_var 17),
                       template_var 16)),
                   template_var 0)),
               template_var 12),
             template_app
              (template_app
                (template_hole 6,
                 template_app
                  (template_app
                    (template_hole 5,
                     template_app
                      (template_app (template_hole 4, template_hole 3),
                       template_var 11)),
                   t_empty)),
               template_var 17))
           ))),
    ("Sepref_Foreach.hn_monadic_FOREACH",
     "[| INDEP ?Rk; INDEP ?Rs; INDEP ?R\<sigma>;
         ?P \<Longrightarrow>\<^sub>t
         ?\<Gamma> * hn_ctxt ?Rs ?s' ?s *
         hn_ctxt ?R\<sigma> ?\<sigma>' ?\<sigma>;
         GEN_ALGO ?tsl (IS_TO_SORTED_LIST ?ordR ?Rs ?Rk);
         !!\<sigma> \<sigma>'.
            hn_refine
             (?\<Gamma> * hn_ctxt ?Rs ?s' ?s *
              hn_ctxt ?R\<sigma> \<sigma>' \<sigma>)
             (?c \<sigma>) (?\<Gamma>c \<sigma>' \<sigma>) bool_assn
             (?c' \<sigma>');
         !!\<sigma>' \<sigma>.
            TERM monadic_FOREACH ==>
            ?\<Gamma>c \<sigma>' \<sigma> \<Longrightarrow>\<^sub>t
            ?\<Gamma> * hn_ctxt ?Rs ?s' ?s *
            hn_ctxt ?R\<sigma> \<sigma>' \<sigma>;
         !!x' x \<sigma>' \<sigma>.
            hn_refine
             (?\<Gamma> * hn_ctxt ?Rs ?s' ?s * hn_ctxt ?Rk x' x *
              hn_ctxt ?R\<sigma> \<sigma>' \<sigma>)
             (?f x \<sigma>) (?\<Gamma>f x' x \<sigma>' \<sigma>) ?R\<sigma>
             (?f' x' \<sigma>');
         !!x' x \<sigma>' \<sigma>.
            TERM monadic_FOREACH ==>
            ?\<Gamma>f x' x \<sigma>' \<sigma> \<Longrightarrow>\<^sub>t
            ?\<Gamma> * hn_ctxt ?Rs ?s' ?s * hn_ctxt ?Pfx x' x *
            hn_ctxt ?Pf\<sigma> \<sigma>' \<sigma> |]
      ==> hn_refine ?P (imp_foreach ?tsl ?s ?c ?f ?\<sigma>)
           (?\<Gamma> * hn_ctxt ?Rs ?s' ?s *
            hn_invalid ?R\<sigma> ?\<sigma>' ?\<sigma>)
           ?R\<sigma>
           (PR_CONST (monadic_FOREACH ?ordR ?I) $ ?s' $ (%x. (#?c' x#)) $
            (%x. (#%xa. (#?f' x xa#)#)) $
            ?\<sigma>')",
     template_implication
      ([template_predicate
         (template_app (template_hole 33, template_var 19)),
        template_predicate
         (template_app (template_hole 32, template_var 18)),
        template_predicate
         (template_app (template_hole 31, template_var 17)),
        template_predicate
         (
            template_app
             (template_app (template_hole 30, template_var 16),
              template_app
               (template_app
                 (template_hole 29,
                  template_app
                   (template_app (template_hole 29, template_var 15),
                    template_app
                     (template_app
                       (template_app (template_hole 28, template_var 18),
                        template_var 14),
                      template_var 13))),
                template_app
                 (template_app
                   (template_app (template_hole 27, template_var 17),
                    template_var 12),
                  template_var 11)))
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 26, template_var 10),
              template_app
               (template_app
                 (template_app (template_hole 25, template_var 9),
                  template_var 18),
                template_var 19))
            ),
        template_predicate (template_app (template_hole 24, t_empty)),
        template_predicate (template_app (template_hole 23, t_empty)),
        template_predicate (template_app (template_hole 17, t_empty)),
        template_predicate (template_app (template_hole 17, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 15, template_var 16),
                   template_app
                    (template_app
                      (template_app
                        (template_app
                          (template_app (template_hole 11, template_var 10),
                           template_var 13),
                         template_var 8),
                       template_var 5),
                     template_var 11)),
                 template_app
                  (template_app
                    (template_hole 29,
                     template_app
                      (template_app (template_hole 29, template_var 15),
                       template_app
                        (template_app
                          (template_app (template_hole 28, template_var 18),
                           template_var 14),
                         template_var 13))),
                   template_app
                    (template_app
                      (template_app
                        (template_hole 27,
                         template_app (template_hole 10, template_var 17)),
                       template_var 12),
                     template_var 11))),
               template_var 17),
             template_app
              (template_app
                (template_hole 9,
                 template_app
                  (template_app
                    (template_hole 8,
                     template_app
                      (template_app
                        (template_hole 7,
                         template_app
                          (template_app
                            (template_hole 6,
                             template_app
                              (template_hole 5,
                               template_app
                                (template_app
                                  (template_hole 4, template_var 9),
                                 template_var 0))),
                           template_var 14)),
                       t_empty)),
                   t_empty)),
               template_var 12))
           ))),
    ("Sepref_Translate.hn_monadic_WHILE_lin",
     "[| INDEP ?Rs;
         ?P \<Longrightarrow>\<^sub>t ?\<Gamma> * hn_ctxt ?Rs ?s' ?s;
         !!s s'.
            ?I s' ==>
            hn_refine (?\<Gamma> * hn_ctxt ?Rs s' s) (?b s)
             (?\<Gamma>b s' s) bool_assn (?b' s');
         !!s' s.
            TERM (monadic_WHILEIT, ''cond'') ==>
            ?\<Gamma>b s' s \<Longrightarrow>\<^sub>t
            ?\<Gamma> * hn_ctxt ?Rs s' s;
         !!s' s.
            ?I s' ==>
            hn_refine (?\<Gamma> * hn_ctxt ?Rs s' s) (?f s)
             (?\<Gamma>f s' s) ?Rs (?f' s');
         !!s' s.
            TERM (monadic_WHILEIT, ''body'') ==>
            ?\<Gamma>f s' s \<Longrightarrow>\<^sub>t
            ?\<Gamma> * hn_ctxt (%_ _. true) s' s |]
      ==> hn_refine ?P (heap_WHILET ?b ?f ?s)
           (?\<Gamma> * hn_invalid ?Rs ?s' ?s) ?Rs
           (PR_CONST (monadic_WHILEIT ?I) $ (%x. (#?b' x#)) $
            (%x. (#?f' x#)) $
            ?s')",
     template_implication
      ([template_predicate
         (template_app (template_hole 31, template_var 11)),
        template_predicate
         (
            template_app
             (template_app (template_hole 30, template_var 10),
              template_app
               (template_app (template_hole 29, template_var 9),
                template_app
                 (template_app
                   (template_app (template_hole 28, template_var 11),
                    template_var 8),
                  template_var 7)))
            ),
        template_predicate (template_app (template_hole 27, t_empty)),
        template_predicate (template_app (template_hole 26, t_empty)),
        template_predicate (template_app (template_hole 26, t_empty)),
        template_predicate (template_app (template_hole 26, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 14, template_var 10),
                   template_app
                    (template_app
                      (template_app (template_hole 9, template_var 5),
                       template_var 2),
                     template_var 7)),
                 template_app
                  (template_app (template_hole 29, template_var 9),
                   template_app
                    (template_app
                      (template_app
                        (template_hole 28,
                         template_app (template_hole 8, template_var 11)),
                       template_var 8),
                     template_var 7))),
               template_var 11),
             template_app
              (template_app
                (template_hole 7,
                 template_app
                  (template_app
                    (template_hole 6,
                     template_app
                      (template_app
                        (template_hole 5,
                         template_app
                          (template_hole 4,
                           template_app (template_hole 3, template_var 6))),
                       t_empty)),
                   t_empty)),
               template_var 8))
           )))]
