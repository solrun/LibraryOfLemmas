   [("Sepref_Rules.fcomp_norm_refl", "?t = ?t",
     template_equation (template_var 0, template_var 0)),
    ("Sepref_Rules.hrp_imp_refl", "hrp_imp ?RR ?RR",
     template_predicate
      (
         template_app
          (template_app (template_hole 0, template_var 0), template_var 0)
         )),
    ("Sepref_Rules.intf_of_assn_fallback", "intf_of_assn ?R TYPE(?'a)",
     template_predicate
      (
         template_app
          (template_app (template_hole 1, template_var 0), template_hole 0)
         )),
    ("Sepref_Rules.intf_of_assnI", "intf_of_assn ?R TYPE(?'a)",
     template_predicate
      (
         template_app
          (template_app (template_hole 1, template_var 0), template_hole 0)
         )),
    ("Sepref_Rules.to_hnr_post", "uncurry0 ?c ?x = ?c",
     template_equation
      (template_app
        (template_app (template_hole 0, template_var 1), template_var 0),
       template_var 1)),
    ("Sepref_Rules.hr_comp_Id2", "hr_comp ?R Id = ?R",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), template_hole 0),
       template_var 0)),
    ("Sepref_Rules.fcomp_norm_unfold", "Id O ?R = ?R",
     template_equation
      (template_app
        (template_app (template_hole 1, template_hole 0), template_var 0),
       template_var 0)),
    ("Sepref_Rules.fcomp_norm_unfold", "?R O Id = ?R",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), template_hole 0),
       template_var 0)),
    ("Sepref_Rules.to_hnr_post", "emp * ?x = ?x",
     template_equation
      (template_app
        (template_app (template_hole 1, template_hole 0), template_var 0),
       template_var 0)),
    ("Sepref_Rules.to_hnr_post", "?x * emp = ?x",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 0), template_hole 0),
       template_var 0)),
    ("Sepref_Rules.uncurry0_APP", "uncurry0 ?c $ ?x = ?c",
     template_equation
      (template_app
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 1)),
         template_var 0),
       template_var 1)),
    ("Sepref_Rules.hn_ctxt_ctxt_fix_conv",
     "hn_ctxt (hn_ctxt ?R) = hn_ctxt ?R",
     template_equation
      (template_app
        (template_hole 0, template_app (template_hole 0, template_var 0)),
       template_app (template_hole 0, template_var 0))),
    ("Sepref_Rules.keep_drop_sels", "fst (?R\<^sup>d) = ?R",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 0),
           template_hole 0)),
       template_var 0)),
    ("Sepref_Rules.keep_drop_sels", "fst (?R\<^sup>k) = ?R",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 0),
           template_hole 0)),
       template_var 0)),
    ("Sepref_Rules.hf_pres_fst", "fst (hf_pres ?R ?k) = ?R",
     template_equation
      (template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1), template_var 0)),
       template_var 1)),
    ("Sepref_Rules.keep_drop_sels", "snd (?R\<^sup>k) = ?R",
     template_equation
      (template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 1, template_var 0),
           template_hole 0)),
       template_var 0)),
    ("Sepref_Rules.pure_unit_rel_eq_empty", "unit_assn ?x ?y = emp",
     template_equation
      (template_app
        (template_app
          (template_app (template_hole 2, template_hole 1), template_var 1),
         template_var 0),
       template_hole 0)),
    ("Sepref_Rules.auto_weaken_pre_add_dummy_imp", "?P ==> True --> ?P",
     template_implication
      ([template_predicate (template_var 0)],
       template_predicate
        (
           template_app
            (template_app (template_hole 1, template_hole 0),
             template_var 0)
           ))),
    ("Sepref_Rules.keep_drop_sels", "snd (?R\<^sup>d) = invalid_assn ?R",
     template_equation
      (template_app
        (template_hole 3,
         template_app
          (template_app (template_hole 2, template_var 0),
           template_hole 1)),
       template_app (template_hole 0, template_var 0))),
    ("Sepref_Rules.hr_comp_Id1", "hr_comp id_assn ?R = pure ?R",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app (template_hole 2, template_hole 1)),
         template_var 0),
       template_app (template_hole 0, template_var 0))),
    ("Sepref_Rules.prod_casesK", "(%(uu_, uu_). ?k) = (%_. ?k)",
     template_equation (template_app (template_hole 0, t_empty), t_empty)),
    ("Sepref_Rules.hn_val_unit_conv_emp", "hn_val unit_rel ?x ?y = emp",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 3,
             template_app (template_hole 2, template_hole 1)),
           template_var 1),
         template_var 0),
       template_hole 0)),
    ("Sepref_Rules.uncurry0_add_app_tag",
     "uncurry0 (RETURN ?c) = uncurry0 (RETURN $ ?c)",
     template_equation
      (template_app
        (template_hole 2, template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 2,
         template_app
          (template_app (template_hole 0, template_hole 1),
           template_var 0)))),
    ("Sepref_Rules.ensure_fref_nres_unfold",
     "(RETURN \<circ>\<circ> uncurry0) ?f = uncurry0 (RETURN ?f)",
     template_equation
      (template_app
        (template_app (template_hole 3, template_hole 2),
         template_app (template_hole 1, template_var 0)),
       template_app
        (template_hole 0, template_app (template_hole 2, template_var 0)))),
    ("Sepref_Rules.hr_comp_is_pure",
     "is_pure ?A ==> is_pure (hr_comp ?A ?B)",
     template_implication
      ([template_predicate
         (template_app (template_hole 2, template_var 1))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.hrp_imp_reflI", "?RR = ?RR' ==> hrp_imp ?RR ?RR'",
     template_implication
      ([template_equation (template_var 1, template_var 0)],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 1), template_var 0)
           ))),
    ("Sepref_Rules.hr_comp_invalid",
     "hr_comp (invalid_assn ?R1.0) ?R2.0 =
      invalid_assn (hr_comp ?R1.0 ?R2.0)",
     template_equation
      (template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_var 0),
       template_app
        (template_hole 0,
         template_app
          (template_app (template_hole 2, template_var 1),
           template_var 0)))),
    ("Sepref_Rules.hr_comp_pure", "hr_comp (pure ?R) ?S = pure (?R O ?S)",
     template_equation
      (template_app
        (template_app
          (template_hole 3, template_app (template_hole 2, template_var 1)),
         template_var 0),
       template_app
        (template_hole 1,
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_Rules.hfprod_fst_snd",
     "fst (?A *\<^sub>a ?B) = fst ?A \<times>\<^sub>a fst ?B",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 0, template_var 0)))),
    ("Sepref_Rules.to_hnr_prod_fst_snd",
     "fst (?A *\<^sub>a ?B) = to_hnr_prod (fst ?A) (fst ?B)",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 0, template_var 0)))),
    ("Sepref_Rules.hfprod_fst_snd",
     "snd (?A *\<^sub>a ?B) = snd ?A \<times>\<^sub>a snd ?B",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 0, template_var 0)))),
    ("Sepref_Rules.to_hnr_prod_fst_snd",
     "snd (?A *\<^sub>a ?B) = to_hnr_prod (snd ?A) (snd ?B)",
     template_equation
      (template_app
        (template_hole 4,
         template_app
          (template_app (template_hole 3, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 2, template_app (template_hole 1, template_var 1)),
         template_app (template_hole 0, template_var 0)))),
    ("Sepref_Rules.fcomp_norm_simps",
     "CONSTRAINT is_pure ?P ==> pure (the_pure ?P) = ?P",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 4, template_hole 3),
              template_var 0)
            )],
       template_equation
        (template_app
          (template_hole 1, template_app (template_hole 0, template_var 0)),
         template_var 0))),
    ("Sepref_Rules.hr_comp_assoc",
     "hr_comp (hr_comp ?R ?S) ?T = hr_comp ?R (?S O ?T)",
     template_equation
      (template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 1, template_var 2),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_Rules.ensure_fref_nres_unfold",
     "(RETURN \<circ>\<circ> uncurry) ?f =
      uncurry (RETURN \<circ>\<circ> ?f)",
     template_equation
      (template_app
        (template_app (template_hole 4, template_hole 3),
         template_app (template_hole 2, template_var 0)),
       template_app (template_hole 1, t_empty))),
    ("Sepref_Rules.fref_param1",
     "?R \<rightarrow> ?S = ?R \<rightarrow>\<^sub>f ?S",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app
          (template_app (template_hole 1, t_empty), template_var 1),
         template_var 0))),
    ("Sepref_Rules.uncurry0_hfref_post",
     "[uncurry0 True]\<^sub>a ?R \<rightarrow> ?S =
      ?R \<rightarrow>\<^sub>a ?S",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 2,
             template_app (template_hole 1, template_hole 0)),
           template_var 1),
         template_var 0),
       template_app
        (template_app
          (template_app (template_hole 2, t_empty), template_var 1),
         template_var 0))),
    ("Sepref_Rules.auto_weaken_pre_to_imp_nf",
     "((?A & ?B) & ?C) = (?A & ?B & ?C)",
     template_equation
      (template_app
        (template_app
          (template_hole 0,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 0, template_var 2),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_Rules.auto_weaken_pre_to_imp_nf",
     "(?A --> ?B --> ?C) = (?A & ?B --> ?C)",
     template_equation
      (template_app
        (template_app (template_hole 1, template_var 2),
         template_app
          (template_app (template_hole 1, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1)),
         template_var 0))),
    ("Sepref_Rules.norm_return_o",
     "(return o ?f) $ ?x = return $ (?f $ ?x)",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 1, template_hole 2),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_Rules.hrp_comp_dest",
     "hrp_comp (?A\<^sup>d) ?B = (hr_comp ?A ?B)\<^sup>d",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 1),
             template_hole 2)),
         template_var 0),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0)),
         template_hole 2))),
    ("Sepref_Rules.hrp_comp_keep",
     "hrp_comp (?A\<^sup>k) ?B = (hr_comp ?A ?B)\<^sup>k",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_var 1),
             template_hole 2)),
         template_var 0),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 1),
             template_var 0)),
         template_hole 2))),
    ("Sepref_Rules.norm_RETURN_o",
     "(RETURN o ?f) $ ?x = RETURN $ (?f $ ?x)",
     template_equation
      (template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 1, template_hole 2),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_Rules.fcomp_prenorm_simps", "(?a, ?b) : ?r ==> ?a : Domain ?r",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app (template_hole 2, template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 1, template_var 2),
             template_app (template_hole 0, template_var 0))
           ))),
    ("Sepref_Rules.uncurry_APP", "uncurry ?f $ (?a, ?b) = ?f $ ?a $ ?b",
     template_equation
      (template_app
        (template_app
          (template_hole 4, template_app (template_hole 3, template_var 2)),
         template_app
          (template_app (template_hole 2, template_var 1), template_var 0)),
       template_app
        (template_app
          (template_hole 1,
           template_app
            (template_app (template_hole 0, template_var 2),
             template_var 1)),
         template_var 0))),
    ("Sepref_Rules.hr_comp_precise",
     "[| precise ?R; single_valued ?S |] ==> precise (hr_comp ?R ?S)",
     template_implication
      ([template_predicate (template_app (template_hole 3, template_var 1)),
        template_predicate
         (template_app (template_hole 2, template_var 0))],
       template_predicate
        (
           template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.fcomp_norm_unfold",
     "\<langle>?A\<rangle>nres_rel O \<langle>?B\<rangle>nres_rel =
      \<langle>?A O ?B\<rangle>nres_rel",
     template_equation
      (template_app
        (template_app
          (template_hole 7,
           template_app
            (template_app (template_hole 6, template_hole 5),
             template_var 1)),
         template_app
          (template_app (template_hole 4, template_hole 3),
           template_var 0)),
       template_app
        (template_app (template_hole 2, template_hole 1),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_Rules.hr_comp_the_pure",
     "is_pure ?A ==> the_pure (hr_comp ?A ?B) = the_pure ?A O ?B",
     template_implication
      ([template_predicate
         (template_app (template_hole 5, template_var 1))],
       template_equation
        (template_app
          (template_hole 3,
           template_app
            (template_app (template_hole 2, template_var 1),
             template_var 0)),
         template_app
          (template_app
            (template_hole 1,
             template_app (template_hole 0, template_var 1)),
           template_var 0)))),
    ("Sepref_Rules.fref_triv",
     "?A <= Id ==> (?f, ?f) : [?P]\<^sub>f ?A \<rightarrow> Id",
     template_implication
      ([template_inequation (less_equals, template_var 2, template_hole 4)],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app (template_hole 2, template_var 1),
                 template_var 1)),
             template_app
              (template_app
                (template_app (template_hole 1, template_var 0),
                 template_var 2),
               template_hole 0))
           ))),
    ("Sepref_Rules.hfsynth_ID_R_D",
     "[| hfsynth_ID_R ?R ?a; intf_of_assn ?R ?I |] ==> ?a ::\<^sub>i ?I",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 2, template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 1, template_var 2),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 1), template_var 0)
           ))),
    ("Sepref_Rules.hrp_imp_trans",
     "[| hrp_imp ?A ?B; hrp_imp ?B ?C |] ==> hrp_imp ?A ?C",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 0, template_var 2),
              template_var 1)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 0, template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 0, template_var 2), template_var 0)
           ))),
    ("Sepref_Rules.in_CURRY_conv",
     "((?f, ?g) : CURRY ?R) = ((uncurry ?f, uncurry ?g) : ?R)",
     template_equation
      (template_app
        (template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, template_var 2),
             template_var 1)),
         template_app (template_hole 4, template_var 0)),
       template_app
        (template_app
          (template_hole 3,
           template_app
            (template_app
              (template_hole 2,
               template_app (template_hole 1, template_var 2)),
             template_app (template_hole 0, template_var 1))),
         template_var 0))),
    ("Sepref_Rules.hfref_imp",
     "hrp_imp ?RR ?RR' ==>
      [?P]\<^sub>a ?RR \<rightarrow> ?S
      <= [?P]\<^sub>a ?RR' \<rightarrow> ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 2, template_var 3),
              template_var 2)
            )],
       template_inequation
        (less_equals,
         template_app
          (template_app
            (template_app (template_hole 0, template_var 1),
             template_var 3),
           template_var 0),
         template_app
          (template_app
            (template_app (template_hole 0, template_var 1),
             template_var 2),
           template_var 0)))),
    ("Sepref_Rules.ensure_fref_nres_unfold",
     "(RETURN \<circ>\<circ>\<circ> uncurry) ?f =
      uncurry (RETURN \<circ>\<circ>\<circ> ?f)",
     template_equation (t_empty, template_app (template_hole 0, t_empty))),
    ("Sepref_Rules.PRE_D1",
     "?Q ?x & ?P ?x --> comp_PRE ?S1.0 ?Q (%x _. ?P x) ?S ?x",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_hole 1,
                 template_app (template_var 4, template_var 3)),
               template_app (template_var 2, template_var 3))),
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 1),
                   template_var 4),
                 t_empty),
               template_var 0),
             template_var 3))
         )),
    ("Sepref_Rules.hr_comp_emp",
     "hr_comp (%a c. emp) ?R ?a ?c = \<up> (EX b. (b, ?a) : ?R)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_app (template_hole 5, t_empty), template_var 2),
           template_var 1),
         template_var 0),
       template_app
        (template_hole 3, template_app (template_hole 2, t_empty)))),
    ("Sepref_Rules.hr_compI",
     "(?b, ?a) : ?R2.0 ==>
      ?R1.0 ?b ?c \<Longrightarrow>\<^sub>A hr_comp ?R1.0 ?R2.0 ?a ?c",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app (template_hole 2, template_var 4),
                  template_var 3)),
              template_var 2)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_var 1, template_var 4),
                 template_var 0)),
             template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 1),
                   template_var 2),
                 template_var 3),
               template_var 0))
           ))),
    ("Sepref_Rules.hr_comp_prod_conv",
     "hr_comp (?Ra \<times>\<^sub>a ?Rb) (?Ra' \<times>\<^sub>r ?Rb') =
      hr_comp ?Ra ?Ra' \<times>\<^sub>a hr_comp ?Rb ?Rb'",
     template_equation
      (template_app
        (template_app
          (template_hole 7,
           template_app
            (template_app (template_hole 6, template_var 3),
             template_var 2)),
         template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app (template_hole 4, template_hole 3),
               template_var 1)),
           template_var 0)),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 3),
             template_var 1)),
         template_app
          (template_app (template_hole 0, template_var 2),
           template_var 0)))),
    ("Sepref_Rules.rdomp_hrcomp_conv",
     "rdomp (hr_comp ?A ?R) ?x = (EX y. rdomp ?A y & (y, ?x) : ?R)",
     template_equation
      (template_app
        (template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, template_var 2),
             template_var 1)),
         template_var 0),
       template_app (template_hole 4, t_empty))),
    ("Sepref_Rules.norm_return_o",
     "(return \<circ>\<circ> ?f) $ ?x $ ?y = return $ (?f $ ?x $ ?y)",
     template_equation
      (template_app
        (template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, t_empty), template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 2, template_hole 3),
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 1)),
           template_var 0)))),
    ("Sepref_Rules.prod_hrp_comp",
     "hrp_comp (?A *\<^sub>a ?B) (?C \<times>\<^sub>r ?D) =
      hrp_comp ?A ?C *\<^sub>a hrp_comp ?B ?D",
     template_equation
      (template_app
        (template_app
          (template_hole 7,
           template_app
            (template_app (template_hole 6, template_var 3),
             template_var 2)),
         template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app (template_hole 4, template_hole 3),
               template_var 1)),
           template_var 0)),
       template_app
        (template_app
          (template_hole 2,
           template_app
            (template_app (template_hole 1, template_var 3),
             template_var 1)),
         template_app
          (template_app (template_hole 0, template_var 2),
           template_var 0)))),
    ("Sepref_Rules.norm_RETURN_o",
     "(RETURN \<circ>\<circ> ?f) $ ?x $ ?y = RETURN $ (?f $ ?x $ ?y)",
     template_equation
      (template_app
        (template_app
          (template_hole 6,
           template_app
            (template_app (template_hole 5, t_empty), template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 2, template_hole 3),
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 1)),
           template_var 0)))),
    ("Sepref_Rules.hrp_comp_cong",
     "[| hrp_imp ?A ?A'; ?B = ?B' |]
      ==> hrp_imp (hrp_comp ?A ?B) (hrp_comp ?A' ?B')",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 3, template_var 3),
              template_var 2)
            ),
        template_equation (template_var 1, template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 3),
                 template_var 1)),
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 0))
           ))),
    ("Sepref_Rules.hrp_prod_cong",
     "[| hrp_imp ?A ?A'; hrp_imp ?B ?B' |]
      ==> hrp_imp (?A *\<^sub>a ?B) (?A' *\<^sub>a ?B')",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 3, template_var 3),
              template_var 2)
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 2, template_var 1),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app (template_hole 0, template_var 3),
                 template_var 1)),
             template_app
              (template_app (template_hole 0, template_var 2),
               template_var 0))
           ))),
    ("Sepref_Rules.fref_param0I",
     "(?c, ?a) : ?R ==>
      (uncurry0 ?c, uncurry0 ?a) : unit_rel \<rightarrow>\<^sub>f ?R",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app
                 (template_app (template_hole 7, template_var 2),
                  template_var 1)),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app
                  (template_hole 5,
                   template_app (template_hole 4, template_var 2)),
                 template_app (template_hole 3, template_var 1))),
             template_app
              (template_app
                (template_app (template_hole 2, t_empty), template_hole 0),
               template_var 0))
           ))),
    ("Sepref_Rules.fref_unit_conv",
     "((%_. ?c, %_. ?a) : [?P]\<^sub>f unit_rel \<rightarrow> ?S) =
      (?P () --> (?c, ?a) : ?S)",
     template_equation
      (template_app
        (template_app
          (template_hole 7,
           template_app (template_app (template_hole 6, t_empty), t_empty)),
         template_app
          (template_app
            (template_app (template_hole 5, template_var 1),
             template_hole 4),
           template_var 0)),
       template_app
        (template_app
          (template_hole 3, template_app (template_var 1, template_hole 2)),
         template_app
          (template_app
            (template_hole 1,
             template_app
              (template_app (template_hole 0, template_var 3),
               template_var 2)),
           template_var 0)))),
    ("Sepref_Rules.fcomp_norm_dflt_init",
     "[| ?x : [?P]\<^sub>a ?R \<rightarrow> ?T; hrp_imp ?R ?S |]
      ==> ?x : [?P]\<^sub>a ?S \<rightarrow> ?T",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 2, template_var 4),
              template_app
               (template_app
                 (template_app (template_hole 1, template_var 3),
                  template_var 2),
                template_var 1))
            ),
        template_predicate
         (
            template_app
             (template_app (template_hole 0, template_var 2),
              template_var 0)
            )],
       template_predicate
        (
           template_app
            (template_app (template_hole 2, template_var 4),
             template_app
              (template_app
                (template_app (template_hole 1, template_var 3),
                 template_var 0),
               template_var 1))
           ))),
    ("Sepref_Rules.fref_ncI",
     "(?f, ?g) : ?R \<rightarrow> ?S ==>
      (?f, ?g) : ?R \<rightarrow>\<^sub>f ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_app (template_hole 5, template_var 3),
                  template_var 2)),
              template_app
               (template_app
                 (template_hole 4,
                  template_app
                   (template_app (template_hole 3, template_hole 2),
                    template_var 1)),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app (template_hole 5, template_var 3),
                 template_var 2)),
             template_app
              (template_app
                (template_app (template_hole 1, t_empty), template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.fref_ncD",
     "(?f, ?g) : ?R \<rightarrow>\<^sub>f ?S ==>
      (?f, ?g) : ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_app (template_hole 5, template_var 3),
                  template_var 2)),
              template_app
               (template_app
                 (template_app (template_hole 4, t_empty), template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app (template_hole 5, template_var 3),
                 template_var 2)),
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app (template_hole 1, template_hole 0),
                   template_var 1)),
               template_var 0))
           ))),
    ("Sepref_Rules.fcomp_norm_unfold",
     "(?A \<times>\<^sub>r ?B) O (?C \<times>\<^sub>r ?D) =
      ?A O ?C \<times>\<^sub>r ?B O ?D",
     template_equation
      (template_app
        (template_app
          (template_hole 11,
           template_app
            (template_app
              (template_hole 10,
               template_app
                (template_app (template_hole 9, template_hole 8),
                 template_var 3)),
             template_var 2)),
         template_app
          (template_app
            (template_hole 7,
             template_app
              (template_app (template_hole 6, template_hole 5),
               template_var 1)),
           template_var 0)),
       template_app
        (template_app
          (template_hole 4,
           template_app
            (template_app (template_hole 3, template_hole 2),
             template_app
              (template_app (template_hole 1, template_var 3),
               template_var 1))),
         template_app
          (template_app (template_hole 0, template_var 2),
           template_var 0)))),
    ("Sepref_Rules.norm_return_o",
     "(return \<circ>\<circ>\<circ> ?f) $ ?x $ ?y $ ?z =
      return $ (?f $ ?x $ ?y $ ?z)",
     template_equation
      (template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, t_empty), template_var 2)),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 3, template_hole 4),
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_var 3),
                   template_var 2)),
               template_var 1)),
           template_var 0)))),
    ("Sepref_Rules.norm_RETURN_o",
     "(RETURN \<circ>\<circ>\<circ> ?f) $ ?x $ ?y $ ?z =
      RETURN $ (?f $ ?x $ ?y $ ?z)",
     template_equation
      (template_app
        (template_app
          (template_hole 8,
           template_app
            (template_app
              (template_hole 7,
               template_app
                (template_app (template_hole 6, t_empty), template_var 2)),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 3, template_hole 4),
         template_app
          (template_app
            (template_hole 2,
             template_app
              (template_app
                (template_hole 1,
                 template_app
                  (template_app (template_hole 0, template_var 3),
                   template_var 2)),
               template_var 1)),
           template_var 0)))),
    ("Sepref_Rules.PRE_D2",
     "?Q ?x & (ALL y. (y, ?x) : ?S1.0 --> ?S ?x --> ?P ?x y) -->
      comp_PRE ?S1.0 ?Q ?P ?S ?x",
     template_predicate
      (
         template_app
          (template_app
            (template_hole 5,
             template_app
              (template_app
                (template_hole 4,
                 template_app (template_var 4, template_var 3)),
               template_app (template_hole 3, t_empty))),
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 2),
                   template_var 4),
                 template_var 0),
               template_var 1),
             template_var 3))
         )),
    ("Sepref_Rules.ensure_fref_nresI",
     "(?f, ?g) : [?P]\<^sub>f ?R \<rightarrow> ?S ==>
      (RETURN o ?f, RETURN o ?g)
      : [?P]\<^sub>f ?R \<rightarrow> \<langle>?S\<rangle>nres_rel",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 11,
                template_app
                 (template_app (template_hole 10, template_var 4),
                  template_var 3)),
              template_app
               (template_app
                 (template_app (template_hole 9, template_var 2),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 8,
               template_app
                (template_app
                  (template_hole 7,
                   template_app
                    (template_app (template_hole 6, template_hole 5),
                     template_var 4)),
                 template_app
                  (template_app (template_hole 4, template_hole 3),
                   template_var 3))),
             template_app
              (template_app
                (template_app (template_hole 2, template_var 2),
                 template_var 1),
               template_app
                (template_app (template_hole 1, template_hole 0),
                 template_var 0)))
           ))),
    ("Sepref_Rules.hfref_weaken_pre_nofail",
     "(?f, ?g) : [?P]\<^sub>a ?R \<rightarrow> ?S ==>
      (?f, ?g) : [%x. nofail (?g x) --> ?P x]\<^sub>a ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app
                 (template_app (template_hole 3, template_var 4),
                  template_var 3)),
              template_app
               (template_app
                 (template_app (template_hole 2, template_var 2),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_var 4),
                 template_var 3)),
             template_app
              (template_app
                (template_app (template_hole 2, t_empty), template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.hn_rel_compI",
     "[| nofail ?a; (?b, ?a) : \<langle>?R2.0\<rangle>nres_rel |]
      ==> hn_rel ?R1.0 ?b ?c \<Longrightarrow>\<^sub>A
          hn_rel (hr_comp ?R1.0 ?R2.0) ?a ?c",
     template_implication
      ([template_predicate (template_app (template_hole 8, template_var 4)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 7,
                template_app
                 (template_app (template_hole 6, template_var 3),
                  template_var 4)),
              template_app
               (template_app (template_hole 5, template_hole 4),
                template_var 2))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app
                  (template_app (template_hole 2, template_var 1),
                   template_var 3),
                 template_var 0)),
             template_app
              (template_app
                (template_app
                  (template_hole 1,
                   template_app
                    (template_app (template_hole 0, template_var 1),
                     template_var 2)),
                 template_var 4),
               template_var 0))
           ))),
    ("Sepref_Rules.rel2p_fref",
     "rel2p ([?P]\<^sub>f ?R \<rightarrow> ?S) =
      (%f g. ALL x y. ?P y --> rel2p ?R x y --> rel2p ?S (f x) (g y))",
     template_equation
      (template_app
        (template_hole 6,
         template_app
          (template_app
            (template_app (template_hole 5, template_var 2),
             template_var 1),
           template_var 0)),
       t_empty)),
    ("Sepref_Rules.hfref_PRE_D3",
     "(?f, ?h) : [comp_PRE ?S1.0 ?Q ?P ?X]\<^sub>a ?R \<rightarrow> ?S ==>
      (?f, ?h) : [comp_PRE ?S1.0 ?Q ?P ?X]\<^sub>a ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app (template_hole 2, template_var 7),
                  template_var 6)),
              template_app
               (template_app
                 (template_app
                   (template_hole 1,
                    template_app
                     (template_app
                       (template_app
                         (template_app (template_hole 0, template_var 5),
                          template_var 4),
                        template_var 3),
                      template_var 2)),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 3,
               template_app
                (template_app (template_hole 2, template_var 7),
                 template_var 6)),
             template_app
              (template_app
                (template_app
                  (template_hole 1,
                   template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 0, template_var 5),
                         template_var 4),
                       template_var 3),
                     template_var 2)),
                 template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.fref_weaken_pre",
     "[| !!x. ?P x --> ?P' x;
         (?f, ?h) : [?P']\<^sub>f ?R \<rightarrow> ?S |]
      ==> (?f, ?h) : [?P]\<^sub>f ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate (template_app (template_hole 5, t_empty)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 3),
                  template_var 2)),
              template_app
               (template_app
                 (template_app (template_hole 0, template_var 4),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 3),
                 template_var 2)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 5),
                 template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.hfref_weaken_pre",
     "[| !!x. ?P x --> ?P' x;
         (?f, ?h) : [?P']\<^sub>a ?R \<rightarrow> ?S |]
      ==> (?f, ?h) : [?P]\<^sub>a ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate (template_app (template_hole 5, t_empty)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 3),
                  template_var 2)),
              template_app
               (template_app
                 (template_app (template_hole 0, template_var 4),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 3),
                 template_var 2)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 5),
                 template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.hfrefD",
     "[| (?f, ?g) : [?P]\<^sub>a ?RS \<rightarrow> ?T; ?P ?a |]
      ==> hn_refine (fst ?RS ?a ?c) (?f ?c) (snd ?RS ?a ?c) ?T (?g ?a)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 5,
                template_app
                 (template_app (template_hole 4, template_var 6),
                  template_var 5)),
              template_app
               (template_app
                 (template_app (template_hole 3, template_var 4),
                  template_var 3),
                template_var 2))
            ),
        template_predicate (template_app (template_var 4, template_var 1))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_hole 2,
                     template_app
                      (template_app
                        (template_app (template_hole 1, template_var 3),
                         template_var 1),
                       template_var 0)),
                   template_app (template_var 6, template_var 0)),
                 template_app
                  (template_app
                    (template_app (template_hole 0, template_var 3),
                     template_var 1),
                   template_var 0)),
               template_var 2),
             template_app (template_var 5, template_var 1))
           ))),
    ("Sepref_Rules.auto_weaken_pre_init_f",
     "[| !!x. PROTECT ?P x --> ?P' x;
         (?f, ?h) : [?P']\<^sub>f ?R \<rightarrow> ?S |]
      ==> (?f, ?h) : [?P]\<^sub>f ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate (template_app (template_hole 6, t_empty)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 3),
                  template_var 2)),
              template_app
               (template_app
                 (template_app (template_hole 0, template_var 4),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 3),
                 template_var 2)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 5),
                 template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.auto_weaken_pre_init_hf",
     "[| !!x. PROTECT ?P x --> ?P' x;
         (?f, ?h) : [?P']\<^sub>a ?R \<rightarrow> ?S |]
      ==> (?f, ?h) : [?P]\<^sub>a ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate (template_app (template_hole 6, t_empty)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 3),
                  template_var 2)),
              template_app
               (template_app
                 (template_app (template_hole 0, template_var 4),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 3),
                 template_var 2)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 5),
                 template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.frefD",
     "[| (?f, ?g) : [?P]\<^sub>f ?R \<rightarrow> ?S; ?P ?y;
         (?x, ?y) : ?R |]
      ==> (?f ?x, ?g ?y) : ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_app (template_hole 5, template_var 6),
                  template_var 5)),
              template_app
               (template_app
                 (template_app (template_hole 4, template_var 4),
                  template_var 3),
                template_var 2))
            ),
        template_predicate (template_app (template_var 4, template_var 1)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 3,
                template_app
                 (template_app (template_hole 2, template_var 0),
                  template_var 1)),
              template_var 3)
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 1,
               template_app
                (template_app
                  (template_hole 0,
                   template_app (template_var 6, template_var 0)),
                 template_app (template_var 5, template_var 1))),
             template_var 2)
           ))),
    ("Sepref_Rules.norm_return_o",
     "(%x. return \<circ>\<circ>\<circ> ?f x) $ ?x $ ?y $ ?z $ ?a =
      return $ (?f $ ?x $ ?y $ ?z $ ?a)",
     template_equation
      (template_app
        (template_app
          (template_hole 10,
           template_app
            (template_app
              (template_hole 9,
               template_app
                (template_app
                  (template_hole 8,
                   template_app
                    (template_app (template_hole 7, t_empty),
                     template_var 3)),
                 template_var 2)),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 4, template_hole 5),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app
                    (template_hole 1,
                     template_app
                      (template_app (template_hole 0, template_var 4),
                       template_var 3)),
                   template_var 2)),
               template_var 1)),
           template_var 0)))),
    ("Sepref_Rules.norm_RETURN_o",
     "(%x. RETURN \<circ>\<circ>\<circ> ?f x) $ ?x $ ?y $ ?z $ ?a =
      RETURN $ (?f $ ?x $ ?y $ ?z $ ?a)",
     template_equation
      (template_app
        (template_app
          (template_hole 10,
           template_app
            (template_app
              (template_hole 9,
               template_app
                (template_app
                  (template_hole 8,
                   template_app
                    (template_app (template_hole 7, t_empty),
                     template_var 3)),
                 template_var 2)),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 4, template_hole 5),
         template_app
          (template_app
            (template_hole 3,
             template_app
              (template_app
                (template_hole 2,
                 template_app
                  (template_app
                    (template_hole 1,
                     template_app
                      (template_app (template_hole 0, template_var 4),
                       template_var 3)),
                   template_var 2)),
               template_var 1)),
           template_var 0)))),
    ("Sepref_Rules.fref_mono",
     "[| !!x. ?P' x ==> ?P x; ?R' <= ?R; ?S <= ?S' |]
      ==> [?P]\<^sub>f ?R \<rightarrow> ?S
          <= [?P']\<^sub>f ?R' \<rightarrow> ?S'",
     template_implication
      ([template_predicate (template_app (template_hole 5, t_empty)),
        template_inequation (less_equals, template_var 3, template_var 2),
        template_inequation (less_equals, template_var 1, template_var 0)],
       template_inequation
        (less_equals,
         template_app
          (template_app
            (template_app (template_hole 0, template_var 4),
             template_var 2),
           template_var 1),
         template_app
          (template_app
            (template_app (template_hole 0, template_var 5),
             template_var 3),
           template_var 0)))),
    ("Sepref_Rules.uc_hfprod_sel",
     "fst (?A *\<^sub>a ?B) ?a ?c =
      (case (?a, ?c) of ((a1, a2), c1, c2) => fst ?A a1 c1 * fst ?B a2 c2)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 8,
             template_app
              (template_app (template_hole 7, template_var 3),
               template_var 2)),
           template_var 1),
         template_var 0),
       template_app
        (template_app (template_hole 6, t_empty),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_Rules.uc_hfprod_sel",
     "snd (?A *\<^sub>a ?B) ?a ?c =
      (case (?a, ?c) of ((a1, a2), c1, c2) => snd ?A a1 c1 * snd ?B a2 c2)",
     template_equation
      (template_app
        (template_app
          (template_app
            (template_hole 8,
             template_app
              (template_app (template_hole 7, template_var 3),
               template_var 2)),
           template_var 1),
         template_var 0),
       template_app
        (template_app (template_hole 6, t_empty),
         template_app
          (template_app (template_hole 0, template_var 1),
           template_var 0)))),
    ("Sepref_Rules.fref_PRE_D1",
     "(?f, ?h)
      : [comp_PRE ?S1.0 ?Q (%x _. ?P x) ?X]\<^sub>f ?R \<rightarrow> ?S ==>
      (?f, ?h) : [%x. ?Q x & ?P x]\<^sub>f ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app
                 (template_app (template_hole 3, template_var 7),
                  template_var 6)),
              template_app
               (template_app
                 (template_app
                   (template_hole 2,
                    template_app
                     (template_app
                       (template_app
                         (template_app (template_hole 1, template_var 5),
                          template_var 4),
                        t_empty),
                      template_var 2)),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_var 7),
                 template_var 6)),
             template_app
              (template_app
                (template_app (template_hole 2, t_empty), template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.hfref_PRE_D1",
     "(?f, ?h)
      : [comp_PRE ?S1.0 ?Q (%x _. ?P x) ?X]\<^sub>a ?R \<rightarrow> ?S ==>
      (?f, ?h) : [%x. ?Q x & ?P x]\<^sub>a ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app
                 (template_app (template_hole 3, template_var 7),
                  template_var 6)),
              template_app
               (template_app
                 (template_app
                   (template_hole 2,
                    template_app
                     (template_app
                       (template_app
                         (template_app (template_hole 1, template_var 5),
                          template_var 4),
                        t_empty),
                      template_var 2)),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_var 7),
                 template_var 6)),
             template_app
              (template_app
                (template_app (template_hole 2, t_empty), template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.fref_compI",
     "([?P]\<^sub>f ?R1.0 \<rightarrow> ?R2.0) O
      ([?Q]\<^sub>f ?S1.0 \<rightarrow> ?S2.0)
      <= [%x. ?Q x &
              (ALL y.
                  (y, x) : ?S1.0 -->
                  ?P y)]\<^sub>f ?R1.0 O ?S1.0 \<rightarrow> ?R2.0 O ?S2.0",
     template_inequation
      (less_equals,
       template_app
        (template_app
          (template_hole 10,
           template_app
            (template_app
              (template_app (template_hole 9, template_var 5),
               template_var 4),
             template_var 3)),
         template_app
          (template_app
            (template_app (template_hole 8, template_var 2),
             template_var 1),
           template_var 0)),
       template_app
        (template_app
          (template_app (template_hole 7, t_empty),
           template_app
            (template_app (template_hole 1, template_var 4),
             template_var 1)),
         template_app
          (template_app (template_hole 0, template_var 3),
           template_var 0)))),
    ("Sepref_Rules.hfref_to_ASSERT_conv",
     "NO_MATCH (%_. True) ?P ==>
      ((?a, ?b) : [?P]\<^sub>a ?R \<rightarrow> ?S) =
      ((?a, %x. ASSERT (?P x) >>= (%_. ?b x))
       : ?R \<rightarrow>\<^sub>a ?S)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app (template_hole 7, t_empty), template_var 4)
            )],
       template_equation
        (template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_var 3),
               template_var 2)),
           template_app
            (template_app
              (template_app (template_hole 2, template_var 4),
               template_var 1),
             template_var 0)),
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app (template_hole 3, template_var 3), t_empty)),
           template_app
            (template_app
              (template_app (template_hole 2, t_empty), template_var 1),
             template_var 0))))),
    ("Sepref_Rules.hfrefI",
     "(!!c a.
          ?P a ==>
          hn_refine (fst ?RS a c) (?f c) (snd ?RS a c) ?T (?g a)) ==>
      (?f, ?g) : [?P]\<^sub>a ?RS \<rightarrow> ?T",
     template_implication
      ([template_predicate (template_app (template_hole 8, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 0)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 3),
               template_var 1))
           ))),
    ("Sepref_Rules.frefI",
     "(!!x y. [| ?P y; (x, y) : ?R |] ==> (?f x, ?g y) : ?S) ==>
      (?f, ?g) : [?P]\<^sub>f ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate (template_app (template_hole 9, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 1)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 3),
               template_var 0))
           ))),
    ("Sepref_Rules.hfref_weaken_pre_nofail'",
     "[| (?f, ?g) : [?P]\<^sub>a ?R \<rightarrow> ?S;
         !!x. [| nofail (?g x); ?Q x |] ==> ?P x |]
      ==> (?f, ?g) : [?Q]\<^sub>a ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 4,
                template_app
                 (template_app (template_hole 3, template_var 5),
                  template_var 4)),
              template_app
               (template_app
                 (template_app (template_hole 2, template_var 3),
                  template_var 2),
                template_var 1))
            ),
        template_predicate (template_app (template_hole 1, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 4,
               template_app
                (template_app (template_hole 3, template_var 5),
                 template_var 4)),
             template_app
              (template_app
                (template_app (template_hole 2, template_var 0),
                 template_var 2),
               template_var 1))
           ))),
    ("Sepref_Rules.hfref_weaken_pre'",
     "[| !!x. [| ?P x; rdomp (fst ?R) x |] ==> ?P' x;
         (?f, ?h) : [?P']\<^sub>a ?R \<rightarrow> ?S |]
      ==> (?f, ?h) : [?P]\<^sub>a ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate (template_app (template_hole 6, t_empty)),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 2,
                template_app
                 (template_app (template_hole 1, template_var 2),
                  template_var 1)),
              template_app
               (template_app
                 (template_app (template_hole 0, template_var 3),
                  template_var 4),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 1)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 5),
                 template_var 4),
               template_var 0))
           ))),
    ("Sepref_Rules.norm_return_o",
     "(%x y. return \<circ>\<circ>\<circ> ?f x y) $ ?x $ ?y $ ?z $ ?a $ ?b =
      return $ (?f $ ?x $ ?y $ ?z $ ?a $ ?b)",
     template_equation
      (template_app
        (template_app
          (template_hole 12,
           template_app
            (template_app
              (template_hole 11,
               template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app (template_hole 8, t_empty),
                         template_var 4)),
                     template_var 3)),
                 template_var 2)),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 5, template_hole 6),
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app
                    (template_hole 2,
                     template_app
                      (template_app
                        (template_hole 1,
                         template_app
                          (template_app (template_hole 0, template_var 5),
                           template_var 4)),
                       template_var 3)),
                   template_var 2)),
               template_var 1)),
           template_var 0)))),
    ("Sepref_Rules.norm_RETURN_o",
     "(%x y. RETURN \<circ>\<circ>\<circ> ?f x y) $ ?x $ ?y $ ?z $ ?a $ ?b =
      RETURN $ (?f $ ?x $ ?y $ ?z $ ?a $ ?b)",
     template_equation
      (template_app
        (template_app
          (template_hole 12,
           template_app
            (template_app
              (template_hole 11,
               template_app
                (template_app
                  (template_hole 10,
                   template_app
                    (template_app
                      (template_hole 9,
                       template_app
                        (template_app (template_hole 8, t_empty),
                         template_var 4)),
                     template_var 3)),
                 template_var 2)),
             template_var 1)),
         template_var 0),
       template_app
        (template_app (template_hole 5, template_hole 6),
         template_app
          (template_app
            (template_hole 4,
             template_app
              (template_app
                (template_hole 3,
                 template_app
                  (template_app
                    (template_hole 2,
                     template_app
                      (template_app
                        (template_hole 1,
                         template_app
                          (template_app (template_hole 0, template_var 5),
                           template_var 4)),
                       template_var 3)),
                   template_var 2)),
               template_var 1)),
           template_var 0)))),
    ("Sepref_Rules.auto_weaken_pre_comp_PRE_I",
     "[| ?S ?x ==> ?P ?x;
         !!y. [| (y, ?x) : ?R; ?P ?x; ?S ?x |] ==> ?Q ?x y |]
      ==> comp_PRE ?R ?P ?Q ?S ?x",
     template_implication
      ([template_implication
         ([template_predicate
            (template_app (template_var 4, template_var 3))],
          template_predicate
           (template_app (template_var 2, template_var 3))),
        template_predicate (template_app (template_hole 3, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app (template_hole 0, template_var 1),
                   template_var 2),
                 template_var 0),
               template_var 4),
             template_var 3)
           ))),
    ("Sepref_Rules.fref_cons'",
     "[| (?f, ?g) : [?P]\<^sub>f ?R \<rightarrow> ?S;
         !!c a. [| (c, a) : ?R; ?Q a |] ==> ?P a |]
      ==> (?f, ?g) : [?Q]\<^sub>f ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 6,
                template_app
                 (template_app (template_hole 5, template_var 5),
                  template_var 4)),
              template_app
               (template_app
                 (template_app (template_hole 4, template_var 3),
                  template_var 2),
                template_var 1))
            ),
        template_predicate (template_app (template_hole 3, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app (template_hole 5, template_var 5),
                 template_var 4)),
             template_app
              (template_app
                (template_app (template_hole 4, template_var 0),
                 template_var 2),
               template_var 1))
           ))),
    ("Sepref_Rules.fref_compI_PRE",
     "[| (?f, ?g) : [?P]\<^sub>f ?R1.0 \<rightarrow> ?R2.0;
         (?g, ?h) : [?Q]\<^sub>f ?S1.0 \<rightarrow> ?S2.0 |]
      ==> (?f, ?h)
          : [comp_PRE ?S1.0 ?Q (%_. ?P)
              (%_. True)]\<^sub>f ?R1.0 O
                                  ?S1.0 \<rightarrow> ?R2.0 O ?S2.0",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 12,
                template_app
                 (template_app (template_hole 11, template_var 8),
                  template_var 7)),
              template_app
               (template_app
                 (template_app (template_hole 10, template_var 6),
                  template_var 5),
                template_var 4))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 9,
                template_app
                 (template_app (template_hole 8, template_var 7),
                  template_var 3)),
              template_app
               (template_app
                 (template_app (template_hole 7, template_var 2),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app (template_hole 5, template_var 8),
                 template_var 3)),
             template_app
              (template_app
                (template_app
                  (template_hole 4,
                   template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 3, template_var 1),
                         template_var 2),
                       t_empty),
                     t_empty)),
                 template_app
                  (template_app (template_hole 1, template_var 5),
                   template_var 1)),
               template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 0)))
           ))),
    ("Sepref_Rules.hf2hnr",
     "(?f, ?g) : [?P]\<^sub>a ?R \<rightarrow> ?S ==>
      ALL x xi.
         ?P x -->
         hn_refine (emp * hn_ctxt (fst ?R) x xi) (?f $ xi)
          (emp * hn_ctxt (snd ?R) x xi) ?S (?g $ x)",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 13,
                template_app
                 (template_app (template_hole 12, template_var 4),
                  template_var 3)),
              template_app
               (template_app
                 (template_app (template_hole 11, template_var 2),
                  template_var 1),
                template_var 0))
            )],
       template_predicate (template_app (template_hole 10, t_empty)))),
    ("Sepref_Rules.fref_PRE_D2",
     "(?f, ?h) : [comp_PRE ?S1.0 ?Q ?P ?X]\<^sub>f ?R \<rightarrow> ?S ==>
      (?f, ?h)
      : [%x. ?Q x &
             (ALL y.
                 (y, x) : ?S1.0 -->
                 ?X x --> ?P x y)]\<^sub>f ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app
                 (template_app (template_hole 7, template_var 7),
                  template_var 6)),
              template_app
               (template_app
                 (template_app
                   (template_hole 6,
                    template_app
                     (template_app
                       (template_app
                         (template_app (template_hole 5, template_var 5),
                          template_var 4),
                        template_var 3),
                      template_var 2)),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 8,
               template_app
                (template_app (template_hole 7, template_var 7),
                 template_var 6)),
             template_app
              (template_app
                (template_app (template_hole 6, t_empty), template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.hfref_PRE_D2",
     "(?f, ?h) : [comp_PRE ?S1.0 ?Q ?P ?X]\<^sub>a ?R \<rightarrow> ?S ==>
      (?f, ?h)
      : [%x. ?Q x &
             (ALL y.
                 (y, x) : ?S1.0 -->
                 ?X x --> ?P x y)]\<^sub>a ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app
                 (template_app (template_hole 7, template_var 7),
                  template_var 6)),
              template_app
               (template_app
                 (template_app
                   (template_hole 6,
                    template_app
                     (template_app
                       (template_app
                         (template_app (template_hole 5, template_var 5),
                          template_var 4),
                        template_var 3),
                      template_var 2)),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 8,
               template_app
                (template_app (template_hole 7, template_var 7),
                 template_var 6)),
             template_app
              (template_app
                (template_app (template_hole 6, t_empty), template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.hfref_compI_PRE_aux",
     "[| (?f, ?g) : [?P]\<^sub>a ?RR' \<rightarrow> ?S;
         (?g, ?h)
         : [?Q]\<^sub>f ?T \<rightarrow> \<langle>?U\<rangle>nres_rel |]
      ==> (?f, ?h)
          : [comp_PRE ?T ?Q (%_. ?P)
              (%_. True)]\<^sub>a hrp_comp ?RR'
                                   ?T \<rightarrow> hr_comp ?S ?U",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 14,
                template_app
                 (template_app (template_hole 13, template_var 8),
                  template_var 7)),
              template_app
               (template_app
                 (template_app (template_hole 12, template_var 6),
                  template_var 5),
                template_var 4))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 11,
                template_app
                 (template_app (template_hole 10, template_var 7),
                  template_var 3)),
              template_app
               (template_app
                 (template_app (template_hole 9, template_var 2),
                  template_var 1),
                template_app
                 (template_app (template_hole 8, template_hole 7),
                  template_var 0)))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app (template_hole 5, template_var 8),
                 template_var 3)),
             template_app
              (template_app
                (template_app
                  (template_hole 4,
                   template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 3, template_var 1),
                         template_var 2),
                       t_empty),
                     t_empty)),
                 template_app
                  (template_app (template_hole 1, template_var 5),
                   template_var 1)),
               template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 0)))
           ))),
    ("Sepref_Rules.hnr_intro_dummy",
     "ALL x xi.
         ?P x -->
         hn_refine (?\<Gamma> x xi) (?c xi) (?\<Gamma>' x xi) ?R (?a x) ==>
      ALL x xi.
         ?P x -->
         hn_refine (emp * ?\<Gamma> x xi) (?c xi) (emp * ?\<Gamma>' x xi) ?R
          (?a x)",
     template_implication
      ([template_predicate (template_app (template_hole 5, t_empty))],
       template_predicate (template_app (template_hole 5, t_empty)))),
    ("Sepref_Rules.hfsynth_hnr_from_hfI",
     "ALL x xi.
         ?P x & hfsynth_ID_R (fst ?R) x -->
         hn_refine (emp * hn_ctxt (fst ?R) x xi) (?f $ xi)
          (emp * hn_ctxt (snd ?R) x xi) ?S (?g $ x) ==>
      (?f, ?g) : [?P]\<^sub>a ?R \<rightarrow> ?S",
     template_implication
      ([template_predicate (template_app (template_hole 15, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 2),
                 template_var 0)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 3),
               template_var 1))
           ))),
    ("Sepref_Rules.hfref_compI_PRE",
     "[| (?f, ?g) : [?P]\<^sub>a ?RR' \<rightarrow> ?S;
         (?g, ?h)
         : [?Q]\<^sub>f ?T \<rightarrow> \<langle>?U\<rangle>nres_rel |]
      ==> (?f, ?h)
          : [comp_PRE ?T ?Q (%x. ?P)
              (%x. nofail
                    (?h x))]\<^sub>a hrp_comp ?RR'
?T \<rightarrow> hr_comp ?S ?U",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 14,
                template_app
                 (template_app (template_hole 13, template_var 8),
                  template_var 7)),
              template_app
               (template_app
                 (template_app (template_hole 12, template_var 6),
                  template_var 5),
                template_var 4))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 11,
                template_app
                 (template_app (template_hole 10, template_var 7),
                  template_var 3)),
              template_app
               (template_app
                 (template_app (template_hole 9, template_var 2),
                  template_var 1),
                template_app
                 (template_app (template_hole 8, template_hole 7),
                  template_var 0)))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 6,
               template_app
                (template_app (template_hole 5, template_var 8),
                 template_var 3)),
             template_app
              (template_app
                (template_app
                  (template_hole 4,
                   template_app
                    (template_app
                      (template_app
                        (template_app (template_hole 3, template_var 1),
                         template_var 2),
                       t_empty),
                     t_empty)),
                 template_app
                  (template_app (template_hole 1, template_var 5),
                   template_var 1)),
               template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 0)))
           ))),
    ("Sepref_Rules.fref_compI'",
     "[| (?f, ?g) : [?P]\<^sub>f ?R1.0 \<rightarrow> ?R2.0;
         (?g, ?h) : [?Q]\<^sub>f ?S1.0 \<rightarrow> ?S2.0 |]
      ==> (?f, ?h)
          : [%x. ?Q x &
                 (ALL y.
                     (y, x) : ?S1.0 -->
                     ?P y)]\<^sub>f ?R1.0 O
                                    ?S1.0 \<rightarrow> ?R2.0 O ?S2.0",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 15,
                template_app
                 (template_app (template_hole 14, template_var 8),
                  template_var 7)),
              template_app
               (template_app
                 (template_app (template_hole 13, template_var 6),
                  template_var 5),
                template_var 4))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 12,
                template_app
                 (template_app (template_hole 11, template_var 7),
                  template_var 3)),
              template_app
               (template_app
                 (template_app (template_hole 10, template_var 2),
                  template_var 1),
                template_var 0))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 9,
               template_app
                (template_app (template_hole 8, template_var 8),
                 template_var 3)),
             template_app
              (template_app
                (template_app (template_hole 7, t_empty),
                 template_app
                  (template_app (template_hole 1, template_var 5),
                   template_var 1)),
               template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 0)))
           ))),
    ("Sepref_Rules.hfcomp",
     "[| (?f, ?g) : [?P]\<^sub>a ?RR' \<rightarrow> ?S;
         (?g, ?h)
         : [?Q]\<^sub>f ?T \<rightarrow> \<langle>?U\<rangle>nres_rel |]
      ==> (?f, ?h)
          : [%a. ?Q a &
                 (ALL a'.
                     (a', a) : ?T -->
                     ?P a')]\<^sub>a hrp_comp ?RR'
?T \<rightarrow> hr_comp ?S ?U",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 17,
                template_app
                 (template_app (template_hole 16, template_var 8),
                  template_var 7)),
              template_app
               (template_app
                 (template_app (template_hole 15, template_var 6),
                  template_var 5),
                template_var 4))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 14,
                template_app
                 (template_app (template_hole 13, template_var 7),
                  template_var 3)),
              template_app
               (template_app
                 (template_app (template_hole 12, template_var 2),
                  template_var 1),
                template_app
                 (template_app (template_hole 11, template_hole 10),
                  template_var 0)))
            )],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 9,
               template_app
                (template_app (template_hole 8, template_var 8),
                 template_var 3)),
             template_app
              (template_app
                (template_app (template_hole 7, t_empty),
                 template_app
                  (template_app (template_hole 1, template_var 5),
                   template_var 1)),
               template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 0)))
           ))),
    ("Sepref_Rules.fref_cons",
     "[| (?f, ?g) : [?P]\<^sub>f ?R \<rightarrow> ?S;
         !!c a. [| (c, a) : ?R'; ?Q a |] ==> ?P a; ?R' <= ?R; ?S <= ?S' |]
      ==> (?f, ?g) : [?Q]\<^sub>f ?R' \<rightarrow> ?S'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 8,
                template_app
                 (template_app (template_hole 7, template_var 7),
                  template_var 6)),
              template_app
               (template_app
                 (template_app (template_hole 6, template_var 5),
                  template_var 4),
                template_var 3))
            ),
        template_predicate (template_app (template_hole 5, t_empty)),
        template_inequation (less_equals, template_var 2, template_var 4),
        template_inequation (less_equals, template_var 3, template_var 0)],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 8,
               template_app
                (template_app (template_hole 7, template_var 7),
                 template_var 6)),
             template_app
              (template_app
                (template_app (template_hole 6, template_var 1),
                 template_var 2),
               template_var 0))
           ))),
    ("Sepref_Rules.fref_to_pure_hfref'",
     "[| (?f, ?g)
         : [?P]\<^sub>f ?R \<rightarrow> \<langle>?S\<rangle>nres_rel;
         !!x. x : Domain ?R Int ?R^-1 `` Collect ?P ==>
              ?f x = RETURN (?f' x) |]
      ==> (return o ?f', ?g)
          : [?P]\<^sub>a (pure ?R)\<^sup>k \<rightarrow> pure ?S",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 22,
                template_app
                 (template_app (template_hole 21, template_var 5),
                  template_var 4)),
              template_app
               (template_app
                 (template_app (template_hole 20, template_var 3),
                  template_var 2),
                template_app
                 (template_app (template_hole 19, template_hole 18),
                  template_var 1)))
            ),
        template_predicate (template_app (template_hole 17, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 8,
               template_app
                (template_app
                  (template_hole 7,
                   template_app
                    (template_app (template_hole 6, template_hole 5),
                     template_var 0)),
                 template_var 4)),
             template_app
              (template_app
                (template_app (template_hole 4, template_var 3),
                 template_app
                  (template_app
                    (template_hole 3,
                     template_app (template_hole 2, template_var 2)),
                   template_hole 1)),
               template_app (template_hole 0, template_var 1)))
           ))),
    ("Sepref_Rules.fref_uncurry_conv",
     "((uncurry ?c, uncurry ?a)
       : [?P]\<^sub>f ?R1.0 \<times>\<^sub>r ?R2.0 \<rightarrow> ?S) =
      (ALL x1 y1 x2 y2.
          ?P (y1, y2) -->
          (x1, y1) : ?R1.0 -->
          (x2, y2) : ?R2.0 --> (?c x1 x2, ?a y1 y2) : ?S)",
     template_equation
      (template_app
        (template_app
          (template_hole 19,
           template_app
            (template_app
              (template_hole 18,
               template_app (template_hole 17, template_var 5)),
             template_app (template_hole 16, template_var 4))),
         template_app
          (template_app
            (template_app (template_hole 15, template_var 3),
             template_app
              (template_app
                (template_hole 14,
                 template_app
                  (template_app (template_hole 13, template_hole 12),
                   template_var 2)),
               template_var 1)),
           template_var 0)),
       template_app (template_hole 11, t_empty))),
    ("Sepref_Rules.hfref_cons",
     "[| (?f, ?g) : [?P]\<^sub>a ?R \<rightarrow> ?S; !!x. ?P' x ==> ?P x;
         !!x y. fst ?R' x y \<Longrightarrow>\<^sub>t fst ?R x y;
         !!x y. snd ?R x y \<Longrightarrow>\<^sub>t snd ?R' x y;
         !!x y. ?S x y \<Longrightarrow>\<^sub>t ?S' x y |]
      ==> (?f, ?g) : [?P']\<^sub>a ?R' \<rightarrow> ?S'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 9,
                template_app
                 (template_app (template_hole 8, template_var 7),
                  template_var 6)),
              template_app
               (template_app
                 (template_app (template_hole 7, template_var 5),
                  template_var 4),
                template_var 3))
            ),
        template_predicate (template_app (template_hole 6, t_empty)),
        template_predicate (template_app (template_hole 6, t_empty)),
        template_predicate (template_app (template_hole 6, t_empty)),
        template_predicate (template_app (template_hole 1, t_empty))],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 9,
               template_app
                (template_app (template_hole 8, template_var 7),
                 template_var 6)),
             template_app
              (template_app
                (template_app (template_hole 7, template_var 2),
                 template_var 1),
               template_var 0))
           ))),
    ("Sepref_Rules.hnr_uncurry_unfold",
     "(ALL x xi.
          ?P x -->
          hn_refine (?\<Gamma> * hn_ctxt (to_hnr_prod ?A ?B) x xi) (?fi xi)
           (?\<Gamma>' * hn_ctxt (to_hnr_prod ?A' ?B') x xi) ?R (?f x)) =
      (ALL b bi a ai.
          ?P (a, b) -->
          hn_refine (?\<Gamma> * hn_ctxt ?B b bi * hn_ctxt ?A a ai)
           (?fi (ai, bi)) (?\<Gamma>' * hn_ctxt ?B' b bi * hn_ctxt ?A' a ai)
           ?R (?f (a, b)))",
     template_equation
      (template_app (template_hole 14, t_empty),
       template_app (template_hole 7, t_empty))),
    ("Sepref_Rules.fref_composeI",
     "[| (?f, ?g) : [?P]\<^sub>f ?R1.0 \<rightarrow> ?R2.0;
         (?g, ?h) : [?Q]\<^sub>f ?S1.0 \<rightarrow> ?S2.0;
         !!x. ?P' x ==> ?Q x; !!x y. [| ?P' x; (y, x) : ?S1.0 |] ==> ?P y;
         ?R' <= ?R1.0 O ?S1.0; ?R2.0 O ?S2.0 <= ?S'; ?f' = ?f; ?h' = ?h |]
      ==> (?f', ?h') : [?P']\<^sub>f ?R' \<rightarrow> ?S'",
     template_implication
      ([template_predicate
         (
            template_app
             (template_app
               (template_hole 18,
                template_app
                 (template_app (template_hole 17, template_var 13),
                  template_var 12)),
              template_app
               (template_app
                 (template_app (template_hole 16, template_var 11),
                  template_var 10),
                template_var 9))
            ),
        template_predicate
         (
            template_app
             (template_app
               (template_hole 15,
                template_app
                 (template_app (template_hole 14, template_var 12),
                  template_var 8)),
              template_app
               (template_app
                 (template_app (template_hole 13, template_var 7),
                  template_var 6),
                template_var 5))
            ),
        template_predicate (template_app (template_hole 12, t_empty)),
        template_predicate (template_app (template_hole 12, t_empty)),
        template_inequation
         (less_equals, template_var 3,
          template_app
           (template_app (template_hole 7, template_var 10),
            template_var 6)),
        template_inequation
         (less_equals,
          template_app
           (template_app (template_hole 5, template_var 9), template_var 5),
          template_var 2),
        template_equation (template_var 1, template_var 13),
        template_equation (template_var 0, template_var 8)],
       template_predicate
        (
           template_app
            (template_app
              (template_hole 2,
               template_app
                (template_app (template_hole 1, template_var 1),
                 template_var 0)),
             template_app
              (template_app
                (template_app (template_hole 0, template_var 4),
                 template_var 3),
               template_var 2))
           ))),
    ("Sepref_Rules.hnr_comp1_aux",
     "[| !!b1 c1.
            ?P b1 ==>
            hn_refine (hn_ctxt ?R1.0 b1 c1) (?c c1) (hn_ctxt ?R1p b1 c1) ?R
             (?b $ b1);
         !!a1 b1.
            [| ?Q a1; (b1, a1) : ?R1' |]
            ==> (?b $ b1, ?a $ a1) : \<langle>?R'\<rangle>nres_rel;
         !!a1 b1. [| ?Q a1; (b1, a1) : ?R1' |] ==> ?P b1; ?Q ?a1.0 |]
      ==> hn_refine (hr_comp ?R1.0 ?R1' ?a1.0 ?c1.0) (?c ?c1.0)
           (hr_comp ?R1p ?R1' ?a1.0 ?c1.0) (hr_comp ?R ?R') (?a ?a1.0)",
     template_implication
      ([template_predicate (template_app (template_hole 16, t_empty)),
        template_predicate (template_app (template_hole 10, t_empty)),
        template_predicate (template_app (template_hole 10, t_empty)),
        template_predicate (template_app (template_var 5, template_var 1))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_hole 2,
                     template_app
                      (template_app
                        (template_app
                          (template_app (template_hole 1, template_var 10),
                           template_var 4),
                         template_var 1),
                       template_var 0)),
                   template_app (template_var 9, template_var 0)),
                 template_app
                  (template_app
                    (template_app
                      (template_app (template_hole 1, template_var 8),
                       template_var 4),
                     template_var 1),
                   template_var 0)),
               template_app
                (template_app (template_hole 0, template_var 7),
                 template_var 2)),
             template_app (template_var 3, template_var 1))
           ))),
    ("Sepref_Rules.hnr_comp",
     "[| !!b1 c1.
            ?P b1 ==>
            hn_refine (?R1.0 b1 c1 * ?\<Gamma>) (?c c1)
             (?R1p b1 c1 * ?\<Gamma>') ?R (?b b1);
         !!a1 b1.
            [| ?Q a1; (b1, a1) : ?R1' |]
            ==> (?b b1, ?a a1) : \<langle>?R'\<rangle>nres_rel;
         !!a1 b1. [| ?Q a1; (b1, a1) : ?R1' |] ==> ?P b1; ?Q ?a1.0 |]
      ==> hn_refine (hr_comp ?R1.0 ?R1' ?a1.0 ?c1.0 * ?\<Gamma>) (?c ?c1.0)
           (hr_comp ?R1p ?R1' ?a1.0 ?c1.0 * ?\<Gamma>') (hr_comp ?R ?R')
           (?a ?a1.0)",
     template_implication
      ([template_predicate (template_app (template_hole 14, t_empty)),
        template_predicate (template_app (template_hole 9, t_empty)),
        template_predicate (template_app (template_hole 9, t_empty)),
        template_predicate (template_app (template_var 5, template_var 1))],
       template_predicate
        (
           template_app
            (template_app
              (template_app
                (template_app
                  (template_app
                    (template_hole 2,
                     template_app
                      (template_app
                        (template_hole 10,
                         template_app
                          (template_app
                            (template_app
                              (template_app
                                (template_hole 1, template_var 12),
                               template_var 4),
                             template_var 1),
                           template_var 0)),
                       template_var 11)),
                   template_app (template_var 10, template_var 0)),
                 template_app
                  (template_app
                    (template_hole 10,
                     template_app
                      (template_app
                        (template_app
                          (template_app (template_hole 1, template_var 9),
                           template_var 4),
                         template_var 1),
                       template_var 0)),
                   template_var 8)),
               template_app
                (template_app (template_hole 0, template_var 7),
                 template_var 2)),
             template_app (template_var 3, template_var 1))
           )))]
